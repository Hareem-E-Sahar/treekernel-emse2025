(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:connect)(Block(IfStatement(SimpleName:connected)(ReturnStatement(BooleanLiteral:true)))(IfStatement(SimpleName:usesProvidedConnection)(Block(ExpressionStatement(Assignment(SimpleName:jabberConnection)(ASSIGNMENT_OPERATOR:=)(SimpleName:providedXMPPConnection)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fullUserName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:getUser))))(ExpressionStatement(Assignment(SimpleName:userName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullUserName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullUserName))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(ExpressionStatement(Assignment(SimpleName:host)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:getHost))))(ExpressionStatement(Assignment(SimpleName:port)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:getPort))))(ExpressionStatement(Assignment(SimpleName:serviceName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:getServiceName))))(ExpressionStatement(Assignment(SimpleName:resource)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullUserName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullUserName))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))(ExpressionStatement(Assignment(SimpleName:resourceSuffix)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:XMPPConnection))(SimpleName:addConnectionCreationListener)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ConnectionCreationListener))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:connectionCreated)(SingleVariableDeclaration(SimpleType(SimpleName:Connection))(SimpleName:connection))(Block(ExpressionStatement(ClassInstanceCreation(SimpleType(SimpleName:ServiceDiscoveryManager))(SimpleName:connection))))))))))(VariableDeclarationStatement(SimpleType(SimpleName:ConnectionConfiguration))(VariableDeclarationFragment(SimpleName:config)(ClassInstanceCreation(SimpleType(SimpleName:ConnectionConfiguration))(SimpleName:host)(SimpleName:port))))(ExpressionStatement(Assignment(SimpleName:jabberConnection)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:XMPPConnection))(SimpleName:config))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:connect)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:login)(METHOD_INVOCATION_ARGUMENTS(SimpleName:userName)(SimpleName:password)(InfixExpression(SimpleName:resource)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:resourceSuffix))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:XMPPException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ReturnStatement(BooleanLiteral:false)))))))(ExpressionStatement(Assignment(SimpleName:roster)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:getRoster))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(SimpleName:getJID))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Presence))(VariableDeclarationFragment(SimpleName:presence)(ClassInstanceCreation(SimpleType(SimpleName:Presence))(QualifiedName:Presence.Type.available))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:sendPacket)(METHOD_INVOCATION_ARGUMENTS(SimpleName:presence))))(ExpressionStatement(Assignment(SimpleName:packetProcessor)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:PacketProcessor)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packetProcessor))(SimpleName:start)))(VariableDeclarationStatement(SimpleType(SimpleName:PacketFilter))(VariableDeclarationFragment(SimpleName:filter)(ClassInstanceCreation(SimpleType(SimpleName:PacketTypeFilter))(TypeLiteral(SimpleType(SimpleName:RPCPacket))))))(VariableDeclarationStatement(SimpleType(SimpleName:PacketListener))(VariableDeclarationFragment(SimpleName:listener)(ClassInstanceCreation(SimpleType(SimpleName:PacketListener))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:processPacket)(SingleVariableDeclaration(SimpleType(SimpleName:Packet))(SimpleName:packet))(Block(IfStatement(InfixExpression(SimpleName:packet)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ReturnStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:userName)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))))(VariableDeclarationStatement(SimpleType(SimpleName:XMPPError))(VariableDeclarationFragment(SimpleName:error)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getError))))(IfStatement(InfixExpression(SimpleName:error)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:error))(SimpleName:toString))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:toXML)))))))(VariableDeclarationStatement(SimpleType(SimpleName:IQ))(VariableDeclarationFragment(SimpleName:iqp)(CastExpression(SimpleType(SimpleName:IQ))(SimpleName:packet))))(ExpressionStatement(MethodInvocation(SimpleName:processIQPacket)(METHOD_INVOCATION_ARGUMENTS(SimpleName:iqp))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jabberConnection))(SimpleName:addPacketListener)(METHOD_INVOCATION_ARGUMENTS(SimpleName:listener)(SimpleName:filter))))(ExpressionStatement(Assignment(SimpleName:connected)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ReturnStatement(BooleanLiteral:true))))))