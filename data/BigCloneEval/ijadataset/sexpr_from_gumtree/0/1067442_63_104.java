(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:PUT))(SingleMemberAnnotation(SimpleName:Consumes)(StringLiteral:<STR>))(Modifier:public)(PrimitiveType:void)(SimpleName:putForm)(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:FormParam)(StringLiteral:<STR>))(SimpleType(SimpleName:String))(SimpleName:title))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:FormParam)(StringLiteral:<STR>))(SimpleType(SimpleName:String))(SimpleName:description))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:FormParam)(StringLiteral:<STR>))(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:String)))(SimpleName:managerUserURLs))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:FormParam)(StringLiteral:<STR>))(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:String)))(SimpleName:writerUserURLs))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:FormParam)(StringLiteral:<STR>))(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:String)))(SimpleName:readerUserURLs))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:FormParam)(StringLiteral:<STR>))(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:String)))(SimpleName:managerGroupURLs))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:FormParam)(StringLiteral:<STR>))(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:String)))(SimpleName:writerGroupURLs))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:FormParam)(StringLiteral:<STR>))(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:String)))(SimpleName:readerGroupURLs))(SimpleType(SimpleName:RepositoryException))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Node)))(VariableDeclarationFragment(SimpleName:users)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Node))))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccessPolicy)))(SimpleName:canUpdateProject)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:project))(SimpleName:getPath)))))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccessPolicy)))(SimpleName:canUpdateProjectAccessRights)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:project))(SimpleName:getPath)))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(InfixExpression(InfixExpression(SimpleName:managerUserURLs)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:writerUserURLs)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:readerUserURLs)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))))))(Block(ThrowStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ExceptionFactory))(SimpleName:forbidden)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:title)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:title))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(Block(ThrowStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ExceptionFactory))(SimpleName:missingRequiredFields)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccessPolicy)))(SimpleName:canUpdateProjectAccessRights)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:project))(SimpleName:getPath))))(Block(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:managerUserURLs)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managerUserURLs))(SimpleName:isEmpty))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:managerGroupURLs)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managerGroupURLs))(SimpleName:isEmpty)))))(Block(ThrowStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ExceptionBuilder))(SimpleName:badRequest)))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:build)))))(VariableDeclarationStatement(SimpleType(SimpleName:NodeIterator))(VariableDeclarationFragment(SimpleName:managerUsers)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ProjectUtils))(SimpleName:getUsers)(METHOD_INVOCATION_ARGUMENTS(SimpleName:project)(StringLiteral:<STR>))))(SimpleName:getNodes))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managerUsers))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:user)(CastExpression(SimpleType(SimpleName:Node))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managerUsers))(SimpleName:next)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:users))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(SimpleName:user))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:users))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:user))))))))(VariableDeclarationStatement(SimpleType(SimpleName:NodeIterator))(VariableDeclarationFragment(SimpleName:writerUsers)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ProjectUtils))(SimpleName:getUsers)(METHOD_INVOCATION_ARGUMENTS(SimpleName:project)(StringLiteral:<STR>))))(SimpleName:getNodes))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writerUsers))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:user)(CastExpression(SimpleType(SimpleName:Node))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writerUsers))(SimpleName:next)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:users))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(SimpleName:user))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:users))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:user))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ProjectUtils))(SimpleName:updateProject)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getViewContext))(SimpleName:project)(SimpleName:title)(SimpleName:description)(SimpleName:managerUserURLs)(SimpleName:writerUserURLs)(SimpleName:readerUserURLs)(SimpleName:managerGroupURLs)(SimpleName:writerGroupURLs)(SimpleName:readerGroupURLs)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ProjectUtils))(SimpleName:updateProject)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getViewContext))(SimpleName:project)(SimpleName:title)(SimpleName:description))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getSession)))(SimpleName:save)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:q)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:project))(SimpleName:getPath))(StringLiteral:<STR>))))(VariableDeclarationStatement(SingleMemberAnnotation(SimpleName:SuppressWarnings)(StringLiteral:<STR>))(SimpleType(SimpleName:Query))(VariableDeclarationFragment(SimpleName:query)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getViewContext)))(SimpleName:getSession)))(SimpleName:getWorkspace)))(SimpleName:getQueryManager)))(SimpleName:createQuery)(METHOD_INVOCATION_ARGUMENTS(SimpleName:q)(QualifiedName:Query.XPATH)))))(VariableDeclarationStatement(SimpleType(SimpleName:NodeIterator))(VariableDeclarationFragment(SimpleName:experiments)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:query))(SimpleName:execute)))(SimpleName:getNodes))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:experiments))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:experiment)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:experiments))(SimpleName:nextNode))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:UploadUtils))(SimpleName:updateCollection)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getViewContext))(SimpleName:experiment)(SimpleName:users))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getSession)))(SimpleName:save)))))))