(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:handleFileDataMessage)(SingleVariableDeclaration(SimpleType(SimpleName:IEnvelope))(SimpleName:env))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileDataMessage))(VariableDeclarationFragment(SimpleName:fdm)(CastExpression(SimpleType(SimpleName:FileDataMessage))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:env))(SimpleName:getMessage)))))(VariableDeclarationStatement(SimpleType(SimpleName:IPeer))(VariableDeclarationFragment(SimpleName:from)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:env))(SimpleName:getSender))))(VariableDeclarationStatement(SimpleType(SimpleName:IncomingFileTransfer))(VariableDeclarationFragment(SimpleName:ft)(CastExpression(SimpleType(SimpleName:IncomingFileTransfer))(MethodInvocation(SimpleName:getTransferInfo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fdm))(SimpleName:getFiletransferID))(QualifiedName:State.SENDING)(BooleanLiteral:true))))))(IfStatement(InfixExpression(SimpleName:ft)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:logError)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:env))(SimpleName:getSender))(StringLiteral:<STR>)))(StringLiteral:<STR>))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:env))(SimpleName:getChannel)))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:sendCompleteMessage)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ft))(SimpleName:handleFileDataMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fdm)))))(IfStatement(SimpleName:sendCompleteMessage)(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:IMessage))(VariableDeclarationFragment(SimpleName:msg)(ClassInstanceCreation(SimpleType(SimpleName:FileCompleteMessage))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:myself))(SimpleName:getPeerID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:from))(SimpleName:getPeerID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fdm))(SimpleName:getFiletransferID)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:commFacade))(SimpleName:sendTCPMessage)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:SocketChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:env))(SimpleName:getChannel)))(SimpleName:msg))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ft))(SimpleName:setState)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:State.FINISHED)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block)))))))))