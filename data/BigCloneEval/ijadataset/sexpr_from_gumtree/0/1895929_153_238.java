(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:NodeTransaction))(SimpleName:download)(SingleVariableDeclaration(SimpleType(SimpleName:NodeTransaction))(SimpleName:transaction))(Block(IfStatement(InfixExpression(SimpleName:transaction)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:NULL_TRANSACTION)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isBlank)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getNetworkId))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(StringLiteral:<STR>)))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getFlow))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isBlank)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getFlow)))(SimpleName:getName)))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(StringLiteral:<STR>)))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:token)(MethodInvocation(SimpleName:authenticate))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:token)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:targetDir)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FilenameUtils))(SimpleName:concat)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempDir))(SimpleName:getAbsolutePath))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:targetDir)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:forceMkdir)(METHOD_INVOCATION_ARGUMENTS(SimpleName:targetDir))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetDir))(SimpleName:exists)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:targetDir))))))(VariableDeclarationStatement(SimpleType(SimpleName:Download))(VariableDeclarationFragment(SimpleName:downloadReq)(ClassInstanceCreation(SimpleType(SimpleName:Download)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:downloadReq))(SimpleName:setDataflow)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:NCName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getFlow)))(SimpleName:getName))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:downloadReq))(SimpleName:setSecurityToken)(METHOD_INVOCATION_ARGUMENTS(SimpleName:token))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:downloadReq))(SimpleName:setTransactionId)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getNetworkId)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getDocuments))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:d)(NumberLiteral:0)))(InfixExpression(SimpleName:d)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getDocuments)))(SimpleName:size)))(PostfixExpression(SimpleName:d)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Document))(VariableDeclarationFragment(SimpleName:wnosDoc)(CastExpression(SimpleType(SimpleName:Document))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getDocuments)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:d))))))(VariableDeclarationStatement(SimpleType(SimpleName:NodeDocumentType))(VariableDeclarationFragment(SimpleName:reqDoc)(ClassInstanceCreation(SimpleType(SimpleName:NodeDocumentType)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wnosDoc))(SimpleName:getType))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reqDoc))(SimpleName:setDocumentFormat)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:DocumentFormatType.Factory))(SimpleName:fromValue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wnosDoc))(SimpleName:getType)))(SimpleName:getName)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isNotBlank)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wnosDoc))(SimpleName:getDocumentId))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reqDoc))(SimpleName:setDocumentId)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Id))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wnosDoc))(SimpleName:getDocumentId))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reqDoc))(SimpleName:setDocumentName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isNotBlank)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wnosDoc))(SimpleName:getDocumentName))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reqDoc))(SimpleName:setDocumentName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wnosDoc))(SimpleName:getDocumentName))))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:downloadReq))(SimpleName:addDocuments)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reqDoc))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:NetworkNode2Stub))(VariableDeclarationFragment(SimpleName:stub)(MethodInvocation(SimpleName:getStub)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stub))(SimpleName:_getServiceClient)))(SimpleName:getOptions)))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.Configuration.ENABLE_MTOM)(QualifiedName:Constants.VALUE_TRUE))))(VariableDeclarationStatement(SimpleType(SimpleName:DownloadResponse))(VariableDeclarationFragment(SimpleName:downloadResp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stub))(SimpleName:Download)(METHOD_INVOCATION_ARGUMENTS(SimpleName:downloadReq)))))(IfStatement(InfixExpression(SimpleName:downloadResp)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getDocuments)))(SimpleName:clear)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:downloadResp))(SimpleName:getDocuments))(SimpleName:length)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:NodeDocumentType))(VariableDeclarationFragment(SimpleName:nodeDoc)(ArrayAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:downloadResp))(SimpleName:getDocuments))(SimpleName:i))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:targetFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FilenameUtils))(SimpleName:concat)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetDir))(SimpleName:getAbsolutePath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentName)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:targetFile)))))(VariableDeclarationStatement(SimpleType(SimpleName:DataHandler))(VariableDeclarationFragment(SimpleName:docHandler)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentContent)))(SimpleName:getBase64Binary))))(VariableDeclarationStatement(SimpleType(SimpleName:FileOutputStream))(VariableDeclarationFragment(SimpleName:dest)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetFile))(SimpleName:getAbsoluteFile)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:docHandler))(SimpleName:writeTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dest))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dest))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dest))(SimpleName:close)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetFile))(SimpleName:exists)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:targetFile))))))(VariableDeclarationStatement(SimpleType(SimpleName:Document))(VariableDeclarationFragment(SimpleName:doc)(ClassInstanceCreation(SimpleType(SimpleName:Document)))))(VariableDeclarationStatement(SimpleType(SimpleName:FileInputStream))(VariableDeclarationFragment(SimpleName:decodedStream)(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:targetFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:setContent)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:readFileToByteArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:targetFile))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:decodedStream))(SimpleName:close)))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentId))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isNotBlank)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentId)))(SimpleName:toString)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:setDocumentId)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentId)))(SimpleName:toString)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:setDocumentName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:setDocumentStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CommonTransactionStatusCode.Received))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:setDocumentStatusDetail)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentFormat))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isNotBlank)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentFormat)))(SimpleName:getValue)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:setType)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:CommonContentType))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CommonContentType))(SimpleName:getEnumMap)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodeDoc))(SimpleName:getDocumentFormat)))(SimpleName:getValue))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getDocuments)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:doc))))))(VariableDeclarationStatement(SimpleType(SimpleName:TransactionStatus))(VariableDeclarationFragment(SimpleName:status)(ClassInstanceCreation(SimpleType(SimpleName:TransactionStatus))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getNetworkId)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:status))(SimpleName:setDescription)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:status))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CommonTransactionStatusCode.Unknown))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(SimpleName:status))))(ReturnStatement(SimpleName:transaction)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getMessage))(SimpleName:ex))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:partnerEndpointUrl)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transaction))(SimpleName:getId))(MethodInvocation(SimpleName:appendExceptionDetail)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ex)))))))))))))