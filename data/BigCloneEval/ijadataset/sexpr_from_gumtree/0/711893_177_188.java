(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(NormalAnnotation(SimpleName:Test)(MemberValuePair(SimpleName:expected)(TypeLiteral(SimpleType(SimpleName:GadgetException)))))(Modifier:public)(PrimitiveType:void)(SimpleName:badFetchServesCached)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequest))(VariableDeclarationFragment(SimpleName:firstRequest)(MethodInvocation(SimpleName:createCacheableRequest))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:expect)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pipeline))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:firstRequest))))))(SimpleName:andReturn)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:HttpResponse))(SimpleName:LOCAL_SPEC_XML)))))(SimpleName:once)))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequest))(VariableDeclarationFragment(SimpleName:secondRequest)(MethodInvocation(SimpleName:createIgnoreCacheRequest))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:expect)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pipeline))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:secondRequest))))))(SimpleName:andReturn)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpResponse))(SimpleName:error)))))(SimpleName:once)))(ExpressionStatement(MethodInvocation(SimpleName:replay)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pipeline))))(VariableDeclarationStatement(SimpleType(SimpleName:GadgetSpec))(VariableDeclarationFragment(SimpleName:original)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:specFactory))(SimpleName:getGadgetSpec)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:createContext)(METHOD_INVOCATION_ARGUMENTS(SimpleName:SPEC_URL)(BooleanLiteral:false)))))))(VariableDeclarationStatement(SimpleType(SimpleName:GadgetSpec))(VariableDeclarationFragment(SimpleName:cached)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:specFactory))(SimpleName:getGadgetSpec)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:createContext)(METHOD_INVOCATION_ARGUMENTS(SimpleName:SPEC_URL)(BooleanLiteral:true)))))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:original))(SimpleName:getUrl))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cached))(SimpleName:getUrl)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:original))(SimpleName:getChecksum))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cached))(SimpleName:getChecksum)))))))))