(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:updateCredits)(Block(IfStatement(InfixExpression(MethodInvocation(SimpleName:getQuantity))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transferBt))(SimpleName:setLabel)(METHOD_INVOCATION_ARGUMENTS(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_BUY))(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transferBt))(SimpleName:getElement)))(SimpleName:getStyle)))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:payload)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fleetData))(SimpleName:getPayload))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:totalWeight)(CastExpression(PrimitiveType:long)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fleetData))(SimpleName:getTotalWeight)))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:quantity)(MethodInvocation(SimpleName:getQuantity))))(IfStatement(InfixExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:quantity)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:selectedResourceCount)))(Block(ExpressionStatement(Assignment(SimpleName:quantity)(ASSIGNMENT_OPERATOR:=)(SimpleName:selectedResourceCount)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:quantityField))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:quantity))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_BUY))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(InfixExpression(SimpleName:totalWeight)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:quantity))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:payload)))(Block(ExpressionStatement(Assignment(SimpleName:quantity)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:payload)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:totalWeight))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:quantityField))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:quantity))))))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:rateBefore)(ArrayAccess(SimpleName:baseRates)(SimpleName:selectedResourceIndex))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:rateAfter)(InfixExpression(ArrayAccess(SimpleName:baseRates)(SimpleName:selectedResourceIndex))(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))(NumberLiteral:1)))(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:quantity)(SimpleName:variation)))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:rate)))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:min)(NumberLiteral:.005)))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:max)(NumberLiteral:9.52)))(IfStatement(InfixExpression(SimpleName:rateAfter)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:min))(Block(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:coef)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:rateBefore)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:min)))(INFIX_EXPRESSION_OPERATOR:/)(ParenthesizedExpression(InfixExpression(SimpleName:rateBefore)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:rateAfter))))))(ExpressionStatement(Assignment(SimpleName:rate)(ASSIGNMENT_OPERATOR:=)(InfixExpression(InfixExpression(InfixExpression(SimpleName:coef)(INFIX_EXPRESSION_OPERATOR:*)(ParenthesizedExpression(InfixExpression(SimpleName:rateBefore)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:min))))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:2))(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(ParenthesizedExpression(InfixExpression(NumberLiteral:1)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:coef)))(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:min)))))(ExpressionStatement(Assignment(SimpleName:rateAfter)(ASSIGNMENT_OPERATOR:=)(SimpleName:min))))(IfStatement(InfixExpression(SimpleName:rateAfter)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:max))(Block(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:coef)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:max)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:rateBefore)))(INFIX_EXPRESSION_OPERATOR:/)(ParenthesizedExpression(InfixExpression(SimpleName:rateAfter)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:rateBefore))))))(ExpressionStatement(Assignment(SimpleName:rate)(ASSIGNMENT_OPERATOR:=)(InfixExpression(InfixExpression(InfixExpression(SimpleName:coef)(INFIX_EXPRESSION_OPERATOR:*)(ParenthesizedExpression(InfixExpression(SimpleName:max)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:rateBefore))))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:2))(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(ParenthesizedExpression(InfixExpression(NumberLiteral:1)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:coef)))(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:max)))))(ExpressionStatement(Assignment(SimpleName:rateAfter)(ASSIGNMENT_OPERATOR:=)(SimpleName:max))))(Block(ExpressionStatement(Assignment(SimpleName:rate)(ASSIGNMENT_OPERATOR:=)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:rateAfter)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:rateBefore)))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:2)))))))(ExpressionStatement(Assignment(SimpleName:rate)(ASSIGNMENT_OPERATOR:*=)(ParenthesizedExpression(InfixExpression(NumberLiteral:1)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(SimpleName:fees))(SimpleName:fees)))))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:credits)(CastExpression(PrimitiveType:long)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:floor)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:rate)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:quantity))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:ceil)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:rate)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:quantity)))))))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:creditsTaxFree)(CastExpression(PrimitiveType:long)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:floor)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:rateBefore)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:quantity))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:ceil)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:rateBefore)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:quantity)))))))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:tax)(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(InfixExpression(NumberLiteral:1)(INFIX_EXPRESSION_OPERATOR:-)(ParenthesizedExpression(InfixExpression(SimpleName:credits)(INFIX_EXPRESSION_OPERATOR:/)(CastExpression(PrimitiveType:double)(SimpleName:creditsTaxFree)))))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:abs)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:creditsTaxFree)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:credits))))(INFIX_EXPRESSION_OPERATOR:/)(CastExpression(PrimitiveType:double)(SimpleName:credits))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:playerCreditsLabel))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Formatter))(SimpleName:formatNumber)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:playerCredits)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(SimpleName:credits)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(SimpleName:credits)))))))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Config))(SimpleName:getMediaUrl))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Formatter))(SimpleName:formatNumber)(METHOD_INVOCATION_ARGUMENTS(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(SimpleName:credits)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(SimpleName:credits))))))(StringLiteral:<STR>)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:ceil)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(NumberLiteral:100)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:tax)))))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payloadValueLabel))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:totalWeight)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:mode)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:MODE_SELL))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(SimpleName:quantity))(SimpleName:quantity)))(StringLiteral:<STR>)(SimpleName:payload))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transferBt))(SimpleName:getElement)))(SimpleName:getStyle)))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:playerCreditsLabel))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Formatter))(SimpleName:formatNumber)(METHOD_INVOCATION_ARGUMENTS(SimpleName:playerCredits)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Config))(SimpleName:getMediaUrl))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payloadValueLabel))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fleetData))(SimpleName:getTotalWeight))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fleetData))(SimpleName:getPayload))))))))))))