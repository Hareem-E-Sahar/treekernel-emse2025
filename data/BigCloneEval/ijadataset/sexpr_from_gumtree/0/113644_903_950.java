(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:copyContent)(SingleVariableDeclaration(SimpleType(SimpleName:Writer))(SimpleName:w))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:XmlException))(Block(IfStatement(InfixExpression(SimpleName:curEvent)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:STAG))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalXmlParserStateException))(StringLiteral:<STR>))))(ExpressionStatement(PostfixExpression(SimpleName:depth)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:depth2)(SimpleName:depth)))(DoStatement(Block(IfStatement(InfixExpression(SimpleName:depth)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:depth2))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:c)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:scanner))(SimpleName:copyUntil)(METHOD_INVOCATION_ARGUMENTS(SimpleName:w)(CharacterLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:c)(INFIX_EXPRESSION_OPERATOR:!=)(CharacterLiteral:<STR>))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XmlException))(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:curEvent)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:scanner))(SimpleName:peekEvent))))))(SwitchStatement(SimpleName:curEvent)(SwitchCase(SimpleName:ETAG))(ExpressionStatement(PostfixExpression(SimpleName:depth)(POSTFIX_EXPRESSION_OPERATOR:--)))(ExpressionStatement(Assignment(SimpleName:fakeETAG)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(IfStatement(InfixExpression(SimpleName:depth)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:depth2))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:scanner))(SimpleName:copyUntil)(METHOD_INVOCATION_ARGUMENTS(SimpleName:w)(CharacterLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:w))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:char)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:scanner))(SimpleName:read))))))))(BreakStatement)(SwitchCase(SimpleName:STAG))(VariableDeclarationStatement(SimpleType(SimpleName:Writer))(VariableDeclarationFragment(SimpleName:w2)(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:depth)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:depth2)))(SimpleName:w)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NullWriter))(SimpleName:getInstance)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:open)(MethodInvocation(SimpleName:copyStartTag)(METHOD_INVOCATION_ARGUMENTS(SimpleName:w2)))))(IfStatement(SimpleName:open)(Block(ExpressionStatement(PostfixExpression(SimpleName:depth)(POSTFIX_EXPRESSION_OPERATOR:++))))(Block(ExpressionStatement(Assignment(SimpleName:curEvent)(ASSIGNMENT_OPERATOR:=)(SimpleName:ETAG)))(ExpressionStatement(Assignment(SimpleName:fakeETAG)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))(BreakStatement)(SwitchCase(SimpleName:COMMENT))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:copyUntil)(METHOD_INVOCATION_ARGUMENTS(SimpleName:w)(QualifiedName:XmlTags.COMMENT_END))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:w))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:XmlTags.COMMENT_END))))(BreakStatement)(SwitchCase(SimpleName:CDSECT))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:w))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:XmlTags.CDATA_BEGIN))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:CDSect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:w))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:w))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:XmlTags.CDATA_END))))(BreakStatement)(SwitchCase)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:w))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:scanner))(SimpleName:read)))))(BreakStatement)))(InfixExpression(SimpleName:depth)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:depth2)))(IfStatement(InfixExpression(SimpleName:fakeETAG)(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:skipWS))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:S)))))(ExpressionStatement(Assignment(SimpleName:returnLast)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))))