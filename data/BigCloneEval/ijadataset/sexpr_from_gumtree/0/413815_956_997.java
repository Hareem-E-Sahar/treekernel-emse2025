(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(SimpleType(SimpleName:GraphDiff))(SimpleName:flushToParent)(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:cascade))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getChannel))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:CayenneRuntimeException))(StringLiteral:<STR>)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:syncType)(ConditionalExpression(SimpleName:cascade)(QualifiedName:DataChannel.FLUSH_CASCADE_SYNC)(QualifiedName:DataChannel.FLUSH_NOCASCADE_SYNC))))(SynchronizedStatement(MethodInvocation(SimpleName:getObjectStore))(Block(VariableDeclarationStatement(SimpleType(SimpleName:DataContextFlushEventHandler))(VariableDeclarationFragment(SimpleName:eventHandler)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:ObjectStoreGraphDiff))(VariableDeclarationFragment(SimpleName:changes)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getObjectStore)))(SimpleName:getChanges))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:noop)(ConditionalExpression(MethodInvocation(SimpleName:isValidatingObjectsOnCommit))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:changes))(SimpleName:validateAndCheckNoop))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:changes))(SimpleName:isNoop)))))(IfStatement(SimpleName:noop)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getObjectStore)))(SimpleName:postprocessAfterPhantomCommit)))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:CompoundDiff))))))(IfStatement(MethodInvocation(SimpleName:isTransactionEventsEnabled))(Block(ExpressionStatement(Assignment(SimpleName:eventHandler)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:DataContextFlushEventHandler))(ThisExpression))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:eventHandler))(SimpleName:registerForDataContextEvents)))(ExpressionStatement(MethodInvocation(SimpleName:fireWillCommit)))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:GraphDiff))(VariableDeclarationFragment(SimpleName:returnChanges)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getChannel)))(SimpleName:onSync)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(SimpleName:changes)(SimpleName:syncType)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getObjectStore)))(SimpleName:postprocessAfterCommit)(METHOD_INVOCATION_ARGUMENTS(SimpleName:returnChanges))))(ExpressionStatement(MethodInvocation(SimpleName:fireTransactionCommitted)))(ExpressionStatement(MethodInvocation(SimpleName:fireDataChannelCommitted)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(SimpleName:changes))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:returnChanges))(SimpleName:isNoop)))(Block(ExpressionStatement(MethodInvocation(SimpleName:fireDataChannelCommitted)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getChannel))(SimpleName:returnChanges))))))(ReturnStatement(SimpleName:returnChanges)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:CayenneRuntimeException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(SimpleName:fireTransactionRolledback)))(VariableDeclarationStatement(SimpleType(SimpleName:Throwable))(VariableDeclarationFragment(SimpleName:unwound)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Util))(SimpleName:unwindException)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ex)))))(IfStatement(InstanceofExpression(SimpleName:unwound)(SimpleType(SimpleName:CayenneRuntimeException)))(Block(ThrowStatement(CastExpression(SimpleType(SimpleName:CayenneRuntimeException))(SimpleName:unwound))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:CayenneRuntimeException))(StringLiteral:<STR>)(SimpleName:unwound)))))))(Block(IfStatement(MethodInvocation(SimpleName:isTransactionEventsEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:eventHandler))(SimpleName:unregisterFromDataContextEvents)))))))))))))