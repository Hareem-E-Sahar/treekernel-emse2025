(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:addSaveMenu)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:JMenu))(SimpleName:parent))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:JMenuItem))(VariableDeclarationFragment(SimpleName:menuFileSave)(ClassInstanceCreation(SimpleType(SimpleName:JMenuItem))(ClassInstanceCreation(SimpleType(SimpleName:AbstractAction))(StringLiteral:<STR>)(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:actionPerformed)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:ActionEvent))(SimpleName:e))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GameRunner))(SimpleName:isMac))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:FileDialog))(VariableDeclarationFragment(SimpleName:fileDialog)(ClassInstanceCreation(SimpleType(SimpleName:FileDialog))(SimpleName:m_frame))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDialog))(SimpleName:setMode)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:FileDialog.SAVE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SaveGameFileChooser))(SimpleName:ensureDefaultDirExists)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDialog))(SimpleName:setDirectory)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:SaveGameFileChooser.DEFAULT_DIRECTORY))(SimpleName:getPath)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDialog))(SimpleName:setFilenameFilter)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FilenameFilter))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:accept)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:File))(SimpleName:dir))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:String))(SimpleName:name))(Block(ReturnStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDialog))(SimpleName:setVisible)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDialog))(SimpleName:getFile))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:dirName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDialog))(SimpleName:getDirectory))))(IfStatement(InfixExpression(SimpleName:fileName)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ReturnStatement)(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:fileName)(ASSIGNMENT_OPERATOR:+=)(StringLiteral:<STR>))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:f)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:dirName)(SimpleName:fileName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getGame)))(SimpleName:saveGame)(METHOD_INVOCATION_ARGUMENTS(SimpleName:f))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showMessageDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:m_frame)(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:JOptionPane.INFORMATION_MESSAGE)))))))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:JFileChooser))(VariableDeclarationFragment(SimpleName:fileChooser)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SaveGameFileChooser))(SimpleName:getInstance))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:rVal)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:showSaveDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:m_frame)))))(IfStatement(InfixExpression(SimpleName:rVal)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:JFileChooser.APPROVE_OPTION))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:f)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:getSelectedFile))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GameRunner))(SimpleName:isWindows))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:slashIndex)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getPath)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getPath)))(SimpleName:length))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filePath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getPath)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(SimpleName:slashIndex)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:getCurrentDirectory)))(SimpleName:toString)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filePath))))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:choice)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showConfirmDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:m_frame)(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:JOptionPane.DEFAULT_OPTION)(QualifiedName:JOptionPane.WARNING_MESSAGE)))))(ReturnStatement)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getName)))(SimpleName:toLowerCase)))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(Block(ExpressionStatement(Assignment(SimpleName:f)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getParent))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:exists))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:choice)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showConfirmDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:m_frame)(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:JOptionPane.YES_NO_OPTION)(QualifiedName:JOptionPane.WARNING_MESSAGE)))))(IfStatement(InfixExpression(SimpleName:choice)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:JOptionPane.OK_OPTION))(Block(ReturnStatement)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getGame)))(SimpleName:saveGame)(METHOD_INVOCATION_ARGUMENTS(SimpleName:f))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showMessageDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:m_frame)(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:JOptionPane.INFORMATION_MESSAGE)))))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:menuFileSave))(SimpleName:setAccelerator)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:KeyStroke))(SimpleName:getKeyStroke)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:KeyEvent.VK_S)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:java.awt.Toolkit))(SimpleName:getDefaultToolkit)))(SimpleName:getMenuShortcutKeyMask)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parent))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:menuFileSave))))))))