(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:ActionForward))(SimpleName:uploadFile)(SingleVariableDeclaration(SimpleType(SimpleName:ActionMapping))(SimpleName:mapping))(SingleVariableDeclaration(SimpleType(SimpleName:ActionForm))(SimpleName:actForm))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:request))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:in_response))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ActionMessages))(VariableDeclarationFragment(SimpleName:errors)(ClassInstanceCreation(SimpleType(SimpleName:ActionMessages)))))(VariableDeclarationStatement(SimpleType(SimpleName:ActionMessages))(VariableDeclarationFragment(SimpleName:messages)(ClassInstanceCreation(SimpleType(SimpleName:ActionMessages)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:returnPage)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:UploadForm))(VariableDeclarationFragment(SimpleName:form)(CastExpression(SimpleType(SimpleName:UploadForm))(SimpleName:actForm))))(VariableDeclarationStatement(SimpleType(SimpleName:Integer))(VariableDeclarationFragment(SimpleName:shippingId)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:eHTPXXLSParser))(VariableDeclarationFragment(SimpleName:parser)(ClassInstanceCreation(SimpleType(SimpleName:eHTPXXLSParser)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:proposalCode)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:proposalNumber)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:proposalName)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:uploadedFileName)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:realXLSPath)))(IfStatement(InfixExpression(SimpleName:request)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:proposalCode)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getSession)))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.PROPOSAL_CODE))))))(ExpressionStatement(Assignment(SimpleName:proposalNumber)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getSession)))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.PROPOSAL_NUMBER)))))))(ExpressionStatement(Assignment(SimpleName:proposalName)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:proposalCode)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proposalNumber))(SimpleName:toString)))))(ExpressionStatement(Assignment(SimpleName:uploadedFileName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:form))(SimpleName:getRequestFile)))(SimpleName:getFileName))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileName)(InfixExpression(SimpleName:proposalName)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:uploadedFileName))))(ExpressionStatement(Assignment(SimpleName:realXLSPath)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:fileName))))(VariableDeclarationStatement(SimpleType(SimpleName:FormFile))(VariableDeclarationFragment(SimpleName:f)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:form))(SimpleName:getRequestFile))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getInputStream))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:outputFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:realXLSPath))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputFile))(SimpleName:exists))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputFile))(SimpleName:delete))))(VariableDeclarationStatement(SimpleType(SimpleName:FileOutputStream))(VariableDeclarationFragment(SimpleName:out)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:outputFile))))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:available))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:flush)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close))))(Block(ExpressionStatement(Assignment(SimpleName:proposalCode)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:proposalNumber)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:proposalName)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:proposalCode)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proposalNumber))(SimpleName:toString)))))(ExpressionStatement(Assignment(SimpleName:uploadedFileName)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:realXLSPath)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:uploadedFileName))))))(VariableDeclarationStatement(SimpleType(SimpleName:FileInputStream))(VariableDeclarationFragment(SimpleName:inFile)(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:realXLSPath))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:retrieveShippingId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:realXLSPath))))(ExpressionStatement(Assignment(SimpleName:shippingId)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getShippingId))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:requestShippingId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:form))(SimpleName:getShippingId))))(IfStatement(InfixExpression(InfixExpression(SimpleName:requestShippingId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestShippingId))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(ExpressionStatement(Assignment(SimpleName:shippingId)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Integer))(SimpleName:requestShippingId))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ClientLogger))(SimpleName:getInstance)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:shippingId)))))(IfStatement(InfixExpression(SimpleName:shippingId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:nbSamplesContainers)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DBAccess_EJB))(SimpleName:DeleteAllSamplesAndContainersForShipping)(METHOD_INVOCATION_ARGUMENTS(SimpleName:shippingId)))))(IfStatement(InfixExpression(SimpleName:nbSamplesContainers)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getValidationWarnings)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:XlsUploadException))(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getValidationWarnings)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:XlsUploadException))(StringLiteral:<STR>)(StringLiteral:<STR>))))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Hashtable))(SimpleType(SimpleName:String))(ParameterizedType(SimpleType(SimpleName:Hashtable))(SimpleType(SimpleName:String))(SimpleType(SimpleName:Integer))))(VariableDeclarationFragment(SimpleName:listProteinAcronym_SampleName)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:Hashtable))(SimpleType(SimpleName:String))(ParameterizedType(SimpleType(SimpleName:Hashtable))(SimpleType(SimpleName:String))(SimpleType(SimpleName:Integer)))))))(VariableDeclarationStatement(SimpleType(SimpleName:ProposalFacadeLocal))(VariableDeclarationFragment(SimpleName:proposal)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ProposalFacadeUtil))(SimpleName:getLocalHome)))(SimpleName:create))))(VariableDeclarationStatement(SimpleType(SimpleName:ProteinFacadeLocal))(VariableDeclarationFragment(SimpleName:protein)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ProteinFacadeUtil))(SimpleName:getLocalHome)))(SimpleName:create))))(VariableDeclarationStatement(SimpleType(SimpleName:CrystalFacadeLocal))(VariableDeclarationFragment(SimpleName:crystal)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CrystalFacadeUtil))(SimpleName:getLocalHome)))(SimpleName:create))))(VariableDeclarationStatement(SimpleType(SimpleName:ProposalLightValue))(VariableDeclarationFragment(SimpleName:targetProposal)(CastExpression(SimpleType(SimpleName:ProposalLightValue))(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:ArrayList))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proposal))(SimpleName:findByCodeAndNumber)(METHOD_INVOCATION_ARGUMENTS(SimpleName:proposalCode)(ClassInstanceCreation(SimpleType(SimpleName:Integer))(SimpleName:proposalNumber)))))))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))))(VariableDeclarationStatement(SimpleType(SimpleName:ArrayList))(VariableDeclarationFragment(SimpleName:listProteins)(CastExpression(SimpleType(SimpleName:ArrayList))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:protein))(SimpleName:findByProposalId)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetProposal))(SimpleName:getProposalId)))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:p)(NumberLiteral:0)))(InfixExpression(SimpleName:p)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listProteins))(SimpleName:size)))(PostfixExpression(SimpleName:p)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ProteinValue))(VariableDeclarationFragment(SimpleName:prot)(CastExpression(SimpleType(SimpleName:ProteinValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listProteins))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:p))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Hashtable))(SimpleType(SimpleName:String))(SimpleType(SimpleName:Integer)))(VariableDeclarationFragment(SimpleName:listSampleName)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:Hashtable))(SimpleType(SimpleName:String))(SimpleType(SimpleName:Integer))))))(VariableDeclarationStatement(SimpleType(SimpleName:CrystalLightValue))(VariableDeclarationFragment(SimpleName:listCrystals)(Dimension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prot))(SimpleName:getCrystals))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:c)(NumberLiteral:0)))(InfixExpression(SimpleName:c)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:listCrystals.length))(PostfixExpression(SimpleName:c)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CrystalLightValue))(VariableDeclarationFragment(SimpleName:_xtal)(CastExpression(SimpleType(SimpleName:CrystalLightValue))(ArrayAccess(SimpleName:listCrystals)(SimpleName:c)))))(VariableDeclarationStatement(SimpleType(SimpleName:CrystalValue))(VariableDeclarationFragment(SimpleName:xtal)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:crystal))(SimpleName:findByPrimaryKey)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_xtal))(SimpleName:getPrimaryKey))))))(VariableDeclarationStatement(SimpleType(SimpleName:BlsampleLightValue))(VariableDeclarationFragment(SimpleName:listSamples)(Dimension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xtal))(SimpleName:getBlsamples))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:s)(NumberLiteral:0)))(InfixExpression(SimpleName:s)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:listSamples.length))(PostfixExpression(SimpleName:s)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:BlsampleLightValue))(VariableDeclarationFragment(SimpleName:sample)(ArrayAccess(SimpleName:listSamples)(SimpleName:s))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listSampleName))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sample))(SimpleName:getName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sample))(SimpleName:getBlSampleId)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listProteinAcronym_SampleName))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prot))(SimpleName:getAcronym))(SimpleName:listSampleName))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:validate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:inFile)(SimpleName:listProteinAcronym_SampleName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetProposal))(SimpleName:getProposalId)))))(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:listErrors)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getValidationErrors))))(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:listWarnings)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getValidationWarnings))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listErrors))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:open)(METHOD_INVOCATION_ARGUMENTS(SimpleName:realXLSPath))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getCrystals)))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getValidationErrors)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:XlsUploadException))(StringLiteral:<STR>)(StringLiteral:<STR>)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:errIt)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listErrors))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:errIt))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:XlsUploadException))(VariableDeclarationFragment(SimpleName:xlsEx)(CastExpression(SimpleType(SimpleName:XlsUploadException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:errIt))(SimpleName:next)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:errors))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ActionMessages.GLOBAL_MESSAGE)(ClassInstanceCreation(SimpleType(SimpleName:ActionMessage))(StringLiteral:<STR>)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xlsEx))(SimpleName:getMessage))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xlsEx))(SimpleName:getSuggestedFix)))))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:saveErrors)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)(SimpleName:errors)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:warnIt)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listWarnings))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:warnIt))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:XlsUploadException))(VariableDeclarationFragment(SimpleName:xlsEx)(CastExpression(SimpleType(SimpleName:XlsUploadException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:warnIt))(SimpleName:next)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:messages))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ActionMessages.GLOBAL_MESSAGE)(ClassInstanceCreation(SimpleType(SimpleName:ActionMessage))(StringLiteral:<STR>)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xlsEx))(SimpleName:getMessage))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xlsEx))(SimpleName:getSuggestedFix)))))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:saveMessages)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)(SimpleName:messages)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listErrors))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(SimpleName:resetCounts)(METHOD_INVOCATION_ARGUMENTS(SimpleName:shippingId))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:findForward)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listWarnings))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:returnPage)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:crystalDetailsXML)))(VariableDeclarationStatement(SimpleType(SimpleName:XtalDetails))(VariableDeclarationFragment(SimpleName:xtalDetailsWebService)(ClassInstanceCreation(SimpleType(SimpleName:XtalDetails)))))(VariableDeclarationStatement(SimpleType(SimpleName:CrystalDetailsBuilder))(VariableDeclarationFragment(SimpleName:cDE)(ClassInstanceCreation(SimpleType(SimpleName:CrystalDetailsBuilder)))))(VariableDeclarationStatement(SimpleType(SimpleName:CrystalDetailsElement))(VariableDeclarationFragment(SimpleName:cd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cDE))(SimpleName:createCrystalDetailsElement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:proposalName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getCrystals))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cDE))(SimpleName:validateJAXBObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cd))))(ExpressionStatement(Assignment(SimpleName:crystalDetailsXML)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cDE))(SimpleName:marshallJaxBObjToString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cd)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xtalDetailsWebService))(SimpleName:submitCrystalDetails)(METHOD_INVOCATION_ARGUMENTS(SimpleName:crystalDetailsXML))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:diffractionPlan)))(VariableDeclarationStatement(SimpleType(SimpleName:DiffractionPlan))(VariableDeclarationFragment(SimpleName:diffractionPlanWebService)(ClassInstanceCreation(SimpleType(SimpleName:DiffractionPlan)))))(VariableDeclarationStatement(SimpleType(SimpleName:DiffractionPlanBuilder))(VariableDeclarationFragment(SimpleName:dPB)(ClassInstanceCreation(SimpleType(SimpleName:DiffractionPlanBuilder)))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:it)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getDiffractionPlans)))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:DiffractionPlanElement))(VariableDeclarationFragment(SimpleName:dpe)(CastExpression(SimpleType(SimpleName:DiffractionPlanElement))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:next)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dpe))(SimpleName:setProjectUUID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:proposalName))))(ExpressionStatement(Assignment(SimpleName:diffractionPlan)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dPB))(SimpleName:marshallJaxBObjToString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dpe)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:diffractionPlanWebService))(SimpleName:submitDiffractionPlan)(METHOD_INVOCATION_ARGUMENTS(SimpleName:diffractionPlan))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:crystalShipping)))(VariableDeclarationStatement(SimpleType(SimpleName:Shipping))(VariableDeclarationFragment(SimpleName:shippingWebService)(ClassInstanceCreation(SimpleType(SimpleName:Shipping)))))(VariableDeclarationStatement(SimpleType(SimpleName:CrystalShippingBuilder))(VariableDeclarationFragment(SimpleName:cSB)(ClassInstanceCreation(SimpleType(SimpleName:CrystalShippingBuilder)))))(VariableDeclarationStatement(SimpleType(SimpleName:Person))(VariableDeclarationFragment(SimpleName:person)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cSB))(SimpleName:createPerson)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NullLiteral)(StringLiteral:<STR>)(NullLiteral)(NullLiteral)(StringLiteral:<STR>)(NullLiteral)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(NullLiteral)(NullLiteral)))))(VariableDeclarationStatement(SimpleType(SimpleName:Laboratory))(VariableDeclarationFragment(SimpleName:laboratory)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cSB))(SimpleName:createLaboratory)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(SimpleName:person)))))(VariableDeclarationStatement(SimpleType(SimpleName:DeliveryAgent))(VariableDeclarationFragment(SimpleName:deliveryAgent)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getDeliveryAgent))))(VariableDeclarationStatement(SimpleType(SimpleName:CrystalShipping))(VariableDeclarationFragment(SimpleName:cs)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cSB))(SimpleName:createCrystalShipping)(METHOD_INVOCATION_ARGUMENTS(SimpleName:proposalName)(SimpleName:laboratory)(SimpleName:deliveryAgent)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getDewars))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:shippingName)))(ExpressionStatement(Assignment(SimpleName:shippingName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadedFileName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(ConditionalExpression(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadedFileName))(SimpleName:toLowerCase)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadedFileName))(SimpleName:toLowerCase)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(NumberLiteral:0))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:shippingName))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:shippingName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadedFileName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(ConditionalExpression(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadedFileName))(SimpleName:toLowerCase)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadedFileName))(SimpleName:toLowerCase)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(NumberLiteral:0)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cs))(SimpleName:setName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:shippingName))))(ExpressionStatement(Assignment(SimpleName:crystalShipping)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cSB))(SimpleName:marshallJaxBObjToString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cs)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:shippingWebService))(SimpleName:submitCrystalShipping)(METHOD_INVOCATION_ARGUMENTS(SimpleName:crystalShipping)(CastExpression(SimpleType(SimpleName:ArrayList))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getDiffractionPlans)))(SimpleName:shippingId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServerLogger))(SimpleName:Log4Stat)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:proposalName)(SimpleName:uploadedFileName)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:XlsUploadException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(SimpleName:resetCounts)(METHOD_INVOCATION_ARGUMENTS(SimpleName:shippingId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:errors))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ActionMessages.GLOBAL_MESSAGE)(ClassInstanceCreation(SimpleType(SimpleName:ActionMessage))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ClientLogger))(SimpleName:getInstance)))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(SimpleName:saveErrors)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)(SimpleName:errors))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:findForward)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(SimpleName:resetCounts)(METHOD_INVOCATION_ARGUMENTS(SimpleName:shippingId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:errors))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ActionMessages.GLOBAL_MESSAGE)(ClassInstanceCreation(SimpleType(SimpleName:ActionMessage))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:toString))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ClientLogger))(SimpleName:getInstance)))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ExpressionStatement(MethodInvocation(SimpleName:saveErrors)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)(SimpleName:errors))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:findForward)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(ExpressionStatement(MethodInvocation(SimpleName:setCounts)(METHOD_INVOCATION_ARGUMENTS(SimpleName:shippingId))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:findForward)(METHOD_INVOCATION_ARGUMENTS(SimpleName:returnPage))))))))