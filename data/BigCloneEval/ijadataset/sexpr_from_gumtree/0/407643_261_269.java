(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:testBadHttpResponseIsPropagated)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequest))(VariableDeclarationFragment(SimpleName:internalRequest)(ClassInstanceCreation(SimpleType(SimpleName:HttpRequest))(SimpleName:REQUEST_URL))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:expect)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pipeline))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:internalRequest))))))(SimpleName:andReturn)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpResponse))(SimpleName:error)))))(ExpressionStatement(MethodInvocation(SimpleName:replay)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:handler))(SimpleName:fetch)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)(SimpleName:recorder))))(VariableDeclarationStatement(SimpleType(SimpleName:JSONObject))(VariableDeclarationFragment(SimpleName:results)(MethodInvocation(SimpleName:extractJsonFromResponse))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpResponse.SC_INTERNAL_SERVER_ERROR)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:results))(SimpleName:getInt)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(SimpleName:assertTrue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rewriter))(SimpleName:responseWasRewritten)))))))))