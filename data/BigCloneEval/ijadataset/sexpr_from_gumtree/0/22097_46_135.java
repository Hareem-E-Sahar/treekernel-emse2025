(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(PrimitiveType:void)(SimpleName:service)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:req))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:resp))(SimpleType(SimpleName:ServletException))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:PrintWriter))(VariableDeclarationFragment(SimpleName:out)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:getWriter))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:capFileName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getRequestURI)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getContextPath)))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:rawFileName)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:capFileName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:capFileName))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:4))))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:capFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:capFileName))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:rawFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rawFileName))))))(VariableDeclarationStatement(SimpleType(SimpleName:FileInputStream))(VariableDeclarationFragment(SimpleName:capFis)(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:capFile))))(VariableDeclarationStatement(SimpleType(SimpleName:FileInputStream))(VariableDeclarationFragment(SimpleName:rawFis)(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:rawFile))))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:capChannel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:capFis))(SimpleName:getChannel))))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:rawChannel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rawFis))(SimpleName:getChannel))))(VariableDeclarationStatement(SimpleType(SimpleName:MappedByteBuffer))(VariableDeclarationFragment(SimpleName:capMappedFile))(VariableDeclarationFragment(SimpleName:rawMappedFile)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:capMappedFile)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:capChannel))(SimpleName:map)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:FileChannel.MapMode.READ_ONLY)(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:capChannel))(SimpleName:size))))))(ExpressionStatement(Assignment(SimpleName:rawMappedFile)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rawChannel))(SimpleName:map)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:FileChannel.MapMode.READ_ONLY)(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rawChannel))(SimpleName:size)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e))))(ReturnStatement))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:capMappedFile))(SimpleName:order)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ByteOrder.BIG_ENDIAN))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rawMappedFile))(SimpleName:order)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ByteOrder.BIG_ENDIAN))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:cap)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ByteBuffer))(SimpleName:wrap)(METHOD_INVOCATION_ARGUMENTS(SimpleName:capMappedFile)))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ByteBuffer))(SimpleName:wrap)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rawMappedFile)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:serverMode)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cap))(SimpleName:get))(INFIX_EXPRESSION_OPERATOR:==)(CastExpression(PrimitiveType:byte)(NumberLiteral:0x01))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(ConditionalExpression(SimpleName:serverMode)(StringLiteral:<STR>)(StringLiteral:<STR>)))))))(VariableDeclarationStatement(SimpleType(SimpleName:RTMP))(VariableDeclarationFragment(SimpleName:state)(ClassInstanceCreation(SimpleType(SimpleName:RTMP))(SimpleName:serverMode))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:id)(NumberLiteral:0)))(TryStatement(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nextTimePos)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:time)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:offset)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:read)(NumberLiteral:0)))(TryStatement(Block(WhileStatement(BooleanLiteral:true)(Block(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:position))(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:nextTimePos))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cap))(SimpleName:remaining))(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:12))(Block(ExpressionStatement(Assignment(SimpleName:time)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cap))(SimpleName:getLong))))(IfStatement(InfixExpression(SimpleName:offset)(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:offset)(ASSIGNMENT_OPERATOR:=)(SimpleName:time)))))(ExpressionStatement(Assignment(SimpleName:time)(ASSIGNMENT_OPERATOR:-=)(SimpleName:offset)))(ExpressionStatement(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cap))(SimpleName:getInt))))(ExpressionStatement(Assignment(SimpleName:nextTimePos)(ASSIGNMENT_OPERATOR:+=)(SimpleName:read)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:time)(StringLiteral:<STR>)(SimpleName:read)(StringLiteral:<STR>)))))))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:remaining)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:remaining))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:state))(SimpleName:canStartDecoding)(METHOD_INVOCATION_ARGUMENTS(SimpleName:remaining)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:state))(SimpleName:startDecoding))))(Block(BreakStatement)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:decodedObject)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:decoder))(SimpleName:decode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:state)(SimpleName:in)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:state))(SimpleName:hasDecodedObject))(Block(IfStatement(InstanceofExpression(SimpleName:decodedObject)(SimpleType(SimpleName:Packet)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:formatHTML)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:Packet))(SimpleName:decodedObject))(PostfixExpression(SimpleName:id)(POSTFIX_EXPRESSION_OPERATOR:++))(NumberLiteral:0)))))))(IfStatement(InstanceofExpression(SimpleName:decodedObject)(SimpleType(SimpleName:ByteBuffer)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:buf)(CastExpression(SimpleType(SimpleName:ByteBuffer))(SimpleName:decodedObject))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HexDump))(SimpleName:formatHexDump)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:getHexDump))))(StringLiteral:<STR>)))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:state))(SimpleName:canContinueDecoding))(Block(ContinueStatement))(Block(BreakStatement))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:hasRemaining)))(Block(BreakStatement))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ProtocolException))(SimpleName:pvx))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:pvx))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:ex))))))(Block)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RuntimeException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:flush))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:FileNotFoundException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))))))