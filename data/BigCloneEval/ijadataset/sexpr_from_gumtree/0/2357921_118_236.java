(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:download)(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:connected)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:outcome)(StringLiteral:<STR>)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:is)(NullLiteral)))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SESecurityManager))(SimpleName:setThreadPasswordHandler)(METHOD_INVOCATION_ARGUMENTS(ThisExpression))))(SynchronizedStatement(ThisExpression)(Block(IfStatement(SimpleName:destroyed)(Block(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:scratch_file)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AETemporaryFileHandler))(SimpleName:createTempFile))))(ExpressionStatement(Assignment(SimpleName:raf)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(SimpleName:scratch_file)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpURLConnection))(VariableDeclarationFragment(SimpleName:connection)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:response)))(ExpressionStatement(Assignment(SimpleName:connection)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:HttpURLConnection))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:original_url))(SimpleName:openConnection)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:user_agent))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:time_remaining)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:getPermittedTime))))(IfStatement(InfixExpression(SimpleName:time_remaining)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Java15Utils))(SimpleName:setConnectTimeout)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)(SimpleName:time_remaining))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:connect)))(ExpressionStatement(Assignment(SimpleName:time_remaining)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:getPermittedTime))))(IfStatement(InfixExpression(SimpleName:time_remaining)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(ThrowStatement(ParenthesizedExpression(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Java15Utils))(SimpleName:setReadTimeout)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)(SimpleName:time_remaining))))(ExpressionStatement(Assignment(SimpleName:connected)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getResponseCode))))(ExpressionStatement(Assignment(SimpleName:last_response)(ASSIGNMENT_OPERATOR:=)(SimpleName:response)))(ExpressionStatement(Assignment(SimpleName:last_response_retry_after_secs)(ASSIGNMENT_OPERATOR:=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(IfStatement(InfixExpression(SimpleName:response)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:503))(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:retry_after_date)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:Long))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getHeaderFieldDate)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1L))))))(SimpleName:longValue))))(IfStatement(InfixExpression(SimpleName:retry_after_date)(INFIX_EXPRESSION_OPERATOR:<=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:last_response_retry_after_secs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getHeaderFieldInt)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))))(Block(ExpressionStatement(Assignment(SimpleName:last_response_retry_after_secs)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:retry_after_date)(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:1000))))))(IfStatement(InfixExpression(SimpleName:last_response_retry_after_secs)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:last_response_retry_after_secs)(ASSIGNMENT_OPERATOR:=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))))))(ExpressionStatement(Assignment(SimpleName:is)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getInputStream))))(IfStatement(InfixExpression(InfixExpression(InfixExpression(SimpleName:response)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:HttpURLConnection.HTTP_ACCEPTED))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:response)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:HttpURLConnection.HTTP_OK)))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:response)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:HttpURLConnection.HTTP_PARTIAL)))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buffer)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(InfixExpression(NumberLiteral:64)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1024)))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:requests_outstanding)(NumberLiteral:1)))(WhileStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:destroyed))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:permitted)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:getPermittedBytes))))(IfStatement(InfixExpression(InfixExpression(SimpleName:requests_outstanding)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:permitted)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:permitted)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:1)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:100))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:len)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(SimpleName:permitted)(QualifiedName:buffer.length)))))))(IfStatement(InfixExpression(SimpleName:len)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0))(Block(BreakStatement)))(SynchronizedStatement(ThisExpression)(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:0)(SimpleName:len)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:e))(Block(ExpressionStatement(Assignment(SimpleName:outcome)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))(VariableDeclarationStatement(SimpleType(SimpleName:ExternalSeedException))(VariableDeclarationFragment(SimpleName:error)(ClassInstanceCreation(SimpleType(SimpleName:ExternalSeedException))(SimpleName:outcome)(SimpleName:e))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:error))(SimpleName:setPermanentFailure)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ThrowStatement(ParenthesizedExpression(SimpleName:error))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:reportBytesRead)(METHOD_INVOCATION_ARGUMENTS(SimpleName:len))))(ExpressionStatement(Assignment(SimpleName:requests_outstanding)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:checkRequests))))))(ExpressionStatement(MethodInvocation(SimpleName:checkRequests))))(Block(ExpressionStatement(Assignment(SimpleName:outcome)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getResponseMessage)))))(VariableDeclarationStatement(SimpleType(SimpleName:ExternalSeedException))(VariableDeclarationFragment(SimpleName:error)(ClassInstanceCreation(SimpleType(SimpleName:ExternalSeedException))(SimpleName:outcome))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:error))(SimpleName:setPermanentFailure)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ThrowStatement(ParenthesizedExpression(SimpleName:error))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(IfStatement(InfixExpression(SimpleName:con_fail_is_perm_fail)(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:connected)))(Block(ExpressionStatement(Assignment(SimpleName:outcome)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))(VariableDeclarationStatement(SimpleType(SimpleName:ExternalSeedException))(VariableDeclarationFragment(SimpleName:error)(ClassInstanceCreation(SimpleType(SimpleName:ExternalSeedException))(SimpleName:outcome))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:error))(SimpleName:setPermanentFailure)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ThrowStatement(ParenthesizedExpression(SimpleName:error))))(Block(ExpressionStatement(Assignment(SimpleName:outcome)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Debug))(SimpleName:getNestedExceptionMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e))))))(IfStatement(InfixExpression(SimpleName:last_response_retry_after_secs)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:outcome)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:last_response_retry_after_secs)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:ExternalSeedException))(VariableDeclarationFragment(SimpleName:excep)(ClassInstanceCreation(SimpleType(SimpleName:ExternalSeedException))(SimpleName:outcome)(SimpleName:e))))(IfStatement(InstanceofExpression(SimpleName:e)(SimpleType(SimpleName:FileNotFoundException)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:excep))(SimpleName:setPermanentFailure)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))))(ThrowStatement(ParenthesizedExpression(SimpleName:excep)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ExternalSeedException))(SimpleName:e))(Block(ThrowStatement(ParenthesizedExpression(SimpleName:e)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:e))(Block(IfStatement(InstanceofExpression(SimpleName:e)(SimpleType(SimpleName:ExternalSeedException)))(Block(ThrowStatement(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:ExternalSeedException))(SimpleName:e))))))(ExpressionStatement(Assignment(SimpleName:outcome)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Debug))(SimpleName:getNestedExceptionMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e))))))(ThrowStatement(ParenthesizedExpression(ClassInstanceCreation(SimpleType(SimpleName:ExternalSeedException))(StringLiteral:<STR>)(SimpleName:e))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SESecurityManager))(SimpleName:unsetThreadPasswordHandler)))(IfStatement(InfixExpression(SimpleName:is)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:e))(Block))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ExternalSeedException))(SimpleName:e))(Block(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:connected))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:con_fail_is_perm_fail))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:setPermanentFailure)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))))(ExpressionStatement(MethodInvocation(SimpleName:destroy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)))))))))))