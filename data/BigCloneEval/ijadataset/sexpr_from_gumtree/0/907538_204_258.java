(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:ModelAndView))(SimpleName:handleRequest)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:request))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:response))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Split))(VariableDeclarationFragment(SimpleName:requestSplit)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestWaitTime))(SimpleName:start))))(VariableDeclarationStatement(SimpleType(SimpleName:Throttler))(VariableDeclarationFragment(SimpleName:requestThrottler)(ClassInstanceCreation(SimpleType(SimpleName:Throttler))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Long))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getRequestsPerMinute)))))(SimpleName:intValue))(NumberLiteral:60000))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestThrottler))(SimpleName:StartRequest)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestSplit))(SimpleName:stop)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:start)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:Date))))(SimpleName:getTime))))(TryStatement(Block(ExpressionStatement(PostfixExpression(SimpleName:numberOfZips)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(SimpleType(SimpleName:Long))(VariableDeclarationFragment(SimpleName:id)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Long))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getParameter)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(VariableDeclarationStatement(SimpleType(QualifiedName:org.ochan.entity.Thread))(VariableDeclarationFragment(SimpleName:t)(ClassInstanceCreation(SimpleType(QualifiedName:org.ochan.entity.Thread)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:t))(SimpleName:setIdentifier)(METHOD_INVOCATION_ARGUMENTS(SimpleName:id))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Post)))(VariableDeclarationFragment(SimpleName:posts)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:postService))(SimpleName:retrieveThreadPosts)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:t))(SimpleName:getIdentifier))))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:bos)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:zipfile)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(SimpleName:bos))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Post))(SimpleName:post))(SimpleName:posts)(Block(IfStatement(InstanceofExpression(SimpleName:post)(SimpleType(SimpleName:ImagePost)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ImagePost))(VariableDeclarationFragment(SimpleName:image)(CastExpression(SimpleType(SimpleName:ImagePost))(SimpleName:post))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:Byte))(Dimension))(VariableDeclarationFragment(SimpleName:fullImageBytes)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:blobService))(SimpleName:getBlob)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getImageIdentifier))))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:zipentry)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:post))(SimpleName:getIdentifier))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipfile))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:zipentry))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:datum)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(QualifiedName:fullImageBytes.length))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Byte))(SimpleName:val))(SimpleName:fullImageBytes)(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:datum)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:val))(SimpleName:byteValue))))(ExpressionStatement(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipfile))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(CastExpression(ArrayType(PrimitiveType:byte)(Dimension))(SimpleName:datum)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipfile))(SimpleName:close)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:datum)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:toByteArray))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:generationEnd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:Date))))(SimpleName:getTime))))(ExpressionStatement(Assignment(SimpleName:lastGenerationTimeInMillis)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:generationEnd)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:start))))(ExpressionStatement(Assignment(SimpleName:totalGenerationTimeInMillis)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(SimpleName:generationEnd)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:start))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setContentType)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setDateHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:datum.length)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setContentLength)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:datum.length))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:id)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileCopyUtils))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:datum)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getOutputStream))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SocketException))(SimpleName:se))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:trace)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:se))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e)))))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:end)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:Date))))(SimpleName:getTime))))(ExpressionStatement(Assignment(SimpleName:lastTimeInMillis)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:end)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:start))))(ExpressionStatement(Assignment(SimpleName:totalTimeInMillis)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(SimpleName:end)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:start))))(IfStatement(InfixExpression(SimpleName:lastTimeInMillis)(INFIX_EXPRESSION_OPERATOR:>)(MethodInvocation(SimpleName:getTimeLength)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:lastTimeInMillis)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getParameter)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))))(ReturnStatement(NullLiteral))))))