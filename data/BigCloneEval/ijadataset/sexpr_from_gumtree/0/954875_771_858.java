(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:updateImage)(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:imageSize)(InfixExpression(SimpleName:width)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:height))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nChannels)(MethodInvocation(SimpleName:getNChannels))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:redValue))(VariableDeclarationFragment(SimpleName:greenValue))(VariableDeclarationFragment(SimpleName:blueValue)))(VariableDeclarationStatement(SimpleType(SimpleName:ImageProcessor))(VariableDeclarationFragment(SimpleName:tmpProcessor)(SimpleName:ip)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:type)(MethodInvocation(SimpleName:getType))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:displayMode)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(IfStatement(InfixExpression(SimpleName:win)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(Assignment(SimpleName:displayMode)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:Image5DWindow))(SimpleName:win))))(SimpleName:getDisplayMode)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:displayMode)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelControl.ONE_CHANNEL_GRAY)))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(SimpleName:displayMode)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelControl.ONE_CHANNEL_COLOR))))(Block(ExpressionStatement(Assignment(SimpleName:img)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ip))(SimpleName:createImage)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:displayMode)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelControl.OVERLAY))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:displayMode)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelControl.TILED)))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:awtImagePixels)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(QualifiedName:awtImagePixels.length)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:imageSize)))(Block(ExpressionStatement(Assignment(SimpleName:awtImagePixels)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(SimpleName:imageSize))))))(ExpressionStatement(Assignment(SimpleName:newPixels)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))(IfStatement(InfixExpression(InfixExpression(InfixExpression(SimpleName:awtChannelPixels)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(QualifiedName:awtChannelPixels.length)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:nChannels)))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(FieldAccess(ArrayAccess(SimpleName:awtChannelPixels)(NumberLiteral:0))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:imageSize)))(Block(ExpressionStatement(Assignment(SimpleName:awtChannelPixels)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(SimpleName:nChannels))(Dimension)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:nChannels))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:i))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:awtChannelPixels)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(SimpleName:imageSize))))))))))(IfStatement(InfixExpression(SimpleName:displayMode)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelControl.TILED))(Block(SwitchStatement(SimpleName:type)(SwitchCase(SimpleName:GRAY8))(ExpressionStatement(Assignment(SimpleName:tmpProcessor)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ByteProcessor))(SimpleName:width)(SimpleName:height)(NullLiteral)(NullLiteral))))(BreakStatement)(SwitchCase(SimpleName:GRAY16))(ExpressionStatement(Assignment(SimpleName:dummyImage)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:short)(Dimension(SimpleName:imageSize))))))(ExpressionStatement(Assignment(SimpleName:tmpProcessor)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ShortProcessor))(SimpleName:width)(SimpleName:height)(NullLiteral)(NullLiteral))))(BreakStatement)(SwitchCase(SimpleName:GRAY32))(ExpressionStatement(Assignment(SimpleName:tmpProcessor)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:FloatProcessor))(SimpleName:width)(SimpleName:height)(NullLiteral)(NullLiteral))))(BreakStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:channelIPs)(InfixExpression(MethodInvocation(SimpleName:getCurrentChannel))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(SimpleName:createImage)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:nChannels))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:i))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:chDisplayProps)(SimpleName:i)))(SimpleName:isDisplayedInOverlay)))(ContinueStatement))(IfStatement(InfixExpression(SimpleName:displayMode)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelControl.OVERLAY))(Block(VariableDeclarationStatement(SimpleType(SimpleName:PixelGrabber))(VariableDeclarationFragment(SimpleName:pg)(ClassInstanceCreation(SimpleType(SimpleName:PixelGrabber))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:channelIPs)(SimpleName:i)))(SimpleName:createImage))(NumberLiteral:0)(NumberLiteral:0)(SimpleName:width)(SimpleName:height)(ArrayAccess(SimpleName:awtChannelPixels)(SimpleName:i))(NumberLiteral:0)(SimpleName:width))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pg))(SimpleName:grabPixels))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block)))(EmptyStatement))(IfStatement(InfixExpression(SimpleName:displayMode)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelControl.TILED))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tmpProcessor))(SimpleName:setPixels)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:channelIPs)(SimpleName:i)))(SimpleName:getPixels)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tmpProcessor))(SimpleName:setColorModel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getChannelDisplayProperties)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))(SimpleName:getColorModel)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tmpProcessor))(SimpleName:setMinAndMax)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:channelIPs)(SimpleName:i)))(SimpleName:getMin))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:channelIPs)(SimpleName:i)))(SimpleName:getMax)))))(VariableDeclarationStatement(SimpleType(SimpleName:PixelGrabber))(VariableDeclarationFragment(SimpleName:pg)(ClassInstanceCreation(SimpleType(SimpleName:PixelGrabber))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tmpProcessor))(SimpleName:createImage))(NumberLiteral:0)(NumberLiteral:0)(SimpleName:width)(SimpleName:height)(ArrayAccess(SimpleName:awtChannelPixels)(SimpleName:i))(NumberLiteral:0)(SimpleName:width))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pg))(SimpleName:grabPixels))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block)))(EmptyStatement))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:imageSize))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:i))(Block(ExpressionStatement(Assignment(SimpleName:redValue)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ExpressionStatement(Assignment(SimpleName:greenValue)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ExpressionStatement(Assignment(SimpleName:blueValue)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:j)(NumberLiteral:0)))(InfixExpression(SimpleName:j)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:nChannels))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:j))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:chDisplayProps)(SimpleName:j)))(SimpleName:isDisplayedInOverlay)))(ContinueStatement))(ExpressionStatement(Assignment(SimpleName:redValue)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(ParenthesizedExpression(InfixExpression(ArrayAccess(ArrayAccess(SimpleName:awtChannelPixels)(SimpleName:j))(SimpleName:i))(INFIX_EXPRESSION_OPERATOR:>>)(NumberLiteral:16)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xFF))))(ExpressionStatement(Assignment(SimpleName:greenValue)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(ParenthesizedExpression(InfixExpression(ArrayAccess(ArrayAccess(SimpleName:awtChannelPixels)(SimpleName:j))(SimpleName:i))(INFIX_EXPRESSION_OPERATOR:>>)(NumberLiteral:8)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xFF))))(ExpressionStatement(Assignment(SimpleName:blueValue)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(ParenthesizedExpression(ArrayAccess(ArrayAccess(SimpleName:awtChannelPixels)(SimpleName:j))(SimpleName:i)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xFF))))(IfStatement(InfixExpression(SimpleName:redValue)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:255))(ExpressionStatement(Assignment(SimpleName:redValue)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:255))))(IfStatement(InfixExpression(SimpleName:greenValue)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:255))(ExpressionStatement(Assignment(SimpleName:greenValue)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:255))))(IfStatement(InfixExpression(SimpleName:blueValue)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:255))(ExpressionStatement(Assignment(SimpleName:blueValue)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:255))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:awtImagePixels)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:redValue)(INFIX_EXPRESSION_OPERATOR:<<)(NumberLiteral:16)))(INFIX_EXPRESSION_OPERATOR:|)(ParenthesizedExpression(InfixExpression(SimpleName:greenValue)(INFIX_EXPRESSION_OPERATOR:<<)(NumberLiteral:8)))(ParenthesizedExpression(SimpleName:blueValue)))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:img)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:awtImage)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(ExpressionStatement(Assignment(SimpleName:img)(ASSIGNMENT_OPERATOR:=)(SimpleName:awtImage))))(IfStatement(InfixExpression(SimpleName:imageSource)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:imageColorModel)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:DirectColorModel))(NumberLiteral:32)(NumberLiteral:0xFF0000)(NumberLiteral:0xFF00)(NumberLiteral:0xFF))))(ExpressionStatement(Assignment(SimpleName:imageSource)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:MemoryImageSource))(SimpleName:width)(SimpleName:height)(SimpleName:imageColorModel)(SimpleName:awtImagePixels)(NumberLiteral:0)(SimpleName:width))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageSource))(SimpleName:setAnimated)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageSource))(SimpleName:setFullBufferUpdates)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(Assignment(SimpleName:awtImage)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Toolkit))(SimpleName:getDefaultToolkit)))(SimpleName:createImage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageSource)))))(ExpressionStatement(Assignment(SimpleName:newPixels)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false))))(IfStatement(SimpleName:newPixels)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageSource))(SimpleName:newPixels)(METHOD_INVOCATION_ARGUMENTS(SimpleName:awtImagePixels)(SimpleName:imageColorModel)(NumberLiteral:0)(SimpleName:width))))(ExpressionStatement(Assignment(SimpleName:newPixels)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageSource))(SimpleName:newPixels)))))))))))))