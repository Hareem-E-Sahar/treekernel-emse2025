(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:XMPPConnection))(SimpleName:getXMPPConnection)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:XMPPURI))(SimpleName:uri))(SimpleType(SimpleName:XMPPException))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:XMPPURI))(VariableDeclarationFragment(SimpleName:connectionUri)(ClassInstanceCreation(SimpleType(SimpleName:XMPPURI)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:setHost)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:getHost)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:setPort)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:getPort)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:setUser)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:getUser)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:setUserPassword)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:getUserPassword)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:XMPPConnection))(VariableDeclarationFragment(SimpleName:connection)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConnections))(SimpleName:containsKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connectionUri)))(Block(ExpressionStatement(Assignment(SimpleName:connection)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConnections))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connectionUri))))))(Block(ExpressionStatement(Assignment(SimpleName:connection)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:XMPPConnection))(ClassInstanceCreation(SimpleType(SimpleName:ConnectionConfiguration))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:getHost))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:getPort)))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(PrimitiveType:void)(SimpleName:shutdown)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Presence))(SimpleName:unavailablePresence))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lease)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:leases))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))))(IfStatement(InfixExpression(SimpleName:lease)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:1))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:leases))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(InfixExpression(SimpleName:lease)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:leases))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(ThisExpression))))(ExpressionStatement(SuperMethodInvocation(SimpleName:shutdown)(SimpleName:unavailablePresence)))))))))))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lease)(ConditionalExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:leases))(SimpleName:containsKey)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getConnectionID))))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:leases))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getConnectionID))))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))(NumberLiteral:1))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:leases))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)(SimpleName:lease))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:isConnected)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:connect)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:isAuthenticated)))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:getUser))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:login)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:getUser))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionUri))(SimpleName:getUserPassword))(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:loginAnonymously)))))))(ReturnStatement(SimpleName:connection))))))