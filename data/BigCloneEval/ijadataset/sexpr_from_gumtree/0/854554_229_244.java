(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(SimpleType(SimpleName:Protocol))(SimpleName:negotiateProtocol)(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:ExitException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Protocol))(VariableDeclarationFragment(SimpleName:defaultProtocol)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Protocol))(SimpleName:getProtocol)(METHOD_INVOCATION_ARGUMENTS(SimpleName:repNode)))))(VariableDeclarationStatement(SimpleType(SimpleName:ReplicaProtocolVersion))(VariableDeclarationFragment(SimpleName:message)(CastExpression(SimpleType(SimpleName:ReplicaProtocolVersion))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:defaultProtocol))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namedChannel))))))(ExpressionStatement(Assignment(SimpleName:replicaNameIdPair)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getNameIdPair))))(VariableDeclarationStatement(SimpleType(SimpleName:Feeder))(VariableDeclarationFragment(SimpleName:dup)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:repNode))(SimpleName:feederManager)))(SimpleName:getFeeder)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:replicaNameIdPair))(SimpleName:getName))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:dup)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getNameIdPair)))(SimpleName:getName)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:feederNameIdPair))(SimpleName:getName))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:defaultProtocol))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleName:defaultProtocol)(SimpleType(SimpleName:DuplicateNodeReject))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:replicaNameIdPair)(StringLiteral:<STR>)))(SimpleName:namedChannel))))(VariableDeclarationStatement(SimpleType(SimpleName:SocketAddress))(VariableDeclarationFragment(SimpleName:dupAddress)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:namedChannel))(SimpleName:getChannel)))(SimpleName:socket)))(SimpleName:getRemoteSocketAddress))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ExitException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:replicaNameIdPair)(StringLiteral:<STR>)(StringLiteral:<STR>)(SimpleName:dupAddress))))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:replicaVersion)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getVersion))))(VariableDeclarationStatement(SimpleType(SimpleName:Protocol))(VariableDeclarationFragment(SimpleName:protocol)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Protocol))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:repNode)(SimpleName:replicaVersion)))))(ExpressionStatement(Assignment(SimpleName:protocol)(ASSIGNMENT_OPERATOR:=)(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:protocol)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(SimpleName:defaultProtocol)(SimpleName:protocol))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:defaultProtocol))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleName:defaultProtocol)(SimpleType(SimpleName:FeederProtocolVersion))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:protocol))(SimpleName:getVersion)))(SimpleName:namedChannel))))(ReturnStatement(SimpleName:protocol))))))