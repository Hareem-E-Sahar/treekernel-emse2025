(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(NormalAnnotation(SimpleName:Validations)(MemberValuePair(SimpleName:requiredFields)(ArrayInitializer(NormalAnnotation(SimpleName:RequiredFieldValidator)(MemberValuePair(SimpleName:fieldName)(StringLiteral:<STR>))(MemberValuePair(SimpleName:message)(StringLiteral:<STR>))))))(NormalAnnotation(SimpleName:InputConfig)(MemberValuePair(SimpleName:resultName)(StringLiteral:<STR>)))(Modifier:public)(SimpleType(SimpleName:String))(SimpleName:gateway)(SimpleType(SimpleName:Exception))(Block(ExpressionStatement(Assignment(SimpleName:paymentConfig)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfigService))(SimpleName:load)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getId))))))(IfStatement(InfixExpression(SimpleName:paymentType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentType.recharge))(Block(IfStatement(InfixExpression(SimpleName:amountPayable)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:amountPayable))(SimpleName:compareTo)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:BigDecimal))(StringLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:amountPayable))(SimpleName:scale))(INFIX_EXPRESSION_OPERATOR:>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getSystemConfig)))(SimpleName:getOrderScale)))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(IfStatement(InfixExpression(InfixExpression(SimpleName:paymentConfig)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getId)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(ExpressionStatement(Assignment(SimpleName:paymentConfig)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfigService))(SimpleName:load)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getId))))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentConfigType.deposit))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentConfigType.offline)))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(ExpressionStatement(Assignment(SimpleName:paymentFee)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentFee)(METHOD_INVOCATION_ARGUMENTS(SimpleName:amountPayable))))))(IfStatement(InfixExpression(SimpleName:paymentType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentType.deposit))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:order)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getId)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(ExpressionStatement(Assignment(SimpleName:order)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderService))(SimpleName:load)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getId))))))(ExpressionStatement(Assignment(SimpleName:paymentConfig)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaymentConfig))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:PaymentConfigType.deposit))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getOrderStatus))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:OrderStatus.completed))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getOrderStatus))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:OrderStatus.invalid)))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaymentStatus))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:com.nodeshop.entity.Order.PaymentStatus.paid))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getLoginMember)))(SimpleName:getDeposit)))(SimpleName:compareTo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getTotalAmount)))(SimpleName:subtract)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaidAmount))))))(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:paymentResult)(ASSIGNMENT_OPERATOR:=)(QualifiedName:PaymentResult.failure)))(ExpressionStatement(MethodInvocation(SimpleName:setResponseNoCache)))(ReturnStatement(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:paymentFee)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaymentFee))))(ExpressionStatement(Assignment(SimpleName:amountPayable)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getTotalAmount)))(SimpleName:subtract)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentFee))))(SimpleName:subtract)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaidAmount)))))))(IfStatement(InfixExpression(SimpleName:paymentType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentType.offline))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:order)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getId)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(ExpressionStatement(Assignment(SimpleName:order)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderService))(SimpleName:load)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getId))))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getOrderStatus))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:OrderStatus.completed))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getOrderStatus))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:OrderStatus.invalid)))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaymentStatus))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:com.nodeshop.entity.Order.PaymentStatus.paid))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(ExpressionStatement(Assignment(SimpleName:paymentConfig)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaymentConfig))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:PaymentConfigType.offline))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(ExpressionStatement(Assignment(SimpleName:paymentFee)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaymentFee))))(ExpressionStatement(Assignment(SimpleName:amountPayable)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getProductTotalPrice)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getDeliveryFee)))))(SimpleName:subtract)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaidAmount)))))))(IfStatement(InfixExpression(SimpleName:paymentType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentType.online))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:order)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getId)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(ExpressionStatement(Assignment(SimpleName:order)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderService))(SimpleName:load)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getId))))))(ExpressionStatement(Assignment(SimpleName:paymentConfig)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaymentConfig))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentConfigType.deposit))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentConfigType.offline)))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR))))(ExpressionStatement(Assignment(SimpleName:paymentFee)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaymentFee))))(ExpressionStatement(Assignment(SimpleName:amountPayable)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getTotalAmount)))(SimpleName:subtract)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentFee))))(SimpleName:subtract)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaidAmount)))))))))))(VariableDeclarationStatement(SimpleType(SimpleName:BigDecimal))(VariableDeclarationFragment(SimpleName:totalAmount)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:amountPayable))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentFee)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:description)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:paymentUrl)(NullLiteral)))(IfStatement(InfixExpression(SimpleName:paymentType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentType.recharge))(Block(ExpressionStatement(Assignment(SimpleName:description)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getSystemConfig)))(SimpleName:getShopName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))(Block(ExpressionStatement(Assignment(SimpleName:description)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getSystemConfig)))(SimpleName:getShopName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getOrderSn))(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:Member))(VariableDeclarationFragment(SimpleName:loginMember)(MethodInvocation(SimpleName:getLoginMember))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentConfigType.deposit))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:totalAmount))(SimpleName:compareTo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getTotalAmount)))(SimpleName:subtract)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaidAmount))))))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:setPaymentStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:com.nodeshop.entity.Order.PaymentStatus.paid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:setPaidAmount)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaidAmount)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:totalAmount)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:totalAmount))(SimpleName:compareTo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getTotalAmount))))(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:setPaymentStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:com.nodeshop.entity.Order.PaymentStatus.partPayment))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:setPaidAmount)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getPaidAmount)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:totalAmount)))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:ERROR)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderService))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:order))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:loginMember))(SimpleName:setDeposit)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:loginMember))(SimpleName:getDeposit)))(SimpleName:subtract)(METHOD_INVOCATION_ARGUMENTS(SimpleName:totalAmount))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:memberService))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:loginMember))))(VariableDeclarationStatement(SimpleType(SimpleName:Deposit))(VariableDeclarationFragment(SimpleName:deposit)(ClassInstanceCreation(SimpleType(SimpleName:Deposit)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deposit))(SimpleName:setDepositType)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:DepositType.memberPayment))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deposit))(SimpleName:setCredit)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:BigDecimal))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deposit))(SimpleName:setDebit)(METHOD_INVOCATION_ARGUMENTS(SimpleName:amountPayable))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deposit))(SimpleName:setBalance)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:loginMember))(SimpleName:getDeposit)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deposit))(SimpleName:setMember)(METHOD_INVOCATION_ARGUMENTS(SimpleName:loginMember))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:depositService))(SimpleName:save)(METHOD_INVOCATION_ARGUMENTS(SimpleName:deposit))))(VariableDeclarationStatement(SimpleType(SimpleName:Payment))(VariableDeclarationFragment(SimpleName:payment)(ClassInstanceCreation(SimpleType(SimpleName:Payment)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentType))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentConfigName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setBankName)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setBankAccount)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setTotalAmount)(METHOD_INVOCATION_ARGUMENTS(SimpleName:totalAmount))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentFee)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentFee))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPayer)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getLoginMember)))(SimpleName:getUsername)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setOperator)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setMemo)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PaymentStatus.success))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentConfig)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentConfig))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setDeposit)(METHOD_INVOCATION_ARGUMENTS(SimpleName:deposit))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setOrder)(METHOD_INVOCATION_ARGUMENTS(SimpleName:order))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentService))(SimpleName:save)(METHOD_INVOCATION_ARGUMENTS(SimpleName:payment))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getSystemConfig)))(SimpleName:getStoreFreezeTime))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:StoreFreezeTime.payment))(Block(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:OrderItem))(SimpleName:orderItem))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getOrderItemSet))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Product))(VariableDeclarationFragment(SimpleName:product)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderItem))(SimpleName:getProduct))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:product))(SimpleName:getStore))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:product))(SimpleName:setFreezeStore)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:product))(SimpleName:getFreezeStore))(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderItem))(SimpleName:getProductQuantity))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:product))(SimpleName:getIsOutOfStock))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Hibernate))(SimpleName:initialize)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderItem))(SimpleName:getProduct)))(SimpleName:getProductAttributeMapStore)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productService))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:product))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:product))(SimpleName:getIsOutOfStock))(Block(ExpressionStatement(MethodInvocation(SimpleName:flushCache)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:htmlService))(SimpleName:productContentBuildHtml)(METHOD_INVOCATION_ARGUMENTS(SimpleName:product))))))))))))(VariableDeclarationStatement(SimpleType(SimpleName:OrderLog))(VariableDeclarationFragment(SimpleName:orderLog)(ClassInstanceCreation(SimpleType(SimpleName:OrderLog)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderLog))(SimpleName:setOrderLogType)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:OrderLogType.payment))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderLog))(SimpleName:setOrderSn)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:order))(SimpleName:getOrderSn)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderLog))(SimpleName:setOperator)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderLog))(SimpleName:setInfo)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:getTotalAmount))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderLog))(SimpleName:setOrder)(METHOD_INVOCATION_ARGUMENTS(SimpleName:order))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orderLogService))(SimpleName:save)(METHOD_INVOCATION_ARGUMENTS(SimpleName:orderLog))))(ExpressionStatement(Assignment(SimpleName:paymentResult)(ASSIGNMENT_OPERATOR:=)(QualifiedName:PaymentResult.success)))(ExpressionStatement(MethodInvocation(SimpleName:setResponseNoCache)))(ReturnStatement(StringLiteral:<STR>)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentConfigType.offline))(Block(ExpressionStatement(Assignment(SimpleName:paymentResult)(ASSIGNMENT_OPERATOR:=)(QualifiedName:PaymentResult.success)))(ReturnStatement(StringLiteral:<STR>)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getPaymentConfigType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentConfigType.tenpay))(Block(VariableDeclarationStatement(SimpleType(SimpleName:TenpayConfig))(VariableDeclarationFragment(SimpleName:tenpayConfig)(CastExpression(SimpleType(SimpleName:TenpayConfig))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getConfigObject)))))(VariableDeclarationStatement(SimpleType(SimpleName:Payment))(VariableDeclarationFragment(SimpleName:payment)(ClassInstanceCreation(SimpleType(SimpleName:Payment)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentType))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentConfigName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfig))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setBankName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getText)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setBankAccount)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tenpayConfig))(SimpleName:getBargainorId)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setTotalAmount)(METHOD_INVOCATION_ARGUMENTS(SimpleName:totalAmount))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentFee)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentFee))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPayer)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getLoginMember)))(SimpleName:getUsername)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setOperator)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setMemo)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PaymentStatus.ready))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setPaymentConfig)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentConfig))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setDeposit)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(IfStatement(InfixExpression(SimpleName:paymentType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:PaymentType.recharge))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setOrder)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:setOrder)(METHOD_INVOCATION_ARGUMENTS(SimpleName:order))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentService))(SimpleName:save)(METHOD_INVOCATION_ARGUMENTS(SimpleName:payment))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:ip)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getRequest)))(SimpleName:getRemoteAddr))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tenpayConfig))(SimpleName:getTenpayType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:TenpayType.direct))(Block(ExpressionStatement(Assignment(SimpleName:paymentUrl)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfigService))(SimpleName:buildTenpayDirectPaymentUrl)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentConfig)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:getPaymentSn))(SimpleName:totalAmount)(SimpleName:description)(SimpleName:ip))))))(Block(ExpressionStatement(Assignment(SimpleName:paymentUrl)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paymentConfigService))(SimpleName:buildTenpayPartnerPaymentUrl)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentConfig)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:payment))(SimpleName:getPaymentSn))(SimpleName:totalAmount)(SimpleName:description)))))))(ExpressionStatement(MethodInvocation(SimpleName:setResponseNoCache)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getResponse)))(SimpleName:sendRedirect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paymentUrl))))))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:urlString)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:BASE64Decoder))(VariableDeclarationFragment(SimpleName:bASE64Decoder)(ClassInstanceCreation(SimpleType(SimpleName:BASE64Decoder)))))(ExpressionStatement(Assignment(SimpleName:urlString)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bASE64Decoder))(SimpleName:decodeBuffer)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(SimpleName:urlString)(NumberLiteral:8)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(InfixExpression(SimpleName:urlString)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SystemConfigUtil))(SimpleName:getSystemConfig)))(SimpleName:getShopUrl))))))(VariableDeclarationStatement(SimpleType(SimpleName:URLConnection))(VariableDeclarationFragment(SimpleName:urlConnection)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openConnection))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpURLConnection))(VariableDeclarationFragment(SimpleName:httpConnection)(CastExpression(SimpleType(SimpleName:HttpURLConnection))(SimpleName:urlConnection))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpConnection))(SimpleName:getResponseCode))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block)))(ReturnStatement(NullLiteral))))))