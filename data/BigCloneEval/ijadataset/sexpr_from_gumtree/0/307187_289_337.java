(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(PrimitiveType:int)(SimpleName:proxy)(SingleVariableDeclaration(SimpleType(QualifiedName:java.net.URI))(SimpleName:uri))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:req))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:res))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HostConfiguration))(VariableDeclarationFragment(SimpleName:hostConfig)(ClassInstanceCreation(SimpleType(SimpleName:HostConfiguration)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hostConfig))(SimpleName:setHost)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:getHost)))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpMethodBase))(VariableDeclarationFragment(SimpleName:httpMethod)(NullLiteral)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:HttpRpcServer.METHOD_GET))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getMethod))))(Block(ExpressionStatement(Assignment(SimpleName:httpMethod)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:GetMethod))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpMethod))(SimpleName:setFollowRedirects)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:HttpRpcServer.METHOD_POST))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getMethod))))(Block(ExpressionStatement(Assignment(SimpleName:httpMethod)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:PostMethod))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:toString)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Enumeration))(VariableDeclarationFragment(SimpleName:parameterNames)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getParameterNames))))(IfStatement(InfixExpression(SimpleName:parameterNames)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parameterNames))(SimpleName:hasMoreElements))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:parameterName)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parameterNames))(SimpleName:nextElement)))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:parameterValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getParameterValues)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parameterName)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:PostMethod))(SimpleName:httpMethod))))(SimpleName:addParameter)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parameterName)(SimpleName:parameterValue))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:PostMethod))(SimpleName:httpMethod))))(SimpleName:setRequestEntity)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:InputStreamRequestEntity))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getInputStream)))))))))(IfStatement(InfixExpression(SimpleName:httpMethod)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException))(StringLiteral:<STR>))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:responseCode)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Enumeration))(VariableDeclarationFragment(SimpleName:headers)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getHeaderNames))))(IfStatement(InfixExpression(SimpleName:headers)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:hasMoreElements))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:headerName)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:nextElement)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Enumeration))(VariableDeclarationFragment(SimpleName:headerValues)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getHeaders)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerName)))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headerValues))(SimpleName:hasMoreElements))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpMethod))(SimpleName:setRequestHeader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerName)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headerValues))(SimpleName:nextElement)))))))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HttpState))(VariableDeclarationFragment(SimpleName:httpState)(ClassInstanceCreation(SimpleType(SimpleName:HttpState)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getCookies))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Cookie))(SimpleName:cookie))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getCookies))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:host)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:getDomain))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:setDomain)(METHOD_INVOCATION_ARGUMENTS(ConditionalExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:host)))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getServerName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getServerPort)))(SimpleName:host))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:getPath))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:setPath)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpState))(SimpleName:addCookie)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(QualifiedName:org.apache.commons.httpclient.Cookie))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:getDomain))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:getName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:getValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:getPath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:getMaxAge))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookie))(SimpleName:getSecure)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpMethod))(SimpleName:setQueryString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getQueryString)))))(ExpressionStatement(Assignment(SimpleName:responseCode)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(ClassInstanceCreation(SimpleType(SimpleName:HttpClient)))))(SimpleName:executeMethod)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hostConfig)(SimpleName:httpMethod)(SimpleName:httpState)))))(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpMethod))(SimpleName:releaseConnection)))(ReturnStatement(SimpleName:responseCode))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpMethod))(SimpleName:getResponseHeaders))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Header))(SimpleName:header))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpMethod))(SimpleName:getResponseHeaders))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getValue)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpMethod))(SimpleName:getResponseBodyAsStream))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:out)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getOutputStream))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:out))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpMethod))(SimpleName:releaseConnection)))(ReturnStatement(SimpleName:responseCode))))))