(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:selectionChanged)(SingleVariableDeclaration(SimpleType(SimpleName:SelectionChangedEvent))(SimpleName:event))(Block(IfStatement(SimpleName:isDispatching)(Block(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:fLastEvent)(ASSIGNMENT_OPERATOR:=)(SimpleName:event)))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Preferences))(SimpleName:doLinkView)))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:fDoSync)))(Block(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:isDispatching)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(VariableDeclarationStatement(SimpleType(SimpleName:ISelection))(VariableDeclarationFragment(SimpleName:selection)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getSelection))))(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:source)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getSource))))(IfStatement(InfixExpression(InstanceofExpression(SimpleName:source)(SimpleType(SimpleName:GraphicalViewer)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:fTreeView)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Object)))(VariableDeclarationFragment(SimpleName:list)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Object))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Object))(SimpleName:o))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IStructuredSelection))(SimpleName:selection))))(SimpleName:toArray))(Block(IfStatement(InstanceofExpression(SimpleName:o)(SimpleType(SimpleName:EditPart)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:model)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:EditPart))(SimpleName:o))))(SimpleName:getModel))))(IfStatement(InstanceofExpression(SimpleName:model)(SimpleType(SimpleName:IDiagramModelArchimateObject)))(Block(ExpressionStatement(Assignment(SimpleName:model)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IDiagramModelArchimateObject))(SimpleName:model))))(SimpleName:getArchimateElement))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:list))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:model)))))(IfStatement(InstanceofExpression(SimpleName:model)(SimpleType(SimpleName:IDiagramModelArchimateConnection)))(Block(ExpressionStatement(Assignment(SimpleName:model)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IDiagramModelArchimateConnection))(SimpleName:model))))(SimpleName:getRelationship))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:list))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:model)))))(IfStatement(InstanceofExpression(SimpleName:model)(SimpleType(SimpleName:IDiagramModel)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:list))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:model))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fTreeView))(SimpleName:getViewer)))(SimpleName:setSelection)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:StructuredSelection))(SimpleName:list))(BooleanLiteral:true)))))(IfStatement(InstanceofExpression(SimpleName:source)(SimpleType(SimpleName:TreeViewer)))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:IArchimateElement)))(VariableDeclarationFragment(SimpleName:list)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:IArchimateElement))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Object))(SimpleName:o))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IStructuredSelection))(SimpleName:selection))))(SimpleName:toArray))(Block(IfStatement(InstanceofExpression(SimpleName:o)(SimpleType(SimpleName:IArchimateElement)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:list))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:IArchimateElement))(SimpleName:o)))))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:IDiagramModelEditor))(SimpleName:diagramEditor))(SimpleName:fDiagramEditors)(Block(IfStatement(InstanceofExpression(SimpleName:diagramEditor)(SimpleType(SimpleName:IArchimateDiagramEditor)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IArchimateDiagramEditor))(SimpleName:diagramEditor))))(SimpleName:selectElements)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:list))(SimpleName:toArray)(METHOD_INVOCATION_ARGUMENTS(ArrayCreation(ArrayType(SimpleType(SimpleName:IArchimateElement))(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:list))(SimpleName:size)))))))))))))))))(ExpressionStatement(Assignment(SimpleName:isDispatching)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))))))