(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:retrieveFileWithDelta)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:localFile))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:remotePath))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:remoteName))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:token))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:data)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URLEncoder))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URLEncoder))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:remotePath)(StringLiteral:<STR>))))))(ExpressionStatement(Assignment(SimpleName:data)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URLEncoder))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URLEncoder))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:remoteName)(StringLiteral:<STR>))))))(IfStatement(InfixExpression(SimpleName:token)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:data)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URLEncoder))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:token)(StringLiteral:<STR>))))))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:byteSent))(ASSIGNMENT_OPERATOR:+=)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:data))(SimpleName:getBytes))(SimpleName:length))))(VariableDeclarationStatement(SimpleType(SimpleName:URLConnection))(VariableDeclarationFragment(SimpleName:conn)(MethodInvocation(SimpleName:getConnection)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(FieldAccess(ThisExpression)(SimpleName:baseUrl))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:setDoOutput)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStreamWriter))(VariableDeclarationFragment(SimpleName:wr)(ClassInstanceCreation(SimpleType(SimpleName:OutputStreamWriter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getOutputStream)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wr))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wr))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wr))(SimpleName:close)))(VariableDeclarationStatement(SimpleType(SimpleName:DataInputStream))(VariableDeclarationFragment(SimpleName:in)(ClassInstanceCreation(SimpleType(SimpleName:DataInputStream))(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getInputStream))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:fileSize)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:readInt))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:byteReceived))(ASSIGNMENT_OPERATOR:+=)(NumberLiteral:4)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:byteSyncDownload))(ASSIGNMENT_OPERATOR:=)(SimpleName:fileSize)))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:float)(VariableDeclarationFragment(SimpleName:a)(InfixExpression(CastExpression(PrimitiveType:float)(SimpleName:fileSize))(INFIX_EXPRESSION_OPERATOR:/)(QualifiedName:HashWriter.blockSize))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nb)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:ceil)(METHOD_INVOCATION_ARGUMENTS(SimpleName:a))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:HashMap))(SimpleType(SimpleName:Integer))(ArrayType(PrimitiveType:byte)(Dimension)))(VariableDeclarationFragment(SimpleName:map)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashMap))(SimpleType(SimpleName:Integer))(ArrayType(PrimitiveType:byte)(Dimension)))(InfixExpression(InfixExpression(SimpleName:nb)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:2))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:HashMap))(SimpleType(SimpleName:Integer))(SimpleType(SimpleName:Integer)))(VariableDeclarationFragment(SimpleName:mapBlock)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashMap))(SimpleType(SimpleName:Integer))(SimpleType(SimpleName:Integer)))(InfixExpression(InfixExpression(SimpleName:nb)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:2))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:nb))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:b)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:16))))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:r32)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:readInt))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:b))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:byteReceived))(ASSIGNMENT_OPERATOR:+=)(InfixExpression(NumberLiteral:4)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:16))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:map))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:r32)(SimpleName:b))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapBlock))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:r32)(SimpleName:i))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:fileHash)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:32))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileHash))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:byteReceived))(ASSIGNMENT_OPERATOR:+=)(NumberLiteral:32)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close)))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:newFile)(MethodInvocation(SimpleName:createEmptyFile)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localFile))(SimpleName:getParentFile))(SimpleName:fileSize)))))(VariableDeclarationStatement(SimpleType(SimpleName:RandomAccessFile))(VariableDeclarationFragment(SimpleName:rNewFile)(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(SimpleName:newFile)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:RollingChecksum32))(VariableDeclarationFragment(SimpleName:checksum)(ClassInstanceCreation(SimpleType(SimpleName:RollingChecksum32)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buffer)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(QualifiedName:HashWriter.blockSize))))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:fb)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:localFile)))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fb))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksum))(SimpleName:check)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:0)(SimpleName:read))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:v)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:start)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:end)(SimpleName:read)))(VariableDeclarationStatement(SimpleType(SimpleName:MessageDigest))(VariableDeclarationFragment(SimpleName:md5Digest)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageDigest))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:RangeList))(VariableDeclarationFragment(SimpleName:rangesOk)(ClassInstanceCreation(SimpleType(SimpleName:RangeList))(SimpleName:fileSize))))(DoStatement(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:r32)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksum))(SimpleName:getValue))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:md5)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:r32)))))(IfStatement(InfixExpression(SimpleName:md5)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:md5Digest))(SimpleName:reset)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:md5Digest))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:localMd5)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:md5Digest))(SimpleName:digest))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HashWriter))(SimpleName:compareHash)(METHOD_INVOCATION_ARGUMENTS(SimpleName:md5)(SimpleName:localMd5)))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:offset)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapBlock))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:r32)))(INFIX_EXPRESSION_OPERATOR:*)(QualifiedName:HashWriter.blockSize))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rNewFile))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(SimpleName:offset))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rNewFile))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rangesOk))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Range))(SimpleName:offset)(InfixExpression(SimpleName:offset)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:HashWriter.blockSize))))))))))(ExpressionStatement(Assignment(SimpleName:v)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fb))(SimpleName:read))))(ExpressionStatement(PostfixExpression(SimpleName:start)(POSTFIX_EXPRESSION_OPERATOR:++)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:arraycopy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:1)(SimpleName:buffer)(NumberLiteral:0)(InfixExpression(QualifiedName:buffer.length)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:buffer)(InfixExpression(QualifiedName:buffer.length)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:byte)(SimpleName:v))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksum))(SimpleName:roll)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:byte)(SimpleName:v)))))(ExpressionStatement(PostfixExpression(SimpleName:end)(POSTFIX_EXPRESSION_OPERATOR:++))))(InfixExpression(SimpleName:v)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fb))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rangesOk))(SimpleName:dump)))(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Range)))(VariableDeclarationFragment(SimpleName:unusedRanges)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rangesOk))(SimpleName:getUnusedRanges))))(VariableDeclarationStatement(SimpleType(SimpleName:DataInputStream))(VariableDeclarationFragment(SimpleName:zIn)(MethodInvocation(SimpleName:getContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:remotePath)(SimpleName:remoteName)(SimpleName:unusedRanges)(SimpleName:token)))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedOutputStream))(VariableDeclarationFragment(SimpleName:fOut)(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:localFile)))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:size)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unusedRanges))(SimpleName:size))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:size))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Range))(VariableDeclarationFragment(SimpleName:range)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unusedRanges))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rNewFile))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:range))(SimpleName:getStart)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:b)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:range))(SimpleName:size))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zIn))(SimpleName:readFully)(METHOD_INVOCATION_ARGUMENTS(SimpleName:b))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rNewFile))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:b))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fOut))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zIn))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rNewFile))(SimpleName:close)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:fileLocalHash)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HashWriter))(SimpleName:getHash)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newFile)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HashWriter))(SimpleName:compareHash)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileHash)(SimpleName:fileLocalHash))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:rm)(METHOD_INVOCATION_ARGUMENTS(SimpleName:localFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:mv)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newFile)(SimpleName:localFile))))))))