(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(SimpleType(SimpleName:TriggerHistory))(SimpleName:rebuildTriggerIfNecessary)(SingleVariableDeclaration(SimpleType(SimpleName:StringBuilder))(SimpleName:sqlBuffer))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:forceRebuild))(SingleVariableDeclaration(SimpleType(SimpleName:Trigger))(SimpleName:trigger))(SingleVariableDeclaration(SimpleType(SimpleName:DataEventType))(SimpleName:dmlType))(SingleVariableDeclaration(SimpleType(SimpleName:TriggerReBuildReason))(SimpleName:reason))(SingleVariableDeclaration(SimpleType(SimpleName:TriggerHistory))(SimpleName:oldhist))(SingleVariableDeclaration(SimpleType(SimpleName:TriggerHistory))(SimpleName:hist))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:triggerIsActive))(SingleVariableDeclaration(SimpleType(SimpleName:Table))(SimpleName:table))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:triggerExists)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:triggerRemoved)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:TriggerHistory))(VariableDeclarationFragment(SimpleName:newTriggerHist)(ClassInstanceCreation(SimpleType(SimpleName:TriggerHistory))(SimpleName:table)(SimpleName:trigger)(SimpleName:reason))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:maxTriggerNameLength)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:symmetricDialect))(SimpleName:getMaxTriggerNameLength))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTriggerHist))(SimpleName:setNameForInsertTrigger)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getTriggerName)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:DataEventType.INSERT)(SimpleName:maxTriggerNameLength)(SimpleName:trigger)(SimpleName:table))))(SimpleName:toUpperCase)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTriggerHist))(SimpleName:setNameForUpdateTrigger)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getTriggerName)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:DataEventType.UPDATE)(SimpleName:maxTriggerNameLength)(SimpleName:trigger)(SimpleName:table))))(SimpleName:toUpperCase)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTriggerHist))(SimpleName:setNameForDeleteTrigger)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getTriggerName)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:DataEventType.DELETE)(SimpleName:maxTriggerNameLength)(SimpleName:trigger)(SimpleName:table))))(SimpleName:toUpperCase)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:oldTriggerName)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:oldSourceSchema)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:oldCatalogName)(NullLiteral)))(IfStatement(InfixExpression(SimpleName:oldhist)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:oldTriggerName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldhist))(SimpleName:getTriggerNameForDmlType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dmlType)))))(ExpressionStatement(Assignment(SimpleName:oldSourceSchema)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldhist))(SimpleName:getSourceSchemaName))))(ExpressionStatement(Assignment(SimpleName:oldCatalogName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldhist))(SimpleName:getSourceCatalogName))))(ExpressionStatement(Assignment(SimpleName:triggerExists)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:symmetricDialect))(SimpleName:doesTriggerExist)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldCatalogName)(SimpleName:oldSourceSchema)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldhist))(SimpleName:getSourceTableName))(SimpleName:oldTriggerName))))))(Block(ExpressionStatement(Assignment(SimpleName:oldTriggerName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTriggerHist))(SimpleName:getTriggerNameForDmlType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dmlType)))))(ExpressionStatement(Assignment(SimpleName:oldSourceSchema)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getSourceSchemaName))))(ExpressionStatement(Assignment(SimpleName:oldCatalogName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getSourceCatalogName))))(ExpressionStatement(Assignment(SimpleName:triggerExists)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:symmetricDialect))(SimpleName:doesTriggerExist)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldCatalogName)(SimpleName:oldSourceSchema)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getSourceTableName))(SimpleName:oldTriggerName)))))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:triggerExists))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:forceRebuild))(Block(ExpressionStatement(Assignment(SimpleName:reason)(ASSIGNMENT_OPERATOR:=)(QualifiedName:TriggerReBuildReason.TRIGGERS_MISSING)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:forceRebuild)(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:triggerIsActive))))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:triggerExists))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:symmetricDialect))(SimpleName:removeTrigger)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sqlBuffer)(SimpleName:oldCatalogName)(SimpleName:oldSourceSchema)(SimpleName:oldTriggerName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getSourceTableName))(SimpleName:oldhist))))(ExpressionStatement(Assignment(SimpleName:triggerExists)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(ExpressionStatement(Assignment(SimpleName:triggerRemoved)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isDeadTrigger)(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:isSyncOnInsert)))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:isSyncOnUpdate)))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:isSyncOnDelete))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:hist)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(InfixExpression(InfixExpression(SimpleName:oldhist)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:triggerExists))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:triggerIsActive))))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(SimpleName:isDeadTrigger)(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:forceRebuild))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:insert)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newTriggerHist))))(ExpressionStatement(Assignment(SimpleName:hist)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getNewestTriggerHistoryForTrigger)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getTriggerId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getSourceCatalogName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getSourceSchemaName))(ConditionalExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:isSourceTableNameWildcarded))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:table))(SimpleName:getName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getSourceTableName)))))))))(TryStatement(Block(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:triggerExists))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:triggerIsActive))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:symmetricDialect))(SimpleName:createTrigger)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sqlBuffer)(SimpleName:dmlType)(SimpleName:trigger)(SimpleName:hist)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:configurationService))(SimpleName:getChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trigger))(SimpleName:getChannelId))))(SimpleName:tablePrefix)(SimpleName:table))))(IfStatement(SimpleName:triggerRemoved)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:statisticManager))(SimpleName:incrementTriggersRebuiltCount)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:statisticManager))(SimpleName:incrementTriggersCreatedCount)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))))(IfStatement(SimpleName:triggerRemoved)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:statisticManager))(SimpleName:incrementTriggersRemovedCount)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RuntimeException))(SimpleName:ex))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:symmetricDialect))(SimpleName:doesTriggerExist)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hist))(SimpleName:getSourceCatalogName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hist))(SimpleName:getSourceSchemaName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hist))(SimpleName:getSourceTableName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hist))(SimpleName:getTriggerNameForDmlType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dmlType))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hist))(SimpleName:getTriggerHistoryId)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hist))(SimpleName:setErrorMessage)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getMessage)))))(ExpressionStatement(MethodInvocation(SimpleName:inactivateTriggerHistory)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hist))))))(ThrowStatement(SimpleName:ex)))))(ReturnStatement(SimpleName:hist))))))