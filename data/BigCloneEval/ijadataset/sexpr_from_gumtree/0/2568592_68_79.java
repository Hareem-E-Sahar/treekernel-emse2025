(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(SimpleType(SimpleName:RpcService))(SimpleName:getService)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:request))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpSession))(VariableDeclarationFragment(SimpleName:session)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getSession)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:key)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getPathInfo))))(VariableDeclarationStatement(SimpleType(SimpleName:RpcService))(VariableDeclarationFragment(SimpleName:service)(CastExpression(SimpleType(SimpleName:RpcService))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key))))))(IfStatement(InfixExpression(SimpleName:service)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:services))(SimpleName:containsKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:Exception))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:key)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Constructor))(WildcardType(SimpleType(SimpleName:RpcService))))(VariableDeclarationFragment(SimpleName:constructor)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:services))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key))))(SimpleName:getConstructor)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:String)))(TypeLiteral(SimpleType(SimpleName:Config)))))))(ExpressionStatement(Assignment(SimpleName:service)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:constructor))(SimpleName:newInstance)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRemoteUser))(SimpleName:config)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key)(SimpleName:service))))))(ReturnStatement(SimpleName:service))))))