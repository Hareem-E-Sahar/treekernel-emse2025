(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(SimpleType(SimpleName:HttpURLConnection))(SimpleName:frndTrySend)(SingleVariableDeclaration(SimpleType(SimpleName:HttpURLConnection))(SimpleName:h))(SimpleType(SimpleName:OAIException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpURLConnection))(VariableDeclarationFragment(SimpleName:http)(SimpleName:h)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:done)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:GregorianCalendar))(VariableDeclarationFragment(SimpleName:sendTime)(ClassInstanceCreation(SimpleType(SimpleName:GregorianCalendar)))))(VariableDeclarationStatement(SimpleType(SimpleName:GregorianCalendar))(VariableDeclarationFragment(SimpleName:testTime)(ClassInstanceCreation(SimpleType(SimpleName:GregorianCalendar)))))(VariableDeclarationStatement(SimpleType(SimpleName:GregorianCalendar))(VariableDeclarationFragment(SimpleName:retryTime)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:retryAfter)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:retryCount)(NumberLiteral:0)))(DoStatement(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:strUserAgent))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:strFrom))))(IfStatement(InfixExpression(InfixExpression(SimpleName:strUser)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:strUser))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:encodedPassword)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(InfixExpression(SimpleName:strUser)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:strPassword))))(SimpleName:getBytes))))(VariableDeclarationStatement(SimpleType(SimpleName:BASE64Encoder))(VariableDeclarationFragment(SimpleName:encoder)(ClassInstanceCreation(SimpleType(SimpleName:BASE64Encoder)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:encoder))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:encodedPassword)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sendTime))(SimpleName:setTime)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:connect)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:getResponseCode))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:HttpURLConnection.HTTP_OK))(Block(ExpressionStatement(Assignment(SimpleName:done)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:getResponseCode))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:HttpURLConnection.HTTP_UNAVAILABLE))(Block(ExpressionStatement(PostfixExpression(SimpleName:retryCount)(POSTFIX_EXPRESSION_OPERATOR:++)))(IfStatement(InfixExpression(SimpleName:retryCount)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:iRetryLimit))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.RETRY_LIMIT_ERR)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:iRetryLimit)(StringLiteral:<STR>)))))(Block(ExpressionStatement(Assignment(SimpleName:retryAfter)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:getHeaderField)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:retryAfter)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.RETRY_AFTER_ERR)(StringLiteral:<STR>))))(Block(TryStatement(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:sec)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:retryAfter)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sendTime))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.SECOND)(SimpleName:sec))))(ExpressionStatement(Assignment(SimpleName:retryTime)(ASSIGNMENT_OPERATOR:=)(SimpleName:sendTime))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NumberFormatException))(SimpleName:ne))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Date))(VariableDeclarationFragment(SimpleName:retryDate)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DateFormat))(SimpleName:getDateInstance)))(SimpleName:parse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:retryAfter)))))(ExpressionStatement(Assignment(SimpleName:retryTime)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:GregorianCalendar)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:retryTime))(SimpleName:setTime)(METHOD_INVOCATION_ARGUMENTS(SimpleName:retryDate)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ParseException))(SimpleName:pe))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.CRITICAL_ERR)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pe))(SimpleName:getMessage))))))))))(IfStatement(InfixExpression(SimpleName:retryTime)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:testTime))(SimpleName:setTime)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:testTime))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.MINUTE)(SimpleName:iMaxRetryMinutes))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:retryTime))(SimpleName:getTime)))(SimpleName:before)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:testTime))(SimpleName:getTime))))(Block(TryStatement(Block(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:retryTime))(SimpleName:getTime)))(SimpleName:after)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:60000))))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:getURL))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:disconnect)))(ExpressionStatement(Assignment(SimpleName:http)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:HttpURLConnection))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openConnection))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:ie))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.CRITICAL_ERR)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ie))(SimpleName:getMessage))))))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.RETRY_AFTER_ERR)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:retryAfter)(StringLiteral:<STR>)))))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.RETRY_AFTER_ERR)(InfixExpression(SimpleName:retryAfter)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:getResponseCode))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:HttpURLConnection.HTTP_FORBIDDEN))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.CRITICAL_ERR)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:getResponseMessage)))))(Block(ExpressionStatement(PostfixExpression(SimpleName:retryCount)(POSTFIX_EXPRESSION_OPERATOR:++)))(IfStatement(InfixExpression(SimpleName:retryCount)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:iRetryLimit))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.RETRY_LIMIT_ERR)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:iRetryLimit)(StringLiteral:<STR>)))))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:sec)(InfixExpression(NumberLiteral:10)(INFIX_EXPRESSION_OPERATOR:*)(ParenthesizedExpression(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:exp)(METHOD_INVOCATION_ARGUMENTS(SimpleName:retryCount))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sendTime))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.SECOND)(SimpleName:sec))))(ExpressionStatement(Assignment(SimpleName:retryTime)(ASSIGNMENT_OPERATOR:=)(SimpleName:sendTime)))(TryStatement(Block(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:retryTime))(SimpleName:getTime)))(SimpleName:after)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:sec)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1000)))))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:getURL))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:http))(SimpleName:disconnect)))(ExpressionStatement(Assignment(SimpleName:http)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:HttpURLConnection))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openConnection))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:ie))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.CRITICAL_ERR)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ie))(SimpleName:getMessage))))))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ie))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OAIException))(QualifiedName:OAIException.CRITICAL_ERR)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ie))(SimpleName:getMessage))))))))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:done)))(ReturnStatement(SimpleName:http))))))