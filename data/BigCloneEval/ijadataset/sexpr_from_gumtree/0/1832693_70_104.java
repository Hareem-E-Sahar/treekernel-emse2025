(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:testDiscoOnBadResponder)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ReadBufferChannel))(VariableDeclarationFragment(SimpleName:reader)(ClassInstanceCreation(SimpleType(SimpleName:ReadBufferChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(StringLiteral:<STR>))))(SimpleName:getBytes)))))(VariableDeclarationStatement(SimpleType(SimpleName:WriteBufferChannel))(VariableDeclarationFragment(SimpleName:writer)(ClassInstanceCreation(SimpleType(SimpleName:WriteBufferChannel))(NumberLiteral:2048))))(VariableDeclarationStatement(SimpleType(SimpleName:MultiplexingSocket))(VariableDeclarationFragment(SimpleName:socket)(ClassInstanceCreation(SimpleType(SimpleName:MultiplexingSocket))(SimpleName:reader)(SimpleName:writer))))(VariableDeclarationStatement(SimpleType(SimpleName:Properties))(VariableDeclarationFragment(SimpleName:outRequestProps)(ClassInstanceCreation(SimpleType(SimpleName:Properties)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outRequestProps))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:Properties))(VariableDeclarationFragment(SimpleName:outResponseProps)(ClassInstanceCreation(SimpleType(SimpleName:Properties)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outResponseProps))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:StubHandshakeResponder))(VariableDeclarationFragment(SimpleName:responder)(ClassInstanceCreation(SimpleType(SimpleName:StubHandshakeResponder))(ClassInstanceCreation(SimpleType(SimpleName:StubHandshakeResponse))(NumberLiteral:322)(StringLiteral:<STR>)(SimpleName:outResponseProps)))))(VariableDeclarationStatement(SimpleType(SimpleName:StubHandshakeObserver))(VariableDeclarationFragment(SimpleName:observer)(ClassInstanceCreation(SimpleType(SimpleName:StubHandshakeObserver)))))(VariableDeclarationStatement(SimpleType(SimpleName:Handshaker))(VariableDeclarationFragment(SimpleName:shaker)(ClassInstanceCreation(SimpleType(SimpleName:AsyncOutgoingHandshaker))(SimpleName:outRequestProps)(SimpleName:responder)(SimpleName:socket)(SimpleName:observer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:shaker))(SimpleName:shake)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:exchange)))(ExpressionStatement(MethodInvocation(SimpleName:assertTrue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:observer))(SimpleName:isNoGOK)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:322)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:observer))(SimpleName:getCode)))))(ExpressionStatement(MethodInvocation(SimpleName:assertFalse)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:observer))(SimpleName:isBadHandshake)))))(ExpressionStatement(MethodInvocation(SimpleName:assertFalse)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:observer))(SimpleName:isHandshakeFinished)))))(ExpressionStatement(MethodInvocation(SimpleName:assertNull)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:observer))(SimpleName:getShaker)))))(VariableDeclarationStatement(SimpleType(SimpleName:HandshakeResponse))(VariableDeclarationFragment(SimpleName:responseTo)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responder))(SimpleName:getRespondedTo))))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:respondedTo)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responder))(SimpleName:getRespondedToProps))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:respondedTo))(SimpleName:size)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:respondedTo))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:200)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseTo))(SimpleName:getStatusCode)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseTo))(SimpleName:getStatusMessage)))))(ExpressionStatement(MethodInvocation(SimpleName:assertTrue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responder))(SimpleName:isOutgoing)))))(VariableDeclarationStatement(SimpleType(SimpleName:HandshakeResponse))(VariableDeclarationFragment(SimpleName:read)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:shaker))(SimpleName:getReadHeaders))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:read))(SimpleName:props)))(SimpleName:size)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:read))(SimpleName:props)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:HandshakeResponse))(VariableDeclarationFragment(SimpleName:written)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:shaker))(SimpleName:getWrittenHeaders))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:written))(SimpleName:props)))(SimpleName:size)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:written))(SimpleName:props)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:written))(SimpleName:props)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:buffer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:getBuffer))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(ClassInstanceCreation(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:array))(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:limit))))))))))