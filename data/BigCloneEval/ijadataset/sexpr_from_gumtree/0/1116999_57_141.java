(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:sendMail)(SingleVariableDeclaration(SimpleType(SimpleName:MailMessage))(SimpleName:mail))(SimpleType(SimpleName:ProviderException))(Block(TryStatement(Block(IfStatement(InfixExpression(SimpleName:mailSession)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Properties))(VariableDeclarationFragment(SimpleName:mailProps)(ClassInstanceCreation(SimpleType(SimpleName:Properties)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mailProps))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:mailHost))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getBounceAddress))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getBounceAddress)))(SimpleName:trim)))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mailProps))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getBounceAddress)))))))(IfStatement(SimpleName:useMailAuthenticator)(Block(ExpressionStatement(Assignment(SimpleName:mailSession)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Session))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mailProps)(ClassInstanceCreation(SimpleType(SimpleName:SMTPAuthenticator))(SimpleName:userName)(SimpleName:password)))))))(Block(ExpressionStatement(Assignment(SimpleName:mailSession)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Session))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mailProps)(NullLiteral)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Multipart))(VariableDeclarationFragment(SimpleName:multipart)(ClassInstanceCreation(SimpleType(SimpleName:MimeMultipart)))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getText))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getByteArrayDataSource))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getByteArrayDataSource)))(SimpleName:getContentType)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ReportEngineOutput.CONTENT_TYPE_TEXT)))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MimeBodyPart))(VariableDeclarationFragment(SimpleName:mbpText)(ClassInstanceCreation(SimpleType(SimpleName:MimeBodyPart)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mbpText))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getText)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:multipart))(SimpleName:addBodyPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mbpText))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:attachments)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getAttachments))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:attachments))(SimpleName:size)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileAttachment)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:attachments))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)))))(VariableDeclarationStatement(SimpleType(SimpleName:FileDataSource))(VariableDeclarationFragment(SimpleName:source)(ClassInstanceCreation(SimpleType(SimpleName:FileDataSource))(SimpleName:fileAttachment))))(VariableDeclarationStatement(SimpleType(SimpleName:MimeBodyPart))(VariableDeclarationFragment(SimpleName:mbpAttachment)(ClassInstanceCreation(SimpleType(SimpleName:MimeBodyPart)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mbpAttachment))(SimpleName:setDataHandler)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DataHandler))(SimpleName:source)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mbpAttachment))(SimpleName:setFileName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileAttachment))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:multipart))(SimpleName:addBodyPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mbpAttachment))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getByteArrayDataSource))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:contentType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getByteArrayDataSource)))(SimpleName:getContentType))))(IfStatement(InfixExpression(InfixExpression(SimpleName:contentType)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contentType))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ReportEngineOutput.CONTENT_TYPE_HTML)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contentType))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ReportEngineOutput.CONTENT_TYPE_TEXT))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Multipart))(VariableDeclarationFragment(SimpleName:htmlMP)(ClassInstanceCreation(SimpleType(SimpleName:MimeMultipart))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:MimeBodyPart))(VariableDeclarationFragment(SimpleName:htmlBP)(ClassInstanceCreation(SimpleType(SimpleName:MimeBodyPart)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:htmlBP))(SimpleName:setDataHandler)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DataHandler))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getByteArrayDataSource))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:htmlMP))(SimpleName:addBodyPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:htmlBP))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:ByteArrayDataSource)))(VariableDeclarationFragment(SimpleName:images)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getHtmlImageDataSources))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:images))(SimpleName:size)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:DataSource))(VariableDeclarationFragment(SimpleName:imageDS)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:images))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)))))(VariableDeclarationStatement(SimpleType(SimpleName:MimeBodyPart))(VariableDeclarationFragment(SimpleName:imageBodyPart)(ClassInstanceCreation(SimpleType(SimpleName:MimeBodyPart)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageBodyPart))(SimpleName:setFileName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageDS))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageBodyPart))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageDS))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageBodyPart))(SimpleName:setDataHandler)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DataHandler))(SimpleName:imageDS)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageBodyPart))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageDS))(SimpleName:getName))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageBodyPart))(SimpleName:setDisposition)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:javax.mail.Part.INLINE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:htmlMP))(SimpleName:addBodyPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageBodyPart))))))(VariableDeclarationStatement(SimpleType(SimpleName:BodyPart))(VariableDeclarationFragment(SimpleName:completeHtmlBP)(ClassInstanceCreation(SimpleType(SimpleName:MimeBodyPart)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:completeHtmlBP))(SimpleName:setContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:htmlMP))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:multipart))(SimpleName:addBodyPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:completeHtmlBP)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MimeBodyPart))(VariableDeclarationFragment(SimpleName:mbpAttachment)(ClassInstanceCreation(SimpleType(SimpleName:MimeBodyPart)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mbpAttachment))(SimpleName:setDataHandler)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DataHandler))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getByteArrayDataSource))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mbpAttachment))(SimpleName:setFileName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getByteArrayDataSource)))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:multipart))(SimpleName:addBodyPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mbpAttachment))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Message))(VariableDeclarationFragment(SimpleName:msg)(ClassInstanceCreation(SimpleType(SimpleName:MimeMessage))(SimpleName:mailSession))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msg))(SimpleName:setFrom)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:InternetAddress))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getSender))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msg))(SimpleName:setSubject)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getSubject)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msg))(SimpleName:setContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:multipart))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msg))(SimpleName:setSentDate)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:recipients)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mail))(SimpleName:getRecipients))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipients))(SimpleName:size)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:RecipientType))(VariableDeclarationFragment(SimpleName:recipientType)(QualifiedName:RecipientType.TO)))(VariableDeclarationStatement(SimpleType(SimpleName:StringTokenizer))(VariableDeclarationFragment(SimpleName:tokenizer)(ClassInstanceCreation(SimpleType(SimpleName:StringTokenizer))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipients))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)))(StringLiteral:<STR>))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tokenizer))(SimpleName:countTokens))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:2))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:type)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tokenizer))(SimpleName:nextToken))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(SimpleName:type)))(Block(ExpressionStatement(Assignment(SimpleName:recipientType)(ASSIGNMENT_OPERATOR:=)(QualifiedName:RecipientType.TO))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(SimpleName:type)))(Block(ExpressionStatement(Assignment(SimpleName:recipientType)(ASSIGNMENT_OPERATOR:=)(QualifiedName:RecipientType.CC))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(SimpleName:type)))(Block(ExpressionStatement(Assignment(SimpleName:recipientType)(ASSIGNMENT_OPERATOR:=)(QualifiedName:RecipientType.BCC)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msg))(SimpleName:addRecipient)(METHOD_INVOCATION_ARGUMENTS(SimpleName:recipientType)(ClassInstanceCreation(SimpleType(SimpleName:InternetAddress))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tokenizer))(SimpleName:nextToken))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Transport))(SimpleName:send)(METHOD_INVOCATION_ARGUMENTS(SimpleName:msg)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:toString)))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ProviderException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))))))))