(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:exportImage)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:fileName))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Device))(VariableDeclarationFragment(SimpleName:device)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getGraphicalViewer)))(SimpleName:getControl)))(SimpleName:getDisplay))))(VariableDeclarationStatement(SimpleType(SimpleName:LayerManager))(VariableDeclarationFragment(SimpleName:lm)(CastExpression(SimpleType(SimpleName:LayerManager))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getGraphicalViewer)))(SimpleName:getEditPartRegistry)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LayerManager.ID))))))(VariableDeclarationStatement(SimpleType(SimpleName:IFigure))(VariableDeclarationFragment(SimpleName:figure)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lm))(SimpleName:getLayer)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LayerConstants.PRINTABLE_LAYERS)))))(VariableDeclarationStatement(SimpleType(SimpleName:Rectangle))(VariableDeclarationFragment(SimpleName:r)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figure))(SimpleName:getClientArea))))(VariableDeclarationStatement(SimpleType(SimpleName:Image))(VariableDeclarationFragment(SimpleName:image)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:GC))(VariableDeclarationFragment(SimpleName:gc)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Graphics))(VariableDeclarationFragment(SimpleName:g)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:image)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Image))(SimpleName:device)(QualifiedName:r.width)(QualifiedName:r.height))))(ExpressionStatement(Assignment(SimpleName:gc)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:GC))(SimpleName:image))))(ExpressionStatement(Assignment(SimpleName:g)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:SWTGraphics))(SimpleName:gc))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:g))(SimpleName:translate)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:r.x)(INFIX_EXPRESSION_OPERATOR:*)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(InfixExpression(QualifiedName:r.y)(INFIX_EXPRESSION_OPERATOR:*)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figure))(SimpleName:paint)(METHOD_INVOCATION_ARGUMENTS(SimpleName:g))))(VariableDeclarationStatement(SimpleType(SimpleName:ImageLoader))(VariableDeclarationFragment(SimpleName:imageLoader)(ClassInstanceCreation(SimpleType(SimpleName:ImageLoader)))))(ExpressionStatement(Assignment(QualifiedName:imageLoader.data)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(SimpleType(SimpleName:ImageData))(Dimension))(ArrayInitializer(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getImageData))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageLoader))(SimpleName:save)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileName)(MethodInvocation(SimpleName:getImageFormat)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileName)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))))(Block(IfStatement(InfixExpression(SimpleName:g)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:g))(SimpleName:dispose)))))(IfStatement(InfixExpression(SimpleName:gc)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:gc))(SimpleName:dispose)))))(IfStatement(InfixExpression(SimpleName:image)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:dispose)))))))))))