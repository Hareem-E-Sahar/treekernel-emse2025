(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(PrimitiveType:boolean)(SimpleName:handleFileUploads)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:req))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:resp))(SimpleType(SimpleName:ServletException))(SimpleType(SimpleName:IOException))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getPathInfo)))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:beginRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Map))(SimpleType(SimpleName:String))(ArrayType(SimpleType(SimpleName:String))(Dimension)))(VariableDeclarationFragment(SimpleName:parameters)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getParameterMap))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:containerName)(ArrayAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parameters))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(NumberLiteral:0))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:controlId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parameters))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(NumberLiteral:0))))))(VariableDeclarationStatement(SimpleType(SimpleName:FileItemFactory))(VariableDeclarationFragment(SimpleName:factory)(ClassInstanceCreation(SimpleType(SimpleName:DiskFileItemFactory))(SimpleName:fileUploadThreshold)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:fileUploadRepository)))))(VariableDeclarationStatement(SimpleType(SimpleName:ServletFileUpload))(VariableDeclarationFragment(SimpleName:upload)(ClassInstanceCreation(SimpleType(SimpleName:ServletFileUpload))(SimpleName:factory))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:FileItem)))(VariableDeclarationFragment(SimpleName:items)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:upload))(SimpleName:parseRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)))))(VariableDeclarationStatement(SimpleType(SimpleName:FileItem))(VariableDeclarationFragment(SimpleName:item)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:items))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))(VariableDeclarationStatement(SimpleType(SimpleName:UploadedFile))(VariableDeclarationFragment(SimpleName:uploadedFile)(ClassInstanceCreation(SimpleType(SimpleName:UploadedFile)))))(ExpressionStatement(Assignment(QualifiedName:uploadedFile.name)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:item))(SimpleName:getName))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:bos)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:BUFFER_SIZE)(NumberLiteral:10240)))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:is)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:item))(SimpleName:getInputStream))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)(NumberLiteral:0)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buffer)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:BUFFER_SIZE))))))(WhileStatement(InfixExpression(NumberLiteral:0)(INFIX_EXPRESSION_OPERATOR:<)(ParenthesizedExpression(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:0)(SimpleName:BUFFER_SIZE))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:0)(SimpleName:read))))))(ExpressionStatement(Assignment(QualifiedName:uploadedFile.content)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:toByteArray))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:JSONObject)))(VariableDeclarationFragment(SimpleName:eventsToSend)(MethodInvocation(SimpleName:dispatchEvent)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getApplication)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)))(SimpleName:containerName)(SimpleName:controlId)(StringLiteral:<STR>)(SimpleName:uploadedFile)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:setCharacterEncoding)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:PrintWriter))(VariableDeclarationFragment(SimpleName:pw)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:getWriter))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:eventsToSend))(SimpleName:toString))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:response)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pw))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pw))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:response)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:FileUploadException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:e)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:endRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req))))))(ReturnStatement(BooleanLiteral:true))))(ReturnStatement(BooleanLiteral:false))))))