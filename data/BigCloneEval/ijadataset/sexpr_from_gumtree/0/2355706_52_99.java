(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(PrimitiveType:void)(SimpleName:writeReportsToOutputStream)(SingleVariableDeclaration(SimpleType(SimpleName:OutputStream))(SimpleName:pOut))(SingleVariableDeclaration(SimpleType(SimpleName:ReportGenerator))(SimpleName:pReportFactory))(SingleVariableDeclaration(SimpleType(SimpleName:ReportFactoryParameters))(SimpleName:pReportParams))(SingleVariableDeclaration(SimpleType(SimpleName:DataContainer))(SimpleName:pDataContainer))(SimpleType(SimpleName:ReportFactoryException))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:vOut)(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(SimpleName:pOut))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:isZip))(Block(ExpressionStatement(Assignment(SimpleName:vOut)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(SimpleName:pOut))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:vIndex)(NumberLiteral:0)))(InfixExpression(SimpleName:vIndex)(INFIX_EXPRESSION_OPERATOR:<)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:getReportIDs))(SimpleName:length)))(PostfixExpression(SimpleName:vIndex)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:vIdReport)(ArrayAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:getReportIDs))(SimpleName:vIndex))))(VariableDeclarationStatement(SimpleType(SimpleName:IReportConfig))(VariableDeclarationFragment(SimpleName:vReportConfig)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportFactory))(SimpleName:getConfiguration)))(SimpleName:getReport)(METHOD_INVOCATION_ARGUMENTS(SimpleName:vIdReport)))))(IfStatement(InfixExpression(SimpleName:vReportConfig)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:vConfigurationName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:getConfigurationName))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ReportFactoryException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:vIdReport)(StringLiteral:<STR>)(SimpleName:vConfigurationName)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:vFilename)(ArrayAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:getFilenames))(SimpleName:vIndex))))(IfStatement(InfixExpression(InfixExpression(SimpleName:vFilename)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vFilename))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:vIdReport)))))(Block(ExpressionStatement(Assignment(SimpleName:vFilename)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:defaultString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vReportConfig))(SimpleName:getDefaultFileName))(SimpleName:vIdReport)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:isDateSuffixe))(Block(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:vNewFilename)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vNewFilename))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vFilename))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vFilename))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vNewFilename))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(ClassInstanceCreation(SimpleType(SimpleName:Date)))))(SimpleName:getTime)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vNewFilename))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vFilename))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(Assignment(SimpleName:vFilename)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vNewFilename))(SimpleName:toString))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:isZip))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:vZipEntry)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(SimpleName:vFilename))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:ZipOutputStream))(SimpleName:vOut))))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:vZipEntry))))))(IfStatement(InfixExpression(SimpleName:pDataContainer)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportFactory))(SimpleName:process)(METHOD_INVOCATION_ARGUMENTS(SimpleName:vIdReport)(SimpleName:pDataContainer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:getParameterValues))(SimpleName:vOut)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportFactory))(SimpleName:process)(METHOD_INVOCATION_ARGUMENTS(SimpleName:vIdReport)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:getParameterValues))(SimpleName:vOut))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:isZip))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:ZipOutputStream))(SimpleName:vOut))))(SimpleName:closeEntry)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:vFilename)(StringLiteral:<STR>)))))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pReportParams))(SimpleName:isZip))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:ZipOutputStream))(SimpleName:vOut))))(SimpleName:finish))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ReportFactoryException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e))))))))))