(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:export)(SingleVariableDeclaration(SimpleType(SimpleName:AbstractPage))(SimpleName:page))(SingleVariableDeclaration(SimpleType(SimpleName:Notifiable))(SimpleName:notifiable))(Block(IfStatement(InfixExpression(SimpleName:page)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ReturnStatement))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:locationManager)))(SimpleName:exportable)(METHOD_INVOCATION_ARGUMENTS(SimpleName:page))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:message)(METHOD_INVOCATION_ARGUMENTS(SimpleName:notifiable)(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(NullLiteral))))(ReturnStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(NullLiteral))))(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:VelocityContext))(VariableDeclarationFragment(SimpleName:context)(ClassInstanceCreation(SimpleType(SimpleName:VelocityContext)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Template))(VariableDeclarationFragment(SimpleName:template)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:templatesManager)))(SimpleName:getTemplate)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:page))(SimpleName:getSpaceKey))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:body)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:wikiStyleRenderer)))(SimpleName:convertWikiToXHtml)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:page))(SimpleName:toPageContext))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:page))(SimpleName:getContent))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:styleUri)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:locationManager)))(SimpleName:getLocation)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:page))(SimpleName:getSpace))(StringLiteral:<STR>))))(SimpleName:toString))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:confluenceUrl)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:configurationManager)))(SimpleName:getConfluenceUrl))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ViewPageAction))(VariableDeclarationFragment(SimpleName:action)(ClassInstanceCreation(SimpleType(SimpleName:ViewPageAction)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ContainerManager))(SimpleName:autowireComponent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:action))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:action))(SimpleName:setPage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:page))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(ClassInstanceCreation(SimpleType(SimpleName:GeneralUtil))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(ClassInstanceCreation(SimpleType(SimpleName:TextUtils))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(ClassInstanceCreation(SimpleType(SimpleName:ExportUtils))(FieldAccess(ThisExpression)(SimpleName:configurationManager))(FieldAccess(ThisExpression)(SimpleName:wikiStyleRenderer))(FieldAccess(ThisExpression)(SimpleName:pluginAccessor))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(FieldAccess(ThisExpression)(SimpleName:pageManager)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:confluenceUrl))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:styleUri))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:action))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:page))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:body))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ActionContext))(SimpleName:getContext)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:AC_REQUEST_KEY))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:pageFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:locationManager)))(SimpleName:getFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:page)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:spaceDir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageFile))(SimpleName:getParentFile))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spaceDir))(SimpleName:isDirectory)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spaceDir))(SimpleName:mkdirs))))(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:StringWriter))(VariableDeclarationFragment(SimpleName:writer)(ClassInstanceCreation(SimpleType(SimpleName:StringWriter)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:template))(SimpleName:merge)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context)(SimpleName:writer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:close)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ExportBeautifier))(VariableDeclarationFragment(SimpleName:beautifier)(ClassInstanceCreation(SimpleType(SimpleName:ExportBeautifier))(SimpleName:page)(FieldAccess(ThisExpression)(SimpleName:configurationManager))(FieldAccess(ThisExpression)(SimpleName:pageManager))(FieldAccess(ThisExpression)(SimpleName:spaceManager))(FieldAccess(ThisExpression)(SimpleName:locationManager)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:beautifier))(SimpleName:beautify)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:toString))(SimpleName:pageFile)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:MethodInvocationException))(SimpleName:exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Throwable))(VariableDeclarationFragment(SimpleName:throwable)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exception))(SimpleName:getWrappedThrowable))))(IfStatement(InfixExpression(SimpleName:throwable)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:notifiable)(SimpleName:throwable)(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(NullLiteral)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:notifiable)(SimpleName:exception)(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.err))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exception))(SimpleName:getReferenceName)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:exception))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:notifiable)(SimpleName:exception)(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(NullLiteral)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:iterator)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:page))(SimpleName:getAttachments)))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iterator))(SimpleName:hasNext))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Attachment))(VariableDeclarationFragment(SimpleName:attachment)(CastExpression(SimpleType(SimpleName:Attachment))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iterator))(SimpleName:next)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:aFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:locationManager)))(SimpleName:getFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:attachment)(BooleanLiteral:false)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:aDir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:aFile))(SimpleName:getParentFile))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:aDir))(SimpleName:isDirectory)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:aDir))(SimpleName:mkdirs))))(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:aInput)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:attachment))(SimpleName:getContentsAsStream))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:aInput)(SimpleName:aFile)(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:aInput))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:aFile))(SimpleName:getName))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:exception))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:notifiable)(SimpleName:exception)(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:aFile))(SimpleName:getName))))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:thumbnailManager)))(SimpleName:isThumbnailable)(METHOD_INVOCATION_ARGUMENTS(SimpleName:attachment))))(ContinueStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:thumbnailManager)))(SimpleName:getThumbnail)(METHOD_INVOCATION_ARGUMENTS(SimpleName:attachment))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:sFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:thumbnailManager)))(SimpleName:getThumbnailFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:attachment)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sFile))(SimpleName:exists))(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:tFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:locationManager)))(SimpleName:getFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:attachment)(BooleanLiteral:true)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:tDir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tFile))(SimpleName:getParentFile))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tDir))(SimpleName:isDirectory)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tDir))(SimpleName:mkdirs))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tFile))(SimpleName:exists))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tFile))(SimpleName:delete))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sFile)(SimpleName:tFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tFile))(SimpleName:getName))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:exception))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:notifiable)(SimpleName:exception)(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:aFile))(SimpleName:getName))))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:exception))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:notifiable)(SimpleName:exception)(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(NullLiteral)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:message)(METHOD_INVOCATION_ARGUMENTS(SimpleName:notifiable)(StringLiteral:<STR>)(NullLiteral)(SimpleName:page)(NullLiteral))))))))