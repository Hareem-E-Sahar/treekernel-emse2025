(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:actionShow)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:resourceStr)(MethodInvocation(SimpleName:getParamResource))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CmsStringUtil))(SimpleName:isNotEmpty)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getParamVersion))))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:result)(MethodInvocation(SimpleName:getHistoricalResourceContent)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getCms))(SimpleName:resourceStr)(MethodInvocation(SimpleName:getParamVersion))))))(IfStatement(InfixExpression(SimpleName:result)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:contentType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getResourceManager)))(SimpleName:getMimeType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resourceStr)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getCms)))(SimpleName:getRequestContext)))(SimpleName:getEncoding))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpServletResponse))(VariableDeclarationFragment(SimpleName:res)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getJsp)))(SimpleName:getResponse))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpServletRequest))(VariableDeclarationFragment(SimpleName:req)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getJsp)))(SimpleName:getRequest))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_CONTENT_DISPOSITION)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer))(StringLiteral:<STR>)))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resourceStr))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:setContentLength)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:result.length))))(VariableDeclarationStatement(SimpleType(SimpleName:CmsFlexController))(VariableDeclarationFragment(SimpleName:controller)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CmsFlexController))(SimpleName:getController)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)))))(ExpressionStatement(Assignment(SimpleName:res)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:controller))(SimpleName:getTopResponse))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:setContentType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:contentType))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getOutputStream)))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:result))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getOutputStream)))(SimpleName:flush))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:isInfoEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getLocalizedMessage)))))))(ReturnStatement)))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsResource))(VariableDeclarationFragment(SimpleName:resource)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:resource)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getCms)))(SimpleName:readResource)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resourceStr)(QualifiedName:CmsResourceFilter.ALL))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:CmsVfsResourceNotFoundException))(SimpleName:e))(Block)))(IfStatement(InfixExpression(SimpleName:resource)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resource))(SimpleName:getState)))(SimpleName:isDeleted))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:CmsVfsResourceNotFoundException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:container)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.ERR_RESOURCE_DELETED_2)(SimpleName:resourceStr)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getCms)))(SimpleName:getRequestContext)))(SimpleName:currentProject)))(SimpleName:getName))))))))(ExpressionStatement(MethodInvocation(SimpleName:autoTimeWarp)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resource))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:url)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getJsp)))(SimpleName:link)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resourceStr)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0)))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getCms)))(SimpleName:getRequestContext)))(SimpleName:currentProject)))(SimpleName:isOnlineProject)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:site)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getCms)))(SimpleName:getRequestContext)))(SimpleName:getSiteRoot))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CmsStringUtil))(SimpleName:isEmptyOrWhitespaceOnly)(METHOD_INVOCATION_ARGUMENTS(SimpleName:site)))(Block(ExpressionStatement(Assignment(SimpleName:site)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getSiteManager)))(SimpleName:getDefaultUri))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CmsStringUtil))(SimpleName:isEmptyOrWhitespaceOnly)(METHOD_INVOCATION_ARGUMENTS(SimpleName:site)))(Block(ExpressionStatement(Assignment(SimpleName:url)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getSiteManager)))(SimpleName:getWorkplaceServer))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:url)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getSiteManager)))(SimpleName:getSiteForSiteRoot)(METHOD_INVOCATION_ARGUMENTS(SimpleName:site)))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:url)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getSiteManager)))(SimpleName:getWorkplaceServer))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:url)))))(Block(ExpressionStatement(Assignment(SimpleName:url)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getSiteManager)))(SimpleName:getSiteForSiteRoot)(METHOD_INVOCATION_ARGUMENTS(SimpleName:site))))(SimpleName:getUrl))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:url))))))))(Block(ExpressionStatement(Assignment(SimpleName:url)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getSiteManager)))(SimpleName:getSiteForSiteRoot)(METHOD_INVOCATION_ARGUMENTS(SimpleName:site))))(SimpleName:getUrl))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:url))))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsStaticExportManager))(VariableDeclarationFragment(SimpleName:manager)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getStaticExportManager))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpURLConnection))(SimpleName:setFollowRedirects)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:exportUrl)(ClassInstanceCreation(SimpleType(SimpleName:URL))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getExportUrl))(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getRfsName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getCms))(SimpleName:resourceStr)))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpURLConnection))(VariableDeclarationFragment(SimpleName:urlcon)(CastExpression(SimpleType(SimpleName:HttpURLConnection))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportUrl))(SimpleName:openConnection)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestMethod)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_OPENCMS_EXPORT)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Boolean.TRUE))(SimpleName:toString)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getAcceptLanguageHeader))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_ACCEPT_LANGUAGE)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getAcceptLanguageHeader))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_ACCEPT_LANGUAGE)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getDefaultAcceptLanguageHeader)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getAcceptCharsetHeader))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_ACCEPT_CHARSET)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getAcceptCharsetHeader))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_ACCEPT_CHARSET)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getDefaultAcceptCharsetHeader)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:connect)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:getResponseCode)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:disconnect))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getLocalizedMessage))(SimpleName:e)))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getJsp)))(SimpleName:getResponse)))(SimpleName:sendRedirect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:url)))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:CmsVfsResourceNotFoundException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:container)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.ERR_RESOURCE_DOES_NOT_EXIST_3)(SimpleName:resourceStr)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getCms)))(SimpleName:getRequestContext)))(SimpleName:currentProject)))(SimpleName:getName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getCms)))(SimpleName:getRequestContext)))(SimpleName:getSiteRoot))))))))))))))