(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:boolean)(SimpleName:doThreadReferenceCmdset)(SingleVariableDeclaration(SimpleType(QualifiedName:lejos.nxt.debug.PacketStream))(SimpleName:in))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:handled)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:PacketStream))(VariableDeclarationFragment(SimpleName:ps)))(ExpressionStatement(Assignment(SimpleName:ps)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:PacketStream))(ThisExpression)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:id))(QualifiedName:Packet.Reply)(QualifiedName:Packet.ReplyNoError))))(VariableDeclarationStatement(SimpleType(SimpleName:Thread))(VariableDeclarationFragment(SimpleName:thread)))(VariableDeclarationStatement(SimpleType(QualifiedName:VM.VMThread))(VariableDeclarationFragment(SimpleName:vmThread)))(TryStatement(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:threadId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:readObjectId))))(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:obj)(MethodInvocation(SimpleName:memGetReference)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(SimpleName:threadId)))))(IfStatement(InstanceofExpression(SimpleName:obj)(SimpleType(SimpleName:Thread)))(Block(ExpressionStatement(Assignment(SimpleName:thread)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:Thread))(SimpleName:obj)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(SimpleName:sendErrorReply)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:INVALID_THREAD))))(ReturnStatement(BooleanLiteral:true))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:isSystemThread)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thread)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(SimpleName:sendErrorReply)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:INVALID_THREAD))))(ReturnStatement(BooleanLiteral:true)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:PacketStreamException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(SimpleName:sendErrorReply)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:INVALID_OBJECT))))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ReturnStatement(BooleanLiteral:true)))))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:cmd))(SwitchCase(SimpleName:TR_NAME))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thread))(SimpleName:getName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:name))))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(SimpleName:TR_SUSPEND))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM))(SimpleName:suspendThread)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thread))))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(SimpleName:TR_RESUME))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM))(SimpleName:resumeThread)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thread))))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(SimpleName:TR_STATUS))(ExpressionStatement(Assignment(SimpleName:vmThread)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM))(SimpleName:getVM)))(SimpleName:getVMThread)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thread)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:jdwpState)))(SwitchStatement(InfixExpression(QualifiedName:vmThread.state)(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0x7f))(SwitchCase(SimpleName:THREAD_STATE_NEW))(ExpressionStatement(Assignment(SimpleName:jdwpState)(ASSIGNMENT_OPERATOR:=)(SimpleName:JDWP_THREAD_STATUS_NOT_STARTED)))(BreakStatement)(SwitchCase(SimpleName:THREAD_STATE_STARTED))(SwitchCase(SimpleName:THREAD_STATE_RUNNING))(ExpressionStatement(Assignment(SimpleName:jdwpState)(ASSIGNMENT_OPERATOR:=)(SimpleName:JDWP_THREAD_STATUS_RUNNING)))(BreakStatement)(SwitchCase(SimpleName:THREAD_STATE_DEAD))(ExpressionStatement(Assignment(SimpleName:jdwpState)(ASSIGNMENT_OPERATOR:=)(SimpleName:JDWP_THREAD_STATUS_ZOMBIE)))(BreakStatement)(SwitchCase(SimpleName:THREAD_STATE_CONDVAR_WAITING))(SwitchCase(SimpleName:THREAD_STATE_JOIN))(ExpressionStatement(Assignment(SimpleName:jdwpState)(ASSIGNMENT_OPERATOR:=)(SimpleName:JDWP_THREAD_STATUS_WAIT)))(BreakStatement)(SwitchCase(SimpleName:THREAD_STATE_MON_WAITING))(SwitchCase(SimpleName:THREAD_STATE_SYSTEM_WAITING))(ExpressionStatement(Assignment(SimpleName:jdwpState)(ASSIGNMENT_OPERATOR:=)(SimpleName:JDWP_THREAD_STATUS_MONITOR)))(BreakStatement)(SwitchCase(SimpleName:THREAD_STATE_SLEEPING))(ExpressionStatement(Assignment(SimpleName:jdwpState)(ASSIGNMENT_OPERATOR:=)(SimpleName:JDWP_THREAD_STATUS_SLEEPING)))(BreakStatement)(SwitchCase)(ExpressionStatement(Assignment(SimpleName:jdwpState)(ASSIGNMENT_OPERATOR:=)(SimpleName:JDWP_THREAD_STATUS_UNKNOWN)))(BreakStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jdwpState))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(QualifiedName:vmThread.state)(INFIX_EXPRESSION_OPERATOR:&)(SimpleName:THREAD_STATE_SUSPENDED)))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(SimpleName:TR_FRAME_COUNT))(ExpressionStatement(Assignment(SimpleName:vmThread)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM))(SimpleName:getVM)))(SimpleName:getVMThread)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thread)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(QualifiedName:vmThread.state)(INFIX_EXPRESSION_OPERATOR:&)(SimpleName:THREAD_STATE_SUSPENDED)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(SimpleName:sendErrorReply)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:THREAD_NOT_SUSPENDED))))(ReturnStatement(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeInt)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:vmThread.stackFrameIndex)(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xFF)))))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(SimpleName:TR_FRAMES))(ExpressionStatement(Assignment(SimpleName:vmThread)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM))(SimpleName:getVM)))(SimpleName:getVMThread)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thread)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(QualifiedName:vmThread.state)(INFIX_EXPRESSION_OPERATOR:&)(SimpleName:THREAD_STATE_SUSPENDED)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(SimpleName:sendErrorReply)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:THREAD_NOT_SUSPENDED))))(ReturnStatement(BooleanLiteral:true))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:startFrame)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:readInt))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:length)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:readInt))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:frameCount)(InfixExpression(QualifiedName:vmThread.stackFrameIndex)(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xFF))))(IfStatement(InfixExpression(SimpleName:startFrame)(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:frameCount))(Block(ExpressionStatement(MethodInvocation(SimpleName:sendErrorReply)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:INVALID_THREAD))))(ReturnStatement(BooleanLiteral:true))))(IfStatement(InfixExpression(InfixExpression(SimpleName:startFrame)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:frameCount))(Block(ExpressionStatement(MethodInvocation(SimpleName:sendErrorReply)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:INVALID_THREAD))))(ReturnStatement(BooleanLiteral:true)))(IfStatement(InfixExpression(SimpleName:length)(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:length)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:frameCount)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:startFrame)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:frameCount))))(VariableDeclarationStatement(SimpleType(QualifiedName:VM.VMStackFrames))(VariableDeclarationFragment(SimpleName:frames)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vmThread))(SimpleName:getStackFrames))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(SimpleName:startFrame)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(InfixExpression(SimpleName:startFrame)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:length)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(QualifiedName:VM.VMStackFrame))(VariableDeclarationFragment(SimpleName:frame)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:frames))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeFrameId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(ExpressionStatement(MethodInvocation(SimpleName:writeLocation)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ps)(SimpleName:vmThread)(SimpleName:frame)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0)))))))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(SimpleName:TR_INTERRUPT))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thread))(SimpleName:interrupt)))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(SimpleName:TR_SUSPEND_COUNT))(ExpressionStatement(Assignment(SimpleName:vmThread)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM))(SimpleName:getVM)))(SimpleName:getVMThread)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thread)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(QualifiedName:vmThread.state)(INFIX_EXPRESSION_OPERATOR:&)(SimpleName:THREAD_STATE_SUSPENDED)))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:writeInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(ExpressionStatement(Assignment(SimpleName:handled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement))(IfStatement(SimpleName:handled)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:send)))))(ReturnStatement(SimpleName:handled))))))