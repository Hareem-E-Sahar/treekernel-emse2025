(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(SimpleType(SimpleName:ISource))(SimpleName:writeTo)(SingleVariableDeclaration(SimpleType(SimpleName:ISource))(SimpleName:output))(SimpleType(SimpleName:ResourceException))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Document))(VariableDeclarationFragment(SimpleName:doc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getParent)))(SimpleName:getDocument))))(VariableDeclarationStatement(SimpleType(SimpleName:Nodes))(VariableDeclarationFragment(SimpleName:places)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:query)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getPosition)))(SimpleName:getXpath))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:places))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:places)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Nodes)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:places))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:getChild)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(SimpleName:getChild)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:places))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InstanceofExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:places))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))(SimpleType(SimpleName:Element))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Element))(VariableDeclarationFragment(SimpleName:target)(CastExpression(SimpleType(SimpleName:Element))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:places))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(IfStatement(InfixExpression(MethodInvocation(SimpleName:getType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:EType.TEXT))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Element))(VariableDeclarationFragment(SimpleName:tag)(MethodInvocation(SimpleName:getHeaderTag))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:out)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(ExpressionStatement(MethodInvocation(SimpleName:writeAllTo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getURLs))(SimpleName:out))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:content)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:toString))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:appendChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:content))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getPosition)))(SimpleName:getPlace))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:EPlace.BEFORE))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:insertChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tag)(NumberLiteral:0)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:appendChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tag)))))))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:URL)))(VariableDeclarationFragment(SimpleName:files)(MethodInvocation(SimpleName:getURLs))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:URL))(SimpleName:url))(SimpleName:files)(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:toString))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(PostfixExpression(SimpleName:serialNumber)(POSTFIX_EXPRESSION_OPERATOR:++)))))(VariableDeclarationStatement(SimpleType(SimpleName:Element))(VariableDeclarationFragment(SimpleName:tag)(MethodInvocation(SimpleName:getHeaderTag)(METHOD_INVOCATION_ARGUMENTS(SimpleName:output)(SimpleName:name)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:resFile)(MethodInvocation(SimpleName:getFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:output)(SimpleName:name)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resFile))(SimpleName:getParentFile)))(SimpleName:exists)))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resFile))(SimpleName:getParentFile)))(SimpleName:mkdirs)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ResourceException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resFile))(SimpleName:getParent))(StringLiteral:<STR>))))))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:out)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:resFile))))(ExpressionStatement(MethodInvocation(SimpleName:writeTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:out))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getPosition)))(SimpleName:getPlace))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:EPlace.BEFORE))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:insertChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tag)(NumberLiteral:0)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:appendChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tag)))))))))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ResourceException))(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ResourceException))(SimpleName:e)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SourceException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ResourceException))(SimpleName:e))))))(ReturnStatement(SimpleName:output))))))