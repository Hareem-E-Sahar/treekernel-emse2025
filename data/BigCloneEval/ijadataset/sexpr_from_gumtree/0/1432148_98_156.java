(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(VariableDeclarationStatement(SimpleType(SimpleName:JdbcTemplate))(VariableDeclarationFragment(SimpleName:jdbcTemplate)(ClassInstanceCreation(SimpleType(SimpleName:JdbcTemplate))(FieldAccess(ThisExpression)(SimpleName:dataSource)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jdbcTemplate))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ConnectionCallback))(SimpleType(SimpleName:Integer)))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:Integer))(SimpleName:doInConnection)(SingleVariableDeclaration(SimpleType(SimpleName:Connection))(SimpleName:c))(SimpleType(SimpleName:SQLException))(SimpleType(SimpleName:DataAccessException))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dataCount)(NumberLiteral:0)))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:ps)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:ResultSet))(VariableDeclarationFragment(SimpleName:rs)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:channelId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getChannel)))(SimpleName:getChannelId))))(ExpressionStatement(Assignment(SimpleName:ps)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getSql)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getChannel)))(SimpleName:getChannel))))(QualifiedName:ResultSet.TYPE_FORWARD_ONLY)(QualifiedName:ResultSet.CONCUR_READ_ONLY)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:setQueryTimeout)(METHOD_INVOCATION_ARGUMENTS(SimpleName:queryTimeout))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:setFetchSize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fetchSize))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:channelId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:setLong)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataRef))(SimpleName:getRefDataId)))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:executeTimeInMs)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(ExpressionStatement(Assignment(SimpleName:rs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:executeQuery))))(ExpressionStatement(Assignment(SimpleName:executeTimeInMs)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:executeTimeInMs))))(IfStatement(InfixExpression(SimpleName:executeTimeInMs)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:30000))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:executeTimeInMs)(SimpleName:channelId))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:toRead)(InfixExpression(SimpleName:maxQueueSize)(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataQueue))(SimpleName:size)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Data)))(VariableDeclarationFragment(SimpleName:memQueue)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Data)))(SimpleName:toRead))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:ts)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rs))(SimpleName:next))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:reading))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rs))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:13)))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Data))(VariableDeclarationFragment(SimpleName:data)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataService))(SimpleName:readData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rs)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setLastDataIdForTransactionId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:memQueue))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))(ExpressionStatement(PostfixExpression(SimpleName:dataCount)(POSTFIX_EXPRESSION_OPERATOR:++)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:incrementStat)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:ts))(QualifiedName:RouterContext.STAT_READ_DATA_MS))))(ExpressionStatement(Assignment(SimpleName:ts)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(IfStatement(InfixExpression(SimpleName:toRead)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(SimpleName:copyToQueue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:memQueue))))(ExpressionStatement(Assignment(SimpleName:toRead)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:maxQueueSize)(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataQueue))(SimpleName:size)))))(ExpressionStatement(Assignment(SimpleName:memQueue)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Data)))(SimpleName:toRead)))))(Block(ExpressionStatement(PostfixExpression(SimpleName:toRead)(POSTFIX_EXPRESSION_OPERATOR:--)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:incrementStat)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:ts))(QualifiedName:RouterContext.STAT_ENQUEUE_DATA_MS))))(ExpressionStatement(Assignment(SimpleName:ts)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))))(ExpressionStatement(MethodInvocation(SimpleName:copyToQueue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:memQueue))))(ReturnStatement(SimpleName:dataCount)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JdbcUtils))(SimpleName:closeResultSet)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rs))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JdbcUtils))(SimpleName:closeStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ps))))(ExpressionStatement(Assignment(SimpleName:reading)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:done)(BooleanLiteral:false)))(DoStatement(Block(ExpressionStatement(Assignment(SimpleName:done)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataQueue))(SimpleName:offer)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:EOD))))))))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:done)))(ExpressionStatement(Assignment(SimpleName:rs)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(Assignment(SimpleName:ps)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))))))))))))))