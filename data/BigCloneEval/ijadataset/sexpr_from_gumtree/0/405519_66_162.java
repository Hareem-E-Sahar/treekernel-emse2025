(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(SingleMemberAnnotation(SimpleName:SuppressWarnings)(StringLiteral:<STR>))(Modifier:public)(SimpleName:MultipartRequestWrapper)(SingleVariableDeclaration(SimpleType(SimpleName:ServletRequest))(SimpleName:request))(SimpleType(SimpleName:IOException))(Block(SuperConstructorInvocation(CastExpression(SimpleType(SimpleName:HttpServletRequest))(SimpleName:request)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:contentType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getContentType))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contentType))(SimpleName:toLowerCase)))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(CharacterLiteral:<STR>)(StringLiteral:<STR>)(CharacterLiteral:<STR>)(StringLiteral:<STR>)(CharacterLiteral:<STR>)(SimpleName:contentType)(CharacterLiteral:<STR>)(StringLiteral:<STR>)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:MPH_ATTRIBUTE)))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MultipartRequestWrapper))(VariableDeclarationFragment(SimpleName:oldMPH)(CastExpression(SimpleType(SimpleName:MultipartRequestWrapper))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:MPH_ATTRIBUTE))))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:stringParameters))(ASSIGNMENT_OPERATOR:=)(QualifiedName:oldMPH.stringParameters)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:mimeTypes))(ASSIGNMENT_OPERATOR:=)(QualifiedName:oldMPH.mimeTypes)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:tempFileNames))(ASSIGNMENT_OPERATOR:=)(QualifiedName:oldMPH.tempFileNames)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:uploadFileNames))(ASSIGNMENT_OPERATOR:=)(QualifiedName:oldMPH.uploadFileNames)))(ReturnStatement))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:byteArray)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:inputServlet)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getInputStream))))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:buffer)(Dimension)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:2048))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:readBytes)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputServlet))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)))))(WhileStatement(InfixExpression(SimpleName:readBytes)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:byteArray))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:0)(SimpleName:readBytes))))(ExpressionStatement(Assignment(SimpleName:readBytes)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputServlet))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputServlet))(SimpleName:close)))(VariableDeclarationStatement(SimpleType(SimpleName:MimeMultipart))(VariableDeclarationFragment(SimpleName:parts)(ClassInstanceCreation(SimpleType(SimpleName:MimeMultipart))(ClassInstanceCreation(SimpleType(SimpleName:MultipartRequestWrapperDataSource))(SimpleName:contentType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:byteArray))(SimpleName:toByteArray))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:byteArray))(SimpleName:close)))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:stringParameters)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:mimeTypes)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:tempFileNames)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:uploadFileNames)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:encoding)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getCharacterEncoding))))(IfStatement(InfixExpression(SimpleName:encoding)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:encoding)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:loopCount)(NumberLiteral:0)))(InfixExpression(SimpleName:loopCount)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parts))(SimpleName:getCount)))(PostfixExpression(SimpleName:loopCount)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MimeBodyPart))(VariableDeclarationFragment(SimpleName:current)(CastExpression(SimpleType(SimpleName:MimeBodyPart))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parts))(SimpleName:getBodyPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:loopCount))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:headers)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:current))(SimpleName:getHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(CharacterLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:MessagingException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:namePart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:7))))))(ExpressionStatement(Assignment(SimpleName:namePart)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:namePart))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:namePart))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:nameField)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:javax.mail.internet.MimeUtility))(SimpleName:decodeText)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namePart)))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:inRaw)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:current))(SimpleName:getInputStream))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(CharacterLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(CharacterLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:11))))))(ExpressionStatement(Assignment(SimpleName:fileName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:fileName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:fileName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadFileNames))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nameField)(SimpleName:fileName))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempFileNames))(SimpleName:containsKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nameField)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nameField))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:current))(SimpleName:getContentType))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mimeTypes))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nameField)(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mimeTypes))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nameField)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:current))(SimpleName:getContentType)))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:tempFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:File))(SimpleName:createTempFile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:outStream)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:tempFile)(BooleanLiteral:true))))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:readBytes)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inRaw))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outStream))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:0)(SimpleName:readBytes))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inRaw))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outStream))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempFileNames))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nameField)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempFile))(SimpleName:getAbsoluteFile))))))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:stash)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inRaw))(SimpleName:available)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inRaw))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stash))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inRaw))(SimpleName:close)))(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:oldParam)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stringParameters))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nameField)))))(IfStatement(InfixExpression(SimpleName:oldParam)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stringParameters))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nameField)(ArrayCreation(ArrayType(SimpleType(SimpleName:String))(Dimension))(ArrayInitializer(ClassInstanceCreation(SimpleType(SimpleName:String))(SimpleName:stash)(SimpleName:encoding))))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:oldParams)(Dimension)(CastExpression(ArrayType(SimpleType(SimpleName:String))(Dimension))(SimpleName:oldParam))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:newParams)(Dimension)(ArrayCreation(ArrayType(SimpleType(SimpleName:String))(Dimension(InfixExpression(QualifiedName:oldParams.length)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:arraycopy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldParams)(NumberLiteral:0)(SimpleName:newParams)(NumberLiteral:0)(QualifiedName:oldParams.length))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:newParams)(QualifiedName:oldParams.length))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:String))(SimpleName:stash)(SimpleName:encoding))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stringParameters))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nameField)(SimpleName:newParams))))))))))))(ExpressionStatement(Assignment(SimpleName:parts)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:stringParameters))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Collections))(SimpleName:unmodifiableMap)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stringParameters)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:mimeTypes))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Collections))(SimpleName:unmodifiableMap)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mimeTypes)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:tempFileNames))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Collections))(SimpleName:unmodifiableMap)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tempFileNames)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:uploadFileNames))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Collections))(SimpleName:unmodifiableMap)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uploadFileNames)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:MPH_ATTRIBUTE)(ThisExpression)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:MessagingException))(SimpleName:errMime))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(SimpleName:errMime))))))))))