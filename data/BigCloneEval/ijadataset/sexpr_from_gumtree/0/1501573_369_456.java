(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:update)(SimpleType(SimpleName:IOException))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:is_changed))(ReturnStatement))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:usesUnsynchronization)(BooleanLiteral:false)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:newFramesBytes)(MethodInvocation(SimpleName:convertFramesToArrayOfBytes))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:crc)(NumberLiteral:0)))(IfStatement(SimpleName:use_crc)(Block(VariableDeclarationStatement(SimpleType(QualifiedName:java.util.zip.CRC32))(VariableDeclarationFragment(SimpleName:crcCalculator)(ClassInstanceCreation(SimpleType(QualifiedName:java.util.zip.CRC32)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:crcCalculator))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newFramesBytes))))(ExpressionStatement(Assignment(SimpleName:crc)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:crcCalculator))(SimpleName:getValue)))))))(VariableDeclarationStatement(SimpleType(SimpleName:ID3v2ExtendedHeader))(VariableDeclarationFragment(SimpleName:newExtHeader)(ClassInstanceCreation(SimpleType(SimpleName:ID3v2ExtendedHeader))(SimpleName:use_crc)(SimpleName:crc)(NumberLiteral:0))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:newExtHeaderBytes)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newExtHeader))(SimpleName:getBytes))))(IfStatement(SimpleName:use_unsynchronization)(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:unsynchExtHeader)(MethodInvocation(SimpleName:unsynchronize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newExtHeaderBytes)))))(IfStatement(InfixExpression(SimpleName:unsynchExtHeader)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:usesUnsynchronization)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:newExtHeaderBytes)(ASSIGNMENT_OPERATOR:=)(SimpleName:unsynchExtHeader)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:unsynchFrames)(MethodInvocation(SimpleName:unsynchronize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newFramesBytes)))))(IfStatement(InfixExpression(SimpleName:unsynchFrames)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:usesUnsynchronization)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:newFramesBytes)(ASSIGNMENT_OPERATOR:=)(SimpleName:unsynchFrames)))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:newHeaderLen)(InfixExpression(QualifiedName:newExtHeaderBytes.length)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:newFramesBytes.length))))(VariableDeclarationStatement(SimpleType(SimpleName:ID3v2Header))(VariableDeclarationFragment(SimpleName:newHeader)(ClassInstanceCreation(SimpleType(SimpleName:ID3v2Header))(SimpleName:VERSION)(SimpleName:REVISION)(SimpleName:usesUnsynchronization)(BooleanLiteral:true)(BooleanLiteral:false)(SimpleName:newHeaderLen))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:newHeaderBytes)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newHeader))(SimpleName:getBytes))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:oldHeaderLen)(NumberLiteral:0)))(IfStatement(InfixExpression(SimpleName:header)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:oldHeaderLen)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0))))(Block(ExpressionStatement(Assignment(SimpleName:oldHeaderLen)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getTagSize))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:10))))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:baos)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:baos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newHeaderBytes))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:baos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newExtHeaderBytes))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:baos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newFramesBytes))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:contentLen)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:oldHeaderLen))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:newFileLength)(InfixExpression(SimpleName:contentLen)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:newHeaderLen))))(IfStatement(SimpleName:use_padding)(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:padding)(NumberLiteral:0)))(IfStatement(InfixExpression(SimpleName:oldHeaderLen)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:newHeaderLen))(Block(ExpressionStatement(Assignment(SimpleName:padding)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:oldHeaderLen)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:newHeaderLen))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:padding))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:baos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:finalNewHeader)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:baos))(SimpleName:toByteArray))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:minBuffSize)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:abs)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:finalNewHeader.length)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:oldHeaderLen))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:buffSize)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:max)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2048)(SimpleName:minBuffSize)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buf)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:buffSize))))))(VariableDeclarationStatement(SimpleType(SimpleName:RandomAccessFile))(VariableDeclarationFragment(SimpleName:raf)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:raf)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(SimpleName:file)(StringLiteral:<STR>))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:oldPointer)(ConditionalExpression(InfixExpression(SimpleName:oldHeaderLen)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(NumberLiteral:0)(InfixExpression(SimpleName:oldHeaderLen)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:newPointer)(NumberLiteral:0)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldPointer))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:amountToRead)(SimpleName:contentLen)))(IfStatement(InfixExpression(SimpleName:amountToRead)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:buffSize))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(SimpleName:buffSize)))))(ExpressionStatement(Assignment(SimpleName:amountToRead)(ASSIGNMENT_OPERATOR:-=)(SimpleName:read)))(ExpressionStatement(Assignment(SimpleName:oldPointer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:getFilePointer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newPointer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:finalNewHeader))))(ExpressionStatement(Assignment(SimpleName:newPointer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:getFilePointer))))(WhileStatement(InfixExpression(SimpleName:amountToRead)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buf2)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:buffSize))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldPointer))))(ExpressionStatement(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf2)(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffSize)(CastExpression(PrimitiveType:int)(SimpleName:amountToRead))))))))(IfStatement(InfixExpression(SimpleName:read)(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(BreakStatement))(ExpressionStatement(Assignment(SimpleName:oldPointer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:getFilePointer))))(ExpressionStatement(Assignment(SimpleName:amountToRead)(ASSIGNMENT_OPERATOR:-=)(SimpleName:read)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newPointer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf))))(ExpressionStatement(Assignment(SimpleName:newPointer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:getFilePointer))))(ExpressionStatement(Assignment(SimpleName:buf)(ASSIGNMENT_OPERATOR:=)(SimpleName:buf2)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newPointer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf))))(ExpressionStatement(Assignment(SimpleName:header)(ASSIGNMENT_OPERATOR:=)(SimpleName:newHeader)))(ExpressionStatement(Assignment(SimpleName:extended_header)(ASSIGNMENT_OPERATOR:=)(SimpleName:newExtHeader)))(ExpressionStatement(Assignment(SimpleName:is_changed)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false))))(Block(TryStatement(Block(IfStatement(InfixExpression(SimpleName:raf)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:raf))(SimpleName:close)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ignored))(Block)))))))))