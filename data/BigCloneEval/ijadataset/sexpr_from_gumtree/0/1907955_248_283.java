(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:showSaveCharacterChooser)(SingleVariableDeclaration(SimpleType(SimpleName:CharacterFacade))(SimpleName:character))(Block(VariableDeclarationStatement(SimpleType(SimpleName:PCGenSettings))(VariableDeclarationFragment(SimpleName:context)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PCGenSettings))(SimpleName:getInstance))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:parentPath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PCGenSettings.PCG_SAVE_PATH)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:setCurrentDirectory)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:parentPath)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:character))(SimpleName:getFileRef)))(SimpleName:getReference))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:prevFile)(SimpleName:file)))(IfStatement(InfixExpression(SimpleName:file)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:parentPath)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:character))(SimpleName:getNameRef)))(SimpleName:getReference))(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:Constants.s_PCGEN_CHARACTER_EXTENSION)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:setSelectedFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:resetChoosableFileFilters)))(VariableDeclarationStatement(SimpleType(SimpleName:FileFilter))(VariableDeclarationFragment(SimpleName:filter)(ClassInstanceCreation(SimpleType(SimpleName:PcgFileFilter)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:addChoosableFileFilter)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filter))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:setFileFilter)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filter))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:ret)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:showSaveDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:frame)))))(IfStatement(InfixExpression(SimpleName:ret)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:JFileChooser.APPROVE_OPTION))(Block(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:getSelectedFile))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PCGFile))(SimpleName:isPCGenCharacterFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))(Block(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getParent))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName))(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:Constants.s_PCGEN_CHARACTER_EXTENSION)))))))(VariableDeclarationStatement(SimpleType(SimpleName:UIDelegate))(VariableDeclarationFragment(SimpleName:delegate)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:character))(SimpleName:getUIDelegate))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:isDirectory))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:delegate))(SimpleName:showErrorMessage)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.s_APPNAME)(StringLiteral:<STR>))))(ReturnStatement)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:exists))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:prevFile)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prevFile))(SimpleName:getName))))))))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:overwrite)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:delegate))(SimpleName:showWarningConfirm)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName)))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName))(StringLiteral:<STR>))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:overwrite))(Block(ReturnStatement)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:character))(SimpleName:setFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PCGenSettings.PCG_SAVE_PATH)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getParent)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CharacterManager))(SimpleName:saveCharacter)(METHOD_INVOCATION_ARGUMENTS(SimpleName:character))))))))))