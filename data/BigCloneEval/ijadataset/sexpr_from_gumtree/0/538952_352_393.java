(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(SimpleType(SimpleName:MessageRecipients))(SimpleName:sendToChannelAdapters)(SingleVariableDeclaration(SimpleType(SimpleName:MultiChannelMessage))(SimpleName:message))(SingleVariableDeclaration(SimpleType(SimpleName:MessageRecipients))(SimpleName:recipients))(SingleVariableDeclaration(SimpleType(SimpleName:MessageRecipient))(SimpleName:replyTo))(SimpleType(SimpleName:MessageException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MessageRecipients))(VariableDeclarationFragment(SimpleName:failures)(ClassInstanceCreation(SimpleType(SimpleName:MessageRecipients)))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:recipientsIterator)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipients))(SimpleName:getIterator))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:currentChannel)(NullLiteral)))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipientsIterator))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MessageRecipient))(VariableDeclarationFragment(SimpleName:recipient)(CastExpression(SimpleType(SimpleName:MessageRecipient))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipientsIterator))(SimpleName:next)))))(TryStatement(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipient))(SimpleName:getChannelName))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipient))(SimpleName:getChannelName)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentChannel))))(Block(ExpressionStatement(Assignment(SimpleName:currentChannel)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipient))(SimpleName:getChannelName))))(VariableDeclarationStatement(SimpleType(SimpleName:MessageChannel))(VariableDeclarationFragment(SimpleName:channel)(CastExpression(SimpleType(SimpleName:MessageChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CHANNEL_MAP))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentChannel))))))(IfStatement(InfixExpression(SimpleName:channel)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:MessageRecipients))(VariableDeclarationFragment(SimpleName:sendFailures)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:send)(METHOD_INVOCATION_ARGUMENTS(SimpleName:message)(SimpleName:recipients)(SimpleName:replyTo)))))(IfStatement(InfixExpression(SimpleName:sendFailures)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RecipientInternals))(SimpleName:addRecipients)(METHOD_INVOCATION_ARGUMENTS(SimpleName:failures)(SimpleName:sendFailures)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RecipientException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:MessageException))(SimpleName:e)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:currentChannel))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:cfIterator)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:recipients))(SimpleName:getIterator))))(VariableDeclarationStatement(SimpleType(SimpleName:MessageRecipients))(VariableDeclarationFragment(SimpleName:channelFailures)(ClassInstanceCreation(SimpleType(SimpleName:MessageRecipients)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:failMsg)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:messageLocalizer))(SimpleName:format)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:currentChannel)))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cfIterator))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MessageRecipient))(VariableDeclarationFragment(SimpleName:mr)(CastExpression(SimpleType(SimpleName:MessageRecipient))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cfIterator))(SimpleName:next)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mr))(SimpleName:getChannelName)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentChannel)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mr))(SimpleName:setFailureReason)(METHOD_INVOCATION_ARGUMENTS(SimpleName:failMsg))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channelFailures))(SimpleName:addRecipient)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mr))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RecipientInternals))(SimpleName:addRecipients)(METHOD_INVOCATION_ARGUMENTS(SimpleName:failures)(SimpleName:channelFailures)))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RecipientException))(SimpleName:rce))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:MessageException))(SimpleName:rce))))))))(ReturnStatement(SimpleName:failures))))))