(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(SimpleType(SimpleName:Reader))(SimpleName:getReader)(SingleVariableDeclaration(SimpleType(SimpleName:XMLInputSource))(SimpleName:source))(SimpleType(SimpleName:IOException))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getCharacterStream))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getCharacterStream))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:stream)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:encoding)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getEncoding))))(IfStatement(InfixExpression(SimpleName:encoding)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:encoding)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getByteStream))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:stream)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getByteStream))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InstanceofExpression(SimpleName:stream)(SimpleType(SimpleName:BufferedInputStream)))))(Block(ExpressionStatement(Assignment(SimpleName:stream)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(SimpleName:stream)(QualifiedName:fTempString.ch.length)))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:expandedSystemId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:XMLEntityManager))(SimpleName:expandSystemId)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getSystemId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getBaseSystemId))(BooleanLiteral:false)))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:expandedSystemId))))(VariableDeclarationStatement(SimpleType(SimpleName:URLConnection))(VariableDeclarationFragment(SimpleName:urlCon)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openConnection))))(IfStatement(InfixExpression(InstanceofExpression(SimpleName:urlCon)(SimpleType(SimpleName:HttpURLConnection)))(INFIX_EXPRESSION_OPERATOR:&&)(InstanceofExpression(SimpleName:source)(SimpleType(SimpleName:HTTPInputSource))))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HttpURLConnection))(VariableDeclarationFragment(SimpleName:urlConnection)(CastExpression(SimpleType(SimpleName:HttpURLConnection))(SimpleName:urlCon))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HTTPInputSource))(VariableDeclarationFragment(SimpleName:httpInputSource)(CastExpression(SimpleType(SimpleName:HTTPInputSource))(SimpleName:source))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:propIter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpInputSource))(SimpleName:getHTTPRequestProperties))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:propIter))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(QualifiedName:Map.Entry))(VariableDeclarationFragment(SimpleName:entry)(CastExpression(SimpleType(QualifiedName:Map.Entry))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:propIter))(SimpleName:next)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlConnection))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entry))(SimpleName:getKey)))(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entry))(SimpleName:getValue))))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:followRedirects)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpInputSource))(SimpleName:getFollowHTTPRedirects))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:followRedirects))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:XMLEntityManager))(SimpleName:setInstanceFollowRedirects)(METHOD_INVOCATION_ARGUMENTS(SimpleName:urlConnection)(SimpleName:followRedirects))))))))(ExpressionStatement(Assignment(SimpleName:stream)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlCon))(SimpleName:getInputStream)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:rawContentType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlCon))(SimpleName:getContentType))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:index)(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:rawContentType)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rawContentType))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:contentType)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:charset)(NullLiteral)))(IfStatement(InfixExpression(SimpleName:index)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:contentType)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rawContentType))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(SimpleName:index))))(SimpleName:trim))))(ExpressionStatement(Assignment(SimpleName:charset)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rawContentType))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:index)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))(SimpleName:trim))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:charset)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:8))))(SimpleName:trim))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:charAt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))(INFIX_EXPRESSION_OPERATOR:==)(CharacterLiteral:<STR>))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:charAt)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(INFIX_EXPRESSION_OPERATOR:==)(CharacterLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:charAt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))(INFIX_EXPRESSION_OPERATOR:==)(CharacterLiteral:<STR>))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:charAt)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(INFIX_EXPRESSION_OPERATOR:==)(CharacterLiteral:<STR>)))))(Block(ExpressionStatement(Assignment(SimpleName:charset)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:charset))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))))))(Block(ExpressionStatement(Assignment(SimpleName:charset)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))))(Block(ExpressionStatement(Assignment(SimpleName:contentType)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rawContentType))(SimpleName:trim))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:detectedEncoding)(NullLiteral)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contentType))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(IfStatement(InfixExpression(SimpleName:charset)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:detectedEncoding)(ASSIGNMENT_OPERATOR:=)(SimpleName:charset))))(Block(ExpressionStatement(Assignment(SimpleName:detectedEncoding)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contentType))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(IfStatement(InfixExpression(SimpleName:charset)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:detectedEncoding)(ASSIGNMENT_OPERATOR:=)(SimpleName:charset))))(Block(ExpressionStatement(Assignment(SimpleName:detectedEncoding)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getEncodingName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stream))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contentType))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:detectedEncoding)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getEncodingName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stream)))))))))(IfStatement(InfixExpression(SimpleName:detectedEncoding)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:encoding)(ASSIGNMENT_OPERATOR:=)(SimpleName:detectedEncoding)))))))(ExpressionStatement(Assignment(SimpleName:encoding)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:encoding))(SimpleName:toUpperCase)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Locale.ENGLISH)))))(ExpressionStatement(Assignment(SimpleName:encoding)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:consumeBOM)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stream)(SimpleName:encoding)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:encoding))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:UTF8Reader))(SimpleName:stream)(QualifiedName:fTempString.ch.length)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fErrorReporter))(SimpleName:getMessageFormatter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:XMLMessageFormatter.XML_DOMAIN)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fErrorReporter))(SimpleName:getLocale))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:javaEncoding)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:EncodingMap))(SimpleName:getIANA2JavaMapping)(METHOD_INVOCATION_ARGUMENTS(SimpleName:encoding)))))(IfStatement(InfixExpression(SimpleName:javaEncoding)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MessageFormatter))(VariableDeclarationFragment(SimpleName:aFormatter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fErrorReporter))(SimpleName:getMessageFormatter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:XMLMessageFormatter.XML_DOMAIN)))))(VariableDeclarationStatement(SimpleType(SimpleName:Locale))(VariableDeclarationFragment(SimpleName:aLocale)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fErrorReporter))(SimpleName:getLocale))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:aFormatter))(SimpleName:formatMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:aLocale)(StringLiteral:<STR>)(ArrayCreation(ArrayType(SimpleType(SimpleName:Object))(Dimension))(ArrayInitializer(SimpleName:encoding))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:javaEncoding))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:ASCIIReader))(SimpleName:stream)(QualifiedName:fTempString.ch.length)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fErrorReporter))(SimpleName:getMessageFormatter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:XMLMessageFormatter.XML_DOMAIN)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fErrorReporter))(SimpleName:getLocale)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:javaEncoding))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:Latin1Reader))(SimpleName:stream)(QualifiedName:fTempString.ch.length)))))))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:InputStreamReader))(SimpleName:stream)(SimpleName:javaEncoding)))))))))