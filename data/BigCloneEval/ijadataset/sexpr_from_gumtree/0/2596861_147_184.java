(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:pollForEvents)(Block(ExpressionStatement(Assignment(SimpleName:numKilledInJava)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(VariableDeclarationStatement(SimpleType(SimpleName:VM_Thread))(VariableDeclarationFragment(SimpleName:thread)(SimpleName:head)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:readCount)(NumberLiteral:0))(VariableDeclarationFragment(SimpleName:writeCount)(NumberLiteral:0))(VariableDeclarationFragment(SimpleName:exceptCount)(NumberLiteral:0)))(WhileStatement(InfixExpression(SimpleName:thread)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(MethodInvocation(SimpleName:isKilled)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thread)))(Block(ExpressionStatement(Assignment(QualifiedName:thread.throwInterruptWhenScheduled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:numKilledInJava)))))(IfStatement(InfixExpression(SimpleName:numKilledInJava)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:thread.waitData))(SimpleName:accept)(METHOD_INVOCATION_ARGUMENTS(SimpleName:myDowncaster))))(VariableDeclarationStatement(SimpleType(SimpleName:VM_ThreadIOWaitData))(VariableDeclarationFragment(SimpleName:waitData)(QualifiedName:myDowncaster.waitData)))(IfStatement(QualifiedName:VM.VerifyAssertions)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM))(SimpleName:_assert)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:waitData)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:thread.waitData))))))(IfStatement(InfixExpression(QualifiedName:waitData.readFds)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(QualifiedName:waitData.readOffset)(ASSIGNMENT_OPERATOR:=)(SimpleName:readCount)))(ExpressionStatement(Assignment(SimpleName:readCount)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(SimpleName:addFileDescriptors)(METHOD_INVOCATION_ARGUMENTS(SimpleName:allFds)(InfixExpression(SimpleName:READ_OFFSET)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:readCount))(QualifiedName:waitData.readFds)))))))(IfStatement(InfixExpression(QualifiedName:waitData.writeFds)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(QualifiedName:waitData.writeOffset)(ASSIGNMENT_OPERATOR:=)(SimpleName:writeCount)))(ExpressionStatement(Assignment(SimpleName:writeCount)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(SimpleName:addFileDescriptors)(METHOD_INVOCATION_ARGUMENTS(SimpleName:allFds)(InfixExpression(SimpleName:WRITE_OFFSET)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:writeCount))(QualifiedName:waitData.writeFds)))))))(IfStatement(InfixExpression(QualifiedName:waitData.exceptFds)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(QualifiedName:waitData.exceptOffset)(ASSIGNMENT_OPERATOR:=)(SimpleName:exceptCount)))(ExpressionStatement(Assignment(SimpleName:exceptCount)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(SimpleName:addFileDescriptors)(METHOD_INVOCATION_ARGUMENTS(SimpleName:allFds)(InfixExpression(SimpleName:EXCEPT_OFFSET)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:exceptCount))(QualifiedName:waitData.exceptFds)))))))))(ExpressionStatement(Assignment(SimpleName:thread)(ASSIGNMENT_OPERATOR:=)(QualifiedName:thread.next)))))(IfStatement(InfixExpression(SimpleName:numKilledInJava)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ReturnStatement(BooleanLiteral:true))))(ExpressionStatement(Assignment(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM_Processor))(SimpleName:getCurrentProcessor))(SimpleName:isInSelect))(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:selectInProgressMutex))(SimpleName:lock)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:ret)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sysCall))(SimpleName:sysNetSelect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:allFds)(SimpleName:readCount)(SimpleName:writeCount)(SimpleName:exceptCount)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:selectInProgressMutex))(SimpleName:unlock)))(ExpressionStatement(Assignment(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VM_Processor))(SimpleName:getCurrentProcessor))(SimpleName:isInSelect))(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(ReturnStatement(InfixExpression(SimpleName:ret)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))))