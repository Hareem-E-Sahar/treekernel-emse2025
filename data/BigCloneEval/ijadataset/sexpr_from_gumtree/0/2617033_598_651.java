(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:Response))(SimpleName:httpRequest)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:url))(SingleVariableDeclaration(ArrayType(SimpleType(SimpleName:PostParameter))(Dimension))(SimpleName:postParams))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:authenticated))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:httpMethod))(SimpleType(SimpleName:WeiboException))(Block(VariableDeclarationStatement(SimpleType(QualifiedName:org.apache.http.client.HttpClient))(VariableDeclarationFragment(SimpleName:client)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpConfig))(SimpleName:newInstance))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequestBase))(VariableDeclarationFragment(SimpleName:request)))(IfStatement(InfixExpression(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:postParams))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpMethod))))(Block(ExpressionStatement(Assignment(SimpleName:request)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpPost))(SimpleName:url))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:addHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:NameValuePair)))(VariableDeclarationFragment(SimpleName:nvps)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:NameValuePair))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:PostParameter))(SimpleName:p))(SimpleName:postParams)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nvps))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:BasicNameValuePair))(QualifiedName:p.name)(QualifiedName:p.value)))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:HttpPost))(SimpleName:request))))(SimpleName:setEntity)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:UrlEncodedFormEntity))(SimpleName:nvps)(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:UnsupportedEncodingException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpMethod)))(Block(ExpressionStatement(Assignment(SimpleName:request)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpDelete))(SimpleName:url)))))(Block(ExpressionStatement(Assignment(SimpleName:request)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(SimpleName:url)))))))(IfStatement(SimpleName:authenticated)(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:basic)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:oauth)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(Block))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:authorization)(NullLiteral)))(IfStatement(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:oauth))(Block(ExpressionStatement(Assignment(SimpleName:authorization)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oauth))(SimpleName:generateAuthorizationHeader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpMethod)(SimpleName:url)(SimpleName:postParams)(SimpleName:oauthToken))))))(IfStatement(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:basic))(Block(ExpressionStatement(Assignment(SimpleName:authorization)(ASSIGNMENT_OPERATOR:=)(FieldAccess(ThisExpression)(SimpleName:basic)))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:addHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:authorization))))(ExpressionStatement(MethodInvocation(SimpleName:log)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:authorization)))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:key))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestHeaders))(SimpleName:keySet))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:addHeader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestHeaders))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key))))))(ExpressionStatement(MethodInvocation(SimpleName:log)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:key)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestHeaders))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Response))(VariableDeclarationFragment(SimpleName:res)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:responseCode)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)))))(ExpressionStatement(Assignment(SimpleName:res)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Response))(SimpleName:response))))(ExpressionStatement(Assignment(SimpleName:responseCode)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getStatusLine)))(SimpleName:getStatusCode))))(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:OK))(Block(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:INTERNAL_SERVER_ERROR))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WeiboException))(InfixExpression(MethodInvocation(SimpleName:getCause)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseCode)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:asString)))(SimpleName:responseCode))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WeiboException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e)(SimpleName:responseCode))))))(ReturnStatement(SimpleName:res))))))