(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:messageReceived)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:ChannelHandlerContext))(SimpleName:ctx))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:MessageEvent))(SimpleName:me))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:publisher)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:publisher))(SimpleName:handle)(METHOD_INVOCATION_ARGUMENTS(SimpleName:me))))(Block(ReturnStatement)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Channel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:me))(SimpleName:getChannel))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:RtmpMessage))(VariableDeclarationFragment(SimpleName:message)(CastExpression(SimpleType(SimpleName:RtmpMessage))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:me))(SimpleName:getMessage)))))(ExpressionStatement(Assignment(SimpleName:bytesRead)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getHeader)))(SimpleName:getSize))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:bytesRead)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:bytesReadLastSent)))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:bytesReadWindow))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:bytesRead))))(VariableDeclarationStatement(SimpleType(SimpleName:BytesRead))(VariableDeclarationFragment(SimpleName:ack)(ClassInstanceCreation(SimpleType(SimpleName:BytesRead))(SimpleName:bytesRead))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ack))))(ExpressionStatement(Assignment(SimpleName:bytesReadLastSent)(ASSIGNMENT_OPERATOR:=)(SimpleName:bytesRead)))))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getHeader)))(SimpleName:getMessageType))(SwitchCase(SimpleName:CHUNK_SIZE))(BreakStatement)(SwitchCase(SimpleName:CONTROL))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Control))(VariableDeclarationFragment(SimpleName:control)(CastExpression(SimpleType(SimpleName:Control))(SimpleName:message))))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:control))(SimpleName:getType))(SwitchCase(SimpleName:SET_BUFFER))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:control))))(ExpressionStatement(Assignment(SimpleName:bufferDuration)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:control))(SimpleName:getBufferLength))))(IfStatement(InfixExpression(SimpleName:publisher)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:publisher))(SimpleName:setBufferDuration)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bufferDuration))))))(BreakStatement)(SwitchCase)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:control)))))(BreakStatement)(SwitchCase(SimpleName:COMMAND_AMF0))(SwitchCase(SimpleName:COMMAND_AMF3))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Command))(VariableDeclarationFragment(SimpleName:command)(CastExpression(SimpleType(SimpleName:Command))(SimpleName:message))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:command))(SimpleName:getName))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(SimpleName:connectResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel)(SimpleName:command)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:streamId)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:1)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Command))(SimpleName:createStreamSuccess)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:command))(SimpleName:getTransactionId))(SimpleName:streamId)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(SimpleName:playResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel)(SimpleName:command)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:deleteStreamId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:Double))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:command))(SimpleName:getArg)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(SimpleName:intValue))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:deleteStreamId)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:clientStreamId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:command))(SimpleName:getHeader)))(SimpleName:getStreamId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:clientStreamId))))(ExpressionStatement(MethodInvocation(SimpleName:unpublishIfLive))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(SimpleName:pauseResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel)(SimpleName:command)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(SimpleName:seekResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel)(SimpleName:command)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(SimpleName:publishResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel)(SimpleName:command)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:command))))(ExpressionStatement(MethodInvocation(SimpleName:fireNext)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel)))))))))))))(ReturnStatement)(SwitchCase(SimpleName:METADATA_AMF0))(SwitchCase(SimpleName:METADATA_AMF3))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Metadata))(VariableDeclarationFragment(SimpleName:meta)(CastExpression(SimpleType(SimpleName:Metadata))(SimpleName:message))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:meta))(SimpleName:getName)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:meta))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:meta))(SimpleName:setDuration)(METHOD_INVOCATION_ARGUMENTS(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:subscriberStream))(SimpleName:addConfigMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:meta))))))(ExpressionStatement(MethodInvocation(SimpleName:broadcast)(METHOD_INVOCATION_ARGUMENTS(SimpleName:message))))(BreakStatement)(SwitchCase(SimpleName:AUDIO))(SwitchCase(SimpleName:VIDEO))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:DataMessage))(SimpleName:message))))(SimpleName:isConfig))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:message))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:subscriberStream))(SimpleName:addConfigMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:message))))))(SwitchCase(SimpleName:AGGREGATE))(ExpressionStatement(MethodInvocation(SimpleName:broadcast)(METHOD_INVOCATION_ARGUMENTS(SimpleName:message))))(BreakStatement)(SwitchCase(SimpleName:BYTES_READ))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:BytesRead))(VariableDeclarationFragment(SimpleName:bytesReadByClient)(CastExpression(SimpleType(SimpleName:BytesRead))(SimpleName:message))))(ExpressionStatement(Assignment(SimpleName:bytesWrittenLastReceived)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bytesReadByClient))(SimpleName:getValue))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:bytesReadByClient)(SimpleName:bytesWritten))))(BreakStatement)(SwitchCase(SimpleName:WINDOW_ACK_SIZE))(VariableDeclarationStatement(SimpleType(SimpleName:WindowAckSize))(VariableDeclarationFragment(SimpleName:was)(CastExpression(SimpleType(SimpleName:WindowAckSize))(SimpleName:message))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:was))(SimpleName:getValue))(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:bytesReadWindow))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SetPeerBw))(SimpleName:dynamic)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bytesReadWindow))))))))(BreakStatement)(SwitchCase(SimpleName:SET_PEER_BW))(VariableDeclarationStatement(SimpleType(SimpleName:SetPeerBw))(VariableDeclarationFragment(SimpleName:spb)(CastExpression(SimpleType(SimpleName:SetPeerBw))(SimpleName:message))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spb))(SimpleName:getValue))(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:bytesWrittenWindow))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:WindowAckSize))(SimpleName:bytesWrittenWindow)))))))(BreakStatement)(SwitchCase)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:message)))))(ExpressionStatement(MethodInvocation(SimpleName:fireNext)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel))))))))