(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:doActualCStore)(SingleVariableDeclaration(SimpleType(SimpleName:ActiveAssociation))(SimpleName:activeAssoc))(SingleVariableDeclaration(SimpleType(SimpleName:Dimse))(SimpleName:rq))(SingleVariableDeclaration(SimpleType(SimpleName:Command))(SimpleName:rspCmd))(SingleVariableDeclaration(SimpleType(SimpleName:Dataset))(SimpleName:ds))(SingleVariableDeclaration(SimpleType(SimpleName:DcmParser))(SimpleName:parser))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:DcmServiceException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:dcm4cheeURIReferenced)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getTransferSyntaxUID)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:UIDs.Dcm4cheURIReferenced)))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Command))(VariableDeclarationFragment(SimpleName:rqCmd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getCommand))))(VariableDeclarationStatement(SimpleType(SimpleName:Association))(VariableDeclarationFragment(SimpleName:assoc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:activeAssoc))(SimpleName:getAssociation))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:callingAET)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assoc))(SimpleName:getCallingAET))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:calledAET)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assoc))(SimpleName:getCalledAET))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:iuid)(MethodInvocation(SimpleName:checkSOPInstanceUID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rqCmd)(SimpleName:ds)(SimpleName:callingAET)))))(ExpressionStatement(MethodInvocation(SimpleName:checkAppendPermission)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)(SimpleName:ds))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:checkOnlyWellKnownInstances)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)(SimpleName:iuid)(SimpleName:callingAET))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:callingAET)(StringLiteral:<STR>)(SimpleName:iuid)))))(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:duplicates)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:QueryFilesCmd))(SimpleName:iuid)))(SimpleName:getFileDTOs))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:duplicates))(SimpleName:isEmpty))(INFIX_EXPRESSION_OPERATOR:||)(SimpleName:storeDuplicateIfDiffMD5)(InfixExpression(SimpleName:storeDuplicateIfDiffHost)(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:containsLocal)(METHOD_INVOCATION_ARGUMENTS(SimpleName:duplicates))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:iuid)(StringLiteral:<STR>)))))(ReturnStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:preProcess)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:perfMon))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:activeAssoc)(SimpleName:rq)(QualifiedName:PerfPropertyEnum.REQ_DATASET)(SimpleName:ds))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:logDIMSE)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)(SimpleName:STORE_XML)(SimpleName:ds))))(IfStatement(InfixExpression(MethodInvocation(SimpleName:isCheckIncorrectWorklistEntry))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(SimpleName:checkIncorrectWorklistEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:iuid)(StringLiteral:<STR>)))))(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:retrieveAET)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:availability)))(VariableDeclarationStatement(SimpleType(SimpleName:FileSystemDTO))(VariableDeclarationFragment(SimpleName:fsDTO)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filePath)(NullLiteral)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:md5sum)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Dataset))(VariableDeclarationFragment(SimpleName:coerced)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:getCoercionAttributesFor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:callingAET)(SimpleName:STORE_XSL)(SimpleName:ds)(SimpleName:assoc)))))(IfStatement(SimpleName:coerceBeforeWrite)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setPrivateCreatorID)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PrivateTags.CreatorID))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:putAE)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PrivateTags.CallingAET)(SimpleName:callingAET))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:putAE)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PrivateTags.CalledAET)(SimpleName:calledAET))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setPrivateCreatorID)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(IfStatement(InfixExpression(SimpleName:coerced)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:coerceAttributes)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:coerced))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:postCoercionProcessing)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds))))))(IfStatement(SimpleName:dcm4cheeURIReferenced)(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:uri)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.RetrieveURI)))))(IfStatement(InfixExpression(SimpleName:uri)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:retrieveAET)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.RetrieveAET)))))(ExpressionStatement(Assignment(SimpleName:availability)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.InstanceAvailability)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:retrieveAET)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:availability)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DcmServiceException))(QualifiedName:Status.DataSetDoesNotMatchSOPClassError)(StringLiteral:<STR>))))))(Block(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:selected)(MethodInvocation(SimpleName:selectReferencedDirectoryURI)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uri)))))(IfStatement(InfixExpression(SimpleName:selected)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DcmServiceException))(QualifiedName:Status.DataSetDoesNotMatchSOPClassError)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:uri)(StringLiteral:<STR>)(MethodInvocation(SimpleName:getReferencedDirectoryPath)))))))(ExpressionStatement(Assignment(SimpleName:filePath)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:selected)(NumberLiteral:1)))(SimpleName:length))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(ClassInstanceCreation(SimpleType(SimpleName:URI))(SimpleName:uri)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:isFile)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DcmServiceException))(QualifiedName:Status.ProcessingFailure)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:uri)(StringLiteral:<STR>))))))))(ExpressionStatement(Assignment(SimpleName:fsDTO)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getFileSystemMgt)))(SimpleName:getFileSystemOfGroup)(METHOD_INVOCATION_ARGUMENTS(SimpleName:refFileSystemGroupID)(ConditionalExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:selected)(NumberLiteral:0)))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:URI))(ArrayAccess(SimpleName:selected)(NumberLiteral:0))))(SimpleName:getPath))(ArrayAccess(SimpleName:selected)(NumberLiteral:0)))))))(ExpressionStatement(Assignment(SimpleName:retrieveAET)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fsDTO))(SimpleName:getRetrieveAET))))(ExpressionStatement(Assignment(SimpleName:availability)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Availability))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fsDTO))(SimpleName:getAvailability))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:file)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:readReferencedFile))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:file)))))(VariableDeclarationStatement(SimpleType(SimpleName:Dataset))(VariableDeclarationFragment(SimpleName:fileDS)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objFact))(SimpleName:newDataset))))(VariableDeclarationStatement(SimpleType(SimpleName:FileInputStream))(VariableDeclarationFragment(SimpleName:fis)(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:file))))(TryStatement(Block(IfStatement(SimpleName:md5sumReferencedFile)(Block(VariableDeclarationStatement(SimpleType(SimpleName:MessageDigest))(VariableDeclarationFragment(SimpleName:digest)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageDigest))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:DigestInputStream))(VariableDeclarationFragment(SimpleName:dis)(ClassInstanceCreation(SimpleType(SimpleName:DigestInputStream))(SimpleName:fis)(SimpleName:digest))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:bis)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(SimpleName:dis))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDS))(SimpleName:readFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bis)(NullLiteral)(QualifiedName:Tags.PixelData))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buf)(MethodInvocation(SimpleName:getByteBuffer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)))))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bis))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(EmptyStatement))(ExpressionStatement(Assignment(SimpleName:md5sum)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:digest))(SimpleName:digest)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:bis)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(SimpleName:fis))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDS))(SimpleName:readFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bis)(NullLiteral)(QualifiedName:Tags.PixelData)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fis))(SimpleName:close)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileDS))(SimpleName:putAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(QualifiedName:Dataset.REPLACE_ITEMS))))(ExpressionStatement(Assignment(SimpleName:ds)(ASSIGNMENT_OPERATOR:=)(SimpleName:fileDS)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getFileMetaInfo))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setPrivateCreatorID)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PrivateTags.CreatorID))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:tsuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PrivateTags.Dcm4cheURIReferencedTransferSyntaxUID)(QualifiedName:UIDs.ImplicitVRLittleEndian)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setPrivateCreatorID)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setFileMetaInfo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objFact))(SimpleName:newFileMetaInfo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rqCmd))(SimpleName:getAffectedSOPClassUID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rqCmd))(SimpleName:getAffectedSOPInstanceUID))(SimpleName:tsuid)))))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fsgrpid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:selectFileSystemGroup)(METHOD_INVOCATION_ARGUMENTS(SimpleName:callingAET)(SimpleName:calledAET)(SimpleName:ds)))))(ExpressionStatement(Assignment(SimpleName:fsDTO)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:selectStorageFileSystem)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fsgrpid)))))(ExpressionStatement(Assignment(SimpleName:retrieveAET)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fsDTO))(SimpleName:getRetrieveAET))))(ExpressionStatement(Assignment(SimpleName:availability)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Availability))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fsDTO))(SimpleName:getAvailability))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:baseDir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:toFile)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fsDTO))(SimpleName:getDirectoryPath))))))(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:makeFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:baseDir)(SimpleName:ds)(SimpleName:callingAET)))))(ExpressionStatement(Assignment(SimpleName:filePath)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getPath)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:baseDir))(SimpleName:getPath)))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:File.separatorChar)(CharacterLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:CompressCmd))(VariableDeclarationFragment(SimpleName:compressCmd)(NullLiteral)))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getReadTag))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Tags.PixelData))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getReadLength))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(Block(ExpressionStatement(Assignment(SimpleName:compressCmd)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:compressionRules))(SimpleName:getCompressFor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)(SimpleName:ds)))))(IfStatement(InfixExpression(SimpleName:compressCmd)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:compressCmd))(SimpleName:coerceDataset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setFileMetaInfo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objFact))(SimpleName:newFileMetaInfo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(ConditionalExpression(InfixExpression(SimpleName:compressCmd)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:compressCmd))(SimpleName:getTransferSyntaxUID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getTransferSyntaxUID))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:perfMon))(SimpleName:start)(METHOD_INVOCATION_ARGUMENTS(SimpleName:activeAssoc)(SimpleName:rq)(QualifiedName:PerfCounterEnum.C_STORE_SCP_OBJ_STORE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:perfMon))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:activeAssoc)(SimpleName:rq)(QualifiedName:PerfPropertyEnum.DICOM_FILE)(SimpleName:file))))(ExpressionStatement(Assignment(SimpleName:md5sum)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:storeToFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parser)(SimpleName:ds)(SimpleName:file)(SimpleName:compressCmd)(MethodInvocation(SimpleName:getByteBuffer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:perfMon))(SimpleName:stop)(METHOD_INVOCATION_ARGUMENTS(SimpleName:activeAssoc)(SimpleName:rq)(QualifiedName:PerfCounterEnum.C_STORE_SCP_OBJ_STORE))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:md5sum)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(SimpleName:ignoreDuplicate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:duplicates)(SimpleName:md5sum))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:iuid)(StringLiteral:<STR>)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:dcm4cheeURIReferenced))(Block(ExpressionStatement(MethodInvocation(SimpleName:deleteFailedStorage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))))(ReturnStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:putAE)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.RetrieveAET)(SimpleName:retrieveAET))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:coerceBeforeWrite))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setPrivateCreatorID)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PrivateTags.CreatorID))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:putAE)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PrivateTags.CallingAET)(SimpleName:callingAET))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:putAE)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PrivateTags.CalledAET)(SimpleName:calledAET))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setPrivateCreatorID)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(IfStatement(InfixExpression(SimpleName:coerced)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:coerceAttributes)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:coerced))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:postCoercionProcessing)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds))))))(ExpressionStatement(MethodInvocation(SimpleName:checkPatientIdAndName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:callingAET))))(VariableDeclarationStatement(SimpleType(SimpleName:Storage))(VariableDeclarationFragment(SimpleName:store)(MethodInvocation(SimpleName:getStorage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)))))(VariableDeclarationStatement(SimpleType(SimpleName:SeriesStored))(VariableDeclarationFragment(SimpleName:seriesStored)(MethodInvocation(SimpleName:handleSeriesStored)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)(SimpleName:store)(SimpleName:ds)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:newSeries)(InfixExpression(SimpleName:seriesStored)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:newStudy)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:seriuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.SeriesInstanceUID)))))(IfStatement(SimpleName:newSeries)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Dataset))(VariableDeclarationFragment(SimpleName:mwlFilter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:getCoercionAttributesFor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:callingAET)(SimpleName:STORE2MWL_XSL)(SimpleName:ds)(SimpleName:assoc)))))(IfStatement(InfixExpression(SimpleName:mwlFilter)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:coerced)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:merge)(METHOD_INVOCATION_ARGUMENTS(SimpleName:coerced)(MethodInvocation(SimpleName:mergeMatchingMWLItem)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)(SimpleName:ds)(SimpleName:seriuid)(SimpleName:mwlFilter)))))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callingAET))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:calledAET))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:ignorePatientIDForUnscheduled)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(QualifiedName:Tags.RequestAttributesSeq)(SimpleName:callingAET))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:supplementIssuerOfPatientID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:assoc)(SimpleName:callingAET)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:supplementIssuerOfAccessionNumber)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:assoc)(SimpleName:callingAET)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:supplementInstitutionalData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:assoc)(SimpleName:callingAET))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:generatePatientID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:ds)(SimpleName:calledAET))))))(ExpressionStatement(Assignment(SimpleName:newStudy)(ASSIGNMENT_OPERATOR:=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:store))(SimpleName:studyExists)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.StudyInstanceUID))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:perfMon))(SimpleName:start)(METHOD_INVOCATION_ARGUMENTS(SimpleName:activeAssoc)(SimpleName:rq)(QualifiedName:PerfCounterEnum.C_STORE_SCP_OBJ_REGISTER_DB))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:fileLength)(ConditionalExpression(InfixExpression(SimpleName:file)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:length))(NumberLiteral:0L))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:fspk)(ConditionalExpression(InfixExpression(SimpleName:fsDTO)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fsDTO))(SimpleName:getPk))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1L)))))(VariableDeclarationStatement(SimpleType(SimpleName:Dataset))(VariableDeclarationFragment(SimpleName:coercedElements)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:coercedElements)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:updateDB)(METHOD_INVOCATION_ARGUMENTS(SimpleName:store)(SimpleName:ds)(SimpleName:fspk)(SimpleName:filePath)(SimpleName:fileLength)(SimpleName:md5sum)(SimpleName:newSeries))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NonUniquePatientIDException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:coercePatientID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coerced))(SimpleName:putLO)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.PatientID)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.PatientID))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coerced))(SimpleName:putLO)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.IssuerOfPatientID)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.IssuerOfPatientID))))))(ExpressionStatement(Assignment(SimpleName:coercedElements)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:updateDB)(METHOD_INVOCATION_ARGUMENTS(SimpleName:store)(SimpleName:ds)(SimpleName:fspk)(SimpleName:filePath)(SimpleName:fileLength)(SimpleName:md5sum)(SimpleName:newSeries))))))))(IfStatement(SimpleName:newSeries)(Block(ExpressionStatement(Assignment(SimpleName:seriesStored)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:initSeriesStored)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:callingAET)(SimpleName:retrieveAET)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assoc))(SimpleName:putProperty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:SERIES_STORED)(SimpleName:seriesStored))))(IfStatement(SimpleName:newStudy)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:sendNewStudyNotification)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds))))))))(ExpressionStatement(MethodInvocation(SimpleName:appendInstanceToSeriesStored)(METHOD_INVOCATION_ARGUMENTS(SimpleName:seriesStored)(SimpleName:ds)(SimpleName:retrieveAET)(SimpleName:availability))))(ExpressionStatement(Assignment(SimpleName:coerced)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:merge)(METHOD_INVOCATION_ARGUMENTS(SimpleName:coerced)(SimpleName:coercedElements)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:logCoercion)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)(SimpleName:coerced)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:putAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:coercedElements)(QualifiedName:Dataset.MERGE_ITEMS))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:perfMon))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:activeAssoc)(SimpleName:rq)(QualifiedName:PerfPropertyEnum.REQ_DATASET)(SimpleName:ds))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:perfMon))(SimpleName:stop)(METHOD_INVOCATION_ARGUMENTS(SimpleName:activeAssoc)(SimpleName:rq)(QualifiedName:PerfCounterEnum.C_STORE_SCP_OBJ_REGISTER_DB))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coerced))(SimpleName:isEmpty))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(SimpleName:coerceWarnCallingAETs)(SimpleName:callingAET)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rspCmd))(SimpleName:putUS)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.Status)(QualifiedName:Status.Success)))))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:int)(Dimension))(VariableDeclarationFragment(SimpleName:coercedTags)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coerced))(SimpleName:size)))))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:it)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coerced))(SimpleName:iterator))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:coercedTags.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:coercedTags)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:DcmElement))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:next)))))(SimpleName:tag))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rspCmd))(SimpleName:putAT)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.OffendingElement)(SimpleName:coercedTags))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rspCmd))(SimpleName:putUS)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.Status)(QualifiedName:Status.CoercionOfDataElements))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:postProcess)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:DcmServiceException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:dcm4cheeURIReferenced))(Block(ExpressionStatement(MethodInvocation(SimpleName:deleteFailedStorage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))))(ThrowStatement(SimpleName:e))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:dcm4cheeURIReferenced))(Block(ExpressionStatement(MethodInvocation(SimpleName:deleteFailedStorage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DcmServiceException))(QualifiedName:Status.ProcessingFailure)(SimpleName:e))))))))))