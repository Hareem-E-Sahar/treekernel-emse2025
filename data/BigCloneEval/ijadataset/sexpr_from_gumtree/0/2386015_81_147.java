(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:backupFiles)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:destFile))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:ignoreLastBackup))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:dataFiles)(MethodInvocation(SimpleName:getFilenamesToBackup))))(IfStatement(InfixExpression(InfixExpression(SimpleName:dataFiles)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataFiles))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0)))(ReturnStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Collections))(SimpleName:sort)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dataFiles))))(VariableDeclarationStatement(SimpleType(SimpleName:ProfTimer))(VariableDeclarationFragment(SimpleName:pt)(ClassInstanceCreation(SimpleType(SimpleName:ProfTimer))(TypeLiteral(SimpleType(SimpleName:IncrementalDirectoryBackup)))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dataDir)(SimpleName:srcDirectory)))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:backupDir)(SimpleName:destDirectory)))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:File))(Dimension))(VariableDeclarationFragment(SimpleName:backupFiles)(MethodInvocation(SimpleName:getBackupFiles)(METHOD_INVOCATION_ARGUMENTS(SimpleName:backupDir)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:mostRecentBackupFile)(ParenthesizedExpression(ConditionalExpression(SimpleName:ignoreLastBackup)(NullLiteral)(MethodInvocation(SimpleName:findMostRecentBackupFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:backupFiles)))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:oldBackupTempFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:backupDir)(SimpleName:OLD_BACKUP_TEMP_FILENAME))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:newBackupTempFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:backupDir)(SimpleName:NEW_BACKUP_TEMP_FILENAME))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:newBackupOut)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:newBackupTempFile))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newBackupOut))(SimpleName:setLevel)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:9))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:wroteHistLog)(BooleanLiteral:false)))(IfStatement(InfixExpression(SimpleName:mostRecentBackupFile)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ZipInputStream))(VariableDeclarationFragment(SimpleName:oldBackupIn)(ClassInstanceCreation(SimpleType(SimpleName:ZipInputStream))(ClassInstanceCreation(SimpleType(SimpleName:TimedInputStream))(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:mostRecentBackupFile)))(NumberLiteral:60000)))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:oldBackupOut)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:oldBackupTempFile))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldBackupOut))(SimpleName:setLevel)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:9))))(ExpressionStatement(Assignment(SimpleName:oldBackupIsEmpty)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:atomicFilesInOldBackup)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ArrayList)))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:oldEntry)))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:oldEntry)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldBackupIn))(SimpleName:getNextEntry))))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filename)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldEntry))(SimpleName:getName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ThreadThrottler))(SimpleName:tick)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HIST_LOG_FILE_NAME))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filename)))(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:histLogModTime)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldEntry))(SimpleName:getTime))))(IfStatement(InfixExpression(SimpleName:histLogModTime)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:1))(ExpressionStatement(Assignment(SimpleName:histLogModTime)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mostRecentBackupFile))(SimpleName:lastModified)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:logFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:dataDir)(SimpleName:LOG_FILE_NAME))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:currentLogModTime)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logFile))(SimpleName:lastModified))))(IfStatement(InfixExpression(SimpleName:currentLogModTime)(INFIX_EXPRESSION_OPERATOR:<=)(SimpleName:histLogModTime))(ExpressionStatement(MethodInvocation(SimpleName:copyZipEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldBackupIn)(SimpleName:newBackupOut)(SimpleName:oldEntry)(NullLiteral))))(ExpressionStatement(MethodInvocation(SimpleName:writeHistLogFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldBackupIn)(SimpleName:newBackupOut)(SimpleName:dataDir)))))(ExpressionStatement(Assignment(SimpleName:wroteHistLog)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ContinueStatement)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileFilter))(SimpleName:accept)(METHOD_INVOCATION_ARGUMENTS(SimpleName:srcDirectory)(SimpleName:filename))))(ContinueStatement))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:dataDir)(SimpleName:filename))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataFiles))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filename)))(Block(ExpressionStatement(MethodInvocation(SimpleName:backupFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldEntry)(SimpleName:oldBackupIn)(SimpleName:oldBackupOut)(SimpleName:newBackupOut)(SimpleName:file)(SimpleName:filename)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:copyZipEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldBackupIn)(SimpleName:oldBackupOut)(SimpleName:oldEntry)(NullLiteral))))(ExpressionStatement(MethodInvocation(SimpleName:wroteEntryToOldBackup)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filename))))))))(ExpressionStatement(MethodInvocation(SimpleName:addAtomicFilesToBackup)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldBackupOut))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldBackupIn))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mostRecentBackupFile))(SimpleName:delete)))(IfStatement(SimpleName:oldBackupIsEmpty)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldBackupOut))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldBackupOut))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldBackupTempFile))(SimpleName:delete))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oldBackupOut))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:renameFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldBackupTempFile)(SimpleName:mostRecentBackupFile))))))))(ForStatement(VariableDeclarationExpression(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:iter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataFiles))(SimpleName:iterator))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iter))(SimpleName:hasNext))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ThreadThrottler))(SimpleName:tick)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filename)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iter))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:dataDir)(SimpleName:filename))))(ExpressionStatement(MethodInvocation(SimpleName:backupFile)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(NullLiteral)(NullLiteral)(SimpleName:newBackupOut)(SimpleName:file)(SimpleName:filename))))))(IfStatement(InfixExpression(SimpleName:wroteHistLog)(INFIX_EXPRESSION_OPERATOR:==)(BooleanLiteral:false))(ExpressionStatement(MethodInvocation(SimpleName:writeHistLogFile)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(SimpleName:newBackupOut)(SimpleName:dataDir)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pt))(SimpleName:click)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(IfStatement(InfixExpression(SimpleName:extraContentSupplier)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:extraContentSupplier))(SimpleName:addExtraContentToBackup)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newBackupOut)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pt))(SimpleName:click)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newBackupOut))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:renameFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newBackupTempFile)(SimpleName:destFile))))))))