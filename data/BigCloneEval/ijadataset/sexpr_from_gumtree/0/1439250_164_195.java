(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:download)(SingleVariableDeclaration(SimpleType(SimpleName:DownloadListener))(SimpleName:listener))(SingleVariableDeclaration(SimpleType(SimpleName:InputStreamFilterChain))(SimpleName:filterChain))(SimpleType(SimpleName:DownloadServiceException))(Block(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HttpGet))(VariableDeclarationFragment(SimpleName:request)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:toString)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:content)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtil))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity)))(SimpleName:getContent))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:stringTimer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RegexpUtils))(SimpleName:find)(METHOD_INVOCATION_ARGUMENTS(SimpleName:DOWNLOAD_TIMER)(SimpleName:content)(NumberLiteral:1)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:timer)(NumberLiteral:0)))(IfStatement(InfixExpression(InfixExpression(SimpleName:stringTimer)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stringTimer))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(ExpressionStatement(Assignment(SimpleName:timer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stringTimer)))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:timer)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:configuration))(SimpleName:respectWaitTime)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:timer)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:timer)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1000))(QualifiedName:TimerWaitReason.DOWNLOAD_TIMER))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ThreadUtils))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:timer)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1000)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:downloadUrl)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RegexpUtils))(SimpleName:find)(METHOD_INVOCATION_ARGUMENTS(SimpleName:DOWNLOAD_DIRECT_LINK_PATTERN)(SimpleName:content)(NumberLiteral:0)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:downloadUrl)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:downloadUrl))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HttpGet))(VariableDeclarationFragment(SimpleName:downloadRequest)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(SimpleName:downloadUrl))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:downloadResponse)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:downloadRequest)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:downloadResponse))(SimpleName:getStatusLine)))(SimpleName:getStatusCode))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:HttpStatus.SC_FORBIDDEN))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:timer)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(NumberLiteral:10)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:60)(NumberLiteral:1000))(QualifiedName:TimerWaitReason.COOLDOWN))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ThreadUtils))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(NumberLiteral:10)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:60)(NumberLiteral:1000)))))(ExpressionStatement(MethodInvocation(SimpleName:download)(METHOD_INVOCATION_ARGUMENTS(SimpleName:listener)(SimpleName:filterChain)))))(Block)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DownloadServiceException))(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DownloadServiceException))(SimpleName:e))))))))))