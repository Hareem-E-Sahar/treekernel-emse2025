(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:updateIndex)(SingleVariableDeclaration(SimpleType(SimpleName:CmsSearchIndex))(SimpleName:index))(SingleVariableDeclaration(SimpleType(SimpleName:I_CmsReport))(SimpleName:report))(SingleVariableDeclaration(SimpleType(SimpleName:List))(SimpleName:resourcesToIndex))(SimpleType(SimpleName:CmsException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsObject))(VariableDeclarationFragment(SimpleName:cms)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:initCmsObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:m_adminCms)))))(IfStatement(InfixExpression(SimpleName:report)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:report)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:CmsLogReport))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cms))(SimpleName:getRequestContext)))(SimpleName:getLocale))(TypeLiteral(SimpleType(SimpleName:CmsSearchManager))))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:checkConfiguration)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cms))))(Block(ReturnStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cms))(SimpleName:getRequestContext)))(SimpleName:setSiteRoot)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cms))(SimpleName:getRequestContext)))(SimpleName:setCurrentProject)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cms))(SimpleName:readProject)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getProject)))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:resourcesToIndex)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resourcesToIndex))(SimpleName:isEmpty)))(Block(ExpressionStatement(MethodInvocation(SimpleName:forceIndexUnlock)(METHOD_INVOCATION_ARGUMENTS(SimpleName:index)(SimpleName:report)(BooleanLiteral:false))))(VariableDeclarationStatement(SimpleType(SimpleName:CmsIndexingThreadManager))(VariableDeclarationFragment(SimpleName:threadManager)(ClassInstanceCreation(SimpleType(SimpleName:CmsIndexingThreadManager))(SimpleName:m_timeout))))(VariableDeclarationStatement(SimpleType(SimpleName:IndexWriter))(VariableDeclarationFragment(SimpleName:writer)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:writer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getIndexWriter)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:report))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:container)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.RPT_SEARCH_INDEXING_REBUILD_BEGIN_1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(QualifiedName:I_CmsReport.FORMAT_HEADLINE))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:sources)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getSources)))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sources))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsSearchIndexSource))(VariableDeclarationFragment(SimpleName:source)(CastExpression(SimpleType(SimpleName:CmsSearchIndexSource))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sources))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:I_CmsIndexer))(VariableDeclarationFragment(SimpleName:indexer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getIndexer)))(SimpleName:newInstance)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cms)(SimpleName:report)(SimpleName:index)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:indexer))(SimpleName:rebuildIndex)(METHOD_INVOCATION_ARGUMENTS(SimpleName:writer)(SimpleName:threadManager)(SimpleName:source))))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:threadManager))(SimpleName:isRunning))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:wait)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1000)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:optimize))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:isWarnEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_IO_INDEX_WRITER_OPTIMIZE_1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getPath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(SimpleName:e)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:report))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:container)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.RPT_SEARCH_INDEXING_REBUILD_END_1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(QualifiedName:I_CmsReport.FORMAT_HEADLINE)))))(Block(IfStatement(InfixExpression(SimpleName:writer)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:isWarnEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_IO_INDEX_WRITER_CLOSE_2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getPath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(SimpleName:e)))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:threadManager))(SimpleName:reportStatistics)(METHOD_INVOCATION_ARGUMENTS(SimpleName:report)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:updateCollections)(ClassInstanceCreation(SimpleType(SimpleName:ArrayList)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:hasResourcesToDelete)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:hasResourcesToUpdate)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:sources)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getSources)))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sources))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsSearchIndexSource))(VariableDeclarationFragment(SimpleName:source)(CastExpression(SimpleType(SimpleName:CmsSearchIndexSource))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sources))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:I_CmsIndexer))(VariableDeclarationFragment(SimpleName:indexer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getIndexer)))(SimpleName:newInstance)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cms)(SimpleName:report)(SimpleName:index)))))(VariableDeclarationStatement(SimpleType(SimpleName:CmsSearchIndexUpdateData))(VariableDeclarationFragment(SimpleName:updateData)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:indexer))(SimpleName:getUpdateData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:source)(SimpleName:resourcesToIndex)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateData))(SimpleName:isEmpty)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollections))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:updateData))))(ExpressionStatement(Assignment(SimpleName:hasResourcesToDelete)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:hasResourcesToDelete)(INFIX_EXPRESSION_OPERATOR:|)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateData))(SimpleName:hasResourcesToDelete)))))(ExpressionStatement(Assignment(SimpleName:hasResourcesToUpdate)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:hasResourcesToUpdate)(INFIX_EXPRESSION_OPERATOR:|)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateData))(SimpleName:hasResourceToUpdate)))))))))(IfStatement(InfixExpression(SimpleName:hasResourcesToDelete)(INFIX_EXPRESSION_OPERATOR:||)(SimpleName:hasResourcesToUpdate))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:report))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:container)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.RPT_SEARCH_INDEXING_UPDATE_BEGIN_1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(QualifiedName:I_CmsReport.FORMAT_HEADLINE))))))(ExpressionStatement(MethodInvocation(SimpleName:forceIndexUnlock)(METHOD_INVOCATION_ARGUMENTS(SimpleName:index)(SimpleName:report)(BooleanLiteral:true))))(IfStatement(SimpleName:hasResourcesToDelete)(Block(VariableDeclarationStatement(SimpleType(SimpleName:IndexReader))(VariableDeclarationFragment(SimpleName:reader)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:reader)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IndexReader))(SimpleName:open)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getPath)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_IO_INDEX_READER_OPEN_2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getPath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(SimpleName:e)))))))(IfStatement(InfixExpression(SimpleName:reader)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:i)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollections))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsSearchIndexUpdateData))(VariableDeclarationFragment(SimpleName:updateCollection)(CastExpression(SimpleType(SimpleName:CmsSearchIndexUpdateData))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:next)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollection))(SimpleName:hasResourcesToDelete))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollection))(SimpleName:getIndexer)))(SimpleName:deleteResources)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollection))(SimpleName:getResourcesToDelete))))))))))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_IO_INDEX_READER_CLOSE_2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getPath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(SimpleName:e)))))))))))))(IfStatement(SimpleName:hasResourcesToUpdate)(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsIndexingThreadManager))(VariableDeclarationFragment(SimpleName:threadManager)(ClassInstanceCreation(SimpleType(SimpleName:CmsIndexingThreadManager))(SimpleName:m_timeout))))(VariableDeclarationStatement(SimpleType(SimpleName:IndexWriter))(VariableDeclarationFragment(SimpleName:writer)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:writer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getIndexWriter)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false)))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:i)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollections))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsSearchIndexUpdateData))(VariableDeclarationFragment(SimpleName:updateCollection)(CastExpression(SimpleType(SimpleName:CmsSearchIndexUpdateData))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:next)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollection))(SimpleName:hasResourceToUpdate))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollection))(SimpleName:getIndexer)))(SimpleName:updateResources)(METHOD_INVOCATION_ARGUMENTS(SimpleName:writer)(SimpleName:threadManager)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updateCollection))(SimpleName:getResourcesToUpdate)))))))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:threadManager))(SimpleName:isRunning))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:wait)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1000)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block))))))(Block(IfStatement(InfixExpression(SimpleName:writer)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_IO_INDEX_WRITER_CLOSE_2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getPath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(SimpleName:e)))))))))))))(IfStatement(InfixExpression(SimpleName:hasResourcesToDelete)(INFIX_EXPRESSION_OPERATOR:||)(SimpleName:hasResourcesToUpdate))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:report))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:container)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.RPT_SEARCH_INDEXING_UPDATE_END_1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:index))(SimpleName:getName))))(QualifiedName:I_CmsReport.FORMAT_HEADLINE))))))))))))