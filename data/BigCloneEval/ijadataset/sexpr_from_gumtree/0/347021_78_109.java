(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(SimpleType(SimpleName:Function))(SimpleName:createFunction)(SingleVariableDeclaration(SimpleType(SimpleName:XQueryContext))(SimpleName:context))(SingleVariableDeclaration(SimpleType(SimpleName:XQueryAST))(SimpleName:ast))(SingleVariableDeclaration(SimpleType(SimpleName:FunctionDef))(SimpleName:def))(SimpleType(SimpleName:XPathException))(Block(IfStatement(InfixExpression(SimpleName:def)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XPathException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getLine))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getColumn))(StringLiteral:<STR>))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType(SimpleType(SimpleName:Function))))(VariableDeclarationFragment(SimpleName:fclass)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:def))(SimpleName:getImplementingClass))))(IfStatement(InfixExpression(SimpleName:fclass)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XPathException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getLine))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getColumn))(StringLiteral:<STR>))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:initArgs)(Dimension)(ArrayInitializer(SimpleName:context))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType))(VariableDeclarationFragment(SimpleName:constructorArgs)(Dimension)(ArrayInitializer(TypeLiteral(SimpleType(SimpleName:XQueryContext))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Constructor))(WildcardType))(VariableDeclarationFragment(SimpleName:construct)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:construct)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fclass))(SimpleName:getConstructor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constructorArgs))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NoSuchMethodException))(SimpleName:e))(Block)))(IfStatement(InfixExpression(SimpleName:construct)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:constructorArgs)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(SimpleType(SimpleName:Class))(Dimension(NumberLiteral:2))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:constructorArgs)(NumberLiteral:0))(ASSIGNMENT_OPERATOR:=)(TypeLiteral(SimpleType(SimpleName:XQueryContext)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:constructorArgs)(NumberLiteral:1))(ASSIGNMENT_OPERATOR:=)(TypeLiteral(SimpleType(SimpleName:FunctionSignature)))))(ExpressionStatement(Assignment(SimpleName:construct)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fclass))(SimpleName:getConstructor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constructorArgs)))))(IfStatement(InfixExpression(SimpleName:construct)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XPathException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getLine))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getColumn))(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:initArgs)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(SimpleType(SimpleName:Object))(Dimension(NumberLiteral:2))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:initArgs)(NumberLiteral:0))(ASSIGNMENT_OPERATOR:=)(SimpleName:context)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:initArgs)(NumberLiteral:1))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:def))(SimpleName:getSignature))))))(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:obj)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:construct))(SimpleName:newInstance)(METHOD_INVOCATION_ARGUMENTS(SimpleName:initArgs)))))(IfStatement(InstanceofExpression(SimpleName:obj)(SimpleType(SimpleName:Function)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:Function))(SimpleName:obj))))(SimpleName:setLocation)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getLine))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getColumn)))))(ReturnStatement(CastExpression(SimpleType(SimpleName:Function))(SimpleName:obj))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XPathException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getLine))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getColumn))(StringLiteral:<STR>)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XPathException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getLine))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ast))(SimpleName:getColumn))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fclass))(SimpleName:getName))(StringLiteral:<STR>)))))))))))