(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(Modifier:static)(PrimitiveType:void)(SimpleName:archiveBasketObjects)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:profileName))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:request))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:onlySelected))(SimpleType(SimpleName:XMLDBException))(SimpleType(SimpleName:MalformedURLException))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:DataStoreException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:archiveId)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:profileName))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:note)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:objType)(StringLiteral:<STR>)))(ExpressionStatement(MethodInvocation(SimpleName:removeBasketObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:profileName)(SimpleName:archiveId))))(VariableDeclarationStatement(SimpleType(SimpleName:Vector))(VariableDeclarationFragment(SimpleName:objIds)(ClassInstanceCreation(SimpleType(SimpleName:Vector)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:prdString)(StringLiteral:<STR>)))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:items)(NullLiteral)))(IfStatement(SimpleName:onlySelected)(Block(ExpressionStatement(Assignment(SimpleName:items)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getParameterValues)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:prdString)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:prdString)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:items.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(IfStatement(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(ParenthesizedExpression(InfixExpression(QualifiedName:items.length)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(Block(ExpressionStatement(Assignment(SimpleName:prdString)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:prdString)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:items)(SimpleName:i)))(SimpleName:toString))(StringLiteral:<STR>)))))(Block(ExpressionStatement(Assignment(SimpleName:prdString)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:prdString)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:items)(SimpleName:i)))(SimpleName:toString))(StringLiteral:<STR>))))))))(ExpressionStatement(Assignment(SimpleName:prdString)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:prdString)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(QualifiedName:org.w3c.dom.Element))(VariableDeclarationFragment(SimpleName:archiveResultDocument)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:metadataFile)(StringLiteral:<STR>)))(IfStatement(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:profileName))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:queryStr)(InfixExpression(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:profileName)(StringLiteral:<STR>))))(IfStatement(SimpleName:onlySelected)(Block(ExpressionStatement(Assignment(SimpleName:queryStr)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:queryStr)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:prdString))))))(ExpressionStatement(Assignment(SimpleName:queryStr)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:queryStr)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VOAccess))(SimpleName:getUserNameById)(METHOD_INVOCATION_ARGUMENTS(SimpleName:profileName)))(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:XQueryService))(VariableDeclarationFragment(SimpleName:queryService)(CastExpression(SimpleType(SimpleName:XQueryService))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CollectionsManager))(SimpleName:getService)(METHOD_INVOCATION_ARGUMENTS(SimpleName:userDB)(BooleanLiteral:true)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:ResourceSet))(VariableDeclarationFragment(SimpleName:queryResult)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:queryService))(SimpleName:query)(METHOD_INVOCATION_ARGUMENTS(SimpleName:queryStr)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:queryResult))(SimpleName:getSize))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(SimpleType(SimpleName:XMLResource))(VariableDeclarationFragment(SimpleName:resource)(CastExpression(SimpleType(SimpleName:XMLResource))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:queryResult))(SimpleName:getResource)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(ExpressionStatement(Assignment(SimpleName:archiveResultDocument)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(QualifiedName:org.w3c.dom.Document))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resource))(SimpleName:getContentAsDOM)))))(SimpleName:getDocumentElement))))(ExpressionStatement(Assignment(SimpleName:metadataFile)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resource))(SimpleName:getContent)))))))(IfStatement(InfixExpression(SimpleName:archiveResultDocument)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:NodeList))(VariableDeclarationFragment(SimpleName:resources)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:archiveResultDocument))(SimpleName:getElementsByTagName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resources))(SimpleName:getLength)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(QualifiedName:org.w3c.dom.Element))(VariableDeclarationFragment(SimpleName:res)(CastExpression(SimpleType(QualifiedName:org.w3c.dom.Element))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resources))(SimpleName:item)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getElementsByTagName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:getLength))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getElementsByTagName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:item)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(SimpleName:getFirstChild))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:id)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getElementsByTagName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:item)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(SimpleName:getFirstChild)))(SimpleName:getNodeValue))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objIds))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:id))))))))))))(IfStatement(InfixExpression(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Settings))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Settings))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(SimpleName:isDirectory))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Settings))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:archiveFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Settings))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:archiveId)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:zout)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:archiveFile)))))(ForStatement(VariableDeclarationExpression(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:it)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objIds))(SimpleName:iterator))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:nextObjId)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:objectUrl)(ClassInstanceCreation(SimpleType(SimpleName:URL))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRequestURL)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRequestURL)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:nextObjId)))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:inp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objectUrl))(SimpleName:openStream))))(IfStatement(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:inp))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zout))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(SimpleName:nextObjId)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buf)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:1048576))))))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inp))(SimpleName:available))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:count)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inp))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(QualifiedName:buf.length)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zout))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(SimpleName:count))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zout))(SimpleName:flush)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inp))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zout))(SimpleName:closeEntry))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nextObjId)(StringLiteral:<STR>)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zout))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zout))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:metadataFile))(SimpleName:getBytes)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zout))(SimpleName:closeEntry)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zout))(SimpleName:close)))(VariableDeclarationStatement(SimpleType(SimpleName:FileInputStream))(VariableDeclarationFragment(SimpleName:inputDataStream)(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:archiveFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileStoreSave))(SimpleName:storeFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:inputDataStream)(SimpleName:archiveId)(SimpleName:objType)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputDataStream))(SimpleName:available))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(SimpleName:archiveId)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputDataStream))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:archiveFile))(SimpleName:delete)))(ExpressionStatement(MethodInvocation(SimpleName:writeBasketObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:profileName)(SimpleName:archiveId)(StringLiteral:<STR>)(InfixExpression(SimpleName:note)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objIds))(SimpleName:size))(StringLiteral:<STR>))(SimpleName:objType))))))))