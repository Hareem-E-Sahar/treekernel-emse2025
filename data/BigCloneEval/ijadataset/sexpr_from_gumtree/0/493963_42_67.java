(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(SimpleType(SimpleName:String))(SimpleName:downloadWithChecksum)(SingleVariableDeclaration(SimpleType(SimpleName:URL))(SimpleName:url))(SingleVariableDeclaration(SimpleType(SimpleName:OutputStream))(SimpleName:checksumTarget))(SingleVariableDeclaration(SimpleType(SimpleName:OutputStream))(SimpleName:downloadTarget))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:requireChecksum))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:NoSuchAlgorithmException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:checksumURL)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:extension)(NullLiteral)))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:cse))(ArrayCreation(ArrayType(SimpleType(SimpleName:String))(Dimension))(ArrayInitializer(StringLiteral:<STR>)(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:checksumURL)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:URL))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:toExternalForm))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:cse)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URLUtil))(SimpleName:exists)(METHOD_INVOCATION_ARGUMENTS(SimpleName:checksumURL)))(Block(ExpressionStatement(Assignment(SimpleName:extension)(ASSIGNMENT_OPERATOR:=)(SimpleName:cse)))(BreakStatement)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:checksumURL)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:requireChecksum))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:url)))))(IfStatement(InfixExpression(SimpleName:checksumURL)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtil))(SimpleName:transfer)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream))(SimpleName:downloadTarget)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:checksumOut)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtil))(SimpleName:transfer)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksumURL))(SimpleName:openStream))(ConditionalExpression(InfixExpression(SimpleName:checksumTarget)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(SimpleName:checksumOut)(ClassInstanceCreation(SimpleType(QualifiedName:IOUtil.MultiplexedOutputStream))(SimpleName:checksumOut)(SimpleName:checksumTarget))))))(VariableDeclarationStatement(SimpleType(QualifiedName:ChecksumUtil.ChecksumInputStream))(VariableDeclarationFragment(SimpleName:input)(ClassInstanceCreation(SimpleType(QualifiedName:ChecksumUtil.ChecksumInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ChecksumUtil))(SimpleName:getAlgorithmFromExtension)(METHOD_INVOCATION_ARGUMENTS(SimpleName:extension))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:checksumRaw)(ClassInstanceCreation(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksumOut))(SimpleName:toByteArray)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:checksum)(MethodInvocation(SimpleName:parseChecksumLine)(METHOD_INVOCATION_ARGUMENTS(SimpleName:checksumRaw)))))(IfStatement(InfixExpression(SimpleName:checksum)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:checksumRaw)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtil))(SimpleName:transfer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:input)(SimpleName:downloadTarget))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:calculated)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(QualifiedName:ChecksumUtil.ChecksumInputStream))(SimpleName:input))))(SimpleName:getChecksumHexed))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksum))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:calculated))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:calculated)(StringLiteral:<STR>)(SimpleName:checksumRaw)))))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ChecksumUtil))(SimpleName:getAlgorithmFromExtension)(METHOD_INVOCATION_ARGUMENTS(SimpleName:extension))))))))