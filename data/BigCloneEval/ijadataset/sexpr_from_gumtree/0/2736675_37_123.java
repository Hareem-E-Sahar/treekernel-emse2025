(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(SimpleType(SimpleName:URLConnection))(SimpleName:openConnection)(SingleVariableDeclaration(SimpleType(SimpleName:URL))(SimpleName:url))(SimpleType(SimpleName:IOException))(Block(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HttpServlet))(VariableDeclarationFragment(SimpleName:servlet)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:path)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getPath))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:matches)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:registerName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:servlet)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:register))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:registerName)))))(IfStatement(InfixExpression(SimpleName:servlet)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:registerName))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:servletClassName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:servlet)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:HttpServlet))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Class))(SimpleName:forName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:servletClassName))))(SimpleName:newInstance)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:MockHttpServletRequest))(VariableDeclarationFragment(SimpleName:req)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:MockHttpServletRequest))))(SimpleName:setMethod)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:MockHttpServletResponse))(VariableDeclarationFragment(SimpleName:resp)(ClassInstanceCreation(SimpleType(SimpleName:MockHttpServletResponse)))))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:HttpURLConnection))(SimpleName:url)(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:int)(SimpleName:getResponseCode)(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(SimpleName:serviceIfNeeded)))(ReturnStatement(QualifiedName:resp.status))))(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(SimpleType(SimpleName:InputStream))(SimpleName:getInputStream)(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(SimpleName:serviceIfNeeded)))(IfStatement(InfixExpression(QualifiedName:resp.status)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:500))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:array)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:resp.out))(SimpleName:toByteArray))))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayInputStream))(SimpleName:array)))))(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(SimpleType(SimpleName:InputStream))(SimpleName:getErrorStream)(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:serviceIfNeeded))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:e))))))(IfStatement(InfixExpression(QualifiedName:resp.status)(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:500))(ReturnStatement(NullLiteral)))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:resp.out))(SimpleName:toByteArray))))))(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(SimpleType(SimpleName:OutputStream))(SimpleName:getOutputStream)(SimpleType(SimpleName:IOException))(Block(ReturnStatement(QualifiedName:req.tmp))))(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:addRequestProperty)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:key))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:value))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:addHeader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key)(SimpleName:value))))))(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:connect)(SimpleType(SimpleName:IOException))(Block))(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:boolean)(SimpleName:usingProxy)(Block(ReturnStatement(BooleanLiteral:false))))(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:disconnect)(Block))(FieldDeclaration(Modifier:private)(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:called)))(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:serviceIfNeeded)(SimpleType(SimpleName:IOException))(Block(TryStatement(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:called))(Block(ExpressionStatement(Assignment(SimpleName:called)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:setMethod)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getRequestMethod)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:servlet))(SimpleName:service)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(SimpleName:resp)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ServletException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:e))))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InstantiationException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:e)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IllegalAccessException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:e)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ClassNotFoundException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:e))))))))))