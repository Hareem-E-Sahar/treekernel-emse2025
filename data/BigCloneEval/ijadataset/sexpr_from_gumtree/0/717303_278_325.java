(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:IScriptNode))(SimpleName:finishNode)(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:success))(SimpleType(SimpleName:XAwareException))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callStack))(SimpleName:isEmpty))(Block(ReturnStatement(NullLiteral))))(VariableDeclarationStatement(SimpleType(SimpleName:IScriptNode))(VariableDeclarationFragment(SimpleName:finishedNode)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callStack))(SimpleName:pop))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:dumpStack)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(SimpleName:CLASS_NAME)(StringLiteral:<STR>))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:complete)(METHOD_INVOCATION_ARGUMENTS(SimpleName:success)))))(Block(TryStatement(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:startsNewChannelScope))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:success))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:getChannelScope)))(SimpleName:complete)(METHOD_INVOCATION_ARGUMENTS(SimpleName:success)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RuntimeException))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:errMsg)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:e))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:severe)(METHOD_INVOCATION_ARGUMENTS(SimpleName:errMsg)(SimpleName:CLASS_NAME)(StringLiteral:<STR>))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XAwareException))(SimpleName:errMsg)(SimpleName:e)))))(Block(TryStatement(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:startsNewOutputStream))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:getOutputStreamer)))(SimpleName:closeStream))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RuntimeException))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:errMsg)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:e))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:severe)(METHOD_INVOCATION_ARGUMENTS(SimpleName:errMsg)(SimpleName:CLASS_NAME)(StringLiteral:<STR>))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XAwareException))(SimpleName:errMsg)(SimpleName:e)))))(Block(TryStatement(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:getContext)))(SimpleName:getScriptRoot))(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:getElement)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:getContext)))(SimpleName:endPassProcessing))))))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:startsNewTransactionScope))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ITransactionContext))(VariableDeclarationFragment(SimpleName:transactionContext)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:finishedNode))(SimpleName:getTransactionContext))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:processingComplete)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:processingComplete))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:processingComplete))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:finer)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transactionContext))(SimpleName:getTransactionName))(StringLiteral:<STR>)(SimpleName:success))(SimpleName:CLASS_NAME)(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transactionContext))(SimpleName:complete)(METHOD_INVOCATION_ARGUMENTS(SimpleName:success)(SimpleName:processingComplete))))))))))))))(ReturnStatement(SimpleName:finishedNode))))))