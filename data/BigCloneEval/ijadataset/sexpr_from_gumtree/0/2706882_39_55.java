(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:init)(SingleVariableDeclaration(SimpleType(SimpleName:HttpURLConnection))(SimpleName:connection))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:pull))(SingleVariableDeclaration(SimpleType(SimpleName:OutputStream))(SimpleName:out))(SimpleType(SimpleName:IOException))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getResponseCode))(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:400))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:metadata)(MethodInvocation(SimpleName:extractMetadata)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)))))(ExpressionStatement(Assignment(SimpleName:in)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getInputStream))))(IfStatement(SimpleName:pull)(IfStatement(InfixExpression(SimpleName:out)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:body)(MethodInvocation(SimpleName:slurpInputStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:object))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:S3Object))(SimpleName:body)(SimpleName:metadata)))))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buf)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:READ_BUF_SIZE))))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:bin)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(SimpleName:in)(SimpleName:READ_BUF_SIZE))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedOutputStream))(VariableDeclarationFragment(SimpleName:bout)(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(SimpleName:out)(SimpleName:READ_BUF_SIZE))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:count)))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:count)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bin))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bout))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(SimpleName:count)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bout))(SimpleName:flush))))))))))))