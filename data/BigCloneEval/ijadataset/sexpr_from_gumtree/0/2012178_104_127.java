(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(SimpleType(SimpleName:HandleMode))(SimpleName:tunnel)(SingleVariableDeclaration(SimpleType(SimpleName:HTTPInputStream))(SimpleName:in))(SingleVariableDeclaration(SimpleType(SimpleName:MultiOutputStream))(SimpleName:out))(SingleVariableDeclaration(SimpleType(SimpleName:WebConnection))(SimpleName:wc))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:SocketChannel))(VariableDeclarationFragment(SimpleName:rcc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:getSocketChannel))))(VariableDeclarationStatement(SimpleType(SimpleName:SocketChannel))(VariableDeclarationFragment(SimpleName:wcc)(CastExpression(SimpleType(SimpleName:SocketChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:getChannel)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:rcc)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:wcc)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:SocketChannel))(VariableDeclarationFragment(SimpleName:rwc)(CastExpression(SimpleType(SimpleName:SocketChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wc))(SimpleName:getOutputStream)))(SimpleName:getChannel)))))(VariableDeclarationStatement(SimpleType(SimpleName:SocketChannel))(VariableDeclarationFragment(SimpleName:wwc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wc))(SimpleName:getInputStream)))(SimpleName:getSocketChannel))))(IfStatement(InfixExpression(InfixExpression(SimpleName:rwc)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:wwc)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxy))(SimpleName:getCounter)))(SimpleName:inc)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(SimpleName:channelTunnel)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rcc)(SimpleName:wcc)(SimpleName:rwc)(SimpleName:wwc))))(ReturnStatement(QualifiedName:HandleMode.CHANNELED))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxy))(SimpleName:getCounter)))(SimpleName:inc)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:server)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wc))(SimpleName:getOutputStream))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:resp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wc))(SimpleName:getInputStream))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buf)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:1024))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)))(ExpressionStatement(ClassInstanceCreation(SimpleType(SimpleName:CopyThread))(SimpleName:resp)(SimpleName:out)))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)))))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:server))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(SimpleName:read))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:server))(SimpleName:flush)))))(ReturnStatement(QualifiedName:HandleMode.THREADED))))))