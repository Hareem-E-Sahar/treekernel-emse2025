(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:doCStore)(SingleVariableDeclaration(SimpleType(SimpleName:ActiveAssociation))(SimpleName:assoc))(SingleVariableDeclaration(SimpleType(SimpleName:Dimse))(SimpleName:rq))(SingleVariableDeclaration(SimpleType(SimpleName:Command))(SimpleName:rspCmd))(SimpleType(SimpleName:DcmServiceException))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Command))(VariableDeclarationFragment(SimpleName:rqCmd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getCommand))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getDataAsStream))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:isArchiveHighWater))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close)))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DcmServiceException))(QualifiedName:Status.OutOfResources)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:cuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rqCmd))(SimpleName:getAffectedSOPClassUID))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:iuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rqCmd))(SimpleName:getAffectedSOPInstanceUID))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:tsuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getTransferSyntaxUID))))(VariableDeclarationStatement(SimpleType(SimpleName:DcmDecodeParam))(VariableDeclarationFragment(SimpleName:decParam)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DcmDecodeParam))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tsuid)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileTS)(ConditionalExpression(QualifiedName:decParam.encapsulated)(SimpleName:tsuid)(QualifiedName:UIDs.ExplicitVRLittleEndian))))(VariableDeclarationStatement(SimpleType(SimpleName:DcmEncodeParam))(VariableDeclarationFragment(SimpleName:encParam)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DcmEncodeParam))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileTS)))))(VariableDeclarationStatement(SimpleType(SimpleName:DcmObjectFactory))(VariableDeclarationFragment(SimpleName:dof)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DcmObjectFactory))(SimpleName:getInstance))))(VariableDeclarationStatement(SimpleType(SimpleName:Dataset))(VariableDeclarationFragment(SimpleName:ds)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dof))(SimpleName:newDataset))))(VariableDeclarationStatement(SimpleType(SimpleName:DcmParserFactory))(VariableDeclarationFragment(SimpleName:pf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DcmParserFactory))(SimpleName:getInstance))))(VariableDeclarationStatement(SimpleType(SimpleName:DcmParser))(VariableDeclarationFragment(SimpleName:parser)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pf))(SimpleName:newDcmParser)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:setDcmHandler)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getDcmHandler)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:parseDataset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:decParam)(QualifiedName:Tags.PixelData))))(ExpressionStatement(MethodInvocation(SimpleName:checkDataset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rqCmd)(SimpleName:ds)(SimpleName:parser))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setFileMetaInfo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dof))(SimpleName:newFileMetaInfo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cuid)(SimpleName:iuid)(SimpleName:fileTS))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:getInstanceFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:iuid)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:md5file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MD5Utils))(SimpleName:makeMD5File)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:delete)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:delete)(METHOD_INVOCATION_ARGUMENTS(SimpleName:md5file))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:file)))))(VariableDeclarationStatement(SimpleType(SimpleName:MessageDigest))(VariableDeclarationFragment(SimpleName:digest)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageDigest))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:out)(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:DigestOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:file))(SimpleName:digest)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:writeFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:out)(SimpleName:encParam))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getReadTag))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Tags.PixelData))(Block(ExpressionStatement(MethodInvocation(SimpleName:writePixelData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:encParam)(SimpleName:ds)(SimpleName:parser)(SimpleName:out))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:parseDataset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:decParam)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:subSet)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.PixelData)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(SimpleName:writeDataset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:out)(SimpleName:encParam)))))))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ignore))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:register)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:md5file)))))(VariableDeclarationStatement(SimpleType(SimpleName:Writer))(VariableDeclarationFragment(SimpleName:md5out)(ClassInstanceCreation(SimpleType(SimpleName:FileWriter))(SimpleName:md5file))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:md5out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MD5Utils))(SimpleName:toHexChars)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:digest))(SimpleName:digest))))))))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:md5out))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ignore))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:register)(METHOD_INVOCATION_ARGUMENTS(SimpleName:md5file))))))(VariableDeclarationStatement(SimpleType(SimpleName:Association))(VariableDeclarationFragment(SimpleName:a)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assoc))(SimpleName:getAssociation))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:sourceAET)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:a))(SimpleName:getCallingAET))))(IfStatement(MethodInvocation(SimpleName:emulateMediaCreationRequestForAET)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sourceAET)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:f)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:getEmulateRequestFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sourceAET)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.PatientID)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.IssuerOfPatientID)))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:firstObject)))(IfStatement(Assignment(SimpleName:firstObject)(ASSIGNMENT_OPERATOR:=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:exists))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getParentFile))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dir))(SimpleName:mkdirs))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:dir))))))))(VariableDeclarationStatement(SimpleType(SimpleName:FileWriter))(VariableDeclarationFragment(SimpleName:fw)(ClassInstanceCreation(SimpleType(SimpleName:FileWriter))(SimpleName:f)(BooleanLiteral:true))))(TryStatement(Block(IfStatement(SimpleName:firstObject)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fw))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(SimpleName:lookupMediaWriterName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:a))(SimpleName:getCalledAET))))(INFIX_EXPRESSION_OPERATOR:+)(CharacterLiteral:<STR>)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fw))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:cuid)(INFIX_EXPRESSION_OPERATOR:+)(CharacterLiteral:<STR>)(SimpleName:iuid)(CharacterLiteral:<STR>))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fw))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(ParenthesizedExpression(ConditionalExpression(SimpleName:firstObject)(StringLiteral:<STR>)(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:f))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:t))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:iuid)(StringLiteral:<STR>))(SimpleName:t))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:delete)(METHOD_INVOCATION_ARGUMENTS(SimpleName:md5file))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spoolDir))(SimpleName:delete)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DcmServiceException))(QualifiedName:Status.ProcessingFailure)(SimpleName:t)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close)))))))))