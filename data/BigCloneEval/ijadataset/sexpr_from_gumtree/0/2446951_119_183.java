(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:Integer))(SimpleName:doInConnection)(SingleVariableDeclaration(SimpleType(SimpleName:Connection))(SimpleName:c))(SimpleType(SimpleName:SQLException))(SimpleType(SimpleName:DataAccessException))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dataCount)(NumberLiteral:0)))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:ps)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:ResultSet))(VariableDeclarationFragment(SimpleName:rs)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:autoCommit)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:getAutoCommit))))(TryStatement(Block(IfStatement(SimpleName:requiresAutoCommitFalse)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:setAutoCommit)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:channelId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getChannel)))(SimpleName:getChannelId))))(ExpressionStatement(Assignment(SimpleName:ps)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:prepareStatment)(METHOD_INVOCATION_ARGUMENTS(SimpleName:c)))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:ts)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(ExpressionStatement(Assignment(SimpleName:rs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ps))(SimpleName:executeQuery))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:executeTimeInMs)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:ts))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:incrementStat)(METHOD_INVOCATION_ARGUMENTS(SimpleName:executeTimeInMs)(QualifiedName:ChannelRouterContext.STAT_QUERY_TIME_MS))))(IfStatement(InfixExpression(SimpleName:executeTimeInMs)(INFIX_EXPRESSION_OPERATOR:>)(QualifiedName:Constants.LONG_OPERATION_THRESHOLD))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:executeTimeInMs)(SimpleName:channelId))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:toRead)(InfixExpression(SimpleName:maxQueueSize)(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataQueue))(SimpleName:size)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Data)))(VariableDeclarationFragment(SimpleName:memQueue)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Data)))(SimpleName:toRead))))(ExpressionStatement(Assignment(SimpleName:ts)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rs))(SimpleName:next))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:reading))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isBlank)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rs))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:13)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Data))(VariableDeclarationFragment(SimpleName:data)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataService))(SimpleName:readData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rs)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setLastDataIdForTransactionId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:memQueue))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))(ExpressionStatement(PostfixExpression(SimpleName:dataCount)(POSTFIX_EXPRESSION_OPERATOR:++)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:incrementStat)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:ts))(QualifiedName:ChannelRouterContext.STAT_READ_DATA_MS)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:incrementStat)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:ts))(QualifiedName:ChannelRouterContext.STAT_REREAD_DATA_MS))))))(ExpressionStatement(Assignment(SimpleName:ts)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(IfStatement(InfixExpression(SimpleName:toRead)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(SimpleName:copyToQueue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:memQueue))))(ExpressionStatement(Assignment(SimpleName:toRead)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:maxQueueSize)(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataQueue))(SimpleName:size)))))(ExpressionStatement(Assignment(SimpleName:memQueue)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Data)))(SimpleName:toRead)))))(Block(ExpressionStatement(PostfixExpression(SimpleName:toRead)(POSTFIX_EXPRESSION_OPERATOR:--)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:incrementStat)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:ts))(QualifiedName:ChannelRouterContext.STAT_ENQUEUE_DATA_MS))))(ExpressionStatement(Assignment(SimpleName:ts)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))))(ExpressionStatement(Assignment(SimpleName:ts)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(ExpressionStatement(MethodInvocation(SimpleName:copyToQueue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:memQueue))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:incrementStat)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:ts))(QualifiedName:ChannelRouterContext.STAT_ENQUEUE_DATA_MS))))(ReturnStatement(SimpleName:dataCount)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JdbcUtils))(SimpleName:closeResultSet)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rs))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JdbcUtils))(SimpleName:closeStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ps))))(ExpressionStatement(Assignment(SimpleName:rs)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(Assignment(SimpleName:ps)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(IfStatement(SimpleName:requiresAutoCommitFalse)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:commit)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:setAutoCommit)(METHOD_INVOCATION_ARGUMENTS(SimpleName:autoCommit))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:done)(BooleanLiteral:false)))(DoStatement(Block(ExpressionStatement(Assignment(SimpleName:done)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataQueue))(SimpleName:offer)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:EOD)))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:done))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AppUtils))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:50)))))))(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:done))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:reading)))(ExpressionStatement(Assignment(SimpleName:reading)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))))))))