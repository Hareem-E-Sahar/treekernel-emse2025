(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:ThreadedTest))(Modifier:public)(PrimitiveType:void)(SimpleName:runUserCacheMultiThreaded)(SimpleType(SimpleName:Exception))(Block(ExpressionStatement(MethodInvocation(SimpleName:createCache)))(ExpressionStatement(MethodInvocation(SimpleName:resetMocks)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:USER))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:expect)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:getAvatar)(METHOD_INVOCATION_ARGUMENTS(SimpleName:USER))))))(SimpleName:andReturn)(METHOD_INVOCATION_ARGUMENTS(SimpleName:AVATAR2))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:draw)(METHOD_INVOCATION_ARGUMENTS(SimpleName:AVATAR2))))(ExpressionStatement(MethodInvocation(SimpleName:replay)(METHOD_INVOCATION_ARGUMENTS(SimpleName:db)(SimpleName:context))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cache))(SimpleName:updateUser)))(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:Script))(SimpleType(SimpleName:UserCache)))(VariableDeclarationFragment(SimpleName:main)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:Script))(SimpleType(SimpleName:UserCache)))(SimpleName:cache))))(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:Script))(SimpleType(SimpleName:UserCache)))(VariableDeclarationFragment(SimpleName:second)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:Script))(SimpleType(SimpleName:UserCache)))(SimpleName:main))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:UserCache))(VariableDeclarationFragment(SimpleName:control)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main))(SimpleName:object))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:UserDb))(VariableDeclarationFragment(SimpleName:dbTarget)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main))(SimpleName:createTarget)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:UserDb)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:RenderingContext))(VariableDeclarationFragment(SimpleName:contextTarget)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main))(SimpleName:createTarget)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:RenderingContext)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ReadWriteLock))(VariableDeclarationFragment(SimpleName:lockTarget)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main))(SimpleName:createTarget)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:ReadWriteLock)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:control))(SimpleName:updateCache)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main))(SimpleName:inLastMethod)))(SimpleName:beforeCalling)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbTarget))(SimpleName:getAvatar)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(SimpleName:releaseTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:second))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:control))(SimpleName:drawUserAvatar)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main))(SimpleName:inLastMethod)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contextTarget))(SimpleName:draw)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main))(SimpleName:beforeCallingLastMethod)))(SimpleName:releaseTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:second))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main))(SimpleName:addTask)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ScriptedTask))(SimpleType(SimpleName:UserCache)))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:execute)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cache))(SimpleName:drawUserAvatar))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:second))(SimpleName:addTask)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ScriptedTask))(SimpleType(SimpleName:UserCache)))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:execute)(Block(VariableDeclarationStatement(SimpleType(SimpleName:ReentrantReadWriteLock))(VariableDeclarationFragment(SimpleName:lock)(QualifiedName:cache.rwl)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:printf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:isWriteLocked))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:getReadLockCount)))))(ExpressionStatement(MethodInvocation(SimpleName:releaseTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:main))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:printf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:isWriteLocked))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:getReadLockCount)))))(ExpressionStatement(MethodInvocation(SimpleName:releaseTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:main)))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:Scripter))(SimpleType(SimpleName:UserCache)))(SimpleName:main)(SimpleName:second)))(SimpleName:execute)))))))