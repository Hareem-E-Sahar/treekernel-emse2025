(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(SimpleType(SimpleName:Object))(SimpleName:doAction)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Context))(SimpleName:cx))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Scriptable))(SimpleName:scope))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Scriptable))(SimpleName:thisObj))(SingleVariableDeclaration(Modifier:final)(ArrayType(SimpleType(SimpleName:Object))(Dimension))(SimpleName:args))(SingleVariableDeclaration(Modifier:final)(PrimitiveType:int)(SimpleName:actionType))(Block(IfStatement(InfixExpression(InfixExpression(InfixExpression(SimpleName:RA_REPLACE)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:actionType))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(QualifiedName:args.length)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:2)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InstanceofExpression(ArrayAccess(SimpleName:args)(NumberLiteral:1))(SimpleType(SimpleName:String)))))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:thisString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Context))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thisObj)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:replacement)(CastExpression(SimpleType(SimpleName:String))(ArrayAccess(SimpleName:args)(NumberLiteral:1)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:arg0)(ArrayAccess(SimpleName:args)(NumberLiteral:0))))(IfStatement(InstanceofExpression(SimpleName:arg0)(SimpleType(SimpleName:String)))(Block(ExpressionStatement(Assignment(SimpleName:replacement)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:REPLACE_PATTERN))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:replacement))))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:replaceOnce)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thisString)(CastExpression(SimpleType(SimpleName:String))(SimpleName:arg0))(SimpleName:replacement)))))(IfStatement(InstanceofExpression(SimpleName:arg0)(SimpleType(SimpleName:NativeRegExp)))(Block(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:NativeRegExp))(VariableDeclarationFragment(SimpleName:regexp)(CastExpression(SimpleType(SimpleName:NativeRegExp))(SimpleName:arg0))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:RegExpData))(VariableDeclarationFragment(SimpleName:reData)(ClassInstanceCreation(SimpleType(SimpleName:RegExpData))(SimpleName:regexp))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:regex)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reData))(SimpleName:getJavaPattern))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:flags)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reData))(SimpleName:getJavaFlags))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:pattern)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:regex)(SimpleName:flags)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:matcher)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pattern))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thisString)))))(ReturnStatement(MethodInvocation(SimpleName:doReplacement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thisString)(SimpleName:replacement)(SimpleName:matcher)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reData))(SimpleName:hasFlag)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))))))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:PatternSyntaxException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e)))))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:RA_MATCH)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:actionType))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:RA_SEARCH)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:actionType)))(Block(IfStatement(InfixExpression(QualifiedName:args.length)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ReturnStatement(NullLiteral))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:arg0)(ArrayAccess(SimpleName:args)(NumberLiteral:0))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:thisString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Context))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thisObj)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:RegExpData))(VariableDeclarationFragment(SimpleName:reData)))(IfStatement(InstanceofExpression(SimpleName:arg0)(SimpleType(SimpleName:NativeRegExp)))(Block(ExpressionStatement(Assignment(SimpleName:reData)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:RegExpData))(CastExpression(SimpleType(SimpleName:NativeRegExp))(SimpleName:arg0))))))(Block(ExpressionStatement(Assignment(SimpleName:reData)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:RegExpData))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Context))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:arg0))))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:pattern)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reData))(SimpleName:getJavaPattern))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reData))(SimpleName:getJavaFlags))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:matcher)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pattern))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thisString)))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:found)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:find))))(IfStatement(InfixExpression(SimpleName:RA_SEARCH)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:actionType))(Block(IfStatement(SimpleName:found)(Block(ExpressionStatement(MethodInvocation(SimpleName:setProperties)(METHOD_INVOCATION_ARGUMENTS(SimpleName:matcher)(SimpleName:thisString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:start))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:end)))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:start)))))(ReturnStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:found))(Block(ReturnStatement(NullLiteral))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:index)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:start)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Object)))(VariableDeclarationFragment(SimpleName:groups)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Object))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reData))(SimpleName:hasFlag)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:groups))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(ExpressionStatement(MethodInvocation(SimpleName:setProperties)(METHOD_INVOCATION_ARGUMENTS(SimpleName:matcher)(SimpleName:thisString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:start)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:end)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:find))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:groups))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(ExpressionStatement(MethodInvocation(SimpleName:setProperties)(METHOD_INVOCATION_ARGUMENTS(SimpleName:matcher)(SimpleName:thisString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:start)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:end)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))))))(Block(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:groupCount)))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:i))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:group)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)))))(IfStatement(InfixExpression(SimpleName:group)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:group)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Context))(SimpleName:getUndefinedValue))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:groups))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:group))))))(ExpressionStatement(MethodInvocation(SimpleName:setProperties)(METHOD_INVOCATION_ARGUMENTS(SimpleName:matcher)(SimpleName:thisString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:start))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:matcher))(SimpleName:end)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Scriptable))(VariableDeclarationFragment(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cx))(SimpleName:newArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:scope)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:groups))(SimpleName:toArray))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:index))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:response)(SimpleName:thisString))))(ReturnStatement(SimpleName:response)))))(ReturnStatement(MethodInvocation(SimpleName:wrappedAction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cx)(SimpleName:scope)(SimpleName:thisObj)(SimpleName:args)(SimpleName:actionType))))))))