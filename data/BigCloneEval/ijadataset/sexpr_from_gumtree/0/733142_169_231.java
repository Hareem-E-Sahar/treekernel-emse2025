(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(SimpleType(SimpleName:BufferedImage))(SimpleName:convertToIndexed)(SingleVariableDeclaration(SimpleType(SimpleName:BufferedImage))(SimpleName:image))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:paletteSize))(SingleVariableDeclaration(SimpleType(SimpleName:Color))(SimpleName:transparent))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isIndexed)(InstanceofExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getColorModel))(SimpleType(SimpleName:IndexColorModel)))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedImage))(VariableDeclarationFragment(SimpleName:result)(SimpleName:image)))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:isIndexed))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IndexColorModel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getColorModel)))))(SimpleName:getMapSize))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:paletteSize))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:BufferedImage))(VariableDeclarationFragment(SimpleName:temp)(ClassInstanceCreation(SimpleType(SimpleName:BufferedImage))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getWidth))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getHeight))(QualifiedName:BufferedImage.TYPE_3BYTE_BGR))))(VariableDeclarationStatement(SimpleType(SimpleName:Graphics2D))(VariableDeclarationFragment(SimpleName:gr)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:temp))(SimpleName:createGraphics))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:gr))(SimpleName:setRenderingHint)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:RenderingHints.KEY_COLOR_RENDERING)(QualifiedName:RenderingHints.VALUE_COLOR_RENDER_QUALITY))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:gr))(SimpleName:drawImage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:image)(NumberLiteral:0)(NumberLiteral:0)(NullLiteral))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:pixels)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:DataBufferByte))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:temp))(SimpleName:getRaster)))(SimpleName:getDataBuffer)))))(SimpleName:getData))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nPix)(InfixExpression(QualifiedName:pixels.length)(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:3))))(VariableDeclarationStatement(ArrayType(PrimitiveType:int)(Dimension))(VariableDeclarationFragment(SimpleName:indexedPixels)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(SimpleName:nPix))))))(VariableDeclarationStatement(SimpleType(SimpleName:NeuQuant))(VariableDeclarationFragment(SimpleName:nq)(ClassInstanceCreation(SimpleType(SimpleName:NeuQuant))(SimpleName:pixels)(QualifiedName:pixels.length)(NumberLiteral:10)(SimpleName:paletteSize))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:gr))(SimpleName:dispose)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:colorTab)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nq))(SimpleName:process))))(VariableDeclarationStatement(ArrayType(PrimitiveType:boolean)(Dimension))(VariableDeclarationFragment(SimpleName:usedEntry)(ArrayCreation(ArrayType(PrimitiveType:boolean)(Dimension(SimpleName:paletteSize))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:colorTab.length))(Assignment(SimpleName:i)(ASSIGNMENT_OPERATOR:+=)(NumberLiteral:3))(Block(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:b)(ArrayAccess(SimpleName:colorTab)(SimpleName:i))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:colorTab)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:colorTab)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:2)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:colorTab)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:2)))(ASSIGNMENT_OPERATOR:=)(SimpleName:b)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:usedEntry)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:3)))(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:k)(NumberLiteral:0)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:nPix))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:index)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nq))(SimpleName:map)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(ArrayAccess(SimpleName:pixels)(PostfixExpression(SimpleName:k)(POSTFIX_EXPRESSION_OPERATOR:++)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xff))(InfixExpression(ArrayAccess(SimpleName:pixels)(PostfixExpression(SimpleName:k)(POSTFIX_EXPRESSION_OPERATOR:++)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xff))(InfixExpression(ArrayAccess(SimpleName:pixels)(PostfixExpression(SimpleName:k)(POSTFIX_EXPRESSION_OPERATOR:++)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xff))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:usedEntry)(SimpleName:index))(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:indexedPixels)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:byte)(SimpleName:index))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bits)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:ceil)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:log)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paletteSize)))(INFIX_EXPRESSION_OPERATOR:/)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:log)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)))))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:trans)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(IfStatement(InfixExpression(SimpleName:isIndexed)(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:transparent)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IndexColorModel))(VariableDeclarationFragment(SimpleName:icm)(CastExpression(SimpleType(SimpleName:IndexColorModel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getColorModel)))))(ExpressionStatement(Assignment(SimpleName:transparent)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Color))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:icm))(SimpleName:getRGB)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:icm))(SimpleName:getTransparentPixel)))))))))(IfStatement(InfixExpression(SimpleName:transparent)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:r)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transparent))(SimpleName:getRed))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:g)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transparent))(SimpleName:getGreen))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:b)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transparent))(SimpleName:getBlue))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dmin)(InfixExpression(NumberLiteral:256)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:256)(NumberLiteral:256))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:len)(QualifiedName:colorTab.length)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:len))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dr)(InfixExpression(SimpleName:r)(INFIX_EXPRESSION_OPERATOR:-)(ParenthesizedExpression(InfixExpression(ArrayAccess(SimpleName:colorTab)(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xff))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dg)(InfixExpression(SimpleName:g)(INFIX_EXPRESSION_OPERATOR:-)(ParenthesizedExpression(InfixExpression(ArrayAccess(SimpleName:colorTab)(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xff))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:db)(InfixExpression(SimpleName:b)(INFIX_EXPRESSION_OPERATOR:-)(ParenthesizedExpression(InfixExpression(ArrayAccess(SimpleName:colorTab)(SimpleName:i))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0xff))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:d)(InfixExpression(InfixExpression(InfixExpression(SimpleName:dr)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:dr))(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(SimpleName:dg)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:dg)))(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(SimpleName:db)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:db)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:index)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:3))))(IfStatement(InfixExpression(ArrayAccess(SimpleName:usedEntry)(SimpleName:index))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:d)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:dmin))))(Block(ExpressionStatement(Assignment(SimpleName:dmin)(ASSIGNMENT_OPERATOR:=)(SimpleName:d)))(ExpressionStatement(Assignment(SimpleName:trans)(ASSIGNMENT_OPERATOR:=)(SimpleName:index)))))(ExpressionStatement(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++)))))))(VariableDeclarationStatement(SimpleType(SimpleName:IndexColorModel))(VariableDeclarationFragment(SimpleName:model)(ClassInstanceCreation(SimpleType(SimpleName:IndexColorModel))(SimpleName:bits)(InfixExpression(QualifiedName:colorTab.length)(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:3))(SimpleName:colorTab)(NumberLiteral:0)(BooleanLiteral:false)(SimpleName:trans))))(VariableDeclarationStatement(SimpleType(SimpleName:Color))(VariableDeclarationFragment(SimpleName:t)(NullLiteral)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:model))(SimpleName:getTransparentPixel))(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:t)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Color))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:model))(SimpleName:getRGB)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:model))(SimpleName:getTransparentPixel)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:flush)))(ExpressionStatement(Assignment(SimpleName:result)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedImage))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getWidth))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getHeight))(QualifiedName:image.TYPE_BYTE_INDEXED)(SimpleName:model))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:getRaster)))(SimpleName:setPixels)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getWidth))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getHeight))(SimpleName:indexedPixels))))))(ReturnStatement(SimpleName:result))))))