(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:handle_connection)(SingleVariableDeclaration(SimpleType(SimpleName:ServerSocket))(SimpleName:server_socket))(SingleVariableDeclaration(SimpleType(SimpleName:BufferedReader))(SimpleName:r_s))(SingleVariableDeclaration(SimpleType(SimpleName:PrintWriter))(SimpleName:write_stream))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:catch_errors_p))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:backtrace_p))(Block(VariableDeclarationStatement(SimpleType(SimpleName:PushableBufferedReader))(VariableDeclarationFragment(SimpleName:read_stream)(ClassInstanceCreation(SimpleType(SimpleName:PushableBufferedReader))(SimpleName:r_s))))(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:connect_form)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Exception))(VariableDeclarationFragment(SimpleName:error)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:connect_form)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:decode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:read_stream)(NullLiteral)(BooleanLiteral:false)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LocalConnection))(SimpleName:local_connection)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(Assignment(SimpleName:error)(ASSIGNMENT_OPERATOR:=)(SimpleName:e))))))(IfStatement(InfixExpression(SimpleName:connect_form)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:error)))))(ExpressionStatement(MethodInvocation(SimpleName:handle_okbc_eval_error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:write_stream)(SimpleName:error)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:kb_library_string)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Cons))(SimpleName:getf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connect_form)(SimpleName:_kb_library)))))(IfStatement(InstanceofExpression(SimpleName:kb_library_string)(SimpleType(SimpleName:OKBCString)))(Block(ExpressionStatement(Assignment(SimpleName:kb_library)(ASSIGNMENT_OPERATOR:=)(FieldAccess(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:OKBCString))(SimpleName:kb_library_string)))(SimpleName:string))))))(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:tv_sym)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Cons))(SimpleName:getf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connect_form)(SimpleName:_transport_version)))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InstanceofExpression(SimpleName:tv_sym)(SimpleType(SimpleName:AbstractSymbol)))))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:AbstractSymbol))(SimpleName:tv_sym)))(SimpleName:symbolName)))(SimpleName:compareTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:max_supported_transport_version)))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:AbstractSymbol))(SimpleName:tv_sym)))(SimpleName:symbolName)))(SimpleName:compareTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:min_supported_transport_version)))(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:tv_sym)(StringLiteral:<STR>)(SimpleName:min_supported_transport_version)(StringLiteral:<STR>)(SimpleName:max_supported_transport_version))))))(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:query_sym)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Cons))(SimpleName:getf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connect_form)(SimpleName:_query_format)))))(VariableDeclarationStatement(SimpleType(SimpleName:Symbol))(VariableDeclarationFragment(SimpleName:supported_query)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Symbol))(SimpleName:keyword)(METHOD_INVOCATION_ARGUMENTS(SimpleName:query_format)))))(IfStatement(InfixExpression(SimpleName:query_sym)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:supported_query))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:query_sym)(StringLiteral:<STR>)(SimpleName:supported_query))))))(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:reply_sym)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Cons))(SimpleName:getf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connect_form)(SimpleName:_reply_format)))))(VariableDeclarationStatement(SimpleType(SimpleName:Symbol))(VariableDeclarationFragment(SimpleName:supported_reply)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Symbol))(SimpleName:keyword)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reply_format)))))(IfStatement(InfixExpression(SimpleName:reply_sym)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:supported_reply))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:reply_sym)(StringLiteral:<STR>)(SimpleName:supported_reply))))))(VariableDeclarationStatement(SimpleType(SimpleName:Node))(VariableDeclarationFragment(SimpleName:ok_form)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Cons))(SimpleName:list)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_ok)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ok_form))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:write_stream)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_NIL))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:write_stream)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_NIL))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:write_stream)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_ok))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:write_stream)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_NIL))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:write_stream)(BooleanLiteral:false))))(VariableDeclarationStatement(SimpleType(SimpleName:OKBCString))(VariableDeclarationFragment(SimpleName:ok_string)(ClassInstanceCreation(SimpleType(SimpleName:OKBCString))(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ok_string))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:write_stream)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(SimpleName:newline)(METHOD_INVOCATION_ARGUMENTS(SimpleName:write_stream))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:write_stream))(SimpleName:flush)))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:loop_executing_okbc_requests)(METHOD_INVOCATION_ARGUMENTS(SimpleName:read_stream)(SimpleName:write_stream)(SimpleName:catch_errors_p)(SimpleName:backtrace_p)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:DisconnectException))(SimpleName:d))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:server_socket))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block))))))))))))