(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:LargeTest))(Modifier:public)(PrimitiveType:void)(SimpleName:testHttpPostsWithExpectationVerification)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:reqNo)(NumberLiteral:3)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:server)))(SimpleName:registerHandler)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(ClassInstanceCreation(SimpleType(SimpleName:HttpRequestHandler))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:handle)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:HttpRequest))(SimpleName:request))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:HttpResponse))(SimpleName:response))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:HttpContext))(SimpleName:context))(SimpleType(SimpleName:HttpException))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:StringEntity))(VariableDeclarationFragment(SimpleName:outgoing)(ClassInstanceCreation(SimpleType(SimpleName:StringEntity))(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setEntity)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outgoing)))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:server)))(SimpleName:setExpectationVerifier)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:HttpExpectationVerifier))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:verify)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:HttpRequest))(SimpleName:request))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:HttpResponse))(SimpleName:response))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:HttpContext))(SimpleName:context))(SimpleType(SimpleName:HttpException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Header))(VariableDeclarationFragment(SimpleName:someheader)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getFirstHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:someheader)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:secretNumber)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:secretNumber)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:someheader))(SimpleName:getValue)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NumberFormatException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setStatusCode)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpStatus.SC_BAD_REQUEST))))(ReturnStatement))))(IfStatement(InfixExpression(SimpleName:secretNumber)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:2))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setStatusCode)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpStatus.SC_EXPECTATION_FAILED))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayEntity))(VariableDeclarationFragment(SimpleName:outgoing)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayEntity))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:EncodingUtils))(SimpleName:getAsciiBytes)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setEntity)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outgoing)))))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:server)))(SimpleName:start)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:client)))(SimpleName:getParams)))(SimpleName:setBooleanParameter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CoreProtocolPNames.USE_EXPECT_CONTINUE)(BooleanLiteral:true))))(VariableDeclarationStatement(SimpleType(SimpleName:DefaultHttpClientConnection))(VariableDeclarationFragment(SimpleName:conn)(ClassInstanceCreation(SimpleType(SimpleName:DefaultHttpClientConnection)))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpHost))(VariableDeclarationFragment(SimpleName:host)(ClassInstanceCreation(SimpleType(SimpleName:HttpHost))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:server)))(SimpleName:getPort)))))(TryStatement(Block(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:r)(NumberLiteral:0)))(InfixExpression(SimpleName:r)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:reqNo))(PostfixExpression(SimpleName:r)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:isOpen)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Socket))(VariableDeclarationFragment(SimpleName:socket)(ClassInstanceCreation(SimpleType(SimpleName:Socket))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:host))(SimpleName:getHostName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:host))(SimpleName:getPort)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:bind)(METHOD_INVOCATION_ARGUMENTS(SimpleName:socket)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:client)))(SimpleName:getParams)))))))(VariableDeclarationStatement(SimpleType(SimpleName:BasicHttpEntityEnclosingRequest))(VariableDeclarationFragment(SimpleName:post)(ClassInstanceCreation(SimpleType(SimpleName:BasicHttpEntityEnclosingRequest))(StringLiteral:<STR>)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:post))(SimpleName:addHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:r))))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayEntity))(VariableDeclarationFragment(SimpleName:outgoing)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayEntity))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:EncodingUtils))(SimpleName:getAsciiBytes)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:post))(SimpleName:setEntity)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outgoing))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:client)))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:post)(SimpleName:host)(SimpleName:conn)))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpEntity))(VariableDeclarationFragment(SimpleName:entity)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity))))(ExpressionStatement(MethodInvocation(SimpleName:assertNotNull)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entity))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entity))(SimpleName:consumeContent)))(IfStatement(InfixExpression(SimpleName:r)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:2))(Block(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpStatus.SC_EXPECTATION_FAILED)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getStatusLine)))(SimpleName:getStatusCode))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpStatus.SC_OK)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getStatusLine)))(SimpleName:getStatusCode)))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:client)))(SimpleName:keepAlive)(METHOD_INVOCATION_ARGUMENTS(SimpleName:response))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:close)))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpConnectionMetrics))(VariableDeclarationFragment(SimpleName:cm)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getMetrics))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reqNo)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cm))(SimpleName:getRequestCount)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reqNo)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cm))(SimpleName:getResponseCount))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:server)))(SimpleName:shutdown)))))))))