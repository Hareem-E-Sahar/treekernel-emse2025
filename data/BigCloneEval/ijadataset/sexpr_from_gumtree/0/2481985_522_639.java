(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:purgeFile)(SingleVariableDeclaration(Modifier:final)(PrimitiveType:boolean)(SimpleName:force))(SimpleType(SimpleName:IOException))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:force))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:deletedLength)(FieldAccess(ThisExpression)(SimpleName:deletedLength))))(IfStatement(InfixExpression(SimpleName:deletedLength)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ReturnStatement))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:maxFileOverhead)(FieldAccess(FieldAccess(ThisExpression)(SimpleName:properties))(SimpleName:maxFileOverhead))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:maxFileOverhead)(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:ensureFileOpen)))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:/)(FieldAccess(ThisExpression)(SimpleName:fileLength)))(INFIX_EXPRESSION_OPERATOR:<=)(SimpleName:maxFileOverhead))))(ReturnStatement))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:ok)(BooleanLiteral:false)))(ExpressionStatement(MethodInvocation(SimpleName:beginWrite)))(TryStatement(Block(IfStatement(InfixExpression(FieldAccess(ThisExpression)(SimpleName:deletedLength))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(ReturnStatement))(VariableDeclarationStatement(Modifier:final)(ArrayType(SimpleType(SimpleName:Entry))(Dimension))(VariableDeclarationFragment(SimpleName:entries)(ArrayCreation(ArrayType(SimpleType(SimpleName:Entry))(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:map))(SimpleName:size)))))))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(ForStatement(VariableDeclarationExpression(SimpleType(SimpleName:Entry))(VariableDeclarationFragment(SimpleName:e)(FieldAccess(FieldAccess(ThisExpression)(SimpleName:head))(SimpleName:prev))))(InfixExpression(SimpleName:e)(INFIX_EXPRESSION_OPERATOR:!=)(FieldAccess(ThisExpression)(SimpleName:head)))(Assignment(SimpleName:e)(ASSIGNMENT_OPERATOR:=)(QualifiedName:e.prev))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:entries)(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++)))(ASSIGNMENT_OPERATOR:=)(SimpleName:e)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:TunedQuickSort))(SimpleName:getInstance)))(SimpleName:apply)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entries))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:MappedByteBuffer))(VariableDeclarationFragment(SimpleName:writeBuffer)(MethodInvocation(SimpleName:fileBuffer))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:readBuffer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:duplicate))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:position)(METHOD_INVOCATION_ARGUMENTS(SimpleName:FILE_HEADER_LENGTH))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:entries.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Entry))(WildcardType)(WildcardType))(VariableDeclarationFragment(SimpleName:entry)(ArrayAccess(SimpleName:entries)(SimpleName:i))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:entries)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:srcPos)(QualifiedName:entry.offset)))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dstPos)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:position))))(IfStatement(InfixExpression(SimpleName:srcPos)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:dstPos))(Block(ExpressionStatement(Assignment(QualifiedName:entry.offset)(ASSIGNMENT_OPERATOR:=)(SimpleName:dstPos)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:srcLimit)(InfixExpression(SimpleName:srcPos)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:ENTRY_HEADER_LENGTH)(QualifiedName:entry.length))))(WhileStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:i))(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:entries.length))(Block(ExpressionStatement(Assignment(SimpleName:entry)(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:entries)(SimpleName:i))))(IfStatement(InfixExpression(QualifiedName:entry.offset)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:srcLimit))(Block(ExpressionStatement(Assignment(QualifiedName:entry.offset)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:dstPos)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(InfixExpression(SimpleName:srcLimit)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:srcPos))))))(ExpressionStatement(Assignment(SimpleName:srcLimit)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(SimpleName:ENTRY_HEADER_LENGTH)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:entry.length))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:entries)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(NullLiteral))))(Block(ExpressionStatement(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:--)))(BreakStatement)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readBuffer))(SimpleName:limit)(METHOD_INVOCATION_ARGUMENTS(SimpleName:srcLimit))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readBuffer))(SimpleName:position)(METHOD_INVOCATION_ARGUMENTS(SimpleName:srcPos))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:readBuffer))))))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:deletedLength))(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:spaceUsed)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:position))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:fileLength))(ASSIGNMENT_OPERATOR:=)(SimpleName:spaceUsed)))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:maxFileSize)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:max)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(SimpleName:spaceUsed)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(InfixExpression(SimpleName:spaceUsed)(INFIX_EXPRESSION_OPERATOR:*)(FieldAccess(FieldAccess(ThisExpression)(SimpleName:properties))(SimpleName:fileGrowFactor)))))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:max)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(FieldAccess(ThisExpression)(SimpleName:properties))(SimpleName:minimumFileSize))(InfixExpression(SimpleName:spaceUsed)(INFIX_EXPRESSION_OPERATOR:*)(FieldAccess(FieldAccess(ThisExpression)(SimpleName:properties))(SimpleName:maxFileOverhead)))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:capacity))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:maxFileSize))(Block(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:fileBuffer))(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:ensureFileOpen)))(SimpleName:setLength)(METHOD_INVOCATION_ARGUMENTS(SimpleName:maxFileSize)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:limit)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:capacity)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeBuffer))(SimpleName:position)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(ExpressionStatement(Assignment(SimpleName:ok)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:ok))(Block(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:fileBuffer))(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:clear))))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Throwable))(SimpleName:ex))(Block)))))(ExpressionStatement(MethodInvocation(SimpleName:endWrite)))))))))