(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:int)(SimpleName:parseTag)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:html))(SingleVariableDeclaration(SimpleType(SimpleName:Tag))(SimpleName:tag))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getTagType))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:curIndex)(NumberLiteral:0)))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:mTagHeadOrFoot)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getTagType)))(SimpleName:isOneTextChildOnly))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:sPattern)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:format)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getTagName))))))(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:pTheTagFoot)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sPattern)(QualifiedName:Pattern.CASE_INSENSITIVE)))))(ExpressionStatement(Assignment(SimpleName:mTagHeadOrFoot)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pTheTagFoot))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:html))))))(ExpressionStatement(Assignment(SimpleName:mTagHeadOrFoot)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pTagHeadOrFoot))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:html))))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:find))(Block(ExpressionStatement(PostfixExpression(SimpleName:tagCount)(POSTFIX_EXPRESSION_OPERATOR:++)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:tagCount)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:textBlock)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:html))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(SimpleName:curIndex)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:start))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:textBlock))(SimpleName:trim)))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Tag))(VariableDeclarationFragment(SimpleName:newTag)(ClassInstanceCreation(SimpleType(SimpleName:Tag))(QualifiedName:TagType.TEXT_BLOCK))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTag))(SimpleName:setBody)(METHOD_INVOCATION_ARGUMENTS(SimpleName:textBlock))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:addChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newTag))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:indents)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getDepth))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))(StringLiteral:<STR>)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:removeCR)(METHOD_INVOCATION_ARGUMENTS(SimpleName:textBlock)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:textBlock))(SimpleName:matches)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(PostfixExpression(SimpleName:warnningCount)(POSTFIX_EXPRESSION_OPERATOR:++)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:textBlock)(StringLiteral:<STR>)(MethodInvocation(SimpleName:getNearSegment)(METHOD_INVOCATION_ARGUMENTS(SimpleName:html)(SimpleName:curIndex)))))))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:tagHeadOrFoot)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:tagHeadOrFoot)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:isStartTag)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tagHeadOrFoot))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:previousTagType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getTagName))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:currentTagType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:extractTagName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tagHeadOrFoot)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:previousTagType))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentTagType))))(Block(ExpressionStatement(PostfixExpression(SimpleName:warnningCount)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:previousParentTagType)(StringLiteral:<STR>)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:previousParentTagType)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:Tag))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getParent)))))(SimpleName:getTagName)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NullPointerException))(SimpleName:ex))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:previousTagType)(StringLiteral:<STR>)(SimpleName:currentTagType)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:previousParentTagType))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentTagType)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fakeFoot)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getTagName))(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:indents)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getDepth))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))(StringLiteral:<STR>)))(SimpleName:fakeFoot)(StringLiteral:<STR>)(MethodInvocation(SimpleName:getNearSegment)(METHOD_INVOCATION_ARGUMENTS(SimpleName:html)(SimpleName:curIndex)))))))(ExpressionStatement(Assignment(SimpleName:curIndex)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:start))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:setFoot)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fakeFoot))))(BreakStatement))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:indents)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getDepth))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))(StringLiteral:<STR>)))(StringLiteral:<STR>)(SimpleName:currentTagType)(StringLiteral:<STR>)(MethodInvocation(SimpleName:getNearSegment)(METHOD_INVOCATION_ARGUMENTS(SimpleName:html)(SimpleName:curIndex)))))))(ExpressionStatement(Assignment(SimpleName:curIndex)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:end)))))))(Block(ExpressionStatement(Assignment(SimpleName:curIndex)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:end))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:indents)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getDepth))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))(StringLiteral:<STR>)))(SimpleName:tagHeadOrFoot)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:setFoot)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tagHeadOrFoot))))(BreakStatement))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:indents)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getDepth))(StringLiteral:<STR>)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tag))(SimpleName:removeCR)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tagHeadOrFoot)))))))(VariableDeclarationStatement(SimpleType(SimpleName:Tag))(VariableDeclarationFragment(SimpleName:newTag)(ClassInstanceCreation(SimpleType(SimpleName:Tag))(SimpleName:tagHeadOrFoot))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:addChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newTag))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTag))(SimpleName:getTagType)))(SimpleName:isSolo))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTag))(SimpleName:isStartAndEndTag)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTag))(SimpleName:getTagName))))))(ExpressionStatement(Assignment(SimpleName:curIndex)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:end))))(ContinueStatement))(Block(ExpressionStatement(Assignment(SimpleName:curIndex)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:end))(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(SimpleName:parseTag)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:html))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:end))))(SimpleName:newTag))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:content)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:html))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:start))(SimpleName:curIndex)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newTag))(SimpleName:setContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:content))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mTagHeadOrFoot))(SimpleName:region)(METHOD_INVOCATION_ARGUMENTS(SimpleName:curIndex)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:html))(SimpleName:length)))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tag))(SimpleName:getTagType))))))(ReturnStatement(SimpleName:curIndex))))))