(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:byte)(SimpleName:process)(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:ProcessorContext))(SimpleType(SimpleName:PublishRequest)))(SimpleName:context))(SimpleType(SimpleName:InterruptedException))(SimpleType(SimpleName:ProcessorException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:PublishRequest))(VariableDeclarationFragment(SimpleName:req)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getItem)))(SimpleName:getEntity))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getBackMap))))(ReturnStatement(QualifiedName:TaskState.STATE_TILE_CACHED)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:PublicMapPost))(VariableDeclarationFragment(SimpleName:post)))(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:GenericDAO))(SimpleType(SimpleName:PublicMapPost)))(VariableDeclarationFragment(SimpleName:postDao)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DAOFactory))(SimpleName:createDAO)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:PublicMapPost)))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ReadOnlyTransaction))(SimpleName:beginTransaction))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:DatabaseException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ProcessorException))(SimpleName:e))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:numCachedTiles)(NumberLiteral:0)))(TryStatement(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:MapTile)))(VariableDeclarationFragment(SimpleName:backTiles)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:MapTile))))))(ExpressionStatement(Assignment(SimpleName:post)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:postDao))(SimpleName:findUniqueByCriteria)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Expression))(SimpleName:eq)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getPostGuid))))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:LatLngRectangle))(VariableDeclarationFragment(SimpleName:bounds)(ClassInstanceCreation(SimpleType(SimpleName:LatLngRectangle))(ClassInstanceCreation(SimpleType(SimpleName:LatLngPoint))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:post))(SimpleName:getSWLat))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:post))(SimpleName:getSWLon)))(ClassInstanceCreation(SimpleType(SimpleName:LatLngPoint))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:post))(SimpleName:getNELat))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:post))(SimpleName:getNELon))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:backMapGuid)(StringLiteral:<STR>)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:XFile))(VariableDeclarationFragment(SimpleName:dstDir)(ClassInstanceCreation(SimpleType(SimpleName:XFile))(ClassInstanceCreation(SimpleType(SimpleName:XFile))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Configuration))(SimpleName:getInstance)))(SimpleName:getPublicMapStorage)))(SimpleName:toString)))(SimpleName:backMapGuid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dstDir))(SimpleName:mkdir)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:z)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tile))(SimpleName:getOptimalZoom)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bounds)(NumberLiteral:768)))(NumberLiteral:9)))))(InfixExpression(SimpleName:z)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:17))(PostfixExpression(SimpleName:z)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Tile))(VariableDeclarationFragment(SimpleName:tileStart)(ClassInstanceCreation(SimpleType(SimpleName:Tile))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bounds))(SimpleName:getSouthWest)))(SimpleName:getLat))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bounds))(SimpleName:getSouthWest)))(SimpleName:getLng))(SimpleName:z))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Tile))(VariableDeclarationFragment(SimpleName:tileEnd)(ClassInstanceCreation(SimpleType(SimpleName:Tile))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bounds))(SimpleName:getNorthEast)))(SimpleName:getLat))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bounds))(SimpleName:getNorthEast)))(SimpleName:getLng))(SimpleName:z))))(ForStatement(VariableDeclarationExpression(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:y)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tileEnd))(SimpleName:getTileCoord)))(SimpleName:getY))))(InfixExpression(SimpleName:y)(INFIX_EXPRESSION_OPERATOR:<=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tileStart))(SimpleName:getTileCoord)))(SimpleName:getY)))(PostfixExpression(SimpleName:y)(POSTFIX_EXPRESSION_OPERATOR:++))(ForStatement(VariableDeclarationExpression(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:x)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tileStart))(SimpleName:getTileCoord)))(SimpleName:getX))))(InfixExpression(SimpleName:x)(INFIX_EXPRESSION_OPERATOR:<=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tileEnd))(SimpleName:getTileCoord)))(SimpleName:getX)))(PostfixExpression(SimpleName:x)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:NASAMapTile))(VariableDeclarationFragment(SimpleName:tile)(ClassInstanceCreation(SimpleType(SimpleName:NASAMapTile))(CastExpression(PrimitiveType:int)(SimpleName:x))(CastExpression(PrimitiveType:int)(SimpleName:y))(SimpleName:z))))(VariableDeclarationStatement(SimpleType(SimpleName:XFile))(VariableDeclarationFragment(SimpleName:file)(ClassInstanceCreation(SimpleType(SimpleName:XFile))(SimpleName:dstDir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tile))(SimpleName:toKeyString)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:exists))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:isFile)))(ContinueStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:backTiles))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tile)))))))))(TryStatement(Block(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:MapTile))(SimpleName:tile))(SimpleName:backTiles)(Block(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:out)(NullLiteral)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tile))(SimpleName:getPath)))))(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:XFile))(VariableDeclarationFragment(SimpleName:outFile)(ClassInstanceCreation(SimpleType(SimpleName:XFile))(SimpleName:dstDir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tile))(SimpleName:toKeyString)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:URLConnection))(VariableDeclarationFragment(SimpleName:conn)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openConnection))))(IfStatement(InfixExpression(InfixExpression(SimpleName:conn)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getContentType)))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalAccessException))(InfixExpression(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getContentType))(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:in)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getInputStream))))(IfStatement(InfixExpression(SimpleName:in)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:out)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:XFileOutputStream))(SimpleName:outFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:out)))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(StringLiteral:<STR>)))))(Block(IfStatement(InfixExpression(SimpleName:out)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close)))))(IfStatement(InfixExpression(SimpleName:in)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close))))))(IfStatement(InfixExpression(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:numCachedTiles))(INFIX_EXPRESSION_OPERATOR:%)(NumberLiteral:100))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:numCachedTiles)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ProcessorException))(SimpleName:e)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ProcessorException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e))))(ThrowStatement(SimpleName:e))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ProcessorException))(SimpleName:e)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ReadOnlyTransaction))(SimpleName:closeTransaction)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:numCachedTiles)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(ReturnStatement(QualifiedName:TaskState.STATE_TILE_CACHED))))))