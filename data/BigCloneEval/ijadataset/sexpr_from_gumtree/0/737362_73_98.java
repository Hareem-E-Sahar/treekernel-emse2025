(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:testSetReadObserver)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:data)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:127))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:data.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:data)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(SimpleName:i))))(VariableDeclarationStatement(SimpleType(SimpleName:Listener))(VariableDeclarationFragment(SimpleName:listener)(ClassInstanceCreation(SimpleType(SimpleName:Listener))(SimpleName:PORT))))(VariableDeclarationStatement(SimpleType(SimpleName:NIOSocket))(VariableDeclarationFragment(SimpleName:socket)(ClassInstanceCreation(SimpleType(SimpleName:NIOSocket))(StringLiteral:<STR>)(SimpleName:PORT))))(VariableDeclarationStatement(SimpleType(SimpleName:Stream))(VariableDeclarationFragment(SimpleName:stream)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:getStream))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stream))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:getInputStream))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:readIn)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:57))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:readIn))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:readIn.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)(ArrayAccess(SimpleName:readIn)(SimpleName:i))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1000))))(VariableDeclarationStatement(SimpleType(SimpleName:NIOInputStream))(VariableDeclarationFragment(SimpleName:nioInput)(CastExpression(SimpleType(SimpleName:NIOInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PrivilegedAccessor))(SimpleName:getValue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:socket)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:buffered)(CastExpression(SimpleType(SimpleName:ByteBuffer))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PrivilegedAccessor))(SimpleName:getValue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nioInput)(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffered))(SimpleName:toString))(InfixExpression(QualifiedName:data.length)(INFIX_EXPRESSION_OPERATOR:-)(QualifiedName:readIn.length))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffered))(SimpleName:position)))))(VariableDeclarationStatement(SimpleType(SimpleName:ReadTester))(VariableDeclarationFragment(SimpleName:reader)(ClassInstanceCreation(SimpleType(SimpleName:ReadTester)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:setReadObserver)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1000))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:remaining)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:getRead))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remaining))(SimpleName:toString))(InfixExpression(QualifiedName:data.length)(INFIX_EXPRESSION_OPERATOR:-)(QualifiedName:readIn.length))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remaining))(SimpleName:remaining)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(QualifiedName:readIn.length)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:data.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remaining))(SimpleName:get))))))(ExpressionStatement(MethodInvocation(SimpleName:assertInstanceof)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:SocketInterestReadAdapter)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:getReadChannel)))))(ExpressionStatement(MethodInvocation(SimpleName:assertSame)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:getChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:SocketInterestReadAdapter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:getReadChannel)))))(SimpleName:getChannel)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:stream.socket))(SimpleName:close)))))))