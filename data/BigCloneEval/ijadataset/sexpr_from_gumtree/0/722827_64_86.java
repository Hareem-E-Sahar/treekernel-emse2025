(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:savePreferredChannels)(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:String)))(SimpleName:channels))(Block(VariableDeclarationStatement(SimpleType(SimpleName:UserService))(VariableDeclarationFragment(SimpleName:userService)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:UserServiceFactory))(SimpleName:getUserService))))(VariableDeclarationStatement(SimpleType(SimpleName:User))(VariableDeclarationFragment(SimpleName:user)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:userService))(SimpleName:getCurrentUser))))(VariableDeclarationStatement(SimpleType(SimpleName:PersistenceManager))(VariableDeclarationFragment(SimpleName:pm)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PMF))(SimpleName:get)))(SimpleName:getPersistenceManager))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:PreferredChannels))(VariableDeclarationFragment(SimpleName:preferredChannels)(MethodInvocation(SimpleName:getPreferredChannels)(METHOD_INVOCATION_ARGUMENTS(SimpleName:user)(SimpleName:pm)))))(IfStatement(InfixExpression(SimpleName:preferredChannels)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:preferredChannels)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:PreferredChannels))(SimpleName:user))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:currentChannels)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preferredChannels))(SimpleName:getChannels))))(IfStatement(InfixExpression(SimpleName:currentChannels)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentChannels))(SimpleName:clear))))(Block(ExpressionStatement(Assignment(SimpleName:currentChannels)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashSet))(SimpleType(SimpleName:String))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preferredChannels))(SimpleName:setChannels)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentChannels))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentChannels))(SimpleName:addAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channels))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pm))(SimpleName:makePersistent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:preferredChannels)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pm))(SimpleName:close)))))))))