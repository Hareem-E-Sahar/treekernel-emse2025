(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleName:TSegment)(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Segment))(VariableDeclarationFragment(SimpleName:readOnlySnapShotSegment)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:collector))(SimpleName:getReadOnlySnapShot))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:txnBaseId))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readOnlySnapShotSegment))(SimpleName:getNextId))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:baseId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readOnlySnapShotSegment))(SimpleName:getBaseId))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:txnUnit))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:UnitDir))(SimpleName:writeNewInstance)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pendingDir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:collector))(SimpleName:nextUnitId))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:entryChannel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:txnUnit))(SimpleName:getEntryFile))(StringLiteral:<STR>)))(SimpleName:getChannel))))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:indexChannel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:txnUnit))(SimpleName:getIndexFile))(StringLiteral:<STR>)))(SimpleName:getChannel))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:index))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MutableBaseIdIndex))(SimpleName:writeNewIndex)(METHOD_INVOCATION_ARGUMENTS(SimpleName:indexChannel)(QualifiedName:Word.INT)(MethodInvocation(SimpleName:getTxnBaseId))(NumberLiteral:0)))))(ExpressionStatement(Assignment(SimpleName:newSegment)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BaseSegment))(SimpleName:index)(SimpleName:entryChannel)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:deleteSetChannel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:txnUnit))(SimpleName:getDeleteSetFile))(StringLiteral:<STR>)))(SimpleName:getChannel))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:deleteSet))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileBackedDeleteSet))(SimpleName:writeNewInstance)(METHOD_INVOCATION_ARGUMENTS(SimpleName:deleteSetChannel)(SimpleName:baseId)(MethodInvocation(SimpleName:getTxnBaseId)))))))(Block(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:Segment))(Dimension))(VariableDeclarationFragment(SimpleName:segments)(ArrayCreation(ArrayType(SimpleType(SimpleName:Segment))(Dimension))(ArrayInitializer(ClassInstanceCreation(SimpleType(SimpleName:DeleteSetFilterSegment))(SimpleName:readOnlySnapShotSegment)(SimpleName:deleteSet))(SimpleName:newSegment)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:implDelegate))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:UnionSegment))(SimpleName:segments)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:isLoggable)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Level.FINER)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:finer)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:logName)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:txnUnit))(SimpleName:getDir)))(SimpleName:getName))(StringLiteral:<STR>)(SimpleName:txnBaseId)(StringLiteral:<STR>))))))))))