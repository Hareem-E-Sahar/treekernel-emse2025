(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:String))(SimpleName:doCommand)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:timeoutSec))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:instr)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tc))(SimpleName:getInputStream))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:response)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:lastPrompt)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:lastCommand)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:tmpCommand)(StringLiteral:<STR>)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:nextExit)(BooleanLiteral:false)))(ForStatement(Assignment(SimpleName:i)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exchangeVec))(SimpleName:size)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Exchange))(VariableDeclarationFragment(SimpleName:ex)(CastExpression(SimpleType(SimpleName:Exchange))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exchangeVec))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:numBytesRead)(NumberLiteral:0)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:timeoutSec)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1000)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buff)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:2048))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:strRecv)(NullLiteral)))(IfStatement(SimpleName:nextExit)(Block(ExpressionStatement(Assignment(SimpleName:strRecv)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getCommandResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:instr)(SimpleName:lastPrompt))))))(Block(ExpressionStatement(Assignment(SimpleName:strRecv)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:instr)))))))(IfStatement(SimpleName:nextExit)(Block(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(SimpleName:strRecv)))(ExpressionStatement(MethodInvocation(SimpleName:sendCommand)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(BreakStatement)))(IfStatement(InfixExpression(SimpleName:strRecv)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))))))(ExpressionStatement(Assignment(SimpleName:strRecv)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:strRecv))(SimpleName:trim))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:strRecv))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getPrompt))))(Block(ExpressionStatement(Assignment(SimpleName:tmpCommand)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getCommand))))(ExpressionStatement(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:strRecv))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:strRecv))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getErrorprompt)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tc))(SimpleName:disconnect)))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException)))))))(ExpressionStatement(Assignment(SimpleName:lastPrompt)(ASSIGNMENT_OPERATOR:=)(SimpleName:strRecv)))(ExpressionStatement(Assignment(SimpleName:lastCommand)(ASSIGNMENT_OPERATOR:=)(SimpleName:tmpCommand)))(ExpressionStatement(MethodInvocation(SimpleName:sendCommand)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tmpCommand))))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getCommandResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:instr)(SimpleName:lastPrompt))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tc))(SimpleName:disconnect)))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:lastPrompt)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:lastCommand)(StringLiteral:<STR>)))))(ReturnStatement(SimpleName:response))))))