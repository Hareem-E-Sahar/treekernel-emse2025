(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleName:MyClass)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:filename))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:defaultEncoding))(SimpleType(SimpleName:FileNotFoundException))(SimpleType(SimpleName:ParseException))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:URISyntaxException))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lang)(QualifiedName:nsPSMDetector.UNIMOZER)))(VariableDeclarationStatement(SimpleType(SimpleName:nsDetector))(VariableDeclarationFragment(SimpleName:det)(ClassInstanceCreation(SimpleType(SimpleName:nsDetector))(SimpleName:lang))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:det))(SimpleName:Init)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:nsICharsetDetectionObserver))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:Notify)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:charset))(Block(ExpressionStatement(Assignment(QualifiedName:HtmlCharsetDetector.found)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:f)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:filename))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:toURI)))(SimpleName:toURL))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:imp)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buf)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:1024))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:len)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:done)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isAscii)(BooleanLiteral:true)))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:len)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imp))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(QualifiedName:buf.length)))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(IfStatement(SimpleName:isAscii)(ExpressionStatement(Assignment(SimpleName:isAscii)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:det))(SimpleName:isAscii)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(SimpleName:len))))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:isAscii))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:done)))(ExpressionStatement(Assignment(SimpleName:done)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:det))(SimpleName:DoIt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(SimpleName:len)(BooleanLiteral:false))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:det))(SimpleName:DataEnd)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imp))(SimpleName:close)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:found)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:encoding)(ClassInstanceCreation(SimpleType(SimpleName:String))(QualifiedName:Unimozer.FILE_ENCODING))))(IfStatement(SimpleName:isAscii)(Block(ExpressionStatement(Assignment(SimpleName:encoding)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:found)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:found))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:prob)(Dimension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:det))(SimpleName:getProbableCharsets))))(IfStatement(InfixExpression(QualifiedName:prob.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:encoding)(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:prob)(NumberLiteral:0)))))(Block(ExpressionStatement(Assignment(SimpleName:encoding)(ASSIGNMENT_OPERATOR:=)(SimpleName:defaultEncoding)))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filenameSmall)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:filename)))(SimpleName:getName)))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:setInternalName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filenameSmall))))(ExpressionStatement(MethodInvocation(SimpleName:loadFromFileInputStream)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:filename))(SimpleName:encoding))))))))