(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:static)(PrimitiveType:void)(SimpleName:TEXT_Ellipsify)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:hdc))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:str))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:max_len))(SingleVariableDeclaration(SimpleType(SimpleName:IntRef))(SimpleName:len_str))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:width))(SingleVariableDeclaration(SimpleType(SimpleName:WinSize))(SimpleName:size))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:modstr))(SingleVariableDeclaration(SimpleType(SimpleName:IntRef))(SimpleName:len_before))(SingleVariableDeclaration(SimpleType(SimpleName:IntRef))(SimpleName:len_ellip))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:len_ellipsis)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lo))(VariableDeclarationFragment(SimpleName:mid))(VariableDeclarationFragment(SimpleName:hi)))(ExpressionStatement(Assignment(SimpleName:len_ellipsis)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ELLIPSIS))(SimpleName:length))))(IfStatement(InfixExpression(SimpleName:len_ellipsis)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:max_len))(ExpressionStatement(Assignment(SimpleName:len_ellipsis)(ASSIGNMENT_OPERATOR:=)(SimpleName:max_len))))(IfStatement(InfixExpression(QualifiedName:len_str.value)(INFIX_EXPRESSION_OPERATOR:>)(InfixExpression(SimpleName:max_len)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:len_ellipsis)))(ExpressionStatement(Assignment(QualifiedName:len_str.value)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:max_len)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:len_ellipsis)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:pSize)(MethodInvocation(SimpleName:getTempBuffer)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WinSize.SIZE)))))(IfStatement(InfixExpression(InfixExpression(QualifiedName:len_str.value)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:WinFont))(SimpleName:GetTextExtentExPointA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hdc)(SimpleName:str)(QualifiedName:len_str.value)(SimpleName:width)(SimpleName:NULL)(SimpleName:NULL)(SimpleName:pSize)))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:size))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pSize))))(IfStatement(InfixExpression(QualifiedName:size.cx)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:width))(Block(ForStatement(Assignment(SimpleName:lo)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0))(Assignment(SimpleName:hi)(ASSIGNMENT_OPERATOR:=)(QualifiedName:len_str.value))(InfixExpression(SimpleName:lo)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:hi))(Block(ExpressionStatement(Assignment(SimpleName:mid)(ASSIGNMENT_OPERATOR:=)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:lo)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:hi)))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:2))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:WinFont))(SimpleName:GetTextExtentExPointA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hdc)(SimpleName:str)(SimpleName:mid)(SimpleName:width)(SimpleName:NULL)(SimpleName:NULL)(SimpleName:pSize)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(BreakStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:size))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pSize))))(IfStatement(InfixExpression(QualifiedName:size.cx)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:width))(ExpressionStatement(Assignment(SimpleName:hi)(ASSIGNMENT_OPERATOR:=)(SimpleName:mid)))(ExpressionStatement(Assignment(SimpleName:lo)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:mid)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))))(ExpressionStatement(Assignment(QualifiedName:len_str.value)(ASSIGNMENT_OPERATOR:=)(SimpleName:hi)))))))(WhileStatement(BooleanLiteral:true)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Memory))(SimpleName:mem_memcpy)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:str)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:len_str.value))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ELLIPSIS))(SimpleName:getBytes))(NumberLiteral:0)(SimpleName:len_ellipsis))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:WinFont))(SimpleName:GetTextExtentExPointA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hdc)(SimpleName:str)(InfixExpression(QualifiedName:len_str.value)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:len_ellipsis))(SimpleName:width)(SimpleName:NULL)(SimpleName:NULL)(SimpleName:pSize)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(BreakStatement))(IfStatement(InfixExpression(InfixExpression(QualifiedName:len_str.value)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(QualifiedName:size.cx)(INFIX_EXPRESSION_OPERATOR:<=)(SimpleName:width)))(BreakStatement))(ExpressionStatement(PostfixExpression(QualifiedName:len_str.value)(POSTFIX_EXPRESSION_OPERATOR:--)))))(ExpressionStatement(Assignment(QualifiedName:len_ellip.value)(ASSIGNMENT_OPERATOR:=)(SimpleName:len_ellipsis)))(ExpressionStatement(Assignment(QualifiedName:len_before.value)(ASSIGNMENT_OPERATOR:=)(QualifiedName:len_str.value)))(ExpressionStatement(Assignment(QualifiedName:len_str.value)(ASSIGNMENT_OPERATOR:+=)(SimpleName:len_ellipsis)))(IfStatement(InfixExpression(SimpleName:modstr)(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Memory))(SimpleName:mem_memcpy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:modstr)(SimpleName:str)(QualifiedName:len_str.value))))(ExpressionStatement(MethodInvocation(SimpleName:writeb)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:modstr)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:len_str.value))(NumberLiteral:0))))))))))