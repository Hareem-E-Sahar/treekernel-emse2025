(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:testKeepAliveHeaderRespected)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:BasicHttpProcessor))(VariableDeclarationFragment(SimpleName:httpproc)(ClassInstanceCreation(SimpleType(SimpleName:BasicHttpProcessor)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpproc))(SimpleName:addInterceptor)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ResponseDate))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpproc))(SimpleName:addInterceptor)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ResponseServer))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpproc))(SimpleName:addInterceptor)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ResponseContent))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpproc))(SimpleName:addInterceptor)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ResponseConnControl))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpproc))(SimpleName:addInterceptor)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ResponseKeepAlive))))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:localServer))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:LocalTestServer))(SimpleName:httpproc)(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:localServer)))(SimpleName:register)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(ClassInstanceCreation(SimpleType(SimpleName:RandomHandler))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:localServer)))(SimpleName:start)))(VariableDeclarationStatement(SimpleType(SimpleName:InetSocketAddress))(VariableDeclarationFragment(SimpleName:saddress)(CastExpression(SimpleType(SimpleName:InetSocketAddress))(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:localServer)))(SimpleName:getServiceAddress)))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpParams))(VariableDeclarationFragment(SimpleName:params)(ClassInstanceCreation(SimpleType(SimpleName:BasicHttpParams)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpProtocolParams))(SimpleName:setVersion)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)(QualifiedName:HttpVersion.HTTP_1_1))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpProtocolParams))(SimpleName:setContentCharset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpProtocolParams))(SimpleName:setUserAgent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpProtocolParams))(SimpleName:setUseExpectContinue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpConnectionParams))(SimpleName:setStaleCheckingEnabled)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConnManagerParams))(SimpleName:setMaxTotalConnections)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)(NumberLiteral:1))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConnManagerParams))(SimpleName:setMaxConnectionsPerRoute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)(ClassInstanceCreation(SimpleType(SimpleName:ConnPerRouteBean))(NumberLiteral:1)))))(VariableDeclarationStatement(SimpleType(SimpleName:SchemeRegistry))(VariableDeclarationFragment(SimpleName:supportedSchemes)(ClassInstanceCreation(SimpleType(SimpleName:SchemeRegistry)))))(VariableDeclarationStatement(SimpleType(SimpleName:SocketFactory))(VariableDeclarationFragment(SimpleName:sf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PlainSocketFactory))(SimpleName:getSocketFactory))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:supportedSchemes))(SimpleName:register)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Scheme))(StringLiteral:<STR>)(SimpleName:sf)(NumberLiteral:80)))))(VariableDeclarationStatement(SimpleType(SimpleName:ThreadSafeClientConnManager))(VariableDeclarationFragment(SimpleName:mgr)(ClassInstanceCreation(SimpleType(SimpleName:ThreadSafeClientConnManager))(SimpleName:params)(SimpleName:supportedSchemes))))(VariableDeclarationStatement(SimpleType(SimpleName:DefaultHttpClient))(VariableDeclarationFragment(SimpleName:client)(ClassInstanceCreation(SimpleType(SimpleName:DefaultHttpClient))(SimpleName:mgr)(SimpleName:params))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpHost))(VariableDeclarationFragment(SimpleName:target)(ClassInstanceCreation(SimpleType(SimpleName:HttpHost))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:saddress))(SimpleName:getHostName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:saddress))(SimpleName:getPort))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(StringLiteral:<STR>))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity)))(SimpleName:consumeContent))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mgr))(SimpleName:getConnectionsInPool)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localServer))(SimpleName:getAcceptedConnectionCount)))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(StringLiteral:<STR>))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity)))(SimpleName:consumeContent))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mgr))(SimpleName:getConnectionsInPool)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localServer))(SimpleName:getAcceptedConnectionCount)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1100))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(StringLiteral:<STR>))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity)))(SimpleName:consumeContent))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mgr))(SimpleName:getConnectionsInPool)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localServer))(SimpleName:getAcceptedConnectionCount)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:500))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(StringLiteral:<STR>))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity)))(SimpleName:consumeContent))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mgr))(SimpleName:getConnectionsInPool)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localServer))(SimpleName:getAcceptedConnectionCount)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mgr))(SimpleName:shutdown)))))))