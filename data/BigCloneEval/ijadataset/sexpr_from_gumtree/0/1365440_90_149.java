(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:doSetInput)(SingleVariableDeclaration(SimpleType(SimpleName:IEditorInput))(SimpleName:input))(SingleVariableDeclaration(SimpleType(SimpleName:IProgressMonitor))(SimpleName:monitor))(SimpleType(SimpleName:CoreException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IWorkspaceRoot))(VariableDeclarationFragment(SimpleName:root)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ResourcesPlugin))(SimpleName:getWorkspace)))(SimpleName:getRoot))))(VariableDeclarationStatement(SimpleType(SimpleName:IFileFormat))(VariableDeclarationFragment(SimpleName:format)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:source)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:IPath))(VariableDeclarationFragment(SimpleName:path)))(IfStatement(InstanceofExpression(SimpleName:input)(SimpleType(SimpleName:IStorageEditorInput)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IStorage))(VariableDeclarationFragment(SimpleName:s)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IStorageEditorInput))(SimpleName:input))))(SimpleName:getStorage))))(ExpressionStatement(Assignment(SimpleName:in)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:s))(SimpleName:getContents))))(IfStatement(InstanceofExpression(SimpleName:s)(SimpleType(SimpleName:IFile)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IFile))(VariableDeclarationFragment(SimpleName:file)(CastExpression(SimpleType(SimpleName:IFile))(SimpleName:s))))(ExpressionStatement(Assignment(SimpleName:path)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getRawLocation))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:root))(SimpleName:exists)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path)))(Block(ExpressionStatement(Assignment(SimpleName:path)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:root))(SimpleName:getLocation)))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path)))))))(ExpressionStatement(Assignment(SimpleName:source)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:toFile)))))))(IfStatement(InstanceofExpression(SimpleName:input)(SimpleType(SimpleName:IPathEditorInput)))(Block(ExpressionStatement(Assignment(SimpleName:path)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IPathEditorInput))(SimpleName:input))))(SimpleName:getPath))))(ExpressionStatement(Assignment(SimpleName:source)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:toFile)))))(IfStatement(InstanceofExpression(SimpleName:input)(SimpleType(SimpleName:IURIEditorInput)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:URI))(VariableDeclarationFragment(SimpleName:uri)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IURIEditorInput))(SimpleName:input))))(SimpleName:getURI))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URIUtil))(SimpleName:isFileURI)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uri)))(Block(ExpressionStatement(Assignment(SimpleName:source)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URIUtil))(SimpleName:toFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uri))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URIUtil))(SimpleName:toURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uri)))))(ExpressionStatement(Assignment(SimpleName:in)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream))))))))))(IfStatement(InfixExpression(SimpleName:source)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:markSupported)))(Block(ExpressionStatement(Assignment(SimpleName:in)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(SimpleName:in))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:mark)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:10))))(ExpressionStatement(Assignment(SimpleName:source)(ASSIGNMENT_OPERATOR:=)(SimpleName:in)))))(VariableDeclarationStatement(SimpleType(SimpleName:IContentDescription))(VariableDeclarationFragment(SimpleName:cd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Platform))(SimpleName:getContentTypeManager)))(SimpleName:getDescriptionFor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:input))(SimpleName:getName))(ArrayCreation(ArrayType(SimpleType(SimpleName:QualifiedName))(Dimension))(ArrayInitializer(QualifiedName:ImageCore.VALID_FORMATS)))))))(IfStatement(InfixExpression(SimpleName:in)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:reset)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Collection))(WildcardType))(VariableDeclarationFragment(SimpleName:valid)(CastExpression(ParameterizedType(SimpleType(SimpleName:Collection))(WildcardType))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cd))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ImageCore.VALID_FORMATS))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:valid))(SimpleName:isEmpty))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:CoreException))(ClassInstanceCreation(SimpleType(SimpleName:Status))(QualifiedName:Status.ERROR)(QualifiedName:ImageUI.PLUGIN_ID)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:ImageInputStream))(VariableDeclarationFragment(SimpleName:stream)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageIO))(SimpleName:createImageInputStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:source)))))(ExpressionStatement(Assignment(SimpleName:format)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:IFileFormat))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:valid))(SimpleName:iterator)))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:IDocument))(VariableDeclarationFragment(SimpleName:document)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:format))(SimpleName:decode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stream)(SimpleName:monitor)))))(ExpressionStatement(MethodInvocation(SimpleName:setDocument)(METHOD_INVOCATION_ARGUMENTS(SimpleName:document)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Status))(VariableDeclarationFragment(SimpleName:status)(ClassInstanceCreation(SimpleType(SimpleName:Status))(QualifiedName:Status.ERROR)(QualifiedName:ImageUI.PLUGIN_ID)(StringLiteral:<STR>)(SimpleName:e))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:CoreException))(SimpleName:status)))))(Block(IfStatement(InfixExpression(SimpleName:in)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block)))))))(ExpressionStatement(SuperMethodInvocation(SimpleName:setInput)(SimpleName:input)))))))