(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:doRequest)(SingleVariableDeclaration(SimpleType(SimpleName:InternalRequest))(SimpleName:requestContext))(SingleVariableDeclaration(SimpleType(SimpleName:DataSourceProvider))(SimpleName:dataSourceProvider))(SingleVariableDeclaration(SimpleType(SimpleName:RequestInterface))(SimpleName:requestInterface))(SingleVariableDeclaration(SimpleType(SimpleName:ResponseInterface))(SimpleName:responseInterface))(SingleVariableDeclaration(SimpleType(SimpleName:Object))(SimpleName:renderObject))(SingleVariableDeclaration(SimpleType(SimpleName:Event))(SimpleName:executedEvent))(SimpleType(SimpleName:Exception))(Block(WhileStatement(BooleanLiteral:true)(Block(VariableDeclarationStatement(SimpleType(SimpleName:DataSource))(VariableDeclarationFragment(SimpleName:dataSource)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataSourceProvider))(SimpleName:getDataSource)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(SimpleName:requestContext)))))(IfStatement(InfixExpression(SimpleName:dataSource)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:mimeType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataSource))(SimpleName:getMimeType))))(IfStatement(InfixExpression(SimpleName:mimeType)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:mimeType)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestContext))(SimpleName:setResponseMIMEType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mimeType))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestContext))(SimpleName:getResponseMIMEType))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Request))(SimpleName:setCurrent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext))))(TryStatement(Block(IfStatement(InfixExpression(SimpleName:executedEvent)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Event))(VariableDeclarationFragment(SimpleName:event)(SimpleName:executedEvent)))(ExpressionStatement(Assignment(SimpleName:executedEvent)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ThrowStatement(SimpleName:event))))(IfStatement(InfixExpression(SimpleName:renderObject)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:renderObject)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageResolver))(SimpleName:peekPageObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestContext))(SimpleName:setRequestedPage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:renderObject))))(IfStatement(InfixExpression(SimpleName:website)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:website))(SimpleName:onRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext))))))(TryStatement(Block(IfStatement(InfixExpression(SimpleName:renderObject)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageResolver))(SimpleName:onRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext))))))(IfStatement(InfixExpression(SimpleName:dataSource)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InfixExpression(SimpleName:renderObject)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MethodActionLink))(SimpleName:callAction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:renderObject)(SimpleName:requestContext))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ListenerActionLink))(SimpleName:callAction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OperationNotAllowedException))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Event))(VariableDeclarationFragment(SimpleName:event)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getExecutedEvent))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(IfStatement(InfixExpression(SimpleName:event)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ThrowStatement(SimpleName:event))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpServletResponse.SC_FORBIDDEN))))(VariableDeclarationStatement(SimpleType(SimpleName:Writer))(VariableDeclarationFragment(SimpleName:writer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:openWriter))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:closeWriter)(METHOD_INVOCATION_ARGUMENTS(SimpleName:writer))))(ReturnStatement))))(ExpressionStatement(MethodInvocation(SimpleName:serveDynamicFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext)(SimpleName:dataSource)(SimpleName:renderObject)(SimpleName:responseInterface)(SimpleName:dataSourceProvider)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Event))(SimpleName:event))(Block(ThrowStatement(SimpleName:event))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageResolver))(SimpleName:onException)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)(SimpleName:requestContext))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageResolver))(SimpleName:onRequestFinished)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext))))))(VariableDeclarationStatement(SimpleType(SimpleName:Event))(VariableDeclarationFragment(SimpleName:firedEvent)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestContext))(SimpleName:getAfterRequestEvent))))(IfStatement(InfixExpression(SimpleName:firedEvent)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InstanceofExpression(SimpleName:firedEvent)(SimpleType(SimpleName:RedirectEvent)))(Block(ThrowStatement(CastExpression(SimpleType(SimpleName:RedirectEvent))(SimpleName:firedEvent)))))(ThrowStatement(SimpleName:firedEvent)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:setMimeType)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestContext))(SimpleName:getResponseMIMEType)))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataSource))(SimpleName:openStream))))(ExpressionStatement(MethodInvocation(SimpleName:streamOutput)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:responseInterface))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestContext))(SimpleName:getPath))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpServletResponse.SC_NOT_FOUND))))))(BreakStatement))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Event))(SimpleName:event))(Block(ThrowStatement(SimpleName:event))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:exception))(Block(IfStatement(InfixExpression(SimpleName:website)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:website))(SimpleName:onException)(METHOD_INVOCATION_ARGUMENTS(SimpleName:exception)(SimpleName:requestContext)))))(Block(ThrowStatement(SimpleName:exception))))))(Block(IfStatement(InfixExpression(SimpleName:website)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:website))(SimpleName:onRequestFinished)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext)))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:StatusEvent))(SimpleName:event))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getStatusCode)))))(BreakStatement)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RedirectEvent))(SimpleName:event))(Block(IfStatement(InstanceofExpression(SimpleName:event)(SimpleType(SimpleName:SessionClosedEvent)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageResolver))(SimpleName:onSessionEnd)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestContext))(SimpleName:getHttpRequest)))(SimpleName:getSession)))(SimpleName:invalidate)))))(VariableDeclarationStatement(SimpleType(SimpleName:Link))(VariableDeclarationFragment(SimpleName:redirectPage)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getRedirectPage))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:redirectURL)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:redirectPage))(SimpleName:toURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:processedURL)(SimpleName:redirectURL)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LightBoundUtil))(SimpleName:isRelativeURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:processedURL)))(Block(ExpressionStatement(Assignment(SimpleName:processedURL)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:encodeInternalRedirectURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:processedURL)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:isInlineRedirect))(Block(ExpressionStatement(Assignment(SimpleName:requestContext)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestInterface))(SimpleName:getRedirectRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestContext)(SimpleName:redirectURL)(ThisExpression)))))(IfStatement(InfixExpression(SimpleName:requestContext)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InstanceofExpression(SimpleName:redirectPage)(SimpleType(SimpleName:PageLink)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:PageLink))(VariableDeclarationFragment(SimpleName:pageLink)(CastExpression(SimpleType(SimpleName:PageLink))(SimpleName:redirectPage))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType))(VariableDeclarationFragment(SimpleName:pageClass)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageLink))(SimpleName:getPageClass))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:renderObject)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageResolver))(SimpleName:getPageObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pageClass)(SimpleName:requestContext)))))(ContinueStatement))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InstantiationException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:TranslationException))(SimpleName:e)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IllegalAccessException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:TranslationException))(SimpleName:e)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:BeanInterfaceException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:TranslationException))(SimpleName:e))))))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestContext))(SimpleName:getURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:processedURL))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:toExternalForm))))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:streamOutput)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:responseInterface)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LightBoundUtil))(SimpleName:closeQuietly)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:sendRedirect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:processedURL))))))(ReturnStatement)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Event))(SimpleName:event))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:TranslationException))(StringLiteral:<STR>)(SimpleName:event)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:LinkExpiredException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpServletResponse.SC_OK))))(VariableDeclarationStatement(SimpleType(SimpleName:Writer))(VariableDeclarationFragment(SimpleName:writer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseInterface))(SimpleName:openWriter))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:close)))(ReturnStatement)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Request))(SimpleName:removeCurrent)))))))))))