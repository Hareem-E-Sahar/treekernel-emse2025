(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:testBackup)(SimpleType(SimpleName:Exception))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:masterJetty))(SimpleName:stop)))(ExpressionStatement(MethodInvocation(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:CONF_DIR)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:master))(SimpleName:getConfDir))(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:masterJetty)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:createJetty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:master)))))(ExpressionStatement(Assignment(SimpleName:masterClient)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:createNewSolrServer)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:masterJetty))(SimpleName:getLocalPort))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:500))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(ExpressionStatement(MethodInvocation(SimpleName:index)(METHOD_INVOCATION_ARGUMENTS(SimpleName:masterClient)(StringLiteral:<STR>)(SimpleName:i)(StringLiteral:<STR>)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:i))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:masterClient))(SimpleName:commit)))(TypeDeclarationStatement(TypeDeclaration(TYPE_DECLARATION_KIND:class)(SimpleName:BackupThread)(SimpleType(SimpleName:Thread))(FieldDeclaration(Modifier:volatile)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fail)(NullLiteral)))(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:masterUrl)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:masterJetty))(SimpleName:getLocalPort))(StringLiteral:<STR>)(QualifiedName:ReplicationHandler.CMD_BACKUP))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:stream)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:url)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:masterUrl))))(ExpressionStatement(Assignment(SimpleName:stream)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stream))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(Assignment(SimpleName:fail)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:closeQuietly)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stream))))))))))(EmptyStatement)(VariableDeclarationStatement(SimpleType(SimpleName:BackupThread))(VariableDeclarationFragment(SimpleName:backupThread)(ClassInstanceCreation(SimpleType(SimpleName:BackupThread)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:backupThread))(SimpleName:start)))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dataDir)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:master))(SimpleName:getDataDir)))))(TypeDeclarationStatement(TypeDeclaration(TYPE_DECLARATION_KIND:class)(SimpleName:CheckStatus)(SimpleType(SimpleName:Thread))(FieldDeclaration(Modifier:volatile)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fail)(NullLiteral)))(FieldDeclaration(Modifier:volatile)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:response)(NullLiteral)))(FieldDeclaration(Modifier:volatile)(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:success)(BooleanLiteral:false)))(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:masterUrl)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:masterJetty))(SimpleName:getLocalPort))(StringLiteral:<STR>)(QualifiedName:ReplicationHandler.CMD_DETAILS))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:stream)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:url)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:masterUrl))))(ExpressionStatement(Assignment(SimpleName:stream)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stream)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:success)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:stream))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(Assignment(SimpleName:fail)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:closeQuietly)(METHOD_INVOCATION_ARGUMENTS(SimpleName:stream))))))))))(EmptyStatement)(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:waitCnt)(NumberLiteral:0)))(VariableDeclarationStatement(SimpleType(SimpleName:CheckStatus))(VariableDeclarationFragment(SimpleName:checkStatus)(ClassInstanceCreation(SimpleType(SimpleName:CheckStatus)))))(WhileStatement(BooleanLiteral:true)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checkStatus))(SimpleName:run)))(IfStatement(InfixExpression(QualifiedName:checkStatus.fail)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(SimpleName:fail)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:checkStatus.fail))))))(IfStatement(QualifiedName:checkStatus.success)(Block(BreakStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:200))))(IfStatement(InfixExpression(SimpleName:waitCnt)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:10))(Block(ExpressionStatement(MethodInvocation(SimpleName:fail)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:checkStatus.response)))))))(ExpressionStatement(PostfixExpression(SimpleName:waitCnt)(POSTFIX_EXPRESSION_OPERATOR:++)))))(IfStatement(InfixExpression(QualifiedName:backupThread.fail)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(SimpleName:fail)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:backupThread.fail))))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:File))(Dimension))(VariableDeclarationFragment(SimpleName:files)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataDir))(SimpleName:listFiles)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FilenameFilter))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:accept)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:dir))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:name))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:name))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ReturnStatement(BooleanLiteral:true))))(ReturnStatement(BooleanLiteral:false))))))))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(QualifiedName:files.length))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:snapDir)(ArrayAccess(SimpleName:files)(NumberLiteral:0))))(VariableDeclarationStatement(SimpleType(SimpleName:IndexSearcher))(VariableDeclarationFragment(SimpleName:searcher)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(ClassInstanceCreation(SimpleType(SimpleName:SimpleFSDirectory))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:snapDir))(SimpleName:getAbsoluteFile))(NullLiteral))(BooleanLiteral:true))))(VariableDeclarationStatement(SimpleType(SimpleName:TopDocs))(VariableDeclarationFragment(SimpleName:hits)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:MatchAllDocsQuery)))(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:500)(QualifiedName:hits.totalHits))))))))