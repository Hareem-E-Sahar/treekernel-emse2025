(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:copyText)(SingleVariableDeclaration(SimpleType(SimpleName:Writer))(SimpleName:w))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:XmlException))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:curEvent)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:XmlEvent.STAG))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:curEvent)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:XmlEvent.ETAG)))(Block(ExpressionStatement(MethodInvocation(SimpleName:next)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:XmlEvent.ALL_EVENTS))))(ExpressionStatement(Assignment(SimpleName:curEvent)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:scanner))(SimpleName:peekEvent))))))(WhileStatement(BooleanLiteral:true)(Block(SwitchStatement(SimpleName:curEvent)(SwitchCase(QualifiedName:XmlEvent.CHARDATA))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:CharData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:w))))(BreakStatement)(SwitchCase(QualifiedName:XmlEvent.CDSECT))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:CDSect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:w))))(BreakStatement)(SwitchCase(QualifiedName:XmlEvent.REFERENCE))(VariableDeclarationStatement(SimpleType(SimpleName:Entity))(VariableDeclarationFragment(SimpleName:entity)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:Reference))))(IfStatement(InfixExpression(SimpleName:entity)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:w))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:char)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:scanner))(SimpleName:read))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:w))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entity))(SimpleName:resolveAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)))))))(BreakStatement)(SwitchCase)(ExpressionStatement(Assignment(SimpleName:returnLast)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ReturnStatement))(ExpressionStatement(Assignment(SimpleName:curEvent)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:scanner))(SimpleName:peekEvent))))))))))