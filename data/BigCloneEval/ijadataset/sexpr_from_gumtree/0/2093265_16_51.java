(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:service)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:req))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:res))(SimpleType(SimpleName:ServletException))(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JavaliController))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:JavaliController.LG_VERBOSE)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:attachmentId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getParameter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:FormConstants.DWLD_ATTACHMENT_ID)))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpSession))(VariableDeclarationFragment(SimpleName:sess)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getSession)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false)))))(IfStatement(InfixExpression(SimpleName:sess)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JavaliController))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:JavaliController.LG_VERBOSE)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getRemoteAddr))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:sendError)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:res.SC_NOT_FOUND))))(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:JavaliSession))(VariableDeclarationFragment(SimpleName:js)(CastExpression(SimpleType(SimpleName:JavaliSession))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sess))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:FormConstants.SESSION_BINDING))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:js)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:js))(SimpleName:isConnected))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JavaliController))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:JavaliController.LG_VERBOSE)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getRemoteAddr))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:sendError)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:res.SC_NOT_FOUND))))(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:JavaliAttachment))(VariableDeclarationFragment(SimpleName:att)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URLUtils))(SimpleName:IDToAttachment)(METHOD_INVOCATION_ARGUMENTS(SimpleName:attachmentId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:js))(SimpleName:getMailStore))))))(IfStatement(InfixExpression(SimpleName:att)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JavaliController))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:JavaliController.LG_VERBOSE)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:attachmentId)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:sendError)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:res.SC_NOT_FOUND))))(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:in)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:att))(SimpleName:getInputStream)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JavaliController))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:JavaliController.LG_VERBOSE)(StringLiteral:<STR>)(SimpleName:e))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:sendError)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:res.SC_NOT_FOUND))))(ReturnStatement))))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:buf)(Dimension)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:2048))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:setContentType)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:att))(SimpleName:getContentType)))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:out)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getOutputStream))))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(SimpleName:read)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close)))))))