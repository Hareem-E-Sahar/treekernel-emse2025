(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:exportSubset)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:user))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:subsetId))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:namespaceId))(SingleVariableDeclaration(SimpleType(SimpleName:QuerySession))(SimpleName:qs))(SingleVariableDeclaration(SimpleType(SimpleName:DTSPermission))(SimpleName:permit))(SimpleType(SimpleName:SQLException))(SimpleType(SimpleName:DTSValidationException))(SimpleType(SimpleName:PermissionException))(Block(ExpressionStatement(MethodInvocation(SimpleName:checkPermission)(METHOD_INVOCATION_ARGUMENTS(SimpleName:permit)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:exported)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:exportSubsetNspStmt)(NullLiteral)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:checkNamespacePresent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DTSValidationException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:namespaceId)(StringLiteral:<STR>)(SimpleName:subsetId)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:assocSeqName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:subsetDAO)))(SimpleName:getStatement)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:SubsetDb.TABLE_KEY)(SimpleName:GET_ASSOC_SEQ_NAME)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:origTransLevel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utilities))(SimpleName:beginTransaction)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:conn))))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:beg)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:HashMap))(VariableDeclarationFragment(SimpleName:assocMap)(ClassInstanceCreation(SimpleType(SimpleName:HashMap))(NumberLiteral:100))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:count)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:assocId)(NumberLiteral:1)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:assocGid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GidGenerator))(SimpleName:getGID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId)(SimpleName:assocId)))))(ExpressionStatement(MethodInvocation(SimpleName:deleteNamespaceRelated)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId)(SimpleName:assocGid)(SimpleName:qs))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:check)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:DTSTransferObject))(Dimension))(VariableDeclarationFragment(SimpleName:subsetCons)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getSubsetConcepts)(METHOD_INVOCATION_ARGUMENTS(SimpleName:subsetId)(SimpleName:qs)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:check)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:exportNspQuery)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:subsetDAO)))(SimpleName:getStatement)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:SubsetDb.TABLE_KEY)(SimpleName:EXPORT_SUBSET_NSP_STMT)))))(ExpressionStatement(Assignment(SimpleName:exportSubsetNspStmt)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:exportNspQuery)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:smallBatchSize)(NumberLiteral:1000)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SQL))(SimpleName:getConnType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn))))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:SQL.ORACLE)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(QualifiedName:oracle.jdbc.driver.OraclePreparedStatement))(SimpleName:exportSubsetNspStmt))))(SimpleName:setExecuteBatch)(METHOD_INVOCATION_ARGUMENTS(SimpleName:smallBatchSize))))))(ExpressionStatement(MethodInvocation(SimpleName:addSubsetAssocType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId)(SimpleName:assocId)(SimpleName:assocGid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:check)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:startExecute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:exportSubsetNspStmt))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:subsetCons.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:DTSTransferObject))(VariableDeclarationFragment(SimpleName:dt)(ArrayAccess(SimpleName:subsetCons)(SimpleName:i))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:origConNamespaceId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dt))(SimpleName:getNamespaceId))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:origConceptGid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GidGenerator))(SimpleName:getGID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:origConNamespaceId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dt))(SimpleName:getId))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:conceptId)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:conceptGid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GidGenerator))(SimpleName:getGID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId)(SimpleName:conceptId)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:conceptCode)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:conceptId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportSubsetNspStmt))(SimpleName:setLong)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:conceptGid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportSubsetNspStmt))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(SimpleName:conceptId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportSubsetNspStmt))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:3)(SimpleName:conceptCode))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportSubsetNspStmt))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:4)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dt))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportSubsetNspStmt))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:5)(SimpleName:namespaceId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportSubsetNspStmt))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:6)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dt))(SimpleName:getName)))(SimpleName:toUpperCase)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportSubsetNspStmt))(SimpleName:executeUpdate)))(IfStatement(InfixExpression(SimpleName:assocGid)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Long))(VariableDeclarationFragment(SimpleName:fromCon)(ClassInstanceCreation(SimpleType(SimpleName:Long))(SimpleName:conceptGid))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assocMap))(SimpleName:containsKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fromCon)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Vector))(VariableDeclarationFragment(SimpleName:toConVec)(CastExpression(SimpleType(SimpleName:Vector))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assocMap))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fromCon))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:toConVec))(SimpleName:addElement)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Long))(SimpleName:origConceptGid)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assocMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fromCon)(SimpleName:toConVec)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Vector))(VariableDeclarationFragment(SimpleName:toConVec)(ClassInstanceCreation(SimpleType(SimpleName:Vector))(NumberLiteral:2))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:toConVec))(SimpleName:addElement)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Long))(SimpleName:origConceptGid)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assocMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fromCon)(SimpleName:toConVec))))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:count))(INFIX_EXPRESSION_OPERATOR:%)(NumberLiteral:1000)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Categories))(SimpleName:dataDb)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:count)(StringLiteral:<STR>)(SimpleName:namespaceId)(StringLiteral:<STR>)(SimpleName:subsetId)(StringLiteral:<STR>)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Categories))(SimpleName:dataDb)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:count)(StringLiteral:<STR>)(SimpleName:namespaceId)(StringLiteral:<STR>)(SimpleName:subsetId)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:endExecute)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:check)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:commit)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:addAssociations)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assocMap)(SimpleName:assocGid)(SimpleName:assocSeqName)(SimpleName:qs))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:check)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:commit)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:qs))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:count)(StringLiteral:<STR>)(SimpleName:namespaceId)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:exported)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:end)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Categories))(SimpleName:dataDb)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:count)(StringLiteral:<STR>)(SimpleName:namespaceId)(StringLiteral:<STR>)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:end)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:beg)))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:1000)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))(ReturnStatement(SimpleName:exported)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SQLException))(SimpleName:sqle))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Categories))(SimpleName:dataDb)))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:subsetId)(StringLiteral:<STR>)(SimpleName:namespaceId)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sqle))(SimpleName:getMessage))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:rollback)))(ThrowStatement(SimpleName:sqle))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utilities))(SimpleName:endTransaction)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:conn))(SimpleName:origTransLevel))))(IfStatement(InfixExpression(SimpleName:exportSubsetNspStmt)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportSubsetNspStmt))(SimpleName:close)))))))))))