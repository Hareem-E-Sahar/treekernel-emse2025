(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:boolean)(SimpleName:doDeploy)(SingleVariableDeclaration(SimpleType(SimpleName:DeployTask))(SimpleName:deployTask))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Deploy))(VariableDeclarationFragment(SimpleName:deploy)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deployTask))(SimpleName:getDeploy))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isPackaged)))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:splits)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploy))(SimpleName:getDeployType)))(SimpleName:split)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:audioType)(ArrayAccess(SimpleName:splits)(NumberLiteral:0))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:packageType)(ArrayAccess(SimpleName:splits)(NumberLiteral:1))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:packageType)))(Block(ExpressionStatement(Assignment(SimpleName:isPackaged)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))(Block(ExpressionStatement(Assignment(SimpleName:isPackaged)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:subType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ResourceTypesUtil))(SimpleName:getAudioSubType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:audioType)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:ext)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ResourceTypesUtil))(SimpleName:audioSubTypeToExt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:subType)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:bookURL)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:audioURL)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isSWF)(InfixExpression(SimpleName:subType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ResourceTypes.SUBTYPE_AUDIO_SWF))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:bookUuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploy))(SimpleName:getAudio)))(SimpleName:getRecordTask)))(SimpleName:getChapter)))(SimpleName:getUuid))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:audioUuid)))(IfStatement(InfixExpression(SimpleName:subType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ResourceTypes.SUBTYPE_AUDIO_MP3))(Block(ExpressionStatement(Assignment(SimpleName:audioUuid)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploy))(SimpleName:getAudio)))(SimpleName:getUuid)))))(Block(ExpressionStatement(Assignment(SimpleName:audioUuid)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploy))(SimpleName:getUuid))))))(IfStatement(SimpleName:isPackaged)(Block(ExpressionStatement(Assignment(SimpleName:bookURL)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:bookUuid)(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:audioURL)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:audioUuid)(StringLiteral:<STR>)(SimpleName:ext)))))(Block(ExpressionStatement(Assignment(SimpleName:bookURL)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getHttpURL)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ResourceTypes.TYPE_BOOK)(QualifiedName:ResourceTypes.SUBTYPE_RESERVED)(SimpleName:bookUuid)))))(ExpressionStatement(Assignment(SimpleName:audioURL)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getHttpURL)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ResourceTypes.TYPE_AUDIO)(SimpleName:subType)(SimpleName:audioUuid)))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:fireDeployStartEvent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:deployTask))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedReader))(VariableDeclarationFragment(SimpleName:syncFileReader)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedWriter))(VariableDeclarationFragment(SimpleName:deploySyncWriter)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:syncUuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploy))(SimpleName:getAudio)))(SimpleName:getSync)))(SimpleName:getUuid))))(ExpressionStatement(Assignment(SimpleName:syncFileReader)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedReader))(ClassInstanceCreation(SimpleType(SimpleName:FileReader))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:storageService))(SimpleName:getObjectLocation)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ResourceTypes.TYPE_SYNC)(QualifiedName:ResourceTypes.SUBTYPE_RESERVED)(SimpleName:syncUuid)))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:deployUuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploy))(SimpleName:getUuid))))(ExpressionStatement(Assignment(SimpleName:deploySyncWriter)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedWriter))(ClassInstanceCreation(SimpleType(SimpleName:FileWriter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:storageService))(SimpleName:getObjectLocation)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ResourceTypes.TYPE_DEPLOY)(QualifiedName:ResourceTypes.SUBTYPE_DEPLOY_SYNC)(SimpleName:deployUuid)))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:line)(NullLiteral)))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:line)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:syncFileReader))(SimpleName:readLine))))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:lineToWrite)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:placeHolderMatcher)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:syncPlaceHolder))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:line)))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:placeHolderMatcher))(SimpleName:find))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:toReplace)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:coreStr)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:placeHolderMatcher))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coreStr))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:toReplace)(ASSIGNMENT_OPERATOR:=)(ConditionalExpression(SimpleName:isSWF)(StringLiteral:<STR>)(StringLiteral:<STR>)))))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coreStr))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:toReplace)(ASSIGNMENT_OPERATOR:=)(SimpleName:bookURL))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coreStr))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:toReplace)(ASSIGNMENT_OPERATOR:=)(SimpleName:audioURL))))))))(IfStatement(InfixExpression(SimpleName:toReplace)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:placeHolderMatcher))(SimpleName:appendReplacement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:lineToWrite)(SimpleName:toReplace))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:placeHolderMatcher))(SimpleName:appendTail)(METHOD_INVOCATION_ARGUMENTS(SimpleName:lineToWrite))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploySyncWriter))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lineToWrite))(SimpleName:toString))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ReturnStatement(BooleanLiteral:false))))(Block(TryStatement(Block(IfStatement(InfixExpression(SimpleName:syncFileReader)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:syncFileReader))(SimpleName:close)))))(IfStatement(InfixExpression(SimpleName:deploySyncWriter)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploySyncWriter))(SimpleName:close))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block)))))(IfStatement(SimpleName:isPackaged)(Block(VariableDeclarationStatement(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:deployFile)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:deployUuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploy))(SimpleName:getUuid))))(ExpressionStatement(Assignment(SimpleName:deployFile)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:storageService))(SimpleName:getObjectLocation)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ResourceTypes.TYPE_DEPLOY)(QualifiedName:ResourceTypes.SUBTYPE_DEPLOY_ZIP)(SimpleName:deployUuid)))))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:entry)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(SimpleName:bookURL))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deployFile))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entry))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:storageService))(SimpleName:loadStream)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ResourceTypes.TYPE_BOOK)(QualifiedName:ResourceTypes.SUBTYPE_RESERVED)(SimpleName:bookUuid)(SimpleName:deployFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deployFile))(SimpleName:closeEntry)))(ExpressionStatement(Assignment(SimpleName:entry)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(SimpleName:audioURL))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deployFile))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entry))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:storageService))(SimpleName:loadStream)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ResourceTypes.TYPE_DEPLOY)(SimpleName:subType)(SimpleName:audioUuid)(SimpleName:deployFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deployFile))(SimpleName:closeEntry)))(ExpressionStatement(Assignment(SimpleName:entry)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deployFile))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entry))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:storageService))(SimpleName:loadStream)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ResourceTypes.TYPE_DEPLOY)(QualifiedName:ResourceTypes.SUBTYPE_DEPLOY_SYNC)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deploy))(SimpleName:getUuid))(SimpleName:deployFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deployFile))(SimpleName:closeEntry)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:appRoot)(NullLiteral)))(IfStatement(InfixExpression(SimpleName:deployAppRoot)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:appRoot)(ASSIGNMENT_OPERATOR:=)(SimpleName:deployAppRoot))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:ctxRoot)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:appCtx))(SimpleName:getResource)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:getFile))))(ExpressionStatement(Assignment(SimpleName:appRoot)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ctxRoot))(SimpleName:getCanonicalPath))(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(SimpleName:zipFolder)(METHOD_INVOCATION_ARGUMENTS(SimpleName:deployFile)(SimpleName:appRoot)(StringLiteral:<STR>)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ReturnStatement(BooleanLiteral:false))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:UnsupportedStorageObject))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ReturnStatement(BooleanLiteral:false))))(Block(TryStatement(Block(IfStatement(InfixExpression(SimpleName:deployFile)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deployFile))(SimpleName:close))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block)))))))(ReturnStatement(BooleanLiteral:true)))(Block(ExpressionStatement(MethodInvocation(SimpleName:fireDeployDoneEvent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:deployTask))))))))))