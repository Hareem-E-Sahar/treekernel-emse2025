(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:Filter))(SimpleName:readURL)(SingleVariableDeclaration(SimpleType(SimpleName:InputStream))(SimpleName:is))(SingleVariableDeclaration(SimpleType(SimpleName:ParsedURL))(SimpleName:purl))(SingleVariableDeclaration(SimpleType(SimpleName:ICCColorSpaceExt))(SimpleName:colorSpace))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:allowOpenStream))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:returnBrokenLink))(Block(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:is)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:markSupported))))(ExpressionStatement(Assignment(SimpleName:is)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(SimpleName:is)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:needRawData)(ParenthesizedExpression(InfixExpression(SimpleName:colorSpace)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))))(VariableDeclarationStatement(SimpleType(SimpleName:Filter))(VariableDeclarationFragment(SimpleName:ret)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:URLImageCache))(VariableDeclarationFragment(SimpleName:cache)(NullLiteral)))(IfStatement(InfixExpression(SimpleName:purl)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(SimpleName:needRawData)(ExpressionStatement(Assignment(SimpleName:cache)(ASSIGNMENT_OPERATOR:=)(SimpleName:rawCache)))(ExpressionStatement(Assignment(SimpleName:cache)(ASSIGNMENT_OPERATOR:=)(SimpleName:imgCache))))(ExpressionStatement(Assignment(SimpleName:ret)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cache))(SimpleName:request)(METHOD_INVOCATION_ARGUMENTS(SimpleName:purl)))))(IfStatement(InfixExpression(SimpleName:ret)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InfixExpression(SimpleName:colorSpace)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(Assignment(SimpleName:ret)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ProfileRable))(SimpleName:ret)(SimpleName:colorSpace)))))(ReturnStatement(SimpleName:ret))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:openFailed)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:mimeTypes)(MethodInvocation(SimpleName:getRegisteredMimeTypes))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:i)))(ExpressionStatement(Assignment(SimpleName:i)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entries))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:RegistryEntry))(VariableDeclarationFragment(SimpleName:re)(CastExpression(SimpleType(SimpleName:RegistryEntry))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:next)))))(IfStatement(InstanceofExpression(SimpleName:re)(SimpleType(SimpleName:URLRegistryEntry)))(Block(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:purl)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:allowOpenStream)))(ContinueStatement))(VariableDeclarationStatement(SimpleType(SimpleName:URLRegistryEntry))(VariableDeclarationFragment(SimpleName:ure)(CastExpression(SimpleType(SimpleName:URLRegistryEntry))(SimpleName:re))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ure))(SimpleName:isCompatibleURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:purl)))(Block(ExpressionStatement(Assignment(SimpleName:ret)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ure))(SimpleName:handleURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:purl)(SimpleName:needRawData)))))(IfStatement(InfixExpression(SimpleName:ret)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(BreakStatement))))(ContinueStatement)))(IfStatement(InstanceofExpression(SimpleName:re)(SimpleType(SimpleName:StreamRegistryEntry)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:StreamRegistryEntry))(VariableDeclarationFragment(SimpleName:sre)(CastExpression(SimpleType(SimpleName:StreamRegistryEntry))(SimpleName:re))))(IfStatement(SimpleName:openFailed)(ContinueStatement))(TryStatement(Block(IfStatement(InfixExpression(SimpleName:is)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:purl)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:allowOpenStream)))(BreakStatement))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:is)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:purl))(SimpleName:openStream)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mimeTypes))(SimpleName:iterator)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block(ExpressionStatement(Assignment(SimpleName:openFailed)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ContinueStatement))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:markSupported)))(ExpressionStatement(Assignment(SimpleName:is)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(SimpleName:is)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sre))(SimpleName:isCompatibleStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:is)))(Block(ExpressionStatement(Assignment(SimpleName:ret)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sre))(SimpleName:handleStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:is)(SimpleName:purl)(SimpleName:needRawData)))))(IfStatement(InfixExpression(SimpleName:ret)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(BreakStatement)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:StreamCorruptedException))(SimpleName:sce))(Block(ExpressionStatement(Assignment(SimpleName:is)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))))(ContinueStatement)))))(IfStatement(InfixExpression(SimpleName:cache)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cache))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:purl)(SimpleName:ret)))))(IfStatement(InfixExpression(SimpleName:ret)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:returnBrokenLink))(ReturnStatement(NullLiteral)))(IfStatement(SimpleName:openFailed)(ReturnStatement(MethodInvocation(SimpleName:getBrokenLinkImage)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(SimpleName:ERR_URL_UNREACHABLE)(ArrayCreation(ArrayType(SimpleType(SimpleName:Object))(Dimension))(ArrayInitializer(SimpleName:purl)))))))(ReturnStatement(MethodInvocation(SimpleName:getBrokenLinkImage)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(SimpleName:ERR_URL_UNINTERPRETABLE)(ArrayCreation(ArrayType(SimpleType(SimpleName:Object))(Dimension))(ArrayInitializer(SimpleName:purl))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ret))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:BrokenLinkProvider.BROKEN_LINK_PROPERTY)))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ReturnStatement(ConditionalExpression(ParenthesizedExpression(SimpleName:returnBrokenLink))(SimpleName:ret)(NullLiteral)))))(IfStatement(InfixExpression(SimpleName:colorSpace)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(Assignment(SimpleName:ret)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ProfileRable))(SimpleName:ret)(SimpleName:colorSpace)))))(ReturnStatement(SimpleName:ret))))))