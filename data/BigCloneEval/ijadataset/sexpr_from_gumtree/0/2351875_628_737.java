(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:Download)(SingleVariableDeclaration(SimpleType(SimpleName:Video))(SimpleName:video))(SingleVariableDeclaration(SimpleType(SimpleName:CancelDownload))(SimpleName:cancelDownload))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ServerConfiguration))(VariableDeclarationFragment(SimpleName:serverConfiguration)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Server))(SimpleName:getServer)))(SimpleName:getServerConfiguration))))(VariableDeclarationStatement(SimpleType(SimpleName:GoBackConfiguration))(VariableDeclarationFragment(SimpleName:goBackConfiguration)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Server))(SimpleName:getServer)))(SimpleName:getGoBackConfiguration))))(VariableDeclarationStatement(SimpleType(SimpleName:GetMethod))(VariableDeclarationFragment(SimpleName:get)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getUrl)))))(VariableDeclarationStatement(SimpleType(SimpleName:Protocol))(VariableDeclarationFragment(SimpleName:protocol)(ClassInstanceCreation(SimpleType(SimpleName:Protocol))(StringLiteral:<STR>)(ClassInstanceCreation(SimpleType(SimpleName:TiVoSSLProtocolSocketFactory)))(NumberLiteral:443))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpClient))(VariableDeclarationFragment(SimpleName:client)(ClassInstanceCreation(SimpleType(SimpleName:HttpClient)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:getHostConfiguration)))(SimpleName:setHost)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getHost))(NumberLiteral:443)(SimpleName:protocol))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:password)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tools))(SimpleName:decrypt)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverConfiguration))(SimpleName:getMediaAccessKey))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:isParentalControls))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverConfiguration))(SimpleName:getPassword))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NullPointerException))(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:password)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:password)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tools))(SimpleName:decrypt)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverConfiguration))(SimpleName:getPassword)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Credentials))(VariableDeclarationFragment(SimpleName:credentials)(ClassInstanceCreation(SimpleType(SimpleName:UsernamePasswordCredentials))(StringLiteral:<STR>)(SimpleName:password))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:getState)))(SimpleName:setCredentials)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getHost))(SimpleName:credentials))))(ExpressionStatement(Assignment(SimpleName:get)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:GetMethod))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getUrl)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client))(SimpleName:executeMethod)(METHOD_INVOCATION_ARGUMENTS(SimpleName:get))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:get))(SimpleName:getStatusCode))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:200))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:get))(SimpleName:getStatusCode))))))(ReturnStatement(BooleanLiteral:false))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:input)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:get))(SimpleName:getResponseBodyAsStream))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:path)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverConfiguration))(SimpleName:getRecordingsPath))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dir)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:path))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dir))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dir))(SimpleName:mkdirs)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(MethodInvocation(SimpleName:getFilename)(METHOD_INVOCATION_ARGUMENTS(SimpleName:video)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(NullLiteral)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:goBackConfiguration))(SimpleName:isGroupByShow))(Block(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getSeriesTitle))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getSeriesTitle)))(SimpleName:trim)))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(ExpressionStatement(Assignment(SimpleName:path)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(MethodInvocation(SimpleName:clean)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getSeriesTitle)))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:filePath)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:path))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filePath))(SimpleName:exists)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filePath))(SimpleName:mkdirs))))(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(SimpleName:name))))))(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(SimpleName:name)))))))(Block(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(SimpleName:name)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:name)))))(VariableDeclarationStatement(SimpleType(SimpleName:WritableByteChannel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:file)(BooleanLiteral:false)))(SimpleName:getChannel))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:total)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:diff)(NumberLiteral:0.0)))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ByteBuffer))(SimpleName:allocateDirect)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(NumberLiteral:1024)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:4))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:bytes)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(InfixExpression(NumberLiteral:1024)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:4)))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:amount)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:index)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:target)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getSize))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:start)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:last)(SimpleName:start)))(WhileStatement(InfixExpression(InfixExpression(SimpleName:amount)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:total)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:target)))(Block(WhileStatement(InfixExpression(InfixExpression(SimpleName:amount)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cancelDownload))(SimpleName:cancel))))(Block(IfStatement(InfixExpression(SimpleName:index)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:amount))(Block(ExpressionStatement(Assignment(SimpleName:amount)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:input))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bytes)))))(ExpressionStatement(Assignment(SimpleName:index)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ExpressionStatement(Assignment(SimpleName:total)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:total)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:amount))))))(WhileStatement(InfixExpression(InfixExpression(SimpleName:index)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:amount))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:hasRemaining)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:bytes)(PostfixExpression(SimpleName:index)(POSTFIX_EXPRESSION_OPERATOR:++))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:flip)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:hasRemaining))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:compact))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:clear)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:last))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:10000)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:total)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))))(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:video)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VideoManager))(SimpleName:retrieveVideo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getId))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getStatus))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Video.STATUS_DOWNLOADING))(Block(ExpressionStatement(Assignment(SimpleName:diff)(ASSIGNMENT_OPERATOR:=)(InfixExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:start)))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:1000.0))))(IfStatement(InfixExpression(SimpleName:diff)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:setDownloadSize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:total))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:setDownloadTime)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:int)(SimpleName:diff)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VideoManager))(SimpleName:updateVideo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:video)))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:HibernateException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:ex)))))))(ExpressionStatement(Assignment(SimpleName:last)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cancelDownload))(SimpleName:cancel))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:close)))(ReturnStatement(BooleanLiteral:false))))))(ExpressionStatement(Assignment(SimpleName:diff)(ASSIGNMENT_OPERATOR:=)(InfixExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:start)))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:1000.0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:close)))(IfStatement(InfixExpression(SimpleName:diff)(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:total)(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:1024)))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:diff)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:setPath)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getCanonicalPath)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VideoManager))(SimpleName:updateVideo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:video)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:HibernateException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:ex))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:MalformedURLException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tools))(SimpleName:logException)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:ToGo)))(SimpleName:ex)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getUrl)))))(ReturnStatement(BooleanLiteral:false))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Tools))(SimpleName:logException)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:ToGo)))(SimpleName:ex)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:video))(SimpleName:getUrl)))))(ReturnStatement(BooleanLiteral:false))))(Block(IfStatement(InfixExpression(SimpleName:get)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:get))(SimpleName:releaseConnection))))))(ReturnStatement(BooleanLiteral:true))))))