(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(SimpleType(SimpleName:HttpContext))(SimpleName:validateProxyResponse)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:HttpContext))(SimpleName:proxyContext))(SingleVariableDeclaration(Modifier:final)(SimpleType(QualifiedName:Page.Request))(SimpleName:pageRequest))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:String))(SimpleName:mode))(SimpleType(QualifiedName:WWWeeePortal.Exception))(SimpleType(SimpleName:WebApplicationException))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:proxyResponse)(CastExpression(SimpleType(SimpleName:HttpResponse))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxyContext))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ExecutionContext.HTTP_RESPONSE))))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:responseCode)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxyResponse))(SimpleName:getStatusLine)))(SimpleName:getStatusCode))))(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.OK))(SimpleName:getStatusCode)))(ReturnStatement(SimpleName:proxyContext)))(TryStatement(Block(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.NOT_MODIFIED))(SimpleName:getStatusCode)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(QualifiedName:Response.Status.NOT_MODIFIED))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:>=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.MOVED_PERMANENTLY))(SimpleName:getStatusCode))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:<=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.SEE_OTHER))(SimpleName:getStatusCode))))))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.TEMPORARY_REDIRECT))(SimpleName:getStatusCode)))))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageRequest))(SimpleName:isMaximized)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:location)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConversionUtil))(SimpleName:invokeConverter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HTTPUtil.HEADER_VALUE_CONVERTER)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxyResponse))(SimpleName:getLastHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:URI))(VariableDeclarationFragment(SimpleName:locationURI)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:locationURI)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:URI))(SimpleName:location)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:URISyntaxException))(SimpleName:urise))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(QualifiedName:ContentManager.ContentException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:location))(SimpleName:urise))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:proxiedFileURL)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:proxiedFileURL)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HTTPUtil))(SimpleName:getRequestTargetURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:proxyContext))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:URISyntaxException))(SimpleName:urise))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(QualifiedName:ContentManager.ContentException))(StringLiteral:<STR>)(SimpleName:urise)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:MalformedURLException))(SimpleName:mue))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(QualifiedName:ContentManager.ContentException))(StringLiteral:<STR>)(SimpleName:mue))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:URI))(VariableDeclarationFragment(SimpleName:fixedLocation)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:fixedLocation)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:rewriteProxiedFileLink)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pageRequest)(SimpleName:proxiedFileURL)(SimpleName:locationURI)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:VIEW_MODE))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mode)))(BooleanLiteral:true))))))(CatchClause(SingleVariableDeclaration(SimpleType(QualifiedName:ContentManager.ContentException))(SimpleName:wpce))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(QualifiedName:ContentManager.ContentException))(StringLiteral:<STR>)(SimpleName:wpce))))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Response))(SimpleName:status)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status))(SimpleName:fromStatusCode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseCode))))))(SimpleName:location)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fixedLocation))))(SimpleName:build)))))))(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.UNAUTHORIZED))(SimpleName:getStatusCode)))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageRequest))(SimpleName:isMaximized)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Response))(SimpleName:status)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Response.Status.UNAUTHORIZED))))(SimpleName:header)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConversionUtil))(SimpleName:invokeConverter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HTTPUtil.HEADER_VALUE_CONVERTER)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxyResponse))(SimpleName:getLastHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))))(SimpleName:build)))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.NOT_FOUND))(SimpleName:getStatusCode))))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.GONE))(SimpleName:getStatusCode)))))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:URI))(VariableDeclarationFragment(SimpleName:channelLocalPath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageRequest))(SimpleName:getChannelLocalPath)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))))(IfStatement(InfixExpression(SimpleName:channelLocalPath)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status))(SimpleName:fromStatusCode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseCode))))))))(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status.METHOD_NOT_ALLOWED))(SimpleName:getStatusCode)))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:URI))(VariableDeclarationFragment(SimpleName:channelLocalPath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageRequest))(SimpleName:getChannelLocalPath)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))))(IfStatement(InfixExpression(SimpleName:channelLocalPath)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Response))(SimpleName:status)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:RESTUtil.Response.Status.METHOD_NOT_ALLOWED))))(SimpleName:header)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConversionUtil))(SimpleName:invokeConverter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HTTPUtil.HEADER_VALUE_CONVERTER)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxyResponse))(SimpleName:getLastHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))))(SimpleName:build)))))))(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status.REQUEST_TIMEOUT))(SimpleName:getStatusCode)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(QualifiedName:WWWeeePortal.OperationalException))(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(SimpleName:responseCode)))))(IfStatement(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Response.Status.BAD_REQUEST))(SimpleName:getStatusCode)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Response))(SimpleName:status)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Response.Status.BAD_REQUEST))))(SimpleName:build)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:400)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:500))))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pageRequest))(SimpleName:isMaximized)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Response))(SimpleName:status)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status))(SimpleName:fromStatusCode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseCode))))))(SimpleName:build)))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:>=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status.BAD_GATEWAY))(SimpleName:getStatusCode))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:responseCode)(INFIX_EXPRESSION_OPERATOR:<=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status.GATEWAY_TIMEOUT))(SimpleName:getStatusCode)))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(QualifiedName:WWWeeePortal.OperationalException))(ClassInstanceCreation(SimpleType(SimpleName:WebApplicationException))(SimpleName:responseCode))))))))))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:codePhrase)(ConditionalExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status))(SimpleName:fromStatusCode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseCode)))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status))(SimpleName:fromStatusCode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseCode))))(SimpleName:getReasonPhrase))(StringLiteral:<STR>))(StringLiteral:<STR>))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:responsePhrase)(ConditionalExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxyResponse))(SimpleName:getStatusLine)))(SimpleName:getReasonPhrase))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxyResponse))(SimpleName:getStatusLine)))(SimpleName:getReasonPhrase)))(StringLiteral:<STR>))))(VariableDeclarationStatement(Modifier:final)(SimpleType(QualifiedName:ConfigManager.ConfigException))(VariableDeclarationFragment(SimpleName:configurationException)(ClassInstanceCreation(SimpleType(QualifiedName:ConfigManager.ConfigException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:responseCode)(StringLiteral:<STR>)(SimpleName:codePhrase)(SimpleName:responsePhrase))(NullLiteral))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getLogger)))(SimpleName:isLoggable)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Level.FINE)))(Block(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Reader))(VariableDeclarationFragment(SimpleName:reader)(MethodInvocation(SimpleName:createProxiedFileReader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:proxyResponse)(MethodInvocation(SimpleName:getProxyResponseHeader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pageRequest)(SimpleName:proxyResponse)(StringLiteral:<STR>)(QualifiedName:HTTPUtil.HEADER_MIME_TYPE_CONVERTER)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:responseContent)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConversionUtil))(SimpleName:invokeConverter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:IOUtil.READER_STRING_CONVERTER)(SimpleName:reader)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LogAnnotation))(SimpleName:annotate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:configurationException)(StringLiteral:<STR>)(SimpleName:responseContent)(QualifiedName:Level.FINE)(BooleanLiteral:false)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))))(ThrowStatement(SimpleName:configurationException)))(CatchClause(SingleVariableDeclaration(SimpleType(QualifiedName:WWWeeePortal.Exception))(SimpleName:wpe))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LogAnnotation))(SimpleName:annotate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:wpe)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HTTPUtil))(SimpleName:getRequestTargetURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:proxyContext)))(NullLiteral)(BooleanLiteral:false)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LogAnnotation))(SimpleName:annotate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:wpe)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseCode)))(NullLiteral)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LogAnnotation))(SimpleName:annotate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:wpe)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:RESTUtil.Response.Status))(SimpleName:fromStatusCode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseCode)))(NullLiteral)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LogAnnotation))(SimpleName:annotate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:wpe)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxyResponse))(SimpleName:getStatusLine)))(SimpleName:getReasonPhrase))(NullLiteral)(BooleanLiteral:false))))(ThrowStatement(SimpleName:wpe)))))))))