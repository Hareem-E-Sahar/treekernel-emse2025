(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(SimpleType(SimpleName:SearchPattern))(SimpleName:createPattern)(SingleVariableDeclaration(SimpleType(SimpleName:IRubyElement))(SimpleName:element))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:limitTo))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:matchRule))(Block(VariableDeclarationStatement(SimpleType(SimpleName:SearchPattern))(VariableDeclarationFragment(SimpleName:searchPattern)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lastDot)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:ignoreDeclaringType)(BooleanLiteral:true)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:maskedLimitTo)(SimpleName:limitTo)))(IfStatement(InfixExpression(InfixExpression(SimpleName:maskedLimitTo)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:IRubySearchConstants.DECLARATIONS))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:maskedLimitTo)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:IRubySearchConstants.ALL_OCCURRENCES)))(Block(ExpressionStatement(Assignment(SimpleName:ignoreDeclaringType)(ASSIGNMENT_OPERATOR:=)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:limitTo)(INFIX_EXPRESSION_OPERATOR:&)(QualifiedName:IRubySearchConstants.IGNORE_DECLARING_TYPE)))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension))(VariableDeclarationFragment(SimpleName:declaringSimpleName)(NullLiteral)))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension))(VariableDeclarationFragment(SimpleName:declaringQualification)(NullLiteral)))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:element))(SimpleName:getElementType))(SwitchCase(QualifiedName:IRubyElement.FIELD))(SwitchCase(QualifiedName:IRubyElement.INSTANCE_VAR))(SwitchCase(QualifiedName:IRubyElement.CONSTANT))(SwitchCase(QualifiedName:IRubyElement.CLASS_VAR))(VariableDeclarationStatement(SimpleType(SimpleName:IField))(VariableDeclarationFragment(SimpleName:field)(CastExpression(SimpleType(SimpleName:IField))(SimpleName:element))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:ignoreDeclaringType))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IType))(VariableDeclarationFragment(SimpleName:declaringClass)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:field))(SimpleName:getDeclaringType))))(ExpressionStatement(Assignment(SimpleName:declaringSimpleName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:declaringClass))(SimpleName:getElementName)))(SimpleName:toCharArray))))(ExpressionStatement(Assignment(SimpleName:declaringQualification)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:declaringClass))(SimpleName:getSourceFolder)))(SimpleName:getElementName)))(SimpleName:toCharArray))))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension)(Dimension))(VariableDeclarationFragment(SimpleName:enclosingNames)(MethodInvocation(SimpleName:enclosingTypeNames)(METHOD_INVOCATION_ARGUMENTS(SimpleName:declaringClass)))))(IfStatement(InfixExpression(QualifiedName:enclosingNames.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:declaringQualification)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CharOperation))(SimpleName:concat)(METHOD_INVOCATION_ARGUMENTS(SimpleName:declaringQualification)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CharOperation))(SimpleName:concatWith)(METHOD_INVOCATION_ARGUMENTS(SimpleName:enclosingNames)(CharacterLiteral:<STR>)))(CharacterLiteral:<STR>)))))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension))(VariableDeclarationFragment(SimpleName:name)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:field))(SimpleName:getElementName)))(SimpleName:toCharArray))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:findDeclarations)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:readAccess)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:writeAccess)(BooleanLiteral:false)))(SwitchStatement(SimpleName:maskedLimitTo)(SwitchCase(QualifiedName:IRubySearchConstants.DECLARATIONS))(ExpressionStatement(Assignment(SimpleName:findDeclarations)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.REFERENCES))(ExpressionStatement(Assignment(SimpleName:readAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:writeAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.READ_ACCESSES))(ExpressionStatement(Assignment(SimpleName:readAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.WRITE_ACCESSES))(ExpressionStatement(Assignment(SimpleName:writeAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.ALL_OCCURRENCES))(ExpressionStatement(Assignment(SimpleName:findDeclarations)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:readAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:writeAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement))(ExpressionStatement(Assignment(SimpleName:searchPattern)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:FieldPattern))(SimpleName:findDeclarations)(SimpleName:readAccess)(SimpleName:writeAccess)(SimpleName:name)(SimpleName:declaringQualification)(SimpleName:declaringSimpleName)(SimpleName:matchRule))))(BreakStatement)(SwitchCase(QualifiedName:IRubyElement.IMPORT_DECLARATION))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:elementName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:element))(SimpleName:getElementName))))(ExpressionStatement(Assignment(SimpleName:lastDot)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:elementName))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:lastDot)(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(ReturnStatement(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:IImportDeclaration))(VariableDeclarationFragment(SimpleName:importDecl)(CastExpression(SimpleType(SimpleName:IImportDeclaration))(SimpleName:element))))(ExpressionStatement(Assignment(SimpleName:searchPattern)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:createTypePattern)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:elementName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:lastDot)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))(SimpleName:toCharArray))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:elementName))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(SimpleName:lastDot))))(SimpleName:toCharArray))(NullLiteral)(NullLiteral)(NullLiteral)(SimpleName:maskedLimitTo)(SimpleName:matchRule)))))(BreakStatement)(SwitchCase(QualifiedName:IRubyElement.LOCAL_VARIABLE))(VariableDeclarationStatement(SimpleType(SimpleName:LocalVariable))(VariableDeclarationFragment(SimpleName:localVar)(CastExpression(SimpleType(SimpleName:LocalVariable))(SimpleName:element))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:findVarDeclarations)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:findVarReadAccess)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:findVarWriteAccess)(BooleanLiteral:false)))(SwitchStatement(SimpleName:maskedLimitTo)(SwitchCase(QualifiedName:IRubySearchConstants.DECLARATIONS))(ExpressionStatement(Assignment(SimpleName:findVarDeclarations)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.REFERENCES))(ExpressionStatement(Assignment(SimpleName:findVarReadAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:findVarWriteAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.READ_ACCESSES))(ExpressionStatement(Assignment(SimpleName:findVarReadAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.WRITE_ACCESSES))(ExpressionStatement(Assignment(SimpleName:findVarWriteAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.ALL_OCCURRENCES))(ExpressionStatement(Assignment(SimpleName:findVarDeclarations)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:findVarReadAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:findVarWriteAccess)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement))(ExpressionStatement(Assignment(SimpleName:searchPattern)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:LocalVariablePattern))(SimpleName:findVarDeclarations)(SimpleName:findVarReadAccess)(SimpleName:findVarWriteAccess)(SimpleName:localVar)(SimpleName:matchRule))))(BreakStatement)(SwitchCase(QualifiedName:IRubyElement.METHOD))(VariableDeclarationStatement(SimpleType(SimpleName:IMethod))(VariableDeclarationFragment(SimpleName:method)(CastExpression(SimpleType(SimpleName:IMethod))(SimpleName:element))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isConstructor)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:method))(SimpleName:isConstructor))))(VariableDeclarationStatement(SimpleType(SimpleName:IType))(VariableDeclarationFragment(SimpleName:declaringClass)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:method))(SimpleName:getDeclaringType))))(IfStatement(SimpleName:ignoreDeclaringType)(Block(IfStatement(SimpleName:isConstructor)(ExpressionStatement(Assignment(SimpleName:declaringSimpleName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:declaringClass))(SimpleName:getElementName)))(SimpleName:toCharArray))))))(Block(ExpressionStatement(Assignment(SimpleName:declaringSimpleName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:declaringClass))(SimpleName:getElementName)))(SimpleName:toCharArray))))(ExpressionStatement(Assignment(SimpleName:declaringQualification)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:declaringClass))(SimpleName:getSourceFolder)))(SimpleName:getElementName)))(SimpleName:toCharArray))))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension)(Dimension))(VariableDeclarationFragment(SimpleName:enclosingNames)(MethodInvocation(SimpleName:enclosingTypeNames)(METHOD_INVOCATION_ARGUMENTS(SimpleName:declaringClass)))))(IfStatement(InfixExpression(QualifiedName:enclosingNames.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:declaringQualification)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CharOperation))(SimpleName:concat)(METHOD_INVOCATION_ARGUMENTS(SimpleName:declaringQualification)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CharOperation))(SimpleName:concatWith)(METHOD_INVOCATION_ARGUMENTS(SimpleName:enclosingNames)(CharacterLiteral:<STR>)))(CharacterLiteral:<STR>)))))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension))(VariableDeclarationFragment(SimpleName:selector)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:method))(SimpleName:getElementName)))(SimpleName:toCharArray))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:parameterNames)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:parameterNames)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:method))(SimpleName:getParameterNames)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RubyModelException))(SimpleName:e))(Block(ReturnStatement(NullLiteral)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:paramCount)(QualifiedName:parameterNames.length)))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension)(Dimension))(VariableDeclarationFragment(SimpleName:parameterSimpleNames)(ArrayCreation(ArrayType(PrimitiveType:char)(Dimension(SimpleName:paramCount))(Dimension)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:paramCount))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:parameterSimpleNames)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:parameterNames)(SimpleName:i)))(SimpleName:toCharArray))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:findMethodDeclarations)(BooleanLiteral:true)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:findMethodReferences)(BooleanLiteral:true)))(SwitchStatement(SimpleName:maskedLimitTo)(SwitchCase(QualifiedName:IRubySearchConstants.DECLARATIONS))(ExpressionStatement(Assignment(SimpleName:findMethodReferences)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.REFERENCES))(ExpressionStatement(Assignment(SimpleName:findMethodDeclarations)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(BreakStatement)(SwitchCase(QualifiedName:IRubySearchConstants.ALL_OCCURRENCES))(BreakStatement))(IfStatement(SimpleName:isConstructor)(Block(ExpressionStatement(Assignment(SimpleName:searchPattern)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ConstructorPattern))(SimpleName:findMethodDeclarations)(SimpleName:findMethodReferences)(SimpleName:declaringSimpleName)(SimpleName:declaringQualification)(SimpleName:parameterSimpleNames)(SimpleName:method)(SimpleName:matchRule)))))(Block(ExpressionStatement(Assignment(SimpleName:searchPattern)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:MethodPattern))(SimpleName:findMethodDeclarations)(SimpleName:findMethodReferences)(SimpleName:selector)(SimpleName:declaringQualification)(SimpleName:declaringSimpleName)(SimpleName:parameterSimpleNames)(SimpleName:method)(SimpleName:matchRule))))))(BreakStatement)(SwitchCase(QualifiedName:IRubyElement.TYPE))(VariableDeclarationStatement(SimpleType(SimpleName:IType))(VariableDeclarationFragment(SimpleName:type)(CastExpression(SimpleType(SimpleName:IType))(SimpleName:element))))(ExpressionStatement(Assignment(SimpleName:searchPattern)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:createTypePattern)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:getElementName)))(SimpleName:toCharArray))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:getSourceFolder)))(SimpleName:getElementName)))(SimpleName:toCharArray))(ConditionalExpression(SimpleName:ignoreDeclaringType)(NullLiteral)(MethodInvocation(SimpleName:enclosingTypeNames)(METHOD_INVOCATION_ARGUMENTS(SimpleName:type))))(NullLiteral)(SimpleName:type)(SimpleName:maskedLimitTo)(SimpleName:matchRule)))))(BreakStatement))(IfStatement(InfixExpression(SimpleName:searchPattern)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MatchLocator))(SimpleName:setFocus)(METHOD_INVOCATION_ARGUMENTS(SimpleName:searchPattern)(SimpleName:element)))))(ReturnStatement(SimpleName:searchPattern))))))