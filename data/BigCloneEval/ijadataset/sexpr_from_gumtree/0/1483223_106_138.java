(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:writeThreadRunner)(SimpleType(SimpleName:InterruptedException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:outputBuffer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:allocator))(SimpleName:allocate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:BUFFER_SIZE)))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:heartbeatIntervalMillis)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spec))(SimpleName:getHeartbeatInterval))))(WhileStatement(BooleanLiteral:true)(Block(ExpressionStatement(MethodInvocation(SimpleName:checkWriteInterrupted)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:lastBufferTimestamp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeQueue))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:lastBufferTimestamp))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:heartbeatIntervalMillis))(Block(BreakStatement)))(SynchronizedStatement(SimpleName:isWriteRunning)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:isWriteRunning))(SimpleName:wait)(METHOD_INVOCATION_ARGUMENTS(SimpleName:SLEEP_DELAY))))))(ExpressionStatement(MethodInvocation(SimpleName:checkWriteInterrupted)))))(VariableDeclarationStatement(SimpleType(SimpleName:AbstractRequest))(VariableDeclarationFragment(SimpleName:job)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeQueue))(SimpleName:poll))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputBuffer))(SimpleName:clear)))(IfStatement(InfixExpression(SimpleName:job)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingJobs))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:job))(SimpleName:getMessage)))(SimpleName:getRequestId))(SimpleName:job))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionMarshaler))(SimpleName:marshal)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:job))(SimpleName:getMessage))(SimpleName:outputBuffer)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HeartbeatRequest))(VariableDeclarationFragment(SimpleName:hb)(ClassInstanceCreation(SimpleType(SimpleName:HeartbeatRequest))(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionMarshaler))(SimpleName:marshal)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hb)(SimpleName:outputBuffer))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputBuffer))(SimpleName:flip)))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connector))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputBuffer)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:error))(SimpleName:compareAndSet)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(MethodInvocation(SimpleName:newError)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getMessage))))))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:InterruptedException)))))))))))))