(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:disseminate)(SingleVariableDeclaration(SimpleType(SimpleName:Context))(SimpleName:context))(SingleVariableDeclaration(SimpleType(SimpleName:DSpaceObject))(SimpleName:dso))(SingleVariableDeclaration(SimpleType(SimpleName:PackageParameters))(SimpleName:params))(SingleVariableDeclaration(SimpleType(SimpleName:OutputStream))(SimpleName:pkg))(SimpleType(SimpleName:PackageValidationException))(SimpleType(SimpleName:CrosswalkException))(SimpleType(SimpleName:AuthorizeException))(SimpleType(SimpleName:SQLException))(SimpleType(SimpleName:IOException))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dso))(SimpleName:getType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Constants.ITEM))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Item))(VariableDeclarationFragment(SimpleName:item)(CastExpression(SimpleType(SimpleName:Item))(SimpleName:dso))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:lmTime)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:item))(SimpleName:getLastModified)))(SimpleName:getTime))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:unauth)(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:params)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(NullLiteral)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:params))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:params)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:params))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(ExpressionStatement(Assignment(SimpleName:extraFiles)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(MethodInvocation(SimpleName:writeManifest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context)(SimpleName:item)(SimpleName:params)(SimpleName:pkg)))))(Block(ExpressionStatement(Assignment(SimpleName:extraFiles)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:zip)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(SimpleName:pkg))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zip))(SimpleName:setComment)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:me)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(SimpleName:MANIFEST_FILE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:me))(SimpleName:setTime)(METHOD_INVOCATION_ARGUMENTS(SimpleName:lmTime))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zip))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:me))))(ExpressionStatement(MethodInvocation(SimpleName:writeManifest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context)(SimpleName:item)(SimpleName:params)(SimpleName:zip))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zip))(SimpleName:closeEntry)))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:fi)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:extraFiles))(SimpleName:keySet)))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fi))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fname)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fi))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:ze)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(SimpleName:fname))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ze))(SimpleName:setTime)(METHOD_INVOCATION_ARGUMENTS(SimpleName:lmTime))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zip))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ze))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:InputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:extraFiles))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fname))))(SimpleName:zip))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zip))(SimpleName:closeEntry)))))(VariableDeclarationStatement(SimpleType(SimpleName:Bundle))(VariableDeclarationFragment(SimpleName:bundles)(Dimension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:item))(SimpleName:getBundles))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:bundles.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PackageUtils))(SimpleName:isMetaInfoBundle)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:bundles)(SimpleName:i)))))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AuthorizeManager))(SimpleName:authorizeActionBoolean)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context)(ArrayAccess(SimpleName:bundles)(SimpleName:i))(QualifiedName:Constants.READ))))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:unauth)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unauth))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:bundles)(SimpleName:i)))(SimpleName:getName))(StringLiteral:<STR>)))))(ContinueStatement))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:AuthorizeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:bundles)(SimpleName:i)))(SimpleName:getName))(StringLiteral:<STR>)))))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:Bitstream))(Dimension))(VariableDeclarationFragment(SimpleName:bitstreams)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:bundles)(SimpleName:i)))(SimpleName:getBitstreams))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:k)(NumberLiteral:0)))(InfixExpression(SimpleName:k)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:bitstreams.length))(PostfixExpression(SimpleName:k)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:auth)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AuthorizeManager))(SimpleName:authorizeActionBoolean)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context)(ArrayAccess(SimpleName:bitstreams)(SimpleName:k))(QualifiedName:Constants.READ)))))(IfStatement(InfixExpression(SimpleName:auth)(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:unauth)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unauth))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:ze)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(MethodInvocation(SimpleName:makeBitstreamName)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:bitstreams)(SimpleName:k)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ze))(SimpleName:setTime)(METHOD_INVOCATION_ARGUMENTS(SimpleName:lmTime))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ze))(SimpleName:setSize)(METHOD_INVOCATION_ARGUMENTS(ConditionalExpression(SimpleName:auth)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:bitstreams)(SimpleName:k)))(SimpleName:getSize))(NumberLiteral:0)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zip))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ze))))(IfStatement(SimpleName:auth)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:bitstreams)(SimpleName:k)))(SimpleName:retrieve))(SimpleName:zip))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:bitstreams)(SimpleName:k)))(SimpleName:getSequenceID))))(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zip))(SimpleName:closeEntry))))(IfStatement(InfixExpression(InfixExpression(SimpleName:unauth)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unauth))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:bitstreams)(SimpleName:k)))(SimpleName:getSequenceID))))(StringLiteral:<STR>))))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:AuthorizeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:bitstreams)(SimpleName:k)))(SimpleName:getSequenceID))))))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zip))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:extraFiles)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:PackageValidationException))(StringLiteral:<STR>))))))))