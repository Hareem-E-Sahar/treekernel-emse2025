(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleName:PasswordResetXHTMLPage)(SingleVariableDeclaration(SimpleType(SimpleName:ViewContext))(SimpleName:context))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:email))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:linkReference))(SimpleType(SimpleName:RepositoryException))(Block(SuperConstructorInvocation(SimpleName:context)(StringLiteral:<STR>))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:email))(ASSIGNMENT_OPERATOR:=)(SimpleName:email)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:linkReference))(ASSIGNMENT_OPERATOR:=)(SimpleName:linkReference)))(ExpressionStatement(Assignment(SimpleName:user)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:email))(SimpleName:isEmpty)))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Node)))(VariableDeclarationFragment(SimpleName:results)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NodeUtils))(SimpleName:getList)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getUserByEmail)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context)(SimpleName:email)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:results))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1))(Block(ExpressionStatement(Assignment(SimpleName:user)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:results))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:linkReference))(SimpleName:isEmpty)))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Node)))(VariableDeclarationFragment(SimpleName:results)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NodeUtils))(SimpleName:getList)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getUserByLinkReference)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context)(SimpleName:linkReference)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:results))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1))(Block(ExpressionStatement(Assignment(SimpleName:user)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:results))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))))))(ExpressionStatement(MethodInvocation(SimpleName:addTab)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Tab))(StringLiteral:<STR>)(StringLiteral:<STR>)(MethodInvocation(SimpleName:buildViewContent))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:linkReference))(SimpleName:isEmpty))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:email))(SimpleName:isEmpty)))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:link)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:UserUtils))(SimpleName:generateRandomString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:50)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:EmailUtils))(SimpleName:sendMail)(METHOD_INVOCATION_ARGUMENTS(SimpleName:email)(StringLiteral:<STR>)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getAppURL)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(QualifiedName:ViewContext.Format.HTML)))(StringLiteral:<STR>)(SimpleName:link)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:link))))(VariableDeclarationStatement(SimpleType(SimpleName:Calendar))(VariableDeclarationFragment(SimpleName:timestamp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:timestamp))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.MINUTE)(NumberLiteral:30))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:timestamp)))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:linkReference))(SimpleName:isEmpty)))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:email))(SimpleName:isEmpty))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:hasProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:getDate)))(SimpleName:after)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:newPassword)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:UserUtils))(SimpleName:generateRandomString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:8)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:EmailUtils))(SimpleName:sendMail)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:getString))(StringLiteral:<STR>)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:getName))(StringLiteral:<STR>)(SimpleName:newPassword)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DigestUtils))(SimpleName:digest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newPassword))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:Calendar))(VariableDeclarationFragment(SimpleName:timestamp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:timestamp))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.YEAR)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:setProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:timestamp)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getSession)))(SimpleName:save)))))))