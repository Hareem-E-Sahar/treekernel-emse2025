(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:writeToFile)(SingleVariableDeclaration(SimpleType(SimpleName:HierarchyNode))(SimpleName:hnode))(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:file))(SimpleType(SimpleName:ApplicationException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:buffer)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:errorMessage)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:hnode)))))(ExpressionStatement(MethodInvocation(SimpleName:freeze)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:fileData)(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:file)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lastDot)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:lastDot)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:extension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:lastDot)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputFilterCommands))(SimpleName:containsKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:extension)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showMessageDialog)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:extension)(StringLiteral:<STR>))(StringLiteral:<STR>)(QualifiedName:JOptionPane.WARNING_MESSAGE))))(VariableDeclarationStatement(SimpleType(SimpleName:XMLOutputter))(VariableDeclarationFragment(SimpleName:outputter)(ClassInstanceCreation(SimpleType(SimpleName:XMLOutputter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Format))(SimpleName:getPrettyFormat)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputter))(SimpleName:output)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Document))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:XMLVisitor))(SimpleName:toXML)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hnode))))(SimpleName:buffer))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:command)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputFilterCommands))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:extension)))))(VariableDeclarationStatement(SimpleType(SimpleName:Process))(VariableDeclarationFragment(SimpleName:filter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Runtime))(SimpleName:getRuntime)))(SimpleName:exec)(METHOD_INVOCATION_ARGUMENTS(SimpleName:command)))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:processInput)(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filter))(SimpleName:getOutputStream)))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:processOutput)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filter))(SimpleName:getInputStream)))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:processError)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filter))(SimpleName:getErrorStream)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:toByteArray)))(SimpleName:processInput))))(ExpressionStatement(MethodInvocation(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:processOutput)(SimpleName:fileData))))(ExpressionStatement(MethodInvocation(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:processError)(SimpleName:errorMessage)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filter))(SimpleName:destroy)))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ApplicationException))(StringLiteral:<STR>))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:exitCode)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filter))(SimpleName:waitFor))))(IfStatement(InfixExpression(SimpleName:exitCode)(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:message)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:errorMessage))(SimpleName:toString))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:close)))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ApplicationException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:exitCode)(StringLiteral:<STR>)(SimpleName:message)))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:XMLOutputter))(VariableDeclarationFragment(SimpleName:outputter)(ClassInstanceCreation(SimpleType(SimpleName:XMLOutputter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Format))(SimpleName:getPrettyFormat)))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:zos)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(SimpleName:fileData))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zos))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputter))(SimpleName:output)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Document))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:XMLVisitor))(SimpleName:toXML)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hnode))))(SimpleName:zos))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zos))(SimpleName:close))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:XMLOutputter))(VariableDeclarationFragment(SimpleName:outputter)(ClassInstanceCreation(SimpleType(SimpleName:XMLOutputter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Format))(SimpleName:getPrettyFormat)))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:zos)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(SimpleName:fileData))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zos))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputter))(SimpleName:output)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Document))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:XMLVisitor))(SimpleName:toXML)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hnode))))(SimpleName:zos))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zos))(SimpleName:close)))))(ExpressionStatement(MethodInvocation(SimpleName:freeze)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:hnode)(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(SimpleName:freeze)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(IfStatement(InstanceofExpression(SimpleName:e)(SimpleType(SimpleName:ApplicationException)))(ThrowStatement(CastExpression(SimpleType(SimpleName:ApplicationException))(SimpleName:e)))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ApplicationException))(StringLiteral:<STR>)))))))))))