(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:ProductImage))(SimpleName:buildProductImage)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:uploadProductImageFile))(Block(VariableDeclarationStatement(SimpleType(SimpleName:SystemConfig))(VariableDeclarationFragment(SimpleName:systemConfig)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SystemConfigUtil))(SimpleName:getSystemConfig))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:sourceProductImageFormatName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:getImageFormatName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uploadProductImageFile)))))(VariableDeclarationStatement(SimpleType(SimpleName:SimpleDateFormat))(VariableDeclarationFragment(SimpleName:simpleDateFormat)(ClassInstanceCreation(SimpleType(SimpleName:SimpleDateFormat))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:dateString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:simpleDateFormat))(SimpleName:format)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date)))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:uuid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CommonUtil))(SimpleName:getUUID))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:sourceProductImagePath)(InfixExpression(QualifiedName:SystemConfig.UPLOAD_IMAGE_DIR)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:dateString)(StringLiteral:<STR>)(SimpleName:uuid)(StringLiteral:<STR>)(SimpleName:sourceProductImageFormatName))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:bigProductImagePath)(InfixExpression(QualifiedName:SystemConfig.UPLOAD_IMAGE_DIR)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:dateString)(StringLiteral:<STR>)(SimpleName:uuid)(QualifiedName:ProductImage.BIG_PRODUCT_IMAGE_FILE_NAME_SUFFIX)(StringLiteral:<STR>)(QualifiedName:ProductImage.PRODUCT_IMAGE_FILE_EXTENSION))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:smallProductImagePath)(InfixExpression(QualifiedName:SystemConfig.UPLOAD_IMAGE_DIR)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:dateString)(StringLiteral:<STR>)(SimpleName:uuid)(QualifiedName:ProductImage.SMALL_PRODUCT_IMAGE_FILE_NAME_SUFFIX)(StringLiteral:<STR>)(QualifiedName:ProductImage.PRODUCT_IMAGE_FILE_EXTENSION))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:thumbnailProductImagePath)(InfixExpression(QualifiedName:SystemConfig.UPLOAD_IMAGE_DIR)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:dateString)(StringLiteral:<STR>)(SimpleName:uuid)(QualifiedName:ProductImage.THUMBNAIL_PRODUCT_IMAGE_FILE_NAME_SUFFIX)(StringLiteral:<STR>)(QualifiedName:ProductImage.PRODUCT_IMAGE_FILE_EXTENSION))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:sourceProductImageFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServletActionContext))(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sourceProductImagePath))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:bigProductImageFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServletActionContext))(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bigProductImagePath))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:smallProductImageFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServletActionContext))(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:smallProductImagePath))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:thumbnailProductImageFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServletActionContext))(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thumbnailProductImagePath))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:watermarkImageFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServletActionContext))(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getWatermarkImagePath)))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:sourceProductImageParentFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sourceProductImageFile))(SimpleName:getParentFile))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:bigProductImageParentFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bigProductImageFile))(SimpleName:getParentFile))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:smallProductImageParentFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:smallProductImageFile))(SimpleName:getParentFile))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:thumbnailProductImageParentFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thumbnailProductImageFile))(SimpleName:getParentFile))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sourceProductImageParentFile))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sourceProductImageParentFile))(SimpleName:mkdirs)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bigProductImageParentFile))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bigProductImageParentFile))(SimpleName:mkdirs)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:smallProductImageParentFile))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:smallProductImageParentFile))(SimpleName:mkdirs)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thumbnailProductImageParentFile))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thumbnailProductImageParentFile))(SimpleName:mkdirs)))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:BufferedImage))(VariableDeclarationFragment(SimpleName:srcBufferedImage)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageIO))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uploadProductImageFile)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uploadProductImageFile)(SimpleName:sourceProductImageFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:zoomAndWatermark)(METHOD_INVOCATION_ARGUMENTS(SimpleName:srcBufferedImage)(SimpleName:bigProductImageFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getBigProductImageHeight))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getBigProductImageWidth))(SimpleName:watermarkImageFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getWatermarkPosition))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getWatermarkAlpha)))(SimpleName:intValue)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:zoomAndWatermark)(METHOD_INVOCATION_ARGUMENTS(SimpleName:srcBufferedImage)(SimpleName:smallProductImageFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getSmallProductImageHeight))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getSmallProductImageWidth))(SimpleName:watermarkImageFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getWatermarkPosition))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getWatermarkAlpha)))(SimpleName:intValue)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:zoom)(METHOD_INVOCATION_ARGUMENTS(SimpleName:srcBufferedImage)(SimpleName:thumbnailProductImageFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getThumbnailProductImageHeight))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:systemConfig))(SimpleName:getThumbnailProductImageWidth))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))(VariableDeclarationStatement(SimpleType(SimpleName:ProductImage))(VariableDeclarationFragment(SimpleName:productImage)(ClassInstanceCreation(SimpleType(SimpleName:ProductImage)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:setId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uuid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:setSourceProductImagePath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sourceProductImagePath))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:setBigProductImagePath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bigProductImagePath))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:setSmallProductImagePath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:smallProductImagePath))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:setThumbnailProductImagePath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thumbnailProductImagePath))))(ReturnStatement(SimpleName:productImage))))))