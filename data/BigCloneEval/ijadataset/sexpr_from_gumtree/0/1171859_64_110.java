(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(IfStatement(InfixExpression(SimpleName:software)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ReturnStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Jvm))(SimpleName:hashtable)(METHOD_INVOCATION_ARGUMENTS(SimpleName:HKEY))))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:software)(ThisExpression))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setException)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setDownloaded)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setDownloadStartTime)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:downloadStarted))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:dsx))(Block)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:getDownloadDir))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setException)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Exception))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setDownloadStartTime)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setDownloaded)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ThrowStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:getException)))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:getURL)))))(VariableDeclarationStatement(SimpleType(SimpleName:URLConnection))(VariableDeclarationFragment(SimpleName:con)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openConnection))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setDownloadLength)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:con))(SimpleName:getContentLength)))))(ExpressionStatement(Assignment(SimpleName:inputStream)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:con))(SimpleName:getInputStream))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:getDownloadDir))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:getURLFilename)))))(ExpressionStatement(Assignment(SimpleName:outputStream)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:file))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:totalBytes)(NumberLiteral:0)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buffer)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:8192))))))(WhileStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:cancelled))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bytesRead)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Jvm))(SimpleName:copyPartialStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:inputStream)(SimpleName:outputStream)(SimpleName:buffer)))))(IfStatement(InfixExpression(SimpleName:bytesRead)(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(BreakStatement))(ExpressionStatement(Assignment(SimpleName:totalBytes)(ASSIGNMENT_OPERATOR:+=)(SimpleName:bytesRead)))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:downloadProgress)(METHOD_INVOCATION_ARGUMENTS(SimpleName:totalBytes)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:dx))(Block)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:cancelled))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setDownloaded)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:x))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setException)(METHOD_INVOCATION_ARGUMENTS(SimpleName:x))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setDownloadStartTime)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:setDownloaded)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false)))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:software))(SimpleName:downloadComplete))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:dcx))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Jvm))(SimpleName:hashtable)(METHOD_INVOCATION_ARGUMENTS(SimpleName:HKEY))))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(SimpleName:software))))(ExpressionStatement(MethodInvocation(SimpleName:closeStreams)))))))