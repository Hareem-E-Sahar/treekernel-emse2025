(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:doBackup)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:directory))(SimpleType(SimpleName:Exception))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:directory))(SimpleName:exists)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:directory))(SimpleName:mkdir))))(VariableDeclarationStatement(SimpleType(SimpleName:RequestContext))(VariableDeclarationFragment(SimpleName:rc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RequestContext))(SimpleName:getRequestContext))))(IfStatement(InfixExpression(FieldAccess(ThisExpression)(SimpleName:authStore))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Auth))(VariableDeclarationFragment(SimpleName:auth)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:authStore)))(SimpleName:retrieve)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:nsid))))))(IfStatement(InfixExpression(SimpleName:auth)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:authorize)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rc))(SimpleName:setAuth)(METHOD_INVOCATION_ARGUMENTS(SimpleName:auth)))))))(VariableDeclarationStatement(SimpleType(SimpleName:PhotosetsInterface))(VariableDeclarationFragment(SimpleName:pi)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:flickr))(SimpleName:getPhotosetsInterface))))(VariableDeclarationStatement(SimpleType(SimpleName:PhotosInterface))(VariableDeclarationFragment(SimpleName:photoInt)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:flickr))(SimpleName:getPhotosInterface))))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:allPhotos)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:sets)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pi))(SimpleName:getList)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:nsid)))))(SimpleName:getPhotosets)))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sets))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Photoset))(VariableDeclarationFragment(SimpleName:set)(CastExpression(SimpleType(SimpleName:Photoset))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sets))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:PhotoList))(VariableDeclarationFragment(SimpleName:photos)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pi))(SimpleName:getPhotos)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:set))(SimpleName:getId))(NumberLiteral:500)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:allPhotos))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:set))(SimpleName:getTitle))(SimpleName:photos))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:notInSetPage)(NumberLiteral:1)))(VariableDeclarationStatement(SimpleType(SimpleName:Collection))(VariableDeclarationFragment(SimpleName:notInASet)(ClassInstanceCreation(SimpleType(SimpleName:ArrayList)))))(WhileStatement(BooleanLiteral:true)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Collection))(VariableDeclarationFragment(SimpleName:nis)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:photoInt))(SimpleName:getNotInSet)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:50)(SimpleName:notInSetPage)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:notInASet))(SimpleName:addAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nis))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nis))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:50))(BreakStatement))(ExpressionStatement(PostfixExpression(SimpleName:notInSetPage)(POSTFIX_EXPRESSION_OPERATOR:++)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:allPhotos))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:notInASet))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:allIter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:allPhotos))(SimpleName:keySet)))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:allIter))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:setTitle)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:allIter))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:setDirectoryName)(MethodInvocation(SimpleName:makeSafeFilename)(METHOD_INVOCATION_ARGUMENTS(SimpleName:setTitle)))))(VariableDeclarationStatement(SimpleType(SimpleName:Collection))(VariableDeclarationFragment(SimpleName:currentSet)(CastExpression(SimpleType(SimpleName:Collection))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:allPhotos))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:setTitle))))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:setIterator)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentSet))(SimpleName:iterator))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:setDirectory)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:directory)(SimpleName:setDirectoryName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:setDirectory))(SimpleName:mkdir)))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:setIterator))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Photo))(VariableDeclarationFragment(SimpleName:p)(CastExpression(SimpleType(SimpleName:Photo))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:setIterator))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:url)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p))(SimpleName:getLargeUrl))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:u)(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:url))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filename)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:u))(SimpleName:getFile))))(ExpressionStatement(Assignment(SimpleName:filename)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filename))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filename))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filename))(SimpleName:length))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:filename)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:setDirectory))(SimpleName:getCanonicalPath))))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:inStream)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:photoInt))(SimpleName:getImageAsStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:p)(QualifiedName:Size.LARGE))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:newFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:setDirectory)(SimpleName:filename))))(VariableDeclarationStatement(SimpleType(SimpleName:FileOutputStream))(VariableDeclarationFragment(SimpleName:fos)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:newFile))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inStream))(SimpleName:read))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:read))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fos))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fos))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inStream))(SimpleName:close)))))))))))