(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:Channel))(SimpleName:setUpChannel)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:type))(SingleVariableDeclaration(SimpleType(SimpleName:ParticipantConnectionImpl))(SimpleName:connection))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:docId))(SimpleType(SimpleName:ConnectionException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:type)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Channel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(SimpleName:startChannel)(METHOD_INVOCATION_ARGUMENTS(SimpleName:type)(SimpleName:connection)))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:channelType)(MethodInvocation(SimpleName:getChannelTypeXML)(METHOD_INVOCATION_ARGUMENTS(SimpleName:type)(SimpleName:docId)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:data)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channelType))(SimpleName:getBytes)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NetworkProperties))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:NetworkProperties.KEY_DEFAULT_ENCODING)))))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputDataStream))(VariableDeclarationFragment(SimpleName:output)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DataStreamHelper))(SimpleName:prepare)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:Reply))(VariableDeclarationFragment(SimpleName:reply)(ClassInstanceCreation(SimpleType(SimpleName:Reply)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:sendMSG)(METHOD_INVOCATION_ARGUMENTS(SimpleName:output)(SimpleName:reply))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:CHANNEL_DISCOVERY)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:InputDataStream))(VariableDeclarationFragment(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reply))(SimpleName:getNextReply)))(SimpleName:getDataStream))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:rawData)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DataStreamHelper))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:response)))))(VariableDeclarationStatement(SimpleType(SimpleName:ResponseParserHandler))(VariableDeclarationFragment(SimpleName:handler)(ClassInstanceCreation(SimpleType(SimpleName:ResponseParserHandler)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DeserializerImpl))(SimpleName:getInstance)))(SimpleName:deserialize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rawData)(SimpleName:handler))))(VariableDeclarationStatement(SimpleType(SimpleName:Request))(VariableDeclarationFragment(SimpleName:result)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:handler))(SimpleName:getResult))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:getType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.USER_DISCOVERY))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getUser)))(SimpleName:setId)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:getUserId)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:getPayload)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getUser)))(SimpleName:getMutableUserDetails)))(SimpleName:setUsername)(METHOD_INVOCATION_ARGUMENTS(SimpleName:name)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reply))(SimpleName:getNextReply)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement(SimpleName:channel)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:be))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:be)(StringLiteral:<STR>)))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ConnectionException))(StringLiteral:<STR>))))))))))