(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(Modifier:final)(SimpleType(SimpleName:Sequence))(SimpleName:processText)(SingleVariableDeclaration(SimpleType(SimpleName:MemTreeBuilder))(SimpleName:builder))(SingleVariableDeclaration(SimpleType(SimpleName:Sequence))(SimpleName:nodes))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:width))(SingleVariableDeclaration(SimpleType(SimpleName:FunctionCall))(SimpleName:callback))(SingleVariableDeclaration(SimpleType(SimpleName:FunctionCall))(SimpleName:resultCallback))(SingleVariableDeclaration(SimpleType(SimpleName:Sequence))(SimpleName:extraArgs))(SimpleType(SimpleName:XPathException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:str)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer)))))(VariableDeclarationStatement(SimpleType(SimpleName:NodeValue))(VariableDeclarationFragment(SimpleName:node)))(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:offsets)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:NodeProxy))(VariableDeclarationFragment(SimpleName:firstProxy)(NullLiteral)))(ForStatement(VariableDeclarationExpression(SimpleType(SimpleName:SequenceIterator))(VariableDeclarationFragment(SimpleName:i)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nodes))(SimpleName:iterate))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:hasNext))(Block(ExpressionStatement(Assignment(SimpleName:node)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:NodeValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:nextItem)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:node))(SimpleName:getImplementationType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:NodeValue.IN_MEMORY_NODE))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XPathException))(MethodInvocation(SimpleName:getASTNode))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:NodeProxy))(VariableDeclarationFragment(SimpleName:proxy)(CastExpression(SimpleType(SimpleName:NodeProxy))(SimpleName:node))))(IfStatement(InfixExpression(SimpleName:firstProxy)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ExpressionStatement(Assignment(SimpleName:firstProxy)(ASSIGNMENT_OPERATOR:=)(SimpleName:proxy))))(VariableDeclarationStatement(SimpleType(SimpleName:TextImpl))(VariableDeclarationFragment(SimpleName:text)(CastExpression(SimpleType(SimpleName:TextImpl))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxy))(SimpleName:getNode)))))(VariableDeclarationStatement(SimpleType(SimpleName:Match))(VariableDeclarationFragment(SimpleName:next)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxy))(SimpleName:getMatches))))(WhileStatement(InfixExpression(SimpleName:next)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:next))(SimpleName:getNodeId)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:text))(SimpleName:getNodeId))))(Block(IfStatement(InfixExpression(SimpleName:offsets)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ExpressionStatement(Assignment(SimpleName:offsets)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ArrayList))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:freq)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:next))(SimpleName:getFrequency))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:j)(NumberLiteral:0)))(InfixExpression(SimpleName:j)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:freq))(PostfixExpression(SimpleName:j)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(QualifiedName:Match.Offset))(VariableDeclarationFragment(SimpleName:offset)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:next))(SimpleName:getOffset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:j)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:setOffset)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getOffset))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offsets))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:offset))))))))(ExpressionStatement(Assignment(SimpleName:next)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:next))(SimpleName:getNextMatch))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:text))(SimpleName:getData)))))))(VariableDeclarationStatement(SimpleType(SimpleName:ValueSequence))(VariableDeclarationFragment(SimpleName:result)(ClassInstanceCreation(SimpleType(SimpleName:ValueSequence)))))(VariableDeclarationStatement(SimpleType(SimpleName:DocumentBuilderReceiver))(VariableDeclarationFragment(SimpleName:receiver)(ClassInstanceCreation(SimpleType(SimpleName:DocumentBuilderReceiver))(SimpleName:builder))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nodeNr)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:currentWidth)(NumberLiteral:0)))(IfStatement(InfixExpression(SimpleName:offsets)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(IfStatement(InfixExpression(SimpleName:width)(INFIX_EXPRESSION_OPERATOR:>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:length)))(ExpressionStatement(Assignment(SimpleName:width)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:length)))))(ExpressionStatement(Assignment(SimpleName:nodeNr)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:characters)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(SimpleName:width)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getNode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nodeNr))))))(ExpressionStatement(Assignment(SimpleName:currentWidth)(ASSIGNMENT_OPERATOR:+=)(SimpleName:width))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FastQSort))(SimpleName:sort)(METHOD_INVOCATION_ARGUMENTS(SimpleName:offsets)(NumberLiteral:0)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offsets))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nextOffset)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:pos)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lastNodeNr)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(VariableDeclarationStatement(SimpleType(SimpleName:Sequence))(VariableDeclarationFragment(SimpleName:params)(Dimension)(ArrayCreation(ArrayType(SimpleType(SimpleName:Sequence))(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callback))(SimpleName:getSignature)))(SimpleName:getArgumentCount)))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:1))(ASSIGNMENT_OPERATOR:=)(SimpleName:firstProxy)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:2))(ASSIGNMENT_OPERATOR:=)(SimpleName:extraArgs)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:width))(Block(VariableDeclarationStatement(SimpleType(QualifiedName:Match.Offset))(VariableDeclarationFragment(SimpleName:firstMatch)(CastExpression(SimpleType(QualifiedName:Match.Offset))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offsets))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(PostfixExpression(SimpleName:nextOffset)(POSTFIX_EXPRESSION_OPERATOR:++)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:leftWidth)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:width)(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getLength))))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:2))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:leftWidth))(Block(ExpressionStatement(Assignment(SimpleName:pos)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:truncateStart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:str)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:leftWidth))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset))))))(ExpressionStatement(Assignment(SimpleName:leftWidth)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:pos)))))(ExpressionStatement(Assignment(SimpleName:leftWidth)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset)))))(ExpressionStatement(Assignment(SimpleName:nodeNr)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:characters)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pos)(InfixExpression(SimpleName:pos)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:leftWidth))))))))(IfStatement(InfixExpression(SimpleName:lastNodeNr)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:nodeNr))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getNode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nodeNr)))))))(ExpressionStatement(Assignment(SimpleName:lastNodeNr)(ASSIGNMENT_OPERATOR:=)(SimpleName:nodeNr)))(ExpressionStatement(Assignment(SimpleName:currentWidth)(ASSIGNMENT_OPERATOR:+=)(SimpleName:leftWidth)))(ExpressionStatement(Assignment(SimpleName:pos)(ASSIGNMENT_OPERATOR:+=)(SimpleName:leftWidth)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:0))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:StringValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getLength))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callback))(SimpleName:getSignature)))(SimpleName:getArgumentCount))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:4))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:3))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ValueSequence)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:params)(NumberLiteral:3)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:IntegerValue))(InfixExpression(SimpleName:nextOffset)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:params)(NumberLiteral:3)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:IntegerValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getOffset))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:params)(NumberLiteral:3)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:IntegerValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getLength))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Sequence))(VariableDeclarationFragment(SimpleName:callbackResult)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callback))(SimpleName:evalFunction)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(NullLiteral)(SimpleName:params)))))(ForStatement(VariableDeclarationExpression(SimpleType(SimpleName:SequenceIterator))(VariableDeclarationFragment(SimpleName:iter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callbackResult))(SimpleName:iterate))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iter))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Item))(VariableDeclarationFragment(SimpleName:next)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iter))(SimpleName:nextItem))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Type))(SimpleName:subTypeOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:next))(SimpleName:getType))(QualifiedName:Type.NODE)))(Block(ExpressionStatement(Assignment(SimpleName:nodeNr)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getLastNode))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:next))(SimpleName:copyTo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getBroker))(SimpleName:receiver))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getNode)(METHOD_INVOCATION_ARGUMENTS(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:nodeNr)))))))(ExpressionStatement(Assignment(SimpleName:lastNodeNr)(ASSIGNMENT_OPERATOR:=)(SimpleName:nodeNr))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SAXException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XPathException))(MethodInvocation(SimpleName:getASTNode))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))(SimpleName:e))))))))))(ExpressionStatement(Assignment(SimpleName:currentWidth)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getLength))))(ExpressionStatement(Assignment(SimpleName:pos)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:firstMatch))(SimpleName:getLength)))))(ExpressionStatement(Assignment(SimpleName:width)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:length)))))(VariableDeclarationStatement(SimpleType(QualifiedName:Match.Offset))(VariableDeclarationFragment(SimpleName:offset)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(SimpleName:nextOffset)))(InfixExpression(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offsets))(SimpleName:size)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:currentWidth)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:width)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(SimpleName:offset)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(QualifiedName:Match.Offset))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offsets))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:pos))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:len)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:pos))))(IfStatement(InfixExpression(InfixExpression(SimpleName:currentWidth)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:len))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:width))(ExpressionStatement(Assignment(SimpleName:len)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:width)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:currentWidth)))))(ExpressionStatement(Assignment(SimpleName:nodeNr)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:characters)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pos)(InfixExpression(SimpleName:pos)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:len))))))))(IfStatement(InfixExpression(SimpleName:lastNodeNr)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:nodeNr))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getNode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nodeNr)))))))(ExpressionStatement(Assignment(SimpleName:currentWidth)(ASSIGNMENT_OPERATOR:+=)(SimpleName:len)))(ExpressionStatement(Assignment(SimpleName:pos)(ASSIGNMENT_OPERATOR:+=)(SimpleName:len)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:currentWidth)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getLength)))(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:width))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:0))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:StringValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getOffset))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getLength))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callback))(SimpleName:getSignature)))(SimpleName:getArgumentCount))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:4))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:3))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ValueSequence)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:params)(NumberLiteral:3)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:IntegerValue))(SimpleName:i)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:params)(NumberLiteral:3)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:IntegerValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getOffset))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:params)(NumberLiteral:3)))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:IntegerValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getLength))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Sequence))(VariableDeclarationFragment(SimpleName:callbackResult)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callback))(SimpleName:evalFunction)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(NullLiteral)(SimpleName:params)))))(ForStatement(VariableDeclarationExpression(SimpleType(SimpleName:SequenceIterator))(VariableDeclarationFragment(SimpleName:iter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callbackResult))(SimpleName:iterate))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iter))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Item))(VariableDeclarationFragment(SimpleName:next)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iter))(SimpleName:nextItem))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Type))(SimpleName:subTypeOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:next))(SimpleName:getType))(QualifiedName:Type.NODE)))(Block(ExpressionStatement(Assignment(SimpleName:nodeNr)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getLastNode))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:next))(SimpleName:copyTo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getBroker))(SimpleName:receiver))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getNode)(METHOD_INVOCATION_ARGUMENTS(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:nodeNr)))))))(ExpressionStatement(Assignment(SimpleName:lastNodeNr)(ASSIGNMENT_OPERATOR:=)(SimpleName:nodeNr))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SAXException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XPathException))(MethodInvocation(SimpleName:getASTNode))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))(SimpleName:e))))))))))(ExpressionStatement(Assignment(SimpleName:currentWidth)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getLength))))(ExpressionStatement(Assignment(SimpleName:pos)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:offset))(SimpleName:getLength)))))(BreakStatement))))(IfStatement(InfixExpression(InfixExpression(SimpleName:currentWidth)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:width))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:pos)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:length))))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:truncated)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:len)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:pos))))(IfStatement(InfixExpression(SimpleName:len)(INFIX_EXPRESSION_OPERATOR:>)(InfixExpression(SimpleName:width)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:currentWidth)))(Block(ExpressionStatement(Assignment(SimpleName:truncated)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(Assignment(SimpleName:len)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:width)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:currentWidth))))))(ExpressionStatement(Assignment(SimpleName:nodeNr)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:characters)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:str))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pos)(InfixExpression(SimpleName:pos)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:len))))))))(IfStatement(InfixExpression(SimpleName:lastNodeNr)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:nodeNr))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getNode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nodeNr)))))))(ExpressionStatement(Assignment(SimpleName:lastNodeNr)(ASSIGNMENT_OPERATOR:=)(SimpleName:nodeNr)))(ExpressionStatement(Assignment(SimpleName:currentWidth)(ASSIGNMENT_OPERATOR:+=)(SimpleName:len)))(IfStatement(SimpleName:truncated)(Block(ExpressionStatement(Assignment(SimpleName:nodeNr)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:characters)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:lastNodeNr)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:nodeNr))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getDocument)))(SimpleName:getNode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nodeNr)))))))(ExpressionStatement(Assignment(SimpleName:lastNodeNr)(ASSIGNMENT_OPERATOR:=)(SimpleName:nodeNr)))))))))(IfStatement(InfixExpression(SimpleName:resultCallback)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Sequence))(VariableDeclarationFragment(SimpleName:params)(Dimension)(ArrayCreation(ArrayType(SimpleType(SimpleName:Sequence))(Dimension(NumberLiteral:3))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:0))(ASSIGNMENT_OPERATOR:=)(SimpleName:result)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:1))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:IntegerValue))(SimpleName:currentWidth))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:params)(NumberLiteral:2))(ASSIGNMENT_OPERATOR:=)(SimpleName:extraArgs)))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resultCallback))(SimpleName:evalFunction)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(NullLiteral)(SimpleName:params)))))(ReturnStatement(SimpleName:result)))))))