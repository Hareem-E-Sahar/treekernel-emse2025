(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:int)(SimpleName:sendChunks)(SingleVariableDeclaration(SimpleType(SimpleName:ByteBuffer))(SimpleName:pkt))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:maxChunks))(SingleVariableDeclaration(SimpleType(SimpleName:OutputStream))(SimpleName:out))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:len)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(SimpleName:endOffset)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:offset))))(InfixExpression(SimpleName:bytesPerChecksum)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:maxChunks))))))(IfStatement(InfixExpression(SimpleName:len)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ReturnStatement(NumberLiteral:0))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:numChunks)(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:len)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:bytesPerChecksum))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:bytesPerChecksum))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:packetLen)(InfixExpression(InfixExpression(SimpleName:len)(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(SimpleName:numChunks)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:checksumSize)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:4))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pkt))(SimpleName:clear)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pkt))(SimpleName:putInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:packetLen))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pkt))(SimpleName:putLong)(METHOD_INVOCATION_ARGUMENTS(SimpleName:offset))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pkt))(SimpleName:putLong)(METHOD_INVOCATION_ARGUMENTS(SimpleName:seqno))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pkt))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:byte)(ParenthesizedExpression(ConditionalExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:offset)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:len))(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:endOffset)))(NumberLiteral:1)(NumberLiteral:0)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pkt))(SimpleName:putInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:len))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:checksumOff)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pkt))(SimpleName:position))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:checksumLen)(InfixExpression(SimpleName:numChunks)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:checksumSize))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pkt))(SimpleName:array))))(IfStatement(InfixExpression(InfixExpression(SimpleName:checksumSize)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:checksumIn)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksumIn))(SimpleName:readFully)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(SimpleName:checksumOff)(SimpleName:checksumLen)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:offset)(StringLiteral:<STR>)(SimpleName:block)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:stringifyException)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:closeStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:checksumIn))))(ExpressionStatement(Assignment(SimpleName:checksumIn)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(IfStatement(SimpleName:corruptChecksumOk)(Block(IfStatement(InfixExpression(SimpleName:checksumOff)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:checksumLen))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Arrays))(SimpleName:fill)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(SimpleName:checksumOff)(SimpleName:checksumLen)(CastExpression(PrimitiveType:byte)(NumberLiteral:0))))))))(Block(ThrowStatement(SimpleName:e)))))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dataOff)(InfixExpression(SimpleName:checksumOff)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:checksumLen))))(IfStatement(InfixExpression(SimpleName:blockInPosition)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:readFully)(METHOD_INVOCATION_ARGUMENTS(SimpleName:blockIn)(SimpleName:buf)(SimpleName:dataOff)(SimpleName:len))))(IfStatement(SimpleName:verifyChecksum)(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dOff)(SimpleName:dataOff)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:cOff)(SimpleName:checksumOff)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dLeft)(SimpleName:len)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:numChunks))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksum))(SimpleName:reset)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dLen)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dLeft)(SimpleName:bytesPerChecksum)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksum))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(SimpleName:dOff)(SimpleName:dLen))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:checksum))(SimpleName:compare)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(SimpleName:cOff))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ChecksumException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:offset)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:len))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:dLeft))))(SimpleName:len)))))(ExpressionStatement(Assignment(SimpleName:dLeft)(ASSIGNMENT_OPERATOR:-=)(SimpleName:dLen)))(ExpressionStatement(Assignment(SimpleName:dOff)(ASSIGNMENT_OPERATOR:+=)(SimpleName:dLen)))(ExpressionStatement(Assignment(SimpleName:cOff)(ASSIGNMENT_OPERATOR:+=)(SimpleName:checksumSize)))))))))(TryStatement(Block(IfStatement(InfixExpression(SimpleName:blockInPosition)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(Block(VariableDeclarationStatement(SimpleType(SimpleName:SocketOutputStream))(VariableDeclarationFragment(SimpleName:sockOut)(CastExpression(SimpleType(SimpleName:SocketOutputStream))(SimpleName:out))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sockOut))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(SimpleName:dataOff))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sockOut))(SimpleName:transferToFully)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:FileInputStream))(SimpleName:blockIn))))(SimpleName:getChannel))(SimpleName:blockInPosition)(SimpleName:len))))(ExpressionStatement(Assignment(SimpleName:blockInPosition)(ASSIGNMENT_OPERATOR:+=)(SimpleName:len))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(NumberLiteral:0)(InfixExpression(SimpleName:dataOff)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:len))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ThrowStatement(MethodInvocation(SimpleName:ioeToSocketException)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)))))))(IfStatement(InfixExpression(SimpleName:throttler)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:throttler))(SimpleName:throttle)(METHOD_INVOCATION_ARGUMENTS(SimpleName:packetLen))))))(ReturnStatement(SimpleName:len))))))