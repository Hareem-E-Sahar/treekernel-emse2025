(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:start_server)(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:catch_errors_p))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:backtrace_p))(Block(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:port)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:1024)))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:port)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:65536)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:port)(StringLiteral:<STR>))))))(WhileStatement(BooleanLiteral:true)(Block(VariableDeclarationStatement(SimpleType(SimpleName:ServerSocket))(VariableDeclarationFragment(SimpleName:server_socket)(NullLiteral)))(TryStatement(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:server_socket)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ServerSocket))(SimpleName:port)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e1))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e1))(SimpleName:toString)))))))(VariableDeclarationStatement(SimpleType(SimpleName:Connection))(VariableDeclarationFragment(SimpleName:conn)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LocalConnection))(SimpleName:local_connection))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:register_interest_in_side_effects)(METHOD_INVOCATION_ARGUMENTS(ThisExpression))))(WhileStatement(BooleanLiteral:true)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Socket))(VariableDeclarationFragment(SimpleName:socket)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:socket)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:server_socket))(SimpleName:accept)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e2))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ConnectionProblem))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e2))(SimpleName:toString)))))))(VariableDeclarationStatement(SimpleType(SimpleName:PrintWriter))(VariableDeclarationFragment(SimpleName:write_stream)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:write_stream)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:PrintWriter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:getOutputStream))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e3))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ConnectionProblem))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e3))(SimpleName:toString)))))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedReader))(VariableDeclarationFragment(SimpleName:read_stream)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:read_stream)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedReader))(ClassInstanceCreation(SimpleType(SimpleName:InputStreamReader))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:getInputStream)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e4))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ConnectionProblem))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e4))(SimpleName:toString)))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:read_stream)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:write_stream)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))))(Block(ExpressionStatement(MethodInvocation(SimpleName:handle_connection)(METHOD_INVOCATION_ARGUMENTS(SimpleName:server_socket)(SimpleName:read_stream)(SimpleName:write_stream)(SimpleName:catch_errors_p)(SimpleName:backtrace_p))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e5))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ConnectionProblem))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e5))(SimpleName:toString))))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:register_interest_in_side_effects)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ConnectionProblem))(SimpleName:problem))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:problem))))))))))))))