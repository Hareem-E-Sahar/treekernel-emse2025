(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:saveFile)(SingleVariableDeclaration(SimpleType(SimpleName:InputStream))(SimpleName:in))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:fileName))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:fileKey))(SingleVariableDeclaration(SimpleType(SimpleName:ProgressListener))(SimpleName:listener))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:batchNo))(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:maxBatchSize))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:isFinalBatch))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:splitNo)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:readBytes)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:buffer)(Dimension)))(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:logMessage)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:byteStream)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(VariableDeclarationStatement(SimpleType(SimpleName:Date))(VariableDeclarationFragment(SimpleName:start)(ClassInstanceCreation(SimpleType(SimpleName:Date)))))(VariableDeclarationStatement(SimpleType(SimpleName:PersistenceManager))(VariableDeclarationFragment(SimpleName:pm)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PMF))(SimpleName:get)))(SimpleName:getPersistenceManager))))(TryStatement(Block(IfStatement(InfixExpression(SimpleName:batchNo)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:maxEntries)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(SimpleName:maxBatchSize)(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:MAX_BLOB_SIZE))))))(ExpressionStatement(Assignment(SimpleName:splitNo)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:maxEntries)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:batchNo))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:query)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(TypeLiteral(SimpleType(SimpleName:TmpFile))))(SimpleName:getName))(StringLiteral:<STR>)(QualifiedName:TmpFile.COL_KEY)(StringLiteral:<STR>)(SimpleName:fileKey)(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:TmpFile.COL_SPLIT_NO)(StringLiteral:<STR>)(SimpleName:splitNo)(StringLiteral:<STR>)(QualifiedName:TmpFile.COL_SPLIT_NO)(StringLiteral:<STR>)(ParenthesizedExpression(InfixExpression(SimpleName:splitNo)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:maxEntries))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:TmpFile)))(VariableDeclarationFragment(SimpleName:fileList)(CastExpression(SimpleType(SimpleName:List))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pm))(SimpleName:newQuery)(METHOD_INVOCATION_ARGUMENTS(SimpleName:query))))(SimpleName:execute)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileList))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pm))(SimpleName:deletePersistentAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileList))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:logIt)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:splitNo)(StringLiteral:<STR>)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:splitNo)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileList))(SimpleName:size)))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:resetCurrentSize)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:splitNo)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:MAX_BLOB_SIZE)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:logIt)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:splitNo))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:logIt)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:splitNo)))))))(DoStatement(Block(ExpressionStatement(Assignment(SimpleName:buffer)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:MAX_BLOB_SIZE))))))(ExpressionStatement(Assignment(SimpleName:readBytes)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)))))(IfStatement(InfixExpression(SimpleName:readBytes)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(IfStatement(InfixExpression(SimpleName:splitNo)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(SimpleName:persist)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileKey)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:0))))(SimpleName:fileName)(SimpleName:splitNo)(BooleanLiteral:true))))))(BreakStatement))(Block(WhileStatement(InfixExpression(InfixExpression(SimpleName:readBytes)(INFIX_EXPRESSION_OPERATOR:>)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:byteStream))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:MAX_BLOB_SIZE)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:byteStream))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(NumberLiteral:0)(SimpleName:readBytes))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:updateStatus)(METHOD_INVOCATION_ARGUMENTS(SimpleName:readBytes))))(ExpressionStatement(Assignment(SimpleName:buffer)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(InfixExpression(SimpleName:MAX_BLOB_SIZE)(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:byteStream))(SimpleName:size))))))))(ExpressionStatement(Assignment(SimpleName:readBytes)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logMessage))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:splitNo))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logMessage))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:byteStream))(SimpleName:size)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logMessage))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:readBytes))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isFinalPart)(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:isFinalBatch)(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:readBytes)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))))(BooleanLiteral:true)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logMessage))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:isFinalPart))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logMessage))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date))))))(ExpressionStatement(MethodInvocation(SimpleName:persist)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileKey)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:byteStream))(SimpleName:toByteArray))(SimpleName:fileName)(SimpleName:splitNo)(SimpleName:isFinalPart))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logMessage))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date))))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:byteStream)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(ExpressionStatement(PostfixExpression(SimpleName:splitNo)(POSTFIX_EXPRESSION_OPERATOR:++))))))(InfixExpression(InfixExpression(SimpleName:readBytes)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:splitNo)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:MAX_NO_OF_SPLITS)))))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pm))(SimpleName:isClosed)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pm))(SimpleName:close)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:logIt)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logMessage))(SimpleName:toString)))))))(VariableDeclarationStatement(SimpleType(SimpleName:Date))(VariableDeclarationFragment(SimpleName:end)(ClassInstanceCreation(SimpleType(SimpleName:Date)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:logIt)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:end))(SimpleName:getTime))(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:start))(SimpleName:getTime))))))))))))