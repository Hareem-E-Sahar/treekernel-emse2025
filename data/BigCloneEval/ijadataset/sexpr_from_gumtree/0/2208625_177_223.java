(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:doCStore)(SingleVariableDeclaration(SimpleType(SimpleName:ActiveAssociation))(SimpleName:activeAssoc))(SingleVariableDeclaration(SimpleType(SimpleName:Dimse))(SimpleName:rq))(SingleVariableDeclaration(SimpleType(SimpleName:Command))(SimpleName:rspCmd))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:DcmServiceException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Command))(VariableDeclarationFragment(SimpleName:rqCmd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getCommand))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getDataAsStream))))(VariableDeclarationStatement(SimpleType(SimpleName:Association))(VariableDeclarationFragment(SimpleName:assoc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:activeAssoc))(SimpleName:getAssociation))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:DcmDecodeParam))(VariableDeclarationFragment(SimpleName:decParam)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DcmDecodeParam))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getTransferSyntaxUID))))))(VariableDeclarationStatement(SimpleType(SimpleName:Dataset))(VariableDeclarationFragment(SimpleName:ds)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objFact))(SimpleName:newDataset))))(VariableDeclarationStatement(SimpleType(SimpleName:DcmParser))(VariableDeclarationFragment(SimpleName:parser)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pf))(SimpleName:newDcmParser)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:setDcmHandler)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:getDcmHandler)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:parseDataset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:decParam)(QualifiedName:Tags.PixelData))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:logDataset)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:ds))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:setFileMetaInfo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:objFact))(SimpleName:newFileMetaInfo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rqCmd))(SimpleName:getAffectedSOPClassUID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rqCmd))(SimpleName:getAffectedSOPInstanceUID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rq))(SimpleName:getTransferSyntaxUID)))))))(ExpressionStatement(MethodInvocation(SimpleName:checkDataset)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ds))))(VariableDeclarationStatement(SimpleType(SimpleName:Calendar))(VariableDeclarationFragment(SimpleName:today)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dir)(ArrayAccess(SimpleName:storageDirFiles)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:today))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.DAY_OF_MONTH)))(INFIX_EXPRESSION_OPERATOR:%)(QualifiedName:storageDirFiles.length)))))(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:makeFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dir)(SimpleName:today)(SimpleName:ds)))))(VariableDeclarationStatement(SimpleType(SimpleName:MessageDigest))(VariableDeclarationFragment(SimpleName:md)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageDigest))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(SimpleName:storeToFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parser)(SimpleName:ds)(SimpleName:file)(CastExpression(SimpleType(SimpleName:DcmEncodeParam))(SimpleName:decParam))(SimpleName:md))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:dirPath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dir))(SimpleName:getCanonicalPath)))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:File.separatorChar)(CharacterLiteral:<STR>)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filePath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getCanonicalPath)))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:File.separatorChar)(CharacterLiteral:<STR>))))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dirPath))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))(VariableDeclarationStatement(SimpleType(SimpleName:Dataset))(VariableDeclarationFragment(SimpleName:coercedElements)(MethodInvocation(SimpleName:updateDB)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)(SimpleName:ds)(SimpleName:dirPath)(SimpleName:filePath)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:length)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:md))(SimpleName:digest))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coercedElements))(SimpleName:isEmpty))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:warningAsSuccessSet))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:assoc))(SimpleName:getCallingAET)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rspCmd))(SimpleName:putUS)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.Status)(QualifiedName:Status.Success)))))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:int)(Dimension))(VariableDeclarationFragment(SimpleName:coercedTags)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coercedElements))(SimpleName:size)))))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:it)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:coercedElements))(SimpleName:iterator))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:coercedTags.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:coercedTags)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:DcmElement))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:next)))))(SimpleName:tag))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rspCmd))(SimpleName:putAT)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.OffendingElement)(SimpleName:coercedTags))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rspCmd))(SimpleName:putUS)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tags.Status)(QualifiedName:Status.CoercionOfDataElements))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ds))(SimpleName:putAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:coercedElements))))))(ExpressionStatement(MethodInvocation(SimpleName:updateStoredStudiesInfo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:assoc)(SimpleName:ds)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:DcmServiceException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:getLog)))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e))))(ExpressionStatement(MethodInvocation(SimpleName:deleteFailedStorage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))(ThrowStatement(SimpleName:e))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:getLog)))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e))))(ExpressionStatement(MethodInvocation(SimpleName:deleteFailedStorage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DcmServiceException))(QualifiedName:Status.ProcessingFailure)(SimpleName:e)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close)))))))))