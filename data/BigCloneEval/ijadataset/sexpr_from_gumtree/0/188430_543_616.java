(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:flushHeaderForWebSocket)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:spec))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:subprotocol))(Block(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:ByteBuffer))(Dimension))(VariableDeclarationFragment(SimpleName:headerBuffer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseHeader))(SimpleName:getHeaderBuffer))))(IfStatement(InfixExpression(SimpleName:headerBuffer)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(SimpleName:getChannelId))))))(ExpressionStatement(MethodInvocation(SimpleName:asyncClose)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ReturnStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccessLog)))(SimpleName:setTimeCheckPint)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:AccessLog.TimePoint.responseHeader))))(ExpressionStatement(Assignment(SimpleName:responseHeaderLength)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:BuffersUtil))(SimpleName:remaining)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerBuffer)))))(VariableDeclarationStatement(SimpleType(SimpleName:Store))(VariableDeclarationFragment(SimpleName:responsePeek)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:MappingResult))(VariableDeclarationFragment(SimpleName:mapping)(MethodInvocation(SimpleName:getRequestMapping))))(VariableDeclarationStatement(SimpleType(SimpleName:AccessLog))(VariableDeclarationFragment(SimpleName:accessLog)(MethodInvocation(SimpleName:getAccessLog))))(IfStatement(InfixExpression(SimpleName:mapping)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:getLogType))(SwitchCase(SimpleName:RESPONSE_TRACE))(SwitchCase(SimpleName:TRACE))(ExpressionStatement(Assignment(SimpleName:responsePeek)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Store))(SimpleName:open)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true)))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:ByteBuffer))(Dimension))(VariableDeclarationFragment(SimpleName:headerDup)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PoolManager))(SimpleName:duplicateBuffers)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerBuffer)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responsePeek))(SimpleName:putBuffer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerDup))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responsePeek))(SimpleName:getStoreId))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:accessLog))(SimpleName:incTrace)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responsePeek))(SimpleName:close)(METHOD_INVOCATION_ARGUMENTS(SimpleName:accessLog)(SimpleName:responsePeek))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:accessLog))(SimpleName:setResponseHeaderDigest)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responsePeek))(SimpleName:getDigest)))))(SwitchCase(SimpleName:REQUEST_TRACE))(SwitchCase(SimpleName:ACCESS))(VariableDeclarationStatement(SimpleType(SimpleName:AccessLog))(VariableDeclarationFragment(SimpleName:wsAccessLog)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:accessLog))(SimpleName:copyForWs))))(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:sb)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer)))))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:getDestinationType))(SwitchCase(SimpleName:WS))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:getResolveServer)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:getResolvePath)))))(BreakStatement)(SwitchCase(SimpleName:WSS))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:getResolveServer)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:getResolvePath)))))(BreakStatement)(SwitchCase(SimpleName:HANDLER))(IfStatement(MethodInvocation(SimpleName:isSsl))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getSelfDomain)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Config.SELF_PORT))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:getSourcePath)))))(BreakStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:spec))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>))))(IfStatement(InfixExpression(SimpleName:subprotocol)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:subprotocol))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getChannelId)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wsAccessLog))(SimpleName:setRequestLine)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wsAccessLog))(SimpleName:setStatusCode)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wsAccessLog))(SimpleName:endProcess)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wsAccessLog))(SimpleName:setSourceType)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:AccessLog.SOURCE_TYPE_WS_HANDSHAKE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wsAccessLog))(SimpleName:setPersist)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wsAccessLog))(SimpleName:decTrace))))))(ExpressionStatement(MethodInvocation(SimpleName:asyncWrite)(METHOD_INVOCATION_ARGUMENTS(SimpleName:WRITE_CONTEXT_HEADER)(SimpleName:headerBuffer))))(ExpressionStatement(Assignment(SimpleName:isFlushFirstResponse)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(IfStatement(InfixExpression(SimpleName:firstBody)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(SimpleName:asyncClose)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))))))))