(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:setupOutboundChat)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:called))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:transferId))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:transferFrom))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:transcript))(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:joinSessionId))(SingleVariableDeclaration(SimpleType(SimpleName:ChatPanel))(SimpleName:transferView))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:userTransfer))(Block(VariableDeclarationStatement(SimpleType(SimpleName:SetupRequestMessage))(VariableDeclarationFragment(SimpleName:message)(ClassInstanceCreation(SimpleType(SimpleName:SetupRequestMessage)))))(VariableDeclarationStatement(SimpleType(SimpleName:CallPartyElement))(VariableDeclarationFragment(SimpleName:cp)(CastExpression(SimpleType(SimpleName:CallPartyElement))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SessionInfo))(SimpleName:getInstance)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:SessionInfo.USER_INFO))))))(VariableDeclarationStatement(SimpleType(SimpleName:CallingNameElement))(VariableDeclarationFragment(SimpleName:calling)(ClassInstanceCreation(SimpleType(SimpleName:CallingNameElement)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:calling))(SimpleName:setCallParty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cp))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:setCallingNameElement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:calling))))(VariableDeclarationStatement(SimpleType(SimpleName:CalledNameElement))(VariableDeclarationFragment(SimpleName:cledElement)(ClassInstanceCreation(SimpleType(SimpleName:CalledNameElement)))))(VariableDeclarationStatement(SimpleType(SimpleName:CallPartyElement))(VariableDeclarationFragment(SimpleName:cpElement)(ClassInstanceCreation(SimpleType(SimpleName:CallPartyElement)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cpElement))(SimpleName:setName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:called))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cledElement))(SimpleName:setCallParty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cpElement))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:setCalledNameElement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cledElement))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:joinSessionId))(ASSIGNMENT_OPERATOR:=)(SimpleName:joinSessionId)))(IfStatement(InfixExpression(SimpleName:transferView)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:view)(ASSIGNMENT_OPERATOR:=)(SimpleName:transferView)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:otherParties))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:otherParties))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(SimpleName:cpElement)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:otherParties))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cpElement))))))(IfStatement(InfixExpression(SimpleName:xferredFromId)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0L))(Block(IfStatement(InfixExpression(SimpleName:transferId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:setTransferId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:transferId))))))(IfStatement(InfixExpression(SimpleName:transferFrom)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:setTransferFrom)(METHOD_INVOCATION_ARGUMENTS(SimpleName:transferFrom))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:setUserTransfer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:userTransfer))))(IfStatement(InfixExpression(SimpleName:transcript)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MediaElements))(VariableDeclarationFragment(SimpleName:elements)(ClassInstanceCreation(SimpleType(SimpleName:MediaElements)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:setMedia)(METHOD_INVOCATION_ARGUMENTS(SimpleName:elements))))(VariableDeclarationStatement(SimpleType(SimpleName:HtmlElement))(VariableDeclarationFragment(SimpleName:elem)(ClassInstanceCreation(SimpleType(SimpleName:HtmlElement)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:elements))(SimpleName:addMediaElement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:elem))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:elem))(SimpleName:setHtml)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:transcript)(StringLiteral:<STR>))))))))(IfStatement(InfixExpression(SimpleName:joinSessionId)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0L))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:view))(SimpleName:appendToConveration)(METHOD_INVOCATION_ARGUMENTS(SimpleName:systemUser)(MethodInvocation(SimpleName:timestamp))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_addingUserToConference)(METHOD_INVOCATION_ARGUMENTS(SimpleName:called))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:setUserConference)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true)))))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getInstance)))(SimpleName:isOperator)))(Block(ExpressionStatement(Assignment(SimpleName:systemUser)(ASSIGNMENT_OPERATOR:=)(SimpleName:called)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageBoxPresenter))(SimpleName:getInstance)))(SimpleName:show)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_chatSetup))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_settingUpChatWithParty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:called)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(CastExpression(SimpleType(SimpleName:String))(QualifiedName:Images.USER_CHATTING_MEDIUM))(BooleanLiteral:false)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CommunicationsFactory))(SimpleName:getServerCommunications)))(SimpleName:sendRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:message)(QualifiedName:Message.CONTENT_TYPE_XML)(BooleanLiteral:true)(NumberLiteral:100000L)(ClassInstanceCreation(SimpleType(SimpleName:ResponseListener))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:timeoutOccured)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:requestId))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageBoxPresenter))(SimpleName:getInstance)))(SimpleName:hide)))(ExpressionStatement(Assignment(SimpleName:requestId)(ASSIGNMENT_OPERATOR:=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(ExpressionStatement(MethodInvocation(SimpleName:abortOutboundChat)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_noResponseFromServer)))))))(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:responseReceived)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:requestId))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:contentType))(SingleVariableDeclaration(SimpleType(SimpleName:ResponseMessage))(SimpleName:message))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageBoxPresenter))(SimpleName:getInstance)))(SimpleName:hide)))(ExpressionStatement(Assignment(SimpleName:setupRequestId)(ASSIGNMENT_OPERATOR:=)(SimpleName:requestId)))(VariableDeclarationStatement(SimpleType(SimpleName:SetupResponseMessage))(VariableDeclarationFragment(SimpleName:rsp)(CastExpression(SimpleType(SimpleName:SetupResponseMessage))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getMessage)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rsp))(SimpleName:getCalledParty))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:otherParties))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rsp))(SimpleName:getCalledParty)))(SimpleName:getCallParty)))))))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getStatus))(SwitchCase(QualifiedName:SetupResponseMessage.ACK))(ExpressionStatement(MethodInvocation(SimpleName:handleReceivedAck)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rsp))))(BreakStatement)(SwitchCase(QualifiedName:SetupResponseMessage.ALERTING))(ExpressionStatement(MethodInvocation(SimpleName:handleReceivedAlerting)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rsp))))(BreakStatement)(SwitchCase(QualifiedName:SetupResponseMessage.PROG))(ExpressionStatement(MethodInvocation(SimpleName:handleReceivedProgress)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestId)(SimpleName:rsp))))(BreakStatement)(SwitchCase(QualifiedName:SetupResponseMessage.CONNECT))(ExpressionStatement(MethodInvocation(SimpleName:handleReceivedConnect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestId)(SimpleName:contentType)(SimpleName:rsp))))(BreakStatement)(SwitchCase(QualifiedName:SetupResponseMessage.BUSY))(ExpressionStatement(MethodInvocation(SimpleName:handleNotConnected)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_busyResponse)))))(BreakStatement)(SwitchCase(QualifiedName:SetupResponseMessage.NOANS))(ExpressionStatement(MethodInvocation(SimpleName:handleNotConnected)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_noAnswerResponse)))))(BreakStatement)(SwitchCase(QualifiedName:SetupResponseMessage.UNAVAILABLE))(ExpressionStatement(MethodInvocation(SimpleName:handleNotConnected)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_notAvailableResponse)))))(BreakStatement)(SwitchCase(QualifiedName:SetupResponseMessage.UNKNOWN))(ExpressionStatement(MethodInvocation(SimpleName:handleNotConnected)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_notOnlineResponse)))))(BreakStatement)(SwitchCase)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CommunicationsFactory))(SimpleName:getServerCommunications)))(SimpleName:cancelRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestId))))(ExpressionStatement(MethodInvocation(SimpleName:abortOutboundChat)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApplicationController))(SimpleName:getMessages)))(SimpleName:ChatSessionPresenter_chatSetupFailed))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getReason))))))(BreakStatement)))))))))))))