(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:in)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:openInputStream))))(ExpressionStatement(Assignment(SimpleName:out)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:openOutputStream))))(VariableDeclarationStatement(SimpleType(SimpleName:Writer))(VariableDeclarationFragment(SimpleName:writer)(ClassInstanceCreation(SimpleType(SimpleName:Writer))(ThisExpression))))(VariableDeclarationStatement(SimpleType(SimpleName:Thread))(VariableDeclarationFragment(SimpleName:writeThread)(ClassInstanceCreation(SimpleType(SimpleName:Thread))(SimpleName:writer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeThread))(SimpleName:start)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:handleStreamsOpen)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:handleStreamsOpenError)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))(ReturnStatement))))(WhileStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:aborting))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:length)(NumberLiteral:0)))(TryStatement(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:lengthBuf)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:LENGTH_MAX_DIGITS))))))(ExpressionStatement(MethodInvocation(SimpleName:readFully)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:lengthBuf))))(ExpressionStatement(Assignment(SimpleName:length)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:readLength)(METHOD_INVOCATION_ARGUMENTS(SimpleName:lengthBuf)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:temp)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:length))))))(ExpressionStatement(MethodInvocation(SimpleName:readFully)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:temp))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:handleReceivedMessage)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(SimpleName:temp)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(SimpleName:close)))(IfStatement(InfixExpression(SimpleName:length)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:handleClose)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:handleErrorClose)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))))))))))))))))