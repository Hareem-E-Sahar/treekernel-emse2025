(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:setResourceContent)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:resourceUri))(SingleVariableDeclaration(SimpleType(SimpleName:InputStream))(SimpleName:content))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:contentType))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:characterEncoding))(SingleVariableDeclaration(SimpleType(SimpleName:Date))(SimpleName:modifiedDate))(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(Assignment(SimpleName:resourceUri)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:stripMapping)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resourceUri)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getClass))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:hostName)(MethodInvocation(SimpleName:getHostname)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resourceUri)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:path)(MethodInvocation(SimpleName:getPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resourceUri)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:folderName)(MethodInvocation(SimpleName:getFolderName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileName)(MethodInvocation(SimpleName:getFileName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path)))))(ExpressionStatement(Assignment(SimpleName:fileName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:deleteSpecialCharacter)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileName)))))(VariableDeclarationStatement(SimpleType(SimpleName:Host))(VariableDeclarationFragment(SimpleName:host)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HostFactory))(SimpleName:getHostByHostName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hostName)))))(VariableDeclarationStatement(SimpleType(SimpleName:Folder))(VariableDeclarationFragment(SimpleName:folder)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FolderFactory))(SimpleName:getFolderByPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:folderName)(SimpleName:host)))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:host))(SimpleName:getInode))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folder))(SimpleName:getInode))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:destinationFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileFactory))(SimpleName:getFileByURI)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path)(SimpleName:host)(BooleanLiteral:false)))))(VariableDeclarationStatement(SimpleType(QualifiedName:java.io.File))(VariableDeclarationFragment(SimpleName:workingFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileFactory))(SimpleName:getAssetIOFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:destinationFile)))))(VariableDeclarationStatement(SimpleType(SimpleName:DotResourceCache))(VariableDeclarationFragment(SimpleName:vc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CacheLocator))(SimpleName:getVeloctyResourceCache))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vc))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:ResourceManager.RESOURCE_TEMPLATE)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:workingFile))(SimpleName:getPath))))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:is)(SimpleName:content)))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:arrayWriter)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:read))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arrayWriter))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:read))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:currentData)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arrayWriter))(SimpleName:toByteArray))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileFactory))(SimpleName:getFileByURI)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path)(SimpleName:host)(BooleanLiteral:false)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:setSize)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:currentData.length))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:setModDate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:modifiedDate))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:InodeFactory))(SimpleName:saveInode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))(IfStatement(InfixExpression(SimpleName:currentData)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:writeCurrentChannel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:workingFile)))(SimpleName:getChannel))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeCurrentChannel))(SimpleName:truncate)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:buffer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ByteBuffer))(SimpleName:allocate)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:currentData.length)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentData))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:position)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeCurrentChannel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeCurrentChannel))(SimpleName:force)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeCurrentChannel))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fileName)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:workingFile))(SimpleName:getAbsolutePath))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:UtilMethods))(SimpleName:isImage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileName)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:workingFile)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:BufferedImage))(VariableDeclarationFragment(SimpleName:img)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:javax.imageio.ImageIO))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:workingFile)))))(IfStatement(InfixExpression(SimpleName:img)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:height)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:img))(SimpleName:getHeight))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:destinationFile))(SimpleName:setHeight)(METHOD_INVOCATION_ARGUMENTS(SimpleName:height))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:width)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:img))(SimpleName:getWidth))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:destinationFile))(SimpleName:setWidth)(METHOD_INVOCATION_ARGUMENTS(SimpleName:width)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ioe))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getClass))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ioe))(SimpleName:getMessage))(SimpleName:ioe)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:folderPath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:workingFile))(SimpleName:getParentFile)))(SimpleName:getAbsolutePath))))(VariableDeclarationStatement(SimpleType(SimpleName:Identifier))(VariableDeclarationFragment(SimpleName:identifier)(ClassInstanceCreation(SimpleType(SimpleName:Identifier)))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:identifier)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IdentifierCache))(SimpleName:getIdentifierFromIdentifierCache)(METHOD_INVOCATION_ARGUMENTS(SimpleName:destinationFile))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:DotHibernateException))(SimpleName:he))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(StringLiteral:<STR>)(SimpleName:he)))))))(VariableDeclarationStatement(SimpleType(QualifiedName:java.io.File))(VariableDeclarationFragment(SimpleName:directory)(ClassInstanceCreation(SimpleType(QualifiedName:java.io.File))(SimpleName:folderPath))))(VariableDeclarationStatement(ArrayType(SimpleType(QualifiedName:java.io.File))(Dimension))(VariableDeclarationFragment(SimpleName:files)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:directory))(SimpleName:listFiles)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(ParenthesizedExpression(ClassInstanceCreation(SimpleType(SimpleName:FileFactory))))(SimpleType(SimpleName:ThumbnailsFileNamesFilter))(SimpleName:identifier))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(QualifiedName:java.io.File))(SimpleName:iofile))(SimpleName:files)(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iofile))(SimpleName:delete))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SecurityException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iofile))(SimpleName:getName))(StringLiteral:<STR>)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))))))))))))))))