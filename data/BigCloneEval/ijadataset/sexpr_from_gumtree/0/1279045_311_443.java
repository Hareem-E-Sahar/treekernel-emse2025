(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(SimpleType(SimpleName:String))(SimpleName:markupStringReplacement)(SingleVariableDeclaration(SimpleType(SimpleName:RenderRequest))(SimpleName:req))(SingleVariableDeclaration(SimpleType(SimpleName:RenderResponse))(SimpleName:res))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:httpReq))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:httpRes))(SingleVariableDeclaration(SimpleType(SimpleName:DefinableEntity))(SimpleName:entity))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:inputString))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:type))(SingleVariableDeclaration(SimpleType(SimpleName:Long))(SimpleName:binderId))(SingleVariableDeclaration(SimpleType(SimpleName:Long))(SimpleName:entryId))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:outputString)(ClassInstanceCreation(SimpleType(SimpleName:String))(SimpleName:inputString))))(ExpressionStatement(Assignment(SimpleName:outputString)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:outputString)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:outputString)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:loopDetector)))(TryStatement(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:httpReq)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:binderId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:p1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:m1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p1))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputString)))))(ExpressionStatement(Assignment(SimpleName:loopDetector)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m1))(SimpleName:find))(Block(IfStatement(InfixExpression(SimpleName:loopDetector)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:2000))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:inputString)))))(ReturnStatement(SimpleName:outputString))))(ExpressionStatement(PostfixExpression(SimpleName:loopDetector)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:url)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m1))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:webUrl)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:WebUrlUtil))(SimpleName:getServletRootURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpReq)))(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:WebKeys.SERVLET_VIEW_FILE)(StringLiteral:<STR>))))(IfStatement(InfixExpression(SimpleName:entity)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileAttachment))(VariableDeclarationFragment(SimpleName:fa)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entity))(SimpleName:getFileAttachment)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:trim))))))(IfStatement(InfixExpression(SimpleName:fa)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:webUrl)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(QualifiedName:WebKeys.URL_FILE_ID)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fa))(SimpleName:getId)))(SimpleName:toString))(StringLiteral:<STR>)))))(Block(ExpressionStatement(Assignment(SimpleName:webUrl)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(QualifiedName:WebKeys.URL_FILE_TITLE)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:trim))(StringLiteral:<STR>)))))))(Block(ExpressionStatement(Assignment(SimpleName:webUrl)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(QualifiedName:WebKeys.URL_FILE_TITLE)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:trim))(StringLiteral:<STR>))))))(ExpressionStatement(Assignment(SimpleName:webUrl)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(QualifiedName:WebKeys.URL_FILE_VIEW_TYPE)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(QualifiedName:WebKeys.FILE_VIEW_TYPE_ATTACHMENT_FILE)(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:webUrl)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(QualifiedName:WebKeys.URL_BINDER_ID)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:binderId))(SimpleName:toString))(StringLiteral:<STR>))))(IfStatement(InfixExpression(SimpleName:entryId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:webUrl)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(QualifiedName:WebKeys.URL_ENTRY_ID)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entryId))(SimpleName:toString))(StringLiteral:<STR>))))))(ExpressionStatement(Assignment(SimpleName:outputString)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m1))(SimpleName:replaceFirst)(METHOD_INVOCATION_ARGUMENTS(SimpleName:webUrl)))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.MARKUP_VIEW)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.MARKUP_FORM))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:p2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:m2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p2))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputString)))))(ExpressionStatement(Assignment(SimpleName:loopDetector)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m2))(SimpleName:find))(Block(IfStatement(InfixExpression(SimpleName:loopDetector)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:2000))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:inputString)))))(ReturnStatement(SimpleName:outputString))))(ExpressionStatement(PostfixExpression(SimpleName:loopDetector)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileIds)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m2))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2))))(SimpleName:trim))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:webUrl)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:WebUrlUtil))(SimpleName:getServletRootURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpReq)))(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:WebKeys.SERVLET_VIEW_FILE)(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:webUrl)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(QualifiedName:WebKeys.URL_FILE_VIEW_TYPE)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(QualifiedName:WebKeys.FILE_VIEW_TYPE_ATTACHMENT_FILE)(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:webUrl)(ASSIGNMENT_OPERATOR:+=)(SimpleName:fileIds)))(ExpressionStatement(Assignment(SimpleName:outputString)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m2))(SimpleName:replaceFirst)(METHOD_INVOCATION_ARGUMENTS(SimpleName:webUrl)))))(ExpressionStatement(Assignment(SimpleName:m2)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p2))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputString)))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.MARKUP_VIEW)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:p2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:m2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p2))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputString)))))(ExpressionStatement(Assignment(SimpleName:loopDetector)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m2))(SimpleName:find))(Block(IfStatement(InfixExpression(SimpleName:loopDetector)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:2000))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:inputString)))))(ReturnStatement(SimpleName:outputString))))(ExpressionStatement(PostfixExpression(SimpleName:loopDetector)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:urlParts)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m2))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2))))(SimpleName:trim))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:s_binderId)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:p3)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:m3)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p3))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:urlParts)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m3))(SimpleName:find))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m3))(SimpleName:groupCount))(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:1)))(ExpressionStatement(Assignment(SimpleName:s_binderId)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m3))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1))))(SimpleName:trim)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:normalizedTitle)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:p4)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:m4)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p4))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:urlParts)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m4))(SimpleName:find))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m4))(SimpleName:groupCount))(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:1)))(ExpressionStatement(Assignment(SimpleName:normalizedTitle)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m4))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1))))(SimpleName:trim)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:title)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:p5)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:m5)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p5))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:urlParts)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m5))(SimpleName:find))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m5))(SimpleName:groupCount))(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:1)))(ExpressionStatement(Assignment(SimpleName:title)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m5))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1))))(SimpleName:trim)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:titleLink)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:action)(QualifiedName:WebKeys.ACTION_VIEW_FOLDER_ENTRY)))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:params)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:params))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.URL_BINDER_ID)(ArrayCreation(ArrayType(SimpleType(SimpleName:String))(Dimension))(ArrayInitializer(SimpleName:s_binderId))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:params))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.URL_NORMALIZED_TITLE)(ArrayCreation(ArrayType(SimpleType(SimpleName:String))(Dimension))(ArrayInitializer(SimpleName:normalizedTitle))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:webUrl)(MethodInvocation(SimpleName:getPortletUrl)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(SimpleName:res)(SimpleName:httpReq)(SimpleName:httpRes)(SimpleName:action)(BooleanLiteral:true)(SimpleName:params)))))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:webUrl)(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:+=)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:+=)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(SimpleName:title)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:titleLink))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:outputString)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m2))(SimpleName:start)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:titleLink)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m2))(SimpleName:end))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:length)))))))(ExpressionStatement(Assignment(SimpleName:m2)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p2))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputString)))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:binderId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.MARKUP_VIEW)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.MARKUP_FILE))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:action)(QualifiedName:WebKeys.ACTION_VIEW_FOLDER_ENTRY)))(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:p3)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:m3)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p3))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputString)))))(ExpressionStatement(Assignment(SimpleName:loopDetector)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m3))(SimpleName:find))(Block(IfStatement(InfixExpression(SimpleName:loopDetector)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:2000))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:inputString)))))(ReturnStatement(SimpleName:outputString))))(ExpressionStatement(PostfixExpression(SimpleName:loopDetector)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:title)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m3))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2))))(SimpleName:trim))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:normalizedTitle)(MethodInvocation(SimpleName:getNormalizedTitle)(METHOD_INVOCATION_ARGUMENTS(SimpleName:title)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:normalizedTitle))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:titleLink)(StringLiteral:<STR>)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:type))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.MARKUP_VIEW)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:params)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:params))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.URL_BINDER_ID)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:binderId))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:params))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.URL_NORMALIZED_TITLE)(SimpleName:normalizedTitle))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:webUrl)(MethodInvocation(SimpleName:getPortletUrl)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(SimpleName:res)(SimpleName:httpReq)(SimpleName:httpRes)(SimpleName:action)(BooleanLiteral:true)(SimpleName:params)))))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:webUrl)(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:+=)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:+=)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(SimpleName:title)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))(Block(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:WebKeys.URL_BINDER_ID)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:binderId))(SimpleName:toString)))))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:WebKeys.URL_NORMALIZED_TITLE)(StringLiteral:<STR>)(SimpleName:normalizedTitle))))(ExpressionStatement(Assignment(SimpleName:titleLink)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:title)(StringLiteral:<STR>))))))(ExpressionStatement(Assignment(SimpleName:outputString)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m3))(SimpleName:start)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:titleLink)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m3))(SimpleName:end))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputString))(SimpleName:length)))))))(ExpressionStatement(Assignment(SimpleName:m3)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p3))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputString))))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:inputString)))))(ReturnStatement(SimpleName:inputString)))))(ReturnStatement(SimpleName:outputString))))))