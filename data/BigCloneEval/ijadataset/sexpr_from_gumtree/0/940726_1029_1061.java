(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(SimpleType(SimpleName:Statement))(SimpleName:compileLock)(Block(ExpressionStatement(MethodInvocation(SimpleName:read)))(ExpressionStatement(MethodInvocation(SimpleName:readThis)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Tokens.TABLE))))(VariableDeclarationStatement(SimpleType(SimpleName:OrderedHashSet))(VariableDeclarationFragment(SimpleName:readSet)(ClassInstanceCreation(SimpleType(SimpleName:OrderedHashSet)))))(VariableDeclarationStatement(SimpleType(SimpleName:OrderedHashSet))(VariableDeclarationFragment(SimpleName:writeSet)(ClassInstanceCreation(SimpleType(SimpleName:OrderedHashSet)))))(LabeledStatement(SimpleName:outerloop)(WhileStatement(BooleanLiteral:true)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Table))(VariableDeclarationFragment(SimpleName:table)(MethodInvocation(SimpleName:readTableName))))(SwitchStatement(QualifiedName:token.tokenType)(SwitchCase(QualifiedName:Tokens.READ))(ExpressionStatement(MethodInvocation(SimpleName:read)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readSet))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:table))(SimpleName:getName)))))(BreakStatement)(SwitchCase(QualifiedName:Tokens.WRITE))(ExpressionStatement(MethodInvocation(SimpleName:read)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeSet))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:table))(SimpleName:getName)))))(BreakStatement)(SwitchCase)(ThrowStatement(MethodInvocation(SimpleName:unexpectedToken))))(IfStatement(InfixExpression(QualifiedName:token.tokenType)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Tokens.COMMA))(Block(ExpressionStatement(MethodInvocation(SimpleName:read)))(ContinueStatement)))(BreakStatement(SimpleName:outerloop)))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:HsqlName))(Dimension))(VariableDeclarationFragment(SimpleName:writeTableNames)(ArrayCreation(ArrayType(SimpleType(SimpleName:HsqlName))(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeSet))(SimpleName:size)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeSet))(SimpleName:toArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:writeTableNames))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readSet))(SimpleName:removeAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:writeTableNames))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:HsqlName))(Dimension))(VariableDeclarationFragment(SimpleName:readTableNames)(ArrayCreation(ArrayType(SimpleType(SimpleName:HsqlName))(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readSet))(SimpleName:size)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readSet))(SimpleName:toArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:readTableNames))))(VariableDeclarationStatement(SimpleType(SimpleName:Statement))(VariableDeclarationFragment(SimpleName:cs)(ClassInstanceCreation(SimpleType(SimpleName:StatementSession))(QualifiedName:StatementTypes.TRANSACTION_LOCK_TABLE)(SimpleName:readTableNames)(SimpleName:writeTableNames))))(ReturnStatement(SimpleName:cs))))))