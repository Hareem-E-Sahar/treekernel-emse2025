(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(ParameterizedType(SimpleType(SimpleName:Collection))(SimpleType(SimpleName:Package)))(SimpleName:filesToRename)(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:Collection))(SimpleType(SimpleName:Package)))(SimpleName:packages))(SimpleType(SimpleName:PackageManagerException))(Block(ExpressionStatement(Assignment(SimpleName:fromToFileMap)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashMap))(SimpleType(SimpleName:File))(SimpleType(SimpleName:File))))))(ExpressionStatement(Assignment(SimpleName:removeDirectoryList)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:File))))))(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Package)))(VariableDeclarationFragment(SimpleName:remove)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:Package))))))(EnhancedForStatement(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Package))(SimpleName:pkg))(SimpleName:packages)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:Package))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DeepObjectCopy))(SimpleName:clone)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pkg)(ThisExpression))))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:newDirName)(NullLiteral)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:oldInstallDir)))(SimpleName:isDirectory)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:oldInstallDir)))(SimpleName:mkdirs))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:readLock)))(SimpleName:lock)))(TryStatement(Block(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:x)(NumberLiteral:0)))(InfixExpression(SimpleName:x)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:size)))(PostfixExpression(SimpleName:x)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Package))(VariableDeclarationFragment(SimpleName:pack)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:installedPackages))(SimpleName:getPackage)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:x))))(SimpleName:getName))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(SimpleName:x))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:x)(SimpleName:pack)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:readLock)))(SimpleName:unlock)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:size)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:dateForFolder)(MethodInvocation(SimpleName:getFormattedDate))))(ExpressionStatement(Assignment(SimpleName:newDirName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:dateForFolder)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:getName))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:getVersion)))(SimpleName:toString)))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))))(SimpleName:getPath))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:newDirNamePath)(InfixExpression(SimpleName:oldInstallDir)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(SimpleName:newDirName))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:newDirNamePath)))(SimpleName:mkdir)))(Block(ExpressionStatement(MethodInvocation(SimpleName:addWarning)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PreferenceStoreHolder))(SimpleName:getPreferenceStoreByName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:getPreferenceAsString)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PreferenceStoreHolder))(SimpleName:getPreferenceStoreByName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:getPreferenceAsString)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:setoldFolder)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newDirName))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:z)(NumberLiteral:0)))(InfixExpression(SimpleName:z)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:getFileList)))(SimpleName:size)))(PostfixExpression(SimpleName:z)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fi)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:getFileList)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:z))))(SimpleName:getPath))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:installDir)(SimpleName:fi)))(SimpleName:exists)))(Block(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:File)))(VariableDeclarationFragment(SimpleName:removeDirs)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:File))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:n)(NumberLiteral:0)))(InfixExpression(SimpleName:n)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:i))(PostfixExpression(SimpleName:n)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(EnhancedForStatement(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:File))(SimpleName:file))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:n))))(SimpleName:getDirectoryList))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:removeDirs))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:oldInstallDir)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:n))))(SimpleName:getoldFolder)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getPath)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:removeDirs))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:oldInstallDir)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:n))))(SimpleName:getoldFolder)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:removeDirs))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:newDirNamePath)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Collections))(SimpleName:sort)(METHOD_INVOCATION_ARGUMENTS(SimpleName:removeDirs))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Collections))(SimpleName:reverse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:removeDirs))))(EnhancedForStatement(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:File))(SimpleName:file))(SimpleName:removeDirs)(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:delete)))(Block(ExpressionStatement(MethodInvocation(SimpleName:addWarning)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PreferenceStoreHolder))(SimpleName:getPreferenceStoreByName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:getPreferenceAsString)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:installDir)(SimpleName:fi)))(SimpleName:getPath))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PreferenceStoreHolder))(SimpleName:getPreferenceStoreByName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:getPreferenceAsString)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:installDir)(SimpleName:fi)))(SimpleName:getPath)))))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:installDir)(SimpleName:fi)))(SimpleName:isFile))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fromToFileMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:installDir)(SimpleName:fi))(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:newDirNamePath)(SimpleName:fi))))))))(EnhancedForStatement(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:File))(SimpleName:f))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remove))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:getDirectoryList))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:newDirNamePath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getPath))))(SimpleName:mkdirs)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:removeDirectoryList))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(SimpleName:f))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:removeDirectoryList))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:f)))))))))(ReturnStatement(SimpleName:remove))))))