(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Test))(Modifier:public)(PrimitiveType:void)(SimpleName:shouldDownloadFileUsingPublicLink)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:bucketName)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:UUID))(SimpleName:randomUUID)))))(VariableDeclarationStatement(SimpleType(SimpleName:Service))(VariableDeclarationFragment(SimpleName:service)(ClassInstanceCreation(SimpleType(SimpleName:WebClientService))(SimpleName:credentials))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:createBucket)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bucketName))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folder))(SimpleName:newFile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:writeStringToFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:UUID))(SimpleName:randomUUID)))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:createObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bucketName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName))(SimpleName:file)(ClassInstanceCreation(SimpleType(SimpleName:NullProgressListener))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:publicUrl)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:getPublicUrl)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bucketName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:DateTime))))(SimpleName:plusDays)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:5)))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:saved)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folder))(SimpleName:newFile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:input)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:publicUrl)))(SimpleName:openConnection)))(SimpleName:getInputStream))))(VariableDeclarationStatement(SimpleType(SimpleName:FileOutputStream))(VariableDeclarationFragment(SimpleName:output)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:saved))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:input)(SimpleName:output))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:output))(SimpleName:close)))(ExpressionStatement(MethodInvocation(SimpleName:assertThat)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Files))(SimpleName:computeMD5)(METHOD_INVOCATION_ARGUMENTS(SimpleName:saved)))(MethodInvocation(SimpleName:equalTo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Files))(SimpleName:computeMD5)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:deleteObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bucketName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:deleteBucket)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bucketName))))))))