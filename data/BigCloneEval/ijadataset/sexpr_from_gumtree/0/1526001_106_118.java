(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(ParameterizedType(SimpleType(SimpleName:Promise))(SimpleType(SimpleName:Void)))(SimpleName:waitWritable)(SingleVariableDeclaration(SimpleType(SimpleName:SelectionKey))(SimpleName:key))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Promise))(SimpleType(SimpleName:Void)))(VariableDeclarationFragment(SimpleName:rc)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:Promise))(SimpleType(SimpleName:Void))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:AResolver))(SimpleType(SimpleName:Void)))(VariableDeclarationFragment(SimpleName:resolver)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rc))(SimpleName:resolver))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Attachment))(VariableDeclarationFragment(SimpleName:a)(CastExpression(SimpleType(SimpleName:Attachment))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:key))(SimpleName:attachment)))))(IfStatement(InfixExpression(QualifiedName:a.writeWaiter)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(StringLiteral:<STR>))))(ExpressionStatement(Assignment(QualifiedName:a.writeWaiter)(ASSIGNMENT_OPERATOR:=)(SimpleName:resolver)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:a))(SimpleName:updateOps))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:t))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resolver))(SimpleName:smash)(METHOD_INVOCATION_ARGUMENTS(SimpleName:t)))))))(ReturnStatement(SimpleName:rc))))))