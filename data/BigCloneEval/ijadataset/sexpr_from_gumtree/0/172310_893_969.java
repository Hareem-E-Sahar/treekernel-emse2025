(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(PrimitiveType:void)(SimpleName:handleChatControl)(SingleVariableDeclaration(SimpleType(SimpleName:TChannelMessage))(SimpleName:msg))(Block(VariableDeclarationStatement(SimpleType(SimpleName:TChatControl))(VariableDeclarationFragment(SimpleName:ctrlmsg)(ClassInstanceCreation(SimpleType(SimpleName:TChatControl))(QualifiedName:msg.Data))))(VariableDeclarationStatement(SimpleType(SimpleName:TChatUserInfo))(VariableDeclarationFragment(SimpleName:u)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:People))(SimpleName:findById)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:msg.SenderId)))))(SwitchStatement(QualifiedName:msg.UserData)(SwitchCase(SimpleName:CHATCTRL_ENTER))(IfStatement(InfixExpression(QualifiedName:msg.SenderId)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:Our.Id))(Block(IfStatement(InfixExpression(QualifiedName:ctrlmsg.ChannelId)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:CurrentChannelId))(Block(ExpressionStatement(MethodInvocation(SimpleName:wrapit)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:ctrlmsg.Text)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(ExpressionStatement(MethodInvocation(SimpleName:addPeople)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:msg.SenderId)(QualifiedName:ctrlmsg.Name)(QualifiedName:ctrlmsg.ChannelId)(InfixExpression(QualifiedName:ctrlmsg.Name)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(ExpressionStatement(MethodInvocation(SimpleName:sendControlMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:CHATCTRL_ENTERACK)(QualifiedName:Our.Topic))))(BreakStatement)(SwitchCase(SimpleName:CHATCTRL_ENTERACK))(ExpressionStatement(MethodInvocation(SimpleName:addPeople)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:msg.SenderId)(QualifiedName:ctrlmsg.Name)(QualifiedName:ctrlmsg.ChannelId)(QualifiedName:ctrlmsg.Text))))(BreakStatement)(SwitchCase(SimpleName:CHATCTRL_LEAVE))(ExpressionStatement(MethodInvocation(SimpleName:deletePeople)(METHOD_INVOCATION_ARGUMENTS(SimpleName:u))))(IfStatement(InfixExpression(QualifiedName:ctrlmsg.ChannelId)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:CurrentChannelId))(Block(ExpressionStatement(MethodInvocation(SimpleName:wrapit)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:ctrlmsg.Text)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(BreakStatement)(SwitchCase(SimpleName:CHATCTRL_SWITCH))(VariableDeclarationStatement(SimpleType(SimpleName:TChatControlSwitch))(VariableDeclarationFragment(SimpleName:switchmsg)(ClassInstanceCreation(SimpleType(SimpleName:TChatControlSwitch))(QualifiedName:msg.Data))))(IfStatement(InfixExpression(SimpleName:u)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InfixExpression(InfixExpression(QualifiedName:u.Channel)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:CurrentChannelId))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(QualifiedName:msg.SenderId)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:Our.Id)))(Block(ExpressionStatement(MethodInvocation(SimpleName:wrapit)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:switchmsg.Text)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(ExpressionStatement(Assignment(QualifiedName:u.Channel)(ASSIGNMENT_OPERATOR:=)(QualifiedName:switchmsg.NewId))))(Block(ExpressionStatement(MethodInvocation(SimpleName:addPeople)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:msg.SenderId)(QualifiedName:switchmsg.Name)(QualifiedName:switchmsg.NewId)(InfixExpression(QualifiedName:switchmsg.Name)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(IfStatement(InfixExpression(QualifiedName:msg.SenderId)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:Our.Id))(Block(IfStatement(InfixExpression(QualifiedName:switchmsg.NewId)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:CurrentChannelId))(Block(ExpressionStatement(MethodInvocation(SimpleName:wrapit)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:switchmsg.NewText)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))(Block(IfStatement(InfixExpression(SimpleName:u)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:peoplewindow))(SimpleName:removeItem)(METHOD_INVOCATION_ARGUMENTS(SimpleName:u))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:peoplewindow))(SimpleName:clear)))(SynchronizedStatement(SimpleName:People)(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(WhileStatement(BooleanLiteral:true)(Block(VariableDeclarationStatement(SimpleType(SimpleName:TChatUserInfo))(VariableDeclarationFragment(SimpleName:tu)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:People))(SimpleName:findByIndex)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)))))(IfStatement(InfixExpression(SimpleName:tu)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(BreakStatement)))(IfStatement(InfixExpression(QualifiedName:tu.Channel)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:CurrentChannelId))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:peoplewindow))(SimpleName:addItem)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:tu.Name)(SimpleName:tu))))))(ExpressionStatement(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++)))))))(BreakStatement)(SwitchCase(SimpleName:CHATCTRL_TOPIC))(IfStatement(InfixExpression(SimpleName:u)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(QualifiedName:u.Topic)(ASSIGNMENT_OPERATOR:=)(QualifiedName:ctrlmsg.Text)))(IfStatement(InfixExpression(QualifiedName:u.Channel)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:CurrentChannelId))(Block(IfStatement(InfixExpression(QualifiedName:msg.SenderId)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:Our.Id))(Block(ExpressionStatement(MethodInvocation(SimpleName:wrapit)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:ctrlmsg.Name)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(QualifiedName:ctrlmsg.Text)(StringLiteral:<STR>)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:titlewindow))(SimpleName:setText)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getChannelName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:CurrentChannelId))))))))))(BreakStatement)(SwitchCase(NumberLiteral:0xFFFF))(IfStatement(InfixExpression(SimpleName:u)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InfixExpression(QualifiedName:u.Channel)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:CurrentChannelId))(Block(ExpressionStatement(MethodInvocation(SimpleName:wrapit)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:u.Name)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))))(ExpressionStatement(MethodInvocation(SimpleName:deletePeople)(METHOD_INVOCATION_ARGUMENTS(SimpleName:u))))))(BreakStatement))))))