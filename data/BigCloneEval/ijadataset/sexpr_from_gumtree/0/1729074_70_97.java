(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(ParameterizedType(SimpleType(SimpleName:Map))(SimpleType(QualifiedName:db.Channel))(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Presence))))(SimpleName:executor_prepareAllClassrooms)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:VoidCallback))(SimpleName:callback))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Session))(VariableDeclarationFragment(SimpleName:s)(MethodInvocation(SimpleName:begin))))(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:classrooms)(MethodInvocation(SimpleName:getAll)(METHOD_INVOCATION_ARGUMENTS(SimpleName:s)(TypeLiteral(SimpleType(QualifiedName:db.Channel)))))))(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:Map))(SimpleType(QualifiedName:db.Channel))(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Presence))))(VariableDeclarationFragment(SimpleName:classroomMap)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:FastMap))(SimpleType(QualifiedName:db.Channel))(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Presence)))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Object))(SimpleName:o))(SimpleName:classrooms)(Block(VariableDeclarationStatement(SimpleType(QualifiedName:db.Channel))(VariableDeclarationFragment(SimpleName:c)(CastExpression(SimpleType(QualifiedName:db.Channel))(SimpleName:o))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Presence)))(VariableDeclarationFragment(SimpleName:presenceSet)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashSet))(SimpleType(SimpleName:Presence))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(QualifiedName:db.Account))(SimpleName:a))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:getMembers))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:presenceSet))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Presence))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:a))(SimpleName:getAccountName))(BooleanLiteral:false)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:classroomMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:c)(SimpleName:presenceSet))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:format)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:getChannelName)))))))))(ExpressionStatement(MethodInvocation(SimpleName:commit)(METHOD_INVOCATION_ARGUMENTS(SimpleName:s))))(ReturnStatement(SimpleName:classroomMap)))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Exception))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskScheduler))(SimpleName:scheduleTask)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:TransactionRunner))(ClassInstanceCreation(SimpleType(SimpleName:AbstractKernelRunnable))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(SimpleType(SimpleName:Exception))(Block(IfStatement(InfixExpression(SimpleName:callback)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callback))(SimpleName:exceptionThrown)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ex)))))))))))(SimpleName:taskOwner))))(ReturnStatement(NullLiteral)))))))))