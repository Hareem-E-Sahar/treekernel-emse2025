(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleName:WaveletContainerImpl)(SingleVariableDeclaration(SimpleType(SimpleName:WaveletName))(SimpleName:waveletName))(SingleVariableDeclaration(SimpleType(SimpleName:WaveletNotificationSubscriber))(SimpleName:notifiee))(SingleVariableDeclaration(Modifier:final)(ParameterizedType(SimpleType(SimpleName:ListenableFuture))(WildcardType(SimpleType(SimpleName:WaveletState))))(SimpleName:waveletStateFuture))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:waveDomain))(Block(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:waveletName))(ASSIGNMENT_OPERATOR:=)(SimpleName:waveletName)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:notifiee))(ASSIGNMENT_OPERATOR:=)(SimpleName:notifiee)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:sharedDomainParticipantId))(ASSIGNMENT_OPERATOR:=)(ConditionalExpression(InfixExpression(SimpleName:waveDomain)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ParticipantIdUtil))(SimpleName:makeUnsafeSharedDomainParticipantId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:waveDomain)))(NullLiteral))))(VariableDeclarationStatement(SimpleType(SimpleName:ReentrantReadWriteLock))(VariableDeclarationFragment(SimpleName:readWriteLock)(ClassInstanceCreation(SimpleType(SimpleName:ReentrantReadWriteLock)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:readLock))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readWriteLock))(SimpleName:readLock))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:writeLock))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readWriteLock))(SimpleName:writeLock))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:waveletStateFuture))(SimpleName:addListener)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Runnable))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(ExpressionStatement(MethodInvocation(SimpleName:acquireWriteLock)))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Preconditions))(SimpleName:checkState)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:waveletState)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Preconditions))(SimpleName:checkState)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:state)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:State.LOADING))(StringLiteral:<STR>)(SimpleName:state))))(ExpressionStatement(Assignment(SimpleName:waveletState)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FutureUtil))(SimpleName:getResultOrPropagateException)(METHOD_INVOCATION_ARGUMENTS(SimpleName:waveletStateFuture)(TypeLiteral(SimpleType(SimpleName:PersistenceException)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Preconditions))(SimpleName:checkState)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:waveletState))(SimpleName:getWaveletName)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getWaveletName))))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:waveletState))(SimpleName:getWaveletName))(MethodInvocation(SimpleName:getWaveletName)))))(ExpressionStatement(Assignment(SimpleName:state)(ASSIGNMENT_OPERATOR:=)(QualifiedName:State.OK))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:PersistenceException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:warning)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(SimpleName:getWaveletName)))(SimpleName:e))))(ExpressionStatement(Assignment(SimpleName:state)(ASSIGNMENT_OPERATOR:=)(QualifiedName:State.CORRUPTED)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:currentThread)))(SimpleName:interrupt)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:warning)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(SimpleName:getWaveletName)))(SimpleName:e))))(ExpressionStatement(Assignment(SimpleName:state)(ASSIGNMENT_OPERATOR:=)(QualifiedName:State.CORRUPTED)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RuntimeException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:severe)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(SimpleName:getWaveletName)))(SimpleName:e))))(ExpressionStatement(Assignment(SimpleName:state)(ASSIGNMENT_OPERATOR:=)(QualifiedName:State.CORRUPTED)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:releaseWriteLock)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:loadLatch))(SimpleName:countDown)))))))(SimpleName:storageContinuationExecutor))))))))