(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(ArrayType(PrimitiveType:byte)(Dimension))(SimpleName:readBytes)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:length))(SimpleType(SimpleName:IOException))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:sock)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sock))(SimpleName:isConnected))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:result)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:bos)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(IfStatement(InfixExpression(SimpleName:recIndex)(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:length))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:recBuf)(NumberLiteral:0)(SimpleName:length))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:newBuf)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:recBufSize))))))(IfStatement(InfixExpression(SimpleName:recIndex)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:length))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:arraycopy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:recBuf)(SimpleName:length)(SimpleName:newBuf)(NumberLiteral:0)(InfixExpression(SimpleName:recIndex)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:length))))))(ExpressionStatement(Assignment(SimpleName:recBuf)(ASSIGNMENT_OPERATOR:=)(SimpleName:newBuf)))(ExpressionStatement(Assignment(SimpleName:recIndex)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:recIndex)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:length)))))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:totalread)(SimpleName:length)))(IfStatement(InfixExpression(SimpleName:recIndex)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:totalread)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:totalread)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:recIndex))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:recBuf)(NumberLiteral:0)(SimpleName:recIndex))))(ExpressionStatement(Assignment(SimpleName:recBuf)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:recBufSize))))))(ExpressionStatement(Assignment(SimpleName:recIndex)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:readCount)(NumberLiteral:0)))(WhileStatement(InfixExpression(SimpleName:totalread)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(IfStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:readCount)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:recBuf)))))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(IfStatement(InfixExpression(SimpleName:totalread)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:readCount))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:recBuf)(NumberLiteral:0)(SimpleName:readCount))))(ExpressionStatement(Assignment(SimpleName:recBuf)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:recBufSize))))))(ExpressionStatement(Assignment(SimpleName:recIndex)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:recBuf)(NumberLiteral:0)(SimpleName:totalread))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:newBuf)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:recBufSize))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:arraycopy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:recBuf)(SimpleName:totalread)(SimpleName:newBuf)(NumberLiteral:0)(InfixExpression(SimpleName:readCount)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:totalread)))))(ExpressionStatement(Assignment(SimpleName:recBuf)(ASSIGNMENT_OPERATOR:=)(SimpleName:newBuf)))(ExpressionStatement(Assignment(SimpleName:recIndex)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:readCount)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:totalread))))))(ExpressionStatement(Assignment(SimpleName:totalread)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:totalread)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:readCount))))))))))(ExpressionStatement(Assignment(SimpleName:result)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:toByteArray))))(IfStatement(InfixExpression(InfixExpression(SimpleName:result)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(InfixExpression(InfixExpression(SimpleName:result)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(QualifiedName:result.length)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:recIndex)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0)))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:aliveTimeStamp)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(ReturnStatement(SimpleName:result))))))