(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:HttpResponseExchange))(SimpleName:execute)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponseExchange))(VariableDeclarationFragment(SimpleName:forwardResponse)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:fetchSizeLimit)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Config))(SimpleName:getInstance)))(SimpleName:getFetchLimitSize))))(WhileStatement(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:lastContentRange))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:forwardRequest))(SimpleName:setBody)(METHOD_INVOCATION_ARGUMENTS(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:0)))))))(VariableDeclarationStatement(SimpleType(SimpleName:ContentRangeHeaderValue))(VariableDeclarationFragment(SimpleName:old)(SimpleName:lastContentRange)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:sendSize)(SimpleName:fetchSizeLimit)))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:old))(SimpleName:getInstanceLength))(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:old))(SimpleName:getLastBytePos))(NumberLiteral:1))(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:fetchSizeLimit))(Block(ExpressionStatement(Assignment(SimpleName:sendSize)(ASSIGNMENT_OPERATOR:=)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:old))(SimpleName:getInstanceLength))(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:old))(SimpleName:getLastBytePos))(NumberLiteral:1)))))))(IfStatement(InfixExpression(SimpleName:sendSize)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0))(Block(BreakStatement)))(ExpressionStatement(Assignment(SimpleName:lastContentRange)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ContentRangeHeaderValue))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:old))(SimpleName:getLastBytePos))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:old))(SimpleName:getLastBytePos))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:sendSize))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:old))(SimpleName:getInstanceLength)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:forwardRequest))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpHeaders.Names.CONTENT_RANGE)(SimpleName:lastContentRange))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:forwardRequest))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpHeaders.Names.CONTENT_LENGTH)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sendSize))))))(ExpressionStatement(Assignment(SimpleName:forwardResponse)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:syncFetch)(METHOD_INVOCATION_ARGUMENTS(SimpleName:forwardRequest)))))(IfStatement(InfixExpression(SimpleName:sendSize)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:fetchSizeLimit))(Block(ExpressionStatement(Assignment(SimpleName:lastContentRange)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))))(ReturnStatement(SimpleName:forwardResponse))))))