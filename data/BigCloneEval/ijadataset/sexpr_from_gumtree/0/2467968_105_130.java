(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(SimpleType(SimpleName:Image))(SimpleName:createScaledImage)(SingleVariableDeclaration(SimpleType(SimpleName:GraphicalViewer))(SimpleName:diagramViewer))(SingleVariableDeclaration(PrimitiveType:double)(SimpleName:scale))(Block(IfStatement(InfixExpression(SimpleName:scale)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:scale)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:1)))))(IfStatement(InfixExpression(SimpleName:scale)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:4))(Block(ExpressionStatement(Assignment(SimpleName:scale)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:4)))))(VariableDeclarationStatement(SimpleType(SimpleName:Rectangle))(VariableDeclarationFragment(SimpleName:rectangle)(MethodInvocation(SimpleName:getDiagramExtents)(METHOD_INVOCATION_ARGUMENTS(SimpleName:diagramViewer)))))(VariableDeclarationStatement(SimpleType(SimpleName:Image))(VariableDeclarationFragment(SimpleName:image)(ClassInstanceCreation(SimpleType(SimpleName:Image))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Display))(SimpleName:getDefault))(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(QualifiedName:rectangle.width)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:scale))))(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(QualifiedName:rectangle.height)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:scale)))))))(VariableDeclarationStatement(SimpleType(SimpleName:GC))(VariableDeclarationFragment(SimpleName:gc)(ClassInstanceCreation(SimpleType(SimpleName:GC))(SimpleName:image))))(VariableDeclarationStatement(SimpleType(SimpleName:SWTGraphics))(VariableDeclarationFragment(SimpleName:swtGraphics)(ClassInstanceCreation(SimpleType(SimpleName:SWTGraphics))(SimpleName:gc))))(VariableDeclarationStatement(SimpleType(SimpleName:Graphics))(VariableDeclarationFragment(SimpleName:graphics)(SimpleName:swtGraphics)))(VariableDeclarationStatement(SimpleType(SimpleName:IFigure))(VariableDeclarationFragment(SimpleName:figure)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:FreeformGraphicalRootEditPart))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:diagramViewer))(SimpleName:getRootEditPart)))))(SimpleName:getLayer)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LayerConstants.PRINTABLE_LAYERS)))))(IfStatement(InfixExpression(SimpleName:scale)(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:1))(Block(ExpressionStatement(Assignment(SimpleName:graphics)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ScaledGraphics))(SimpleName:swtGraphics))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:graphics))(SimpleName:scale)(METHOD_INVOCATION_ARGUMENTS(SimpleName:scale))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:graphics))(SimpleName:translate)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(QualifiedName:rectangle.x)(INFIX_EXPRESSION_OPERATOR:*)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(InfixExpression(QualifiedName:rectangle.y)(INFIX_EXPRESSION_OPERATOR:*)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figure))(SimpleName:paint)(METHOD_INVOCATION_ARGUMENTS(SimpleName:graphics))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:gc))(SimpleName:dispose)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:graphics))(SimpleName:dispose)))(IfStatement(InfixExpression(SimpleName:swtGraphics)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:graphics))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:swtGraphics))(SimpleName:dispose)))))(ReturnStatement(SimpleName:image))))))