(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(ArrayType(PrimitiveType:byte)(Dimension))(SimpleName:wrapBMP)(SingleVariableDeclaration(SimpleType(SimpleName:Image))(SimpleName:image))(SimpleType(SimpleName:IOException))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getOriginalType))(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:Image.ORIGINAL_BMP))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:imgIn)))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:data)(Dimension)(NullLiteral)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getOriginalData))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:imgIn)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getUrl)))(SimpleName:openStream))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:out)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:b)(NumberLiteral:0)))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:b)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imgIn))(SimpleName:read))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:b)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imgIn))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:data)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:toByteArray)))))(ExpressionStatement(Assignment(SimpleName:data)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getOriginalData)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:sizeBmpWords)(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(QualifiedName:data.length)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:14))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))(INFIX_EXPRESSION_OPERATOR:>>>)(NumberLiteral:1))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:os)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:1))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:9))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0x0300))))(ExpressionStatement(MethodInvocation(SimpleName:writeDWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(InfixExpression(NumberLiteral:9)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:4)(NumberLiteral:5)(NumberLiteral:5)(ParenthesizedExpression(InfixExpression(NumberLiteral:13)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:sizeBmpWords)))(NumberLiteral:3)))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:1))))(ExpressionStatement(MethodInvocation(SimpleName:writeDWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(InfixExpression(NumberLiteral:14)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:sizeBmpWords)))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(SimpleName:writeDWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:4))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(SimpleName:META_SETMAPMODE))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:8))))(ExpressionStatement(MethodInvocation(SimpleName:writeDWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:5))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(SimpleName:META_SETWINDOWORG))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(SimpleName:writeDWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:5))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(SimpleName:META_SETWINDOWEXT))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getHeight))))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getWidth))))))(ExpressionStatement(MethodInvocation(SimpleName:writeDWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(InfixExpression(NumberLiteral:13)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:sizeBmpWords)))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(SimpleName:META_DIBSTRETCHBLT))))(ExpressionStatement(MethodInvocation(SimpleName:writeDWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0x00cc0020))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getHeight))))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getWidth))))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getHeight))))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:image))(SimpleName:getWidth))))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:os))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)(NumberLiteral:14)(InfixExpression(QualifiedName:data.length)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:14)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(QualifiedName:data.length)(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:1)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:os))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))(ExpressionStatement(MethodInvocation(SimpleName:writeDWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:3))))(ExpressionStatement(MethodInvocation(SimpleName:writeWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:os))(SimpleName:close)))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:os))(SimpleName:toByteArray)))))))