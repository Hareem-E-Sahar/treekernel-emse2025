(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(Modifier:static)(SimpleType(SimpleName:File))(SimpleName:internalDownload)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:URL))(SimpleName:url))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:IProgressMonitor))(SimpleName:monitor))(SimpleType(SimpleName:URLDownloadException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:targetfile)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:tempfile)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:sourcestream)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:targetstream)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:finished)(BooleanLiteral:false)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:URLConnection))(VariableDeclarationFragment(SimpleName:connection)))(IfStatement(InfixExpression(SimpleName:url)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement(NullLiteral))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:beginTask)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:toString)))(NumberLiteral:100))))(ExpressionStatement(Assignment(SimpleName:targetfile)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getCacheFileFromURL)(METHOD_INVOCATION_ARGUMENTS(SimpleName:url)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:canRead))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:worked)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:100))))(ExpressionStatement(Assignment(SimpleName:finished)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ReturnStatement(SimpleName:targetfile))))(SynchronizedStatement(SimpleName:fCurrentDownloads)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fCurrentDownloads))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:url))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:targetextension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:getName)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:getName)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>)))))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:tempfile)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:File))(SimpleName:createTempFile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:targetextension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:getParentFile))))))(ExpressionStatement(Assignment(SimpleName:targetstream)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:tempfile)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(StringLiteral:<STR>)(SimpleName:ioe))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:subTask)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:connection)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openConnection))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:setReadTimeout)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(NumberLiteral:10)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1000))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getHost)))(SimpleName:ioe))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:worked)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:5))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:subTask)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:contenthandler)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getContent))))(IfStatement(InstanceofExpression(SimpleName:contenthandler)(SimpleType(SimpleName:InputStream)))(Block(ExpressionStatement(Assignment(SimpleName:sourcestream)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:InputStream))(SimpleName:contenthandler)))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getFile))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getHost))(StringLiteral:<STR>)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:UnknownHostException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getHost))(StringLiteral:<STR>))(SimpleName:e)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:FileNotFoundException))(SimpleName:fnfe))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getFile))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getHost))(StringLiteral:<STR>))(SimpleName:fnfe)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getFile))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getHost))(StringLiteral:<STR>))(SimpleName:ioe))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:worked)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:5))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:subTask)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:toString))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:length)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getContentLength))))(IfStatement(InfixExpression(SimpleName:length)(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:length)(ASSIGNMENT_OPERATOR:=)(QualifiedName:IProgressMonitor.UNKNOWN)))))(ExpressionStatement(MethodInvocation(SimpleName:internalStreamCopyWithProgress)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sourcestream)(SimpleName:targetstream)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:getName))(SimpleName:length)(ClassInstanceCreation(SimpleType(SimpleName:SubProgressMonitor))(SimpleName:monitor)(NumberLiteral:95)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sourcestream))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetstream))(SimpleName:close)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempfile))(SimpleName:renameTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:targetfile)))(INFIX_EXPRESSION_OPERATOR:==)(BooleanLiteral:false))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempfile))(SimpleName:toString))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:toString)))))))(ExpressionStatement(Assignment(SimpleName:finished)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ReturnStatement(SimpleName:targetfile)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SocketTimeoutException))(SimpleName:ste))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getURL)))(SimpleName:getHost))(StringLiteral:<STR>))(SimpleName:ste)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SecurityException))(SimpleName:se))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(StringLiteral:<STR>)(SimpleName:se)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:URLDownloadException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getURL)))(SimpleName:toExternalForm))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:toString)))(SimpleName:ioe)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:done)))(SynchronizedStatement(SimpleName:fCurrentDownloads)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fCurrentDownloads))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(SimpleName:url))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fCurrentDownloads))(SimpleName:notifyAll)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:finished))(Block(TryStatement(Block(IfStatement(InfixExpression(SimpleName:sourcestream)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sourcestream))(SimpleName:close)))))(IfStatement(InfixExpression(SimpleName:targetstream)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetstream))(SimpleName:close))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block)))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:tempfile)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempfile))(SimpleName:exists))))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempfile))(SimpleName:delete)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IStatus))(VariableDeclarationFragment(SimpleName:status)(ClassInstanceCreation(SimpleType(SimpleName:Status))(QualifiedName:IStatus.WARNING)(QualifiedName:AVRPlugin.PLUGIN_ID)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempfile))(SimpleName:toString))(StringLiteral:<STR>))(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AVRPlugin))(SimpleName:getDefault)))(SimpleName:log)(METHOD_INVOCATION_ARGUMENTS(SimpleName:status))))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:targetfile)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:exists))))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:delete)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IStatus))(VariableDeclarationFragment(SimpleName:status)(ClassInstanceCreation(SimpleType(SimpleName:Status))(QualifiedName:IStatus.WARNING)(QualifiedName:AVRPlugin.PLUGIN_ID)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:targetfile))(SimpleName:toString))(StringLiteral:<STR>))(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AVRPlugin))(SimpleName:getDefault)))(SimpleName:log)(METHOD_INVOCATION_ARGUMENTS(SimpleName:status))))))))))))))))