(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleName:WebmillDeploy)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:inputName))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:outputName))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:stripLoggers))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:tempFile)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:JarFile))(VariableDeclarationFragment(SimpleName:jin)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:JarOutputStream))(VariableDeclarationFragment(SimpleName:jout)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:srcChannel)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:dstChannel)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:portletApplicationName)(MethodInvocation(SimpleName:getPortletApplicationName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outputName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:portletApplicationName)))))(ExpressionStatement(Assignment(SimpleName:tempFile)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:File))(SimpleName:createTempFile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempFile))(SimpleName:deleteOnExit)))(ExpressionStatement(Assignment(SimpleName:jin)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:JarFile))(SimpleName:inputName))))(ExpressionStatement(Assignment(SimpleName:jout)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:JarOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:tempFile)))))(VariableDeclarationStatement(SimpleType(SimpleName:Document))(VariableDeclarationFragment(SimpleName:webXml)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Document))(VariableDeclarationFragment(SimpleName:portletXml)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Document))(VariableDeclarationFragment(SimpleName:contextXml)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:src)))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:source)))(VariableDeclarationStatement(SimpleType(SimpleName:Enumeration))(VariableDeclarationFragment(SimpleName:zipEntries)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jin))(SimpleName:entries))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipEntries))(SimpleName:hasMoreElements))(Block(ExpressionStatement(Assignment(SimpleName:src)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:ZipEntry))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipEntries))(SimpleName:nextElement)))))(ExpressionStatement(Assignment(SimpleName:source)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jin))(SimpleName:getInputStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:src)))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:target)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:getName))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:WEB_INF_WEB_XML))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:webXml)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:parseXml)(METHOD_INVOCATION_ARGUMENTS(SimpleName:source))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:WEB_INF_PORTLET_XML))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:portletXml)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:parseXml)(METHOD_INVOCATION_ARGUMENTS(SimpleName:source))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:META_INF_CONTEXT_XML))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:contextXml)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:parseXml)(METHOD_INVOCATION_ARGUMENTS(SimpleName:source))))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:close)))))))(IfStatement(InfixExpression(SimpleName:webXml)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException))(StringLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:portletXml)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException))(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:WebmillWebApplicationRewriter))(VariableDeclarationFragment(SimpleName:webRewriter)(ClassInstanceCreation(SimpleType(SimpleName:WebmillWebApplicationRewriter))(SimpleName:webXml))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:webRewriter))(SimpleName:processWebXML)))(VariableDeclarationStatement(SimpleType(SimpleName:WebmillContextRewriter))(VariableDeclarationFragment(SimpleName:contextRewriter)(ClassInstanceCreation(SimpleType(SimpleName:WebmillContextRewriter))(SimpleName:contextXml)(SimpleName:portletApplicationName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contextRewriter))(SimpleName:processContextXML)))(ExpressionStatement(Assignment(SimpleName:jin)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:JarFile))(SimpleName:inputName))))(ExpressionStatement(Assignment(SimpleName:zipEntries)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jin))(SimpleName:entries))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipEntries))(SimpleName:hasMoreElements))(Block(ExpressionStatement(Assignment(SimpleName:src)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:ZipEntry))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipEntries))(SimpleName:nextElement)))))(ExpressionStatement(Assignment(SimpleName:source)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jin))(SimpleName:getInputStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:src)))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:target)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:getName))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fullTarget)(InfixExpression(CharacterLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:target))))(IfStatement(InfixExpression(SimpleName:stripLoggers)(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:target)))))(ContinueStatement))(Block(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:webRewriter))(SimpleName:getRealPortletTldFile))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullTarget))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:webRewriter))(SimpleName:getRealPortletTldFile)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fullTarget)))))(ContinueStatement))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:WEB_INF_WEB_XML)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:target)))))(ContinueStatement))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:WEB_INF_PORTLET_XML)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:target)))))(ContinueStatement))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:META_INF_CONTEXT_XML)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:target)))))(ContinueStatement))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:target)))))))(ExpressionStatement(MethodInvocation(SimpleName:addFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)(SimpleName:source)(SimpleName:jout)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:close)))))))(ExpressionStatement(MethodInvocation(SimpleName:addFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:WEB_INF_WEB_XML)(SimpleName:webXml)(SimpleName:jout))))(ExpressionStatement(MethodInvocation(SimpleName:addFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:WEB_INF_PORTLET_XML)(SimpleName:portletXml)(SimpleName:jout))))(ExpressionStatement(MethodInvocation(SimpleName:addFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:META_INF_CONTEXT_XML)(SimpleName:contextXml)(SimpleName:jout))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:is)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getClass)))(SimpleName:getResourceAsStream)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:is)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:portletTldFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:webRewriter))(SimpleName:getRealPortletTldFile))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:portletTldFile))(SimpleName:charAt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))(INFIX_EXPRESSION_OPERATOR:==)(CharacterLiteral:<STR>))(Block(ExpressionStatement(Assignment(SimpleName:portletTldFile)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:portletTldFile))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:portletTldFile)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:addFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:portletTldFile)(SimpleName:is)(SimpleName:jout)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:close)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jout))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jin))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:jin)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(Assignment(SimpleName:jout)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:outputName)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:flush)))(ExpressionStatement(Assignment(SimpleName:srcChannel)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:tempFile)))(SimpleName:getChannel))))(ExpressionStatement(Assignment(SimpleName:dstChannel)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:outputName)))(SimpleName:getChannel))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dstChannel))(SimpleName:transferFrom)(METHOD_INVOCATION_ARGUMENTS(SimpleName:srcChannel)(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:srcChannel))(SimpleName:size)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:srcChannel))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:srcChannel)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dstChannel))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:dstChannel)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempFile))(SimpleName:delete)))(ExpressionStatement(Assignment(SimpleName:tempFile)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:outputName)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:flush))))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:srcChannel)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:srcChannel))(SimpleName:isOpen)))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:srcChannel))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e1))(Block)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:dstChannel)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dstChannel))(SimpleName:isOpen)))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dstChannel))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e1))(Block)))))(IfStatement(InfixExpression(SimpleName:jin)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jin))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:jin)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e1))(Block)))))(IfStatement(InfixExpression(SimpleName:jout)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jout))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:jout)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e1))(Block)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:tempFile)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempFile))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempFile))(SimpleName:delete)))))))))))