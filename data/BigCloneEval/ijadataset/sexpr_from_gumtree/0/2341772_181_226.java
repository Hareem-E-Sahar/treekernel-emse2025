(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:buildProcessUnit)(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:Packet)))(SimpleName:packets))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:flush))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:idx)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packets))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(SimpleName:getStreamIndex))))(VariableDeclarationStatement(SimpleType(QualifiedName:ICodec.Type))(VariableDeclarationFragment(SimpleName:codec_type)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:decoder)))(SimpleName:getStreamCoder)))(SimpleName:getCodecType))))(VariableDeclarationStatement(SimpleType(SimpleName:ProcessUnit))(VariableDeclarationFragment(SimpleName:pu)))(IfStatement(InfixExpression(SimpleName:codec_type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ICodec.Type.CODEC_TYPE_VIDEO))(Block(ExpressionStatement(Assignment(SimpleName:pu)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:VideoProcessUnit))))))(IfStatement(InfixExpression(SimpleName:codec_type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ICodec.Type.CODEC_TYPE_AUDIO))(Block(ExpressionStatement(Assignment(SimpleName:pu)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:AudioProcessUnit))))))(Block(ReturnStatement))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setInputPackets)(METHOD_INVOCATION_ARGUMENTS(SimpleName:packets))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setDecoder)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:decoder)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setEncoder)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:encoder)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setSourceStream)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:instream)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setTargetStream)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:outstream)))))(IfStatement(InfixExpression(SimpleName:codec_type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ICodec.Type.CODEC_TYPE_VIDEO))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setRateCompensateBase)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:frameRateCompensateBase)))))(VariableDeclarationStatement(SimpleType(SimpleName:IRational))(VariableDeclarationFragment(SimpleName:inrate)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:decoder)))(SimpleName:getFrameRate))))(VariableDeclarationStatement(SimpleType(SimpleName:IRational))(VariableDeclarationFragment(SimpleName:outrate)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:encoder)))(SimpleName:getFrameRate))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:packet_count)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packets))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:-)(ParenthesizedExpression(ConditionalExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:decoder)))(SimpleName:getStreamCoder)))(SimpleName:getCodecID))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ICodec.ID.CODEC_ID_MPEG2VIDEO))(NumberLiteral:1)(NumberLiteral:0))))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:in)(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(CastExpression(PrimitiveType:double)(SimpleName:packet_count))(INFIX_EXPRESSION_OPERATOR:*)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inrate))(SimpleName:getDenominator)))(INFIX_EXPRESSION_OPERATOR:/)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inrate))(SimpleName:getNumerator))))(INFIX_EXPRESSION_OPERATOR:*)(ParenthesizedExpression(InfixExpression(CastExpression(PrimitiveType:double)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outrate))(SimpleName:getNumerator)))(INFIX_EXPRESSION_OPERATOR:/)(CastExpression(PrimitiveType:double)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outrate))(SimpleName:getDenominator))))))))(ExpressionStatement(Assignment(SimpleName:in)(ASSIGNMENT_OPERATOR:+=)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:frameRateCompensateBase))))(ExpressionStatement(Assignment(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:frameRateCompensateBase))(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:in)(INFIX_EXPRESSION_OPERATOR:-)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:floor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setEsteminatedPacketCount)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:floor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:getPacketCount)))))))(IfStatement(InfixExpression(SimpleName:codec_type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ICodec.Type.CODEC_TYPE_AUDIO))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setRateCompensateBase)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:frameRateCompensateBase)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:channels)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:decoder)))(SimpleName:getStreamCoder)))(SimpleName:getChannels))))(ExpressionStatement(Assignment(SimpleName:channels)(ASSIGNMENT_OPERATOR:=)(ConditionalExpression(InfixExpression(SimpleName:channels)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:2))(NumberLiteral:2)(SimpleName:channels))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:inframe_size)(InfixExpression(InfixExpression(CastExpression(PrimitiveType:double)(ParenthesizedExpression(InfixExpression(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:in_frame_size))(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:2)(SimpleName:channels))))(INFIX_EXPRESSION_OPERATOR:/)(CastExpression(PrimitiveType:double)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:decoder)))(SimpleName:getStreamCoder)))(SimpleName:getSampleRate)))))(INFIX_EXPRESSION_OPERATOR:*)(CastExpression(PrimitiveType:double)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:encoder)))(SimpleName:getStreamCoder)))(SimpleName:getSampleRate)))))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:outframe_size)(InfixExpression(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:out_frame_size))(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:encoder)))(SimpleName:getStreamCoder)))(SimpleName:getChannels)))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:size)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packets))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:*)(CastExpression(PrimitiveType:long)(SimpleName:inframe_size)))))(ExpressionStatement(Assignment(SimpleName:size)(ASSIGNMENT_OPERATOR:+=)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:frameRateCompensateBase))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:rest)(InfixExpression(SimpleName:size)(INFIX_EXPRESSION_OPERATOR:%)(SimpleName:outframe_size))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:estimated_packet_count)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Long))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:size)(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:outframe_size)))))(SimpleName:intValue))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:setEsteminatedPacketCount)(METHOD_INVOCATION_ARGUMENTS(SimpleName:estimated_packet_count))))(ExpressionStatement(Assignment(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_stream_map))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)))(SimpleName:frameRateCompensateBase))(ASSIGNMENT_OPERATOR:=)(SimpleName:rest)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pu))(SimpleName:getPacketCount)))))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_puqueue))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pu)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))))))