(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:writeResponse)(SingleVariableDeclaration(SimpleType(SimpleName:MessageEvent))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ChannelBuffer))(VariableDeclarationFragment(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ChannelBuffers))(SimpleName:copiedBuffer)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseContent))(SimpleName:toString))(QualifiedName:CharsetUtil.UTF_8)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseContent))(SimpleName:setLength)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:close)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:isKeepAlive)))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:response)(ClassInstanceCreation(SimpleType(SimpleName:DefaultHttpResponse))(QualifiedName:HttpVersion.HTTP_1_1)(QualifiedName:HttpResponseStatus.OK))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpHeaders.Names.CONTENT_TYPE)(StringLiteral:<STR>))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:close))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpHeaders.Names.CONTENT_LENGTH)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:readableBytes)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:cookieString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpHeaders.Names.COOKIE)))))(IfStatement(InfixExpression(SimpleName:cookieString)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CookieDecoder))(VariableDeclarationFragment(SimpleName:cookieDecoder)(ClassInstanceCreation(SimpleType(SimpleName:CookieDecoder)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Cookie)))(VariableDeclarationFragment(SimpleName:cookies)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookieDecoder))(SimpleName:decode)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cookieString)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookies))(SimpleName:isEmpty)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CookieEncoder))(VariableDeclarationFragment(SimpleName:cookieEncoder)(ClassInstanceCreation(SimpleType(SimpleName:CookieEncoder))(BooleanLiteral:true))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Cookie))(SimpleName:cookie))(SimpleName:cookies)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookieEncoder))(SimpleName:addCookie)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cookie))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:addHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpHeaders.Names.SET_COOKIE)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookieEncoder))(SimpleName:encode)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:ChannelFuture))(VariableDeclarationFragment(SimpleName:future)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:response)))))(IfStatement(SimpleName:close)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:future))(SimpleName:addListener)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ChannelFutureListener.CLOSE))))))))))