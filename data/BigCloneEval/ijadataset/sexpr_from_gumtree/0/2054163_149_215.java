(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:Annotation))(SimpleName:get)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:File))(SimpleName:imageFile))(Block(SynchronizedStatement(SimpleName:writeLock)(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unreadables))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getAbsolutePath))))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unwriteables))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getAbsolutePath)))))(Block(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:BlacklistedAnnotation))(SimpleName:imageFile)))))(IfStatement(MethodInvocation(SimpleName:alreadyA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile)))(Block(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:PlaceholderAnnotation))(SimpleName:imageFile)(MethodInvocation(SimpleName:getA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile)))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:uniqueImageId)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:uniqueImageId)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getImageUniqueId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:t))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:imageFile)(StringLiteral:<STR>))(SimpleName:t))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unreadables))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getAbsolutePath)))))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:BlacklistedAnnotation))(SimpleName:imageFile))))))(IfStatement(MethodInvocation(SimpleName:annotationExists)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uniqueImageId)))(Block(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:PlaceholderAnnotation))(SimpleName:imageFile)(SimpleName:uniqueImageId)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ExifMetadata))(VariableDeclarationFragment(SimpleName:metadata)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:metaDataReader))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:uniqueImageId)))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:newUniqueImageId)(MethodInvocation(SimpleName:createUniqueImageId))))(ExpressionStatement(MethodInvocation(SimpleName:addA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile)(SimpleName:newUniqueImageId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskRunner))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Task))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:String))(SimpleName:getName)(Block(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getName)))))(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:execute)(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exifMetadataWriter))(SimpleName:setImageUniqueId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile)(SimpleName:newUniqueImageId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:newUniqueImageId)(StringLiteral:<STR>)(SimpleName:imageFile)))))(ExpressionStatement(MethodInvocation(SimpleName:removeA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:eventBus))(SimpleName:publish)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:AnnotationUpdatedBusEvent))(MethodInvocation(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newUniqueImageId))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:t))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:imageFile)(StringLiteral:<STR>))(SimpleName:t))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:unwriteables))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getAbsolutePath)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:eventBus))(SimpleName:publish)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FolderUpdatedBusEvent))(ClassInstanceCreation(SimpleType(SimpleName:Folder))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getParentFile))))))))))))))(BooleanLiteral:true))))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:PlaceholderAnnotation))(SimpleName:imageFile)(SimpleName:newUniqueImageId))))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:finalUniqueImageId)(SimpleName:uniqueImageId)))(ExpressionStatement(MethodInvocation(SimpleName:addA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile)(SimpleName:uniqueImageId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskRunner))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Task))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:String))(SimpleName:getName)(Block(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getName)))))(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:execute)(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:userComment)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:metadata))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isEmpty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:userComment)))(Block(ExpressionStatement(Assignment(SimpleName:userComment)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:stripExtension)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getName))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Annotation))(VariableDeclarationFragment(SimpleName:newAnnotation)(ClassInstanceCreation(SimpleType(SimpleName:BaseAnnotation))(SimpleName:finalUniqueImageId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:stripExtension)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getName))))(ClassInstanceCreation(SimpleType(SimpleName:Date)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getParent))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getName))(NullLiteral)(NullLiteral)(SimpleName:userComment)(NullLiteral)(SimpleName:metadata))))(ExpressionStatement(MethodInvocation(SimpleName:store)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newAnnotation))))(ExpressionStatement(MethodInvocation(SimpleName:removeA)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imageFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:eventBus))(SimpleName:publish)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FolderUpdatedBusEvent))(ClassInstanceCreation(SimpleType(SimpleName:Folder))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageFile))(SimpleName:getParentFile)))))))))))(BooleanLiteral:true))))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:PlaceholderAnnotation))(SimpleName:imageFile)(SimpleName:finalUniqueImageId)))))))))))