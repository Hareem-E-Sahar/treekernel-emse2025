(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(PrimitiveType:boolean)(SimpleName:installMetricsCfg)(SingleVariableDeclaration(SimpleType(SimpleName:Db))(SimpleName:db))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:xmlFileName))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:xmlText)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileHelper))(SimpleName:asString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:xmlFileName)))))(VariableDeclarationStatement(SimpleType(SimpleName:Bundle))(VariableDeclarationFragment(SimpleName:bundle)(ClassInstanceCreation(SimpleType(SimpleName:Bundle)))))(ExpressionStatement(MethodInvocation(SimpleName:loadMetricsCfg)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundle)(SimpleName:xmlFileName)(SimpleName:xmlText))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:begin)))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:psExists)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psExists))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:xmlFileName))))(VariableDeclarationStatement(SimpleType(SimpleName:ResultSet))(VariableDeclarationFragment(SimpleName:rsExists)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:executeQuery)(METHOD_INVOCATION_ARGUMENTS(SimpleName:psExists)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rsExists))(SimpleName:next))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:rollback)))(ReturnStatement(BooleanLiteral:false))))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:psId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:psAdd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAdd))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:xmlFileName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAdd))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(SimpleName:xmlText))))(VariableDeclarationStatement(SimpleType(SimpleName:FileInformation))(VariableDeclarationFragment(SimpleName:fi)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bundle))(SimpleName:getSingleFileInformation))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xmlFileName))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:fi.filename))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:xmlFileName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAdd))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:3)(QualifiedName:Globals.SDW_MAJOR_VER))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAdd))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:4)(QualifiedName:Globals.SDW_MINOR_VER))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAdd))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:5)(QualifiedName:fi.majorVer))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAdd))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:6)(QualifiedName:fi.minorVer))))(IfStatement(InfixExpression(NumberLiteral:1)(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:executeUpdate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:psAdd))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:xmlFileName))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bundleId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DbHelper))(SimpleName:getIntKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:psId)))))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:psGroupId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:psAddGroup)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAddGroup))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:bundleId))))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:psMetricId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:psAddMetric)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAddMetric))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:bundleId))))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:psAddGroup2Metric)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Iterator))(SimpleType(SimpleName:MetricGroup)))(VariableDeclarationFragment(SimpleName:i)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bundle))(SimpleName:getAllMetricGroups))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MetricGroup))(VariableDeclarationFragment(SimpleName:grp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:i))(SimpleName:next))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAddGroup))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(QualifiedName:grp.groupName))))(IfStatement(InfixExpression(NumberLiteral:1)(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:executeUpdate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:psAddGroup))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:grp.groupName)(StringLiteral:<STR>)(SimpleName:xmlFileName)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:groupId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DbHelper))(SimpleName:getIntKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:psGroupId)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAddGroup2Metric))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(SimpleName:groupId))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Iterator))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:j)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:grp))(SimpleName:getAllMetricNames))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:j))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:metricName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:j))(SimpleName:next))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAddMetric))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(SimpleName:metricName))))(IfStatement(InfixExpression(NumberLiteral:1)(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:executeUpdate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:psAddMetric))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:metricName)(StringLiteral:<STR>)(SimpleName:xmlFileName)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:metricId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DbHelper))(SimpleName:getIntKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:psMetricId)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:psAddGroup2Metric))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:metricId))))(IfStatement(InfixExpression(NumberLiteral:1)(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:executeUpdate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:psAddGroup2Metric))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:grp.groupName)(StringLiteral:<STR>)(SimpleName:metricName)(StringLiteral:<STR>)(SimpleName:xmlFileName)))))))))(ReturnStatement(BooleanLiteral:true)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:rollback)))(ThrowStatement(SimpleName:e))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:commitUnless)))))))))