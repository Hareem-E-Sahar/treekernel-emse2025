(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:IncomingBatch)))(SimpleName:loadDataFromTransport)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:String))(SimpleName:sourceNodeId))(SingleVariableDeclaration(SimpleType(SimpleName:IIncomingTransport))(SimpleName:transport))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ManageIncomingBatchListener))(VariableDeclarationFragment(SimpleName:listener)(ClassInstanceCreation(SimpleType(SimpleName:ManageIncomingBatchListener)))))(TryStatement(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:totalNetworkMillis)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parameterService))(SimpleName:is)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ParameterConstants.STREAM_TO_FILE_ENABLED)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IDataReader))(VariableDeclarationFragment(SimpleName:dataReader)(ClassInstanceCreation(SimpleType(SimpleName:ProtocolDataReader))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transport))(SimpleName:open)))))(VariableDeclarationStatement(SimpleType(SimpleName:IDataWriter))(VariableDeclarationFragment(SimpleName:dataWriter)(ClassInstanceCreation(SimpleType(SimpleName:StagingDataWriter))(SimpleName:sourceNodeId)(QualifiedName:Constants.STAGING_CATEGORY_INCOMING)(SimpleName:stagingManager)(ClassInstanceCreation(SimpleType(SimpleName:LoadIntoDatabaseOnArrivalListener))(SimpleName:sourceNodeId)(SimpleName:listener)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:DataProcessor))(SimpleName:dataReader)(SimpleName:dataWriter)))(SimpleName:process)))(ExpressionStatement(Assignment(SimpleName:totalNetworkMillis)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:totalNetworkMillis)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:DataProcessor))(VariableDeclarationFragment(SimpleName:processor)(ClassInstanceCreation(SimpleType(SimpleName:DataProcessor))(ClassInstanceCreation(SimpleType(SimpleName:ProtocolDataReader))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transport))(SimpleName:open)))(NullLiteral)(SimpleName:listener)(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(SimpleType(SimpleName:IDataWriter))(SimpleName:chooseDataWriter)(SingleVariableDeclaration(SimpleType(SimpleName:Batch))(SimpleName:batch))(Block(ReturnStatement(MethodInvocation(SimpleName:buildDataWriter)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sourceNodeId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:batch))(SimpleName:getChannelId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:batch))(SimpleName:getBatchId)))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:processor))(SimpleName:process)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:IncomingBatch)))(VariableDeclarationFragment(SimpleName:batchesProcessed)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:getBatchesProcessed))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:IncomingBatch))(SimpleName:incomingBatch))(SimpleName:batchesProcessed)(Block(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:incomingBatch))(SimpleName:getBatchId))(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:BatchInfo.VIRTUAL_BATCH_FOR_REGISTRATION))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:incomingBatchService))(SimpleName:updateIncomingBatch)(METHOD_INVOCATION_ARGUMENTS(SimpleName:incomingBatch)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:incomingBatch))(SimpleName:getBatchId))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(SimpleName:logAndRethrow)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ex))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transport))(SimpleName:close)))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listener))(SimpleName:getBatchesProcessed)))))))