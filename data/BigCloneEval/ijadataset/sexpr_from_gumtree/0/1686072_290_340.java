(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:dumpFile)(SingleVariableDeclaration(SimpleType(SimpleName:HttpEntity))(SimpleName:entity))(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:partialDestinationFile))(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:destinationFile))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:NotEnoughSpaceException))(Block(IfStatement(SimpleName:showDebugOutput)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Log))(SimpleName:d)(METHOD_INVOCATION_ARGUMENTS(SimpleName:TAG)(StringLiteral:<STR>)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:prepareForDownloadCancel))(Block(ExpressionStatement(Assignment(SimpleName:mcontentLength)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entity))(SimpleName:getContentLength)))))(IfStatement(InfixExpression(SimpleName:mcontentLength)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0))(Block(IfStatement(SimpleName:showDebugOutput)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Log))(SimpleName:d)(METHOD_INVOCATION_ARGUMENTS(SimpleName:TAG)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:mcontentLength)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:1024))))(IfStatement(SimpleName:showDebugOutput)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Log))(SimpleName:d)(METHOD_INVOCATION_ARGUMENTS(SimpleName:TAG)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(InfixExpression(SimpleName:mcontentLength)(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:1024)))(StringLiteral:<STR>)))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SysUtils))(SimpleName:EnoughSpaceOnSdCard)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mcontentLength))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NotEnoughSpaceException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getString)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:R.string.download_not_enough_space))))))(ExpressionStatement(Assignment(SimpleName:mStartTime)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:buff)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(InfixExpression(NumberLiteral:64)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1024)))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)))(VariableDeclarationStatement(SimpleType(SimpleName:RandomAccessFile))(VariableDeclarationFragment(SimpleName:out)(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(SimpleName:partialDestinationFile)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(SimpleName:localFileSize))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:is)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entity))(SimpleName:getContent))))(VariableDeclarationStatement(SimpleType(SimpleName:TimerTask))(VariableDeclarationFragment(SimpleName:progressUpdateTimerTask)(ClassInstanceCreation(SimpleType(SimpleName:TimerTask))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(ExpressionStatement(MethodInvocation(SimpleName:onProgressUpdate)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Timer))(VariableDeclarationFragment(SimpleName:progressUpdateTimer)(ClassInstanceCreation(SimpleType(SimpleName:Timer)))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:mtotalDownloaded)(ASSIGNMENT_OPERATOR:=)(SimpleName:localFileSize)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:progressUpdateTimer))(SimpleName:scheduleAtFixedRate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:progressUpdateTimerTask)(NumberLiteral:100)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prefs))(SimpleName:getProgressUpdateFreq)))))(WhileStatement(InfixExpression(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buff)))))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:prepareForDownloadCancel)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buff)(NumberLiteral:0)(SimpleName:read))))(ExpressionStatement(Assignment(SimpleName:mtotalDownloaded)(ASSIGNMENT_OPERATOR:+=)(SimpleName:read)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:close)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:prepareForDownloadCancel))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:partialDestinationFile))(SimpleName:renameTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:destinationFile))))(IfStatement(SimpleName:showDebugOutput)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Log))(SimpleName:d)(METHOD_INVOCATION_ARGUMENTS(SimpleName:TAG)(StringLiteral:<STR>))))))(Block(IfStatement(SimpleName:showDebugOutput)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Log))(SimpleName:d)(METHOD_INVOCATION_ARGUMENTS(SimpleName:TAG)(StringLiteral:<STR>))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close)))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:destinationFile))(SimpleName:delete))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SecurityException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Log))(SimpleName:e)(METHOD_INVOCATION_ARGUMENTS(SimpleName:TAG)(StringLiteral:<STR>)(SimpleName:ex)))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:progressUpdateTimer))(SimpleName:cancel)))(ExpressionStatement(Assignment(SimpleName:buff)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))))(IfStatement(SimpleName:showDebugOutput)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Log))(SimpleName:d)(METHOD_INVOCATION_ARGUMENTS(SimpleName:TAG)(StringLiteral:<STR>))))))))))