(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(SimpleType(SimpleName:MetaThumbData))(SimpleName:createImageThumb)(SingleVariableDeclaration(SimpleType(SimpleName:Display))(SimpleName:display))(SingleVariableDeclaration(SimpleType(SimpleName:IFile))(SimpleName:imagefile))(SingleVariableDeclaration(SimpleType(SimpleName:MetaThumbData))(SimpleName:meta))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:highQuality))(Block(IfStatement(InfixExpression(SimpleName:imagefile)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement(SimpleName:meta))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:IPath))(VariableDeclarationFragment(SimpleName:location)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imagefile))(SimpleName:getLocation))))(IfStatement(InfixExpression(SimpleName:location)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement(SimpleName:meta))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:location))(SimpleName:toFile))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:exists)))(Block(ReturnStatement(SimpleName:meta))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(SimpleName:getMinimalThumbSize))(INFIX_EXPRESSION_OPERATOR:>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:length)))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IO))(SimpleName:isPsdImage)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imagefile))(SimpleName:getName)))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:setThumbSizeToMeta)(METHOD_INVOCATION_ARGUMENTS(SimpleName:meta)(SimpleName:file))))(ReturnStatement(SimpleName:meta))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:savePath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ThumbFileUtils))(SimpleName:getDefaultThumbPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imagefile)))))(ExpressionStatement(Assignment(QualifiedName:meta.thumbPath)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savePath))(SimpleName:getAbsolutePath))))(IfStatement(InfixExpression(SimpleName:savePath)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(SimpleName:setThumbSizeToMeta)(METHOD_INVOCATION_ARGUMENTS(SimpleName:meta)(SimpleName:file))))(ReturnStatement(SimpleName:meta))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:explorerPath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ThumbFileUtils))(SimpleName:getExplorerThumbPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imagefile)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:explorerPath))(SimpleName:exists))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:explorerPath)(SimpleName:savePath))))(IfStatement(InfixExpression(QualifiedName:meta.exifDate)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(QualifiedName:meta.exifDate)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ExifDate))(SimpleName:getExifDateFromLastModified)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file)))))))(ReturnStatement(SimpleName:meta)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))))(IfStatement(SimpleName:highQuality)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Image))(VariableDeclarationFragment(SimpleName:largeThumb)(MethodInvocation(SimpleName:loadLargeThumbImage)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getAbsolutePath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savePath))(SimpleName:getAbsolutePath))(SimpleName:display)))))(IfStatement(InfixExpression(SimpleName:largeThumb)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:width)(QualifiedName:ThumbIO.DEFAULT_SIZE_X)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:height)(QualifiedName:ThumbIO.DEFAULT_SIZE_Y)))(VariableDeclarationStatement(SimpleType(SimpleName:Rectangle))(VariableDeclarationFragment(SimpleName:bounds)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:largeThumb))(SimpleName:getBounds))))(IfStatement(InfixExpression(QualifiedName:bounds.height)(INFIX_EXPRESSION_OPERATOR:>)(QualifiedName:bounds.width))(Block(ExpressionStatement(Assignment(SimpleName:width)(ASSIGNMENT_OPERATOR:=)(QualifiedName:ThumbIO.DEFAULT_SIZE_Y)))(ExpressionStatement(Assignment(SimpleName:height)(ASSIGNMENT_OPERATOR:=)(QualifiedName:ThumbIO.DEFAULT_SIZE_X)))))(VariableDeclarationStatement(SimpleType(SimpleName:Image))(VariableDeclarationFragment(SimpleName:thumb)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageConversion))(SimpleName:createQualityThumbImage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:largeThumb)(SimpleName:width)(SimpleName:height)(QualifiedName:SWT.HIGH)))))(IfStatement(InfixExpression(SimpleName:meta)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(QualifiedName:meta.width)(ASSIGNMENT_OPERATOR:=)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thumb))(SimpleName:getBounds))(SimpleName:width))))(ExpressionStatement(Assignment(QualifiedName:meta.height)(ASSIGNMENT_OPERATOR:=)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thumb))(SimpleName:getBounds))(SimpleName:height))))(VariableDeclarationStatement(SimpleType(SimpleName:MetaThumbData))(VariableDeclarationFragment(SimpleName:findThumbData)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SanExif))(SimpleName:findThumbData)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:getAbsolutePath))(BooleanLiteral:false)))))(IfStatement(InfixExpression(SimpleName:findThumbData)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(QualifiedName:meta.exifDate)(ASSIGNMENT_OPERATOR:=)(QualifiedName:findThumbData.exifDate)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:largeThumb))(SimpleName:dispose)))(IfStatement(InfixExpression(SimpleName:thumb)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IO))(SimpleName:saveImageSWT)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thumb))(SimpleName:getImageData))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savePath))(SimpleName:getAbsolutePath))(QualifiedName:SWT.IMAGE_JPEG)(NumberLiteral:85))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thumb))(SimpleName:dispose))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:createImageThumb)(METHOD_INVOCATION_ARGUMENTS(SimpleName:display)(SimpleName:file)(SimpleName:savePath)(SimpleName:meta)(BooleanLiteral:false)))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:createImageThumb)(METHOD_INVOCATION_ARGUMENTS(SimpleName:display)(SimpleName:file)(SimpleName:savePath)(SimpleName:meta)(BooleanLiteral:false))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:meta)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(QualifiedName:meta.exifDate)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(Block(ExpressionStatement(Assignment(QualifiedName:meta.exifDate)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ExifDate))(SimpleName:getExifDateFromLastModified)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file)))))))(ReturnStatement(SimpleName:meta))))))