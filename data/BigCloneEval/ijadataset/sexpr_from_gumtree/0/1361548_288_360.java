(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:String))(SimpleName:adicionarArquivo)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Usuario))(VariableDeclarationFragment(SimpleName:usuarioLogado)(MethodInvocation(SimpleName:getUsuarioLogado))))(IfStatement(InfixExpression(InfixExpression(SimpleName:descricao)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(InfixExpression(InfixExpression(SimpleName:fileUpload)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:fileUploadFileName)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileUploadFileName))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:fileUpload)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileUploadFileName))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:fileUploadFileName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:removeAcentos)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileUploadFileName))))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:extensao)(MethodInvocation(SimpleName:retornarExtensao)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileUploadFileName)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:extensaoPermitida)(METHOD_INVOCATION_ARGUMENTS(SimpleName:extensao))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:Exception))(StringLiteral:<STR>)))))(IfStatement(InfixExpression(InfixExpression(InfixExpression(SimpleName:descricao)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:descricao))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:descricao))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getText)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:Exception))(StringLiteral:<STR>)))))(IfStatement(InfixExpression(InfixExpression(InfixExpression(InfixExpression(SimpleName:longdesc)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:longdesc))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:longdesc))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getText)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:longdesc))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(SimpleName:getText)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(StringLiteral:<STR>)))))(Block(ExpressionStatement(Assignment(SimpleName:longdesc)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(VariableDeclarationStatement(SimpleType(SimpleName:Sitio))(VariableDeclarationFragment(SimpleName:sitio)(MethodInvocation(SimpleName:getSitioAtual))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:nomeRelativo)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:extensao)(StringLiteral:<STR>)(SimpleName:fileUploadFileName))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:nomeRelativoFisico)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sitio))(SimpleName:getNoPastaArquivos))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:extensao)(StringLiteral:<STR>)(SimpleName:fileUploadFileName))))(VariableDeclarationStatement(SimpleType(SimpleName:Arquivo))(VariableDeclarationFragment(SimpleName:arquivoDB)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivoDao))(SimpleName:select)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nomeRelativo)(MethodInvocation(SimpleName:getSitioAtual))))))(IfStatement(InfixExpression(SimpleName:arquivoDB)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SecurityManager))(SimpleName:podeAlterarArquivo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:usuarioLogado)(SimpleName:arquivoDB)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:theFile)(NullLiteral)))(IfStatement(InfixExpression(MethodInvocation(SimpleName:getArquivosPath))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(Assignment(SimpleName:theFile)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(MethodInvocation(SimpleName:getArquivosPath))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:fileUploadFileName)))))(ExpressionStatement(Assignment(SimpleName:theFile)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fileUploadFileName))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileUpload)(SimpleName:theFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:addActionMessage)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SUBSTITUIR))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:fileUploadFileName))))))(ExpressionStatement(Assignment(SimpleName:noArquivo)(ASSIGNMENT_OPERATOR:=)(SimpleName:fileUploadFileName)))(ReturnStatement(StringLiteral:<STR>)))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivoDB))(SimpleName:getNuPermissao))(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:SETOR))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ReturnStatement(SimpleName:INPUT))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fullFileName)(NullLiteral)))(IfStatement(InfixExpression(MethodInvocation(SimpleName:getArquivosPath))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:fullFileName)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(SimpleName:getArquivosPath))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nomeRelativoFisico)))))(Block(ExpressionStatement(Assignment(SimpleName:fullFileName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nomeRelativoFisico)))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:theFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:fullFileName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileUpload)(SimpleName:theFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fullFileName)))))(ExpressionStatement(Assignment(SimpleName:arquivo)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Arquivo)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivo))(SimpleName:setNoArquivo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nomeRelativo))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivo))(SimpleName:setDeArquivo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:descricao))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivo))(SimpleName:setLongdesc)(METHOD_INVOCATION_ARGUMENTS(SimpleName:longdesc))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivo))(SimpleName:setNuUsuario)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:getNuUsuario)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivo))(SimpleName:setNuSetor)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:getSetor)))(SimpleName:getNuSetor)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivo))(SimpleName:setNuPermissao)(METHOD_INVOCATION_ARGUMENTS(SimpleName:nuPermissao))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivo))(SimpleName:setSitio)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getSitioAtual)))))(IfStatement(InfixExpression(SimpleName:arquivoDB)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivoDao))(SimpleName:create)(METHOD_INVOCATION_ARGUMENTS(SimpleName:arquivo))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:addActionMessage)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logDao))(SimpleName:addLog)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getUsuarioLogado))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nomeRelativo)(StringLiteral:<STR>))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivoDB))(SimpleName:setDeArquivo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:descricao))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:arquivoDao))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:arquivoDB))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:addActionMessage)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logDao))(SimpleName:addLog)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getUsuarioLogado))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nomeRelativo)(StringLiteral:<STR>))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:usuarioLogado))(SimpleName:addActionError)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))(ReturnStatement(SimpleName:INPUT)))))))(ReturnStatement(SimpleName:SUCCESS))))))