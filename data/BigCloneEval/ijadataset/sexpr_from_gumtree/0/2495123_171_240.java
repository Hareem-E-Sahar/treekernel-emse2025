(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:connectAndLogin)(SingleVariableDeclaration(SimpleType(SimpleName:SecurityAuthority))(SimpleName:authority))(SimpleType(SimpleName:XMPPException))(SimpleType(SimpleName:OperationFailedException))(Block(SynchronizedStatement(SimpleName:initializationLock)(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:password)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JabberActivator))(SimpleName:getProtocolProviderFactory)))(SimpleName:loadPassword)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getAccountID))))))(IfStatement(InfixExpression(SimpleName:password)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:UserCredentials))(VariableDeclarationFragment(SimpleName:credentials)(ClassInstanceCreation(SimpleType(SimpleName:UserCredentials)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:credentials))(SimpleName:setUserName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccountID)))(SimpleName:getUserID)))))(ExpressionStatement(Assignment(SimpleName:credentials)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:authority))(SimpleName:obtainCredentials)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ProtocolNames.JABBER)(SimpleName:credentials)))))(IfStatement(InfixExpression(SimpleName:credentials)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(SimpleName:fireRegistrationStateChanged)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getRegistrationState))(QualifiedName:RegistrationState.UNREGISTERED)(QualifiedName:RegistrationStateChangeEvent.REASON_USER_REQUEST)(StringLiteral:<STR>))))(ReturnStatement)))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension))(VariableDeclarationFragment(SimpleName:pass)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:credentials))(SimpleName:getPassword))))(IfStatement(InfixExpression(SimpleName:pass)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(SimpleName:fireRegistrationStateChanged)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getRegistrationState))(QualifiedName:RegistrationState.UNREGISTERED)(QualifiedName:RegistrationStateChangeEvent.REASON_USER_REQUEST)(StringLiteral:<STR>))))(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:password)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:String))(SimpleName:pass))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:credentials))(SimpleName:isPasswordPersistent))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JabberActivator))(SimpleName:getProtocolProviderFactory)))(SimpleName:storePassword)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getAccountID))(SimpleName:password))))))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:userID)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:parseName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccountID)))(SimpleName:getUserID))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:serviceName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:parseServer)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccountID)))(SimpleName:getUserID))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:serverAddress)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccountID)))(SimpleName:getAccountProperties)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ProtocolProviderFactory.SERVER_ADDRESS))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:serverPort)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccountID)))(SimpleName:getAccountProperties)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ProtocolProviderFactory.SERVER_PORT))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:accountResource)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccountID)))(SimpleName:getAccountProperties)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ProtocolProviderFactory.RESOURCE))))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:hosts)(Dimension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NetworkUtils))(SimpleName:getSRVRecords)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:serviceName))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:hosts)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(QualifiedName:hosts.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:trace)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ArrayAccess(SimpleName:hosts)(NumberLiteral:0))))))(ExpressionStatement(Assignment(SimpleName:serverAddress)(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:hosts)(NumberLiteral:0)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ParseException))(SimpleName:ex1))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex1))(SimpleName:getMessage)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Roster))(SimpleName:setDefaultSubscriptionMode)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Roster.SubscriptionMode.manual))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:ConnectionConfiguration))(VariableDeclarationFragment(SimpleName:confConn)(ClassInstanceCreation(SimpleType(SimpleName:ConnectionConfiguration))(SimpleName:serverAddress)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:serverPort)))(SimpleName:serviceName))))(ExpressionStatement(Assignment(SimpleName:connection)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:XMPPConnection))(SimpleName:confConn))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:connect))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:XMPPException))(SimpleName:exc))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccountID)))(SimpleName:getAccountUniqueID)))(SimpleName:exc))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OperationFailedException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getAccountID)))(SimpleName:getAccountUniqueID)))(QualifiedName:OperationFailedException.NETWORK_FAILURE)(SimpleName:exc))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:addConnectionListener)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:JabberConnectionListener))))))(ExpressionStatement(MethodInvocation(SimpleName:fireRegistrationStateChanged)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getRegistrationState))(QualifiedName:RegistrationState.REGISTERING)(QualifiedName:RegistrationStateChangeEvent.REASON_NOT_SPECIFIED)(NullLiteral))))(IfStatement(InfixExpression(InfixExpression(SimpleName:accountResource)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:accountResource)(INFIX_EXPRESSION_OPERATOR:==)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(SimpleName:accountResource)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:login)(METHOD_INVOCATION_ARGUMENTS(SimpleName:userID)(SimpleName:password)(SimpleName:accountResource))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:isAuthenticated))(Block(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:reconnecting))(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getRoster)))(SimpleName:setSubscriptionMode)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Roster.SubscriptionMode.manual))))(ExpressionStatement(MethodInvocation(SimpleName:fireRegistrationStateChanged)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getRegistrationState))(QualifiedName:RegistrationState.REGISTERED)(QualifiedName:RegistrationStateChangeEvent.REASON_NOT_SPECIFIED)(NullLiteral)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:fireRegistrationStateChanged)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getRegistrationState))(QualifiedName:RegistrationState.UNREGISTERED)(QualifiedName:RegistrationStateChangeEvent.REASON_NOT_SPECIFIED)(NullLiteral)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NumberFormatException))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:OperationFailedException))(StringLiteral:<STR>)(QualifiedName:OperationFailedException.INVALID_ACCOUNT_PROPERTIES)(SimpleName:ex))))))))(IfStatement(InfixExpression(MethodInvocation(SimpleName:getRegistrationState))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:RegistrationState.REGISTERED))(Block(ExpressionStatement(Assignment(SimpleName:discoveryManager)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServiceDiscoveryManager))(SimpleName:getInstanceFor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:discoveryManager))(SimpleName:setIdentityName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:discoveryManager))(SimpleName:setIdentityType)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:it)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:supportedFeatures))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:hasNext))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:discoveryManager))(SimpleName:addFeature)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:next))))))))))))))