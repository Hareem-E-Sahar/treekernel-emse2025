(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:indexDirectory)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:dir))(SingleVariableDeclaration(SimpleType(SimpleName:PhotoFolder))(SimpleName:folder))(Block(IfStatement(SimpleName:createDirIndexers)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dirIndexers))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DirectoryIndexer))(SimpleName:dir)(SimpleName:folder)(SimpleName:vol)))))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Map))(SimpleType(SimpleName:String))(SimpleType(SimpleName:PhotoFolder)))(VariableDeclarationFragment(SimpleName:folders)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashMap))(SimpleType(SimpleName:String))(SimpleType(SimpleName:PhotoFolder))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:PhotoFolder))(SimpleName:f))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folder))(SimpleName:getSubfolders))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folders))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getName))(SimpleName:f))))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:File))(Dimension))(VariableDeclarationFragment(SimpleName:dirEntries)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dir))(SimpleName:listFiles))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:d))(SimpleName:dirEntries)(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:d))(SimpleName:isDirectory))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:d))(SimpleName:getName)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(ExpressionStatement(PostfixExpression(SimpleName:folderCount)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(SimpleType(SimpleName:PhotoFolder))(VariableDeclarationFragment(SimpleName:f)(NullLiteral)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folders))(SimpleName:containsKey)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:d))(SimpleName:getName))))(Block(ExpressionStatement(Assignment(SimpleName:f)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folders))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:d))(SimpleName:getName)))))))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:CreatePhotoFolderCommand))(VariableDeclarationFragment(SimpleName:cmd)(ClassInstanceCreation(SimpleType(SimpleName:CreatePhotoFolderCommand))(SimpleName:folder)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:d))(SimpleName:getName))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:pathBuf)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folder))(SimpleName:getExternalDir)))(SimpleName:getPath)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pathBuf))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pathBuf))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pathBuf))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:d))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cmd))(SimpleName:setExtDir)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folder))(SimpleName:getExternalDir)))(SimpleName:getVolume))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pathBuf))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cmdHandler))(SimpleName:executeCommand)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cmd))))(ExpressionStatement(Assignment(SimpleName:f)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:PhotoFolder))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:merge)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cmd))(SimpleName:getCreatedFolder)))))))(ExpressionStatement(PostfixExpression(SimpleName:newFolderCount)(POSTFIX_EXPRESSION_OPERATOR:++))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:CommandException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:ex)))))))))(ExpressionStatement(MethodInvocation(SimpleName:indexDirectory)(METHOD_INVOCATION_ARGUMENTS(SimpleName:d)(SimpleName:f))))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:PhotoFolder))(SimpleName:f))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:folders))(SimpleName:values))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:DeletePhotoFolderCommand))(VariableDeclarationFragment(SimpleName:deleteCmd)(ClassInstanceCreation(SimpleType(SimpleName:DeletePhotoFolderCommand))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:f))(SimpleName:getUuid)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cmdHandler))(SimpleName:executeCommand)(METHOD_INVOCATION_ARGUMENTS(SimpleName:deleteCmd))))(ExpressionStatement(PostfixExpression(SimpleName:deletedFolderCount)(POSTFIX_EXPRESSION_OPERATOR:++))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:CommandException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:ex)))))))))))))