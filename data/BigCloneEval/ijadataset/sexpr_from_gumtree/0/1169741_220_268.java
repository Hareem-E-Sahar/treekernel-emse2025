(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:runBody)(Block(VariableDeclarationStatement(SimpleType(SimpleName:ProgressCallback))(VariableDeclarationFragment(SimpleName:prog)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getProgressCallback))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:SMDITransactionReport))(VariableDeclarationFragment(SimpleName:rep)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:ps)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getPacketSizeInBytes))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prog))(SimpleName:updateProgress)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(TryStatement(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bytesOutstanding)(InfixExpression(SimpleName:len)(INFIX_EXPRESSION_OPERATOR:*)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:af))(SimpleName:getSampleSizeInBits))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:8)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:af))(SimpleName:getChannels)))))(ExpressionStatement(Assignment(SimpleName:rep)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:IN_beginTransfer)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getHAID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getSample))(SimpleName:ps)))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:tot)(SimpleName:bytesOutstanding)))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:gc_pass_tot)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:packet)(NumberLiteral:0)))(WhileStatement(InfixExpression(SimpleName:bytesOutstanding)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:rep)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:IN_sendNextPacket)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getHAID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getSample))(PostfixExpression(SimpleName:packet)(POSTFIX_EXPRESSION_OPERATOR:++))(SimpleName:ps)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:packetData)(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:SMDIMsg.DataPacket))(SimpleName:getData)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rep))(SimpleName:getReply))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:packetData)(NumberLiteral:0)(QualifiedName:packetData.length))))(ExpressionStatement(Assignment(SimpleName:bytesOutstanding)(ASSIGNMENT_OPERATOR:-=)(QualifiedName:packetData.length)))(ExpressionStatement(Assignment(SimpleName:gc_pass_tot)(ASSIGNMENT_OPERATOR:+=)(QualifiedName:packetData.length)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prog))(SimpleName:isCancelled))(Block(ExpressionStatement(MethodInvocation(SimpleName:tryAbort)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getHAID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ri))(SimpleName:getID)))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:SmdiTransferAbortedException))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prog))(SimpleName:updateProgress)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:tot)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:bytesOutstanding)))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:tot))))))(Block(IfStatement(InfixExpression(SimpleName:gc_pass_tot)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:GC_BYTE_THRESHOLD))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:gc)))(ExpressionStatement(Assignment(SimpleName:gc_pass_tot)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pos))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SmdiOutOfRangeException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SmdiTransferAbortedException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SmdiNoMemoryException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SMDILogicException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SmdiSampleEmptyException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prog))(SimpleName:updateProgress)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))))))