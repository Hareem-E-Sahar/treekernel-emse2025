(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:transactionApplied)(SingleVariableDeclaration(SimpleType(QualifiedName:Transaction.Data))(SimpleName:xa))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:rollback))(Block(AssertStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:holdsLock)(METHOD_INVOCATION_ARGUMENTS(SimpleName:writeLock))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fieldChanged))(SimpleName:clear)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:structureChanged))(SimpleName:clear)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:getQueue)))(SimpleName:restore)(METHOD_INVOCATION_ARGUMENTS(SimpleName:xa))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:resetCursor)))(TryStatement(Block(IfStatement(SimpleName:rollback)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:supplyInverse)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:supply)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)))))))(CatchClause(SingleVariableDeclaration(SimpleType(QualifiedName:java.io.IOException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:FatalPersistenceException))(SimpleName:e))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:structureChanged))(SimpleName:isEmpty)))(Block(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:itemMap))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:--))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:itemMap))(SimpleName:setValueAt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i)(NullLiteral))))))(ExpressionStatement(PostfixExpression(SimpleName:stamp)(POSTFIX_EXPRESSION_OPERATOR:++)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:TreeDiff))))(SimpleName:compare)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldTree)(ThisExpression)(ThisExpression)(ThisExpression)(SimpleName:treeMulticaster))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:root))(SimpleName:updateChildren)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fieldChanged))(SimpleName:isEmpty)))(Block(ExpressionStatement(MethodInvocation(SimpleName:updateFields)(METHOD_INVOCATION_ARGUMENTS(SimpleName:root))))))))))