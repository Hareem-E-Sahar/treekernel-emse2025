(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:int)(SimpleName:saveFile)(SingleVariableDeclaration(SimpleType(SimpleName:Spreadsheet))(SimpleName:sheet))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:promptForName))(Block(VariableDeclarationStatement(SimpleType(SimpleName:PipedInputStream))(VariableDeclarationFragment(SimpleName:pipeIn)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:PipedOutputStream))(VariableDeclarationFragment(SimpleName:pipeOut)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileSaveService))(VariableDeclarationFragment(SimpleName:fss)(CastExpression(SimpleType(SimpleName:FileSaveService))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServiceManager))(SimpleName:lookup)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(IfStatement(InfixExpression(SimpleName:fss)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement(QualifiedName:Controller.CANCEL_OPTION))))(ExpressionStatement(Assignment(SimpleName:pipeIn)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:PipedInputStream)))))(ExpressionStatement(Assignment(SimpleName:pipeOut)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:PipedOutputStream))(SimpleName:pipeIn))))(VariableDeclarationStatement(SimpleType(SimpleName:Thread))(VariableDeclarationFragment(SimpleName:writeThread)(ClassInstanceCreation(SimpleType(SimpleName:Thread))(ClassInstanceCreation(SimpleType(SimpleName:Writer))(SimpleName:sheet)(SimpleName:pipeOut)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeThread))(SimpleName:setDaemon)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeThread))(SimpleName:start)))(VariableDeclarationStatement(SimpleType(SimpleName:Controller))(VariableDeclarationFragment(SimpleName:controller)(MethodInvocation(SimpleName:getController))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:hint)(MethodInvocation(SimpleName:getClue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_fc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:controller))(SimpleName:getSheetSource))))))(IfStatement(InfixExpression(SimpleName:promptForName)(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:_fc)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(ExpressionStatement(Assignment(SimpleName:_fc)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fss))(SimpleName:saveAsFileDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hint)(ArrayCreation(ArrayType(SimpleType(SimpleName:String))(Dimension))(ArrayInitializer(StringLiteral:<STR>)))(SimpleName:_fc))))))(Block(ExpressionStatement(Assignment(SimpleName:_fc)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fss))(SimpleName:saveFileDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hint)(ArrayCreation(ArrayType(SimpleType(SimpleName:String))(Dimension))(ArrayInitializer(StringLiteral:<STR>)))(SimpleName:pipeIn)(SimpleName:hint)))))))(IfStatement(InfixExpression(SimpleName:_fc)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement(QualifiedName:Controller.CANCEL_OPTION))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:controller))(SimpleName:setSheetSource)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:URL))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_fc))(SimpleName:getName)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:controller))(SimpleName:setSheetDirty)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pipeIn))(SimpleName:close)))(ReturnStatement(QualifiedName:Controller.YES_OPTION)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:x))(Block(ExpressionStatement(MethodInvocation(SimpleName:displayError)(METHOD_INVOCATION_ARGUMENTS(SimpleName:x))))(ReturnStatement(QualifiedName:Controller.CANCEL_OPTION)))))))))