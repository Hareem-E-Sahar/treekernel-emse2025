(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:startTransfer)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:direction))(Block(ExpressionStatement(Assignment(SimpleName:currentDrive)(ASSIGNMENT_OPERATOR:=)(InfixExpression(ArrayAccess(SimpleName:fifo)(NumberLiteral:1))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:1))))(VariableDeclarationStatement(SimpleType(SimpleName:FloppyDrive))(VariableDeclarationFragment(SimpleName:drive)(MethodInvocation(SimpleName:getCurrentDrive))))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:kt)(ArrayAccess(SimpleName:fifo)(NumberLiteral:2))))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:kh)(ArrayAccess(SimpleName:fifo)(NumberLiteral:3))))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:ks)(ArrayAccess(SimpleName:fifo)(NumberLiteral:4))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:didSeek)(BooleanLiteral:false)))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:drive))(SimpleName:seek)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(NumberLiteral:0xff)(INFIX_EXPRESSION_OPERATOR:&)(SimpleName:kh))(InfixExpression(NumberLiteral:0xff)(INFIX_EXPRESSION_OPERATOR:&)(SimpleName:kt))(InfixExpression(NumberLiteral:0xff)(INFIX_EXPRESSION_OPERATOR:&)(SimpleName:ks))(QualifiedName:drive.sectorCount)))(SwitchCase(NumberLiteral:2))(ExpressionStatement(MethodInvocation(SimpleName:stopTransfer)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:byte)(NumberLiteral:0x40))(CastExpression(PrimitiveType:byte)(NumberLiteral:0x00))(CastExpression(PrimitiveType:byte)(NumberLiteral:0x00)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:3))(ASSIGNMENT_OPERATOR:=)(SimpleName:kt)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:4))(ASSIGNMENT_OPERATOR:=)(SimpleName:kh)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:5))(ASSIGNMENT_OPERATOR:=)(SimpleName:ks)))(ReturnStatement)(SwitchCase(NumberLiteral:3))(ExpressionStatement(MethodInvocation(SimpleName:stopTransfer)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:byte)(NumberLiteral:0x40))(CastExpression(PrimitiveType:byte)(NumberLiteral:0x80))(CastExpression(PrimitiveType:byte)(NumberLiteral:0x00)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:3))(ASSIGNMENT_OPERATOR:=)(SimpleName:kt)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:4))(ASSIGNMENT_OPERATOR:=)(SimpleName:kh)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:5))(ASSIGNMENT_OPERATOR:=)(SimpleName:ks)))(ReturnStatement)(SwitchCase(NumberLiteral:4))(ExpressionStatement(MethodInvocation(SimpleName:stopTransfer)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:byte)(NumberLiteral:0x40))(CastExpression(PrimitiveType:byte)(NumberLiteral:0x00))(CastExpression(PrimitiveType:byte)(NumberLiteral:0x00)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:3))(ASSIGNMENT_OPERATOR:=)(SimpleName:kt)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:4))(ASSIGNMENT_OPERATOR:=)(SimpleName:kh)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:fifo)(NumberLiteral:5))(ASSIGNMENT_OPERATOR:=)(SimpleName:ks)))(ReturnStatement)(SwitchCase(NumberLiteral:1))(ExpressionStatement(Assignment(SimpleName:didSeek)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)(SwitchCase)(BreakStatement))(ExpressionStatement(Assignment(SimpleName:dataDirection)(ASSIGNMENT_OPERATOR:=)(SimpleName:direction)))(ExpressionStatement(Assignment(SimpleName:dataOffset)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ExpressionStatement(Assignment(SimpleName:dataState)(ASSIGNMENT_OPERATOR:=)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:dataState)(INFIX_EXPRESSION_OPERATOR:&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:~)(SimpleName:STATE_STATE))))(INFIX_EXPRESSION_OPERATOR:|)(SimpleName:STATE_DATA))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(ArrayAccess(SimpleName:fifo)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0x80)))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:dataState)(ASSIGNMENT_OPERATOR:|=)(SimpleName:STATE_MULTI)))(ExpressionStatement(Assignment(SimpleName:dataState)(ASSIGNMENT_OPERATOR:&=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:~)(SimpleName:STATE_MULTI)))))(IfStatement(SimpleName:didSeek)(ExpressionStatement(Assignment(SimpleName:dataState)(ASSIGNMENT_OPERATOR:|=)(SimpleName:STATE_SEEK)))(ExpressionStatement(Assignment(SimpleName:dataState)(ASSIGNMENT_OPERATOR:&=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:~)(SimpleName:STATE_SEEK)))))(IfStatement(InfixExpression(ArrayAccess(SimpleName:fifo)(NumberLiteral:5))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0x00))(ExpressionStatement(Assignment(SimpleName:dataLength)(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:fifo)(NumberLiteral:8))))(Block(ExpressionStatement(Assignment(SimpleName:dataLength)(ASSIGNMENT_OPERATOR:=)(InfixExpression(NumberLiteral:128)(INFIX_EXPRESSION_OPERATOR:<<)(ArrayAccess(SimpleName:fifo)(NumberLiteral:5)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:temp)(InfixExpression(InfixExpression(QualifiedName:drive.sectorCount)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:ks))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(ArrayAccess(SimpleName:fifo)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:0x80)))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:temp)(ASSIGNMENT_OPERATOR:+=)(QualifiedName:drive.sectorCount))))(ExpressionStatement(Assignment(SimpleName:dataLength)(ASSIGNMENT_OPERATOR:*=)(SimpleName:temp)))))(ExpressionStatement(Assignment(SimpleName:eot)(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:fifo)(NumberLiteral:6))))(IfStatement(SimpleName:dmaEnabled)(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dmaMode)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dma))(SimpleName:getChannelMode)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:DMA_CHANNEL)(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:3))))))(ExpressionStatement(Assignment(SimpleName:dmaMode)(ASSIGNMENT_OPERATOR:=)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:dmaMode)(INFIX_EXPRESSION_OPERATOR:>>>)(NumberLiteral:2)))(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:3))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(InfixExpression(SimpleName:direction)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:DIRECTION_SCANE))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:direction)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:DIRECTION_SCANL)))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:direction)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:DIRECTION_SCANH))))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:dmaMode)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:direction)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:DIRECTION_WRITE))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:dmaMode)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:2))))(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:direction)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:DIRECTION_READ))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:dmaMode)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1)))))(Block(ExpressionStatement(Assignment(SimpleName:state)(ASSIGNMENT_OPERATOR:|=)(SimpleName:CONTROL_BUSY)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dma))(SimpleName:holdDmaRequest)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:DMA_CHANNEL)(INFIX_EXPRESSION_OPERATOR:&)(NumberLiteral:3)))))(ReturnStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOGGING))(SimpleName:log)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Level.INFO)(StringLiteral:<STR>)(ArrayCreation(ArrayType(SimpleType(SimpleName:Object))(Dimension))(ArrayInitializer(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JInteger))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dmaMode)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JInteger))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:direction)))))))))))(ExpressionStatement(MethodInvocation(SimpleName:raiseIRQ)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0x00))))))))