(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:rollback)(Block(TryStatement(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:readOnly))(Block(ExpressionStatement(MethodInvocation(SimpleName:doActionEnsureAllInvoked)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ResourceAction))(SimpleType(SimpleName:StmResource)))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:doAction)(SingleVariableDeclaration(SimpleType(SimpleName:StmResource))(SimpleName:resource))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resource))(SimpleName:onReleaseLocks)(METHOD_INVOCATION_ARGUMENTS(ThisExpression(SimpleName:TransactionImpl)))))))))(TypeLiteral(SimpleType(SimpleName:RollbackFailedException)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeSet))(SimpleName:iterator))))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:doActionEnsureAllInvoked)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ResourceAction))(SimpleType(SimpleName:StmResource)))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:doAction)(SingleVariableDeclaration(SimpleType(SimpleName:StmResource))(SimpleName:resource))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resource))(SimpleName:onFinished)(METHOD_INVOCATION_ARGUMENTS(ThisExpression(SimpleName:TransactionImpl))(BooleanLiteral:true))))))))(TypeLiteral(SimpleType(SimpleName:RollbackFailedException)))(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:LinkedIterator))(SimpleType(SimpleName:StmResource)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeSet))(SimpleName:iterator))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:readSet))(SimpleName:iterator))))))))))))