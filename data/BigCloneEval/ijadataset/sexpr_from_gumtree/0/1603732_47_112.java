(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:doUpload)(SingleVariableDeclaration(SimpleType(SimpleName:JSONObject))(SimpleName:event))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:fileName))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:contentType))(SingleVariableDeclaration(SimpleType(QualifiedName:java.io.InputStream))(SimpleName:input))(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:size))(SimpleType(QualifiedName:java.io.IOException))(Block(ExpressionStatement(Assignment(SimpleName:theProgress)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ExpressionStatement(Assignment(SimpleName:theScale)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:5)))(ExpressionStatement(Assignment(SimpleName:isCanceled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(ExpressionStatement(Assignment(SimpleName:isFinished)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(ExpressionStatement(Assignment(SimpleName:theText)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fileName))))(VariableDeclarationStatement(SimpleType(QualifiedName:prisms.ui.UI))(VariableDeclarationFragment(SimpleName:ui)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:theSession))(SimpleName:getUI))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ui))(SimpleName:startTimedTask)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(QualifiedName:prisms.ui.UI.ProgressInformer))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:cancel)(SimpleType(SimpleName:IllegalStateException))(Block(ExpressionStatement(Assignment(SimpleName:isCanceled)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))(MethodDeclaration(Modifier:public)(PrimitiveType:int)(SimpleName:getTaskProgress)(Block(ReturnStatement(SimpleName:theProgress))))(MethodDeclaration(Modifier:public)(PrimitiveType:int)(SimpleName:getTaskScale)(Block(ReturnStatement(SimpleName:theScale))))(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:String))(SimpleName:getTaskText)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:theText)))))(ReturnStatement(SimpleName:theText))))(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:isCancelable)(Block(ReturnStatement(BooleanLiteral:true))))(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:isTaskDone)(Block(ReturnStatement(InfixExpression(SimpleName:isCanceled)(INFIX_EXPRESSION_OPERATOR:||)(SimpleName:isFinished))))))))))(ExpressionStatement(PostfixExpression(SimpleName:theProgress)(POSTFIX_EXPRESSION_OPERATOR:++)))(TryStatement(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:contentType))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(VariableDeclarationStatement(SimpleType(QualifiedName:java.io.ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:bos)(ClassInstanceCreation(SimpleType(QualifiedName:java.io.ByteArrayOutputStream)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:read)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:input))(SimpleName:read))))(WhileStatement(InfixExpression(SimpleName:read)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:read))))(ExpressionStatement(Assignment(SimpleName:read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:input))(SimpleName:read))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:content)(ClassInstanceCreation(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bos))(SimpleName:toByteArray)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fileName)(StringLiteral:<STR>)(SimpleName:contentType)(StringLiteral:<STR>)(SimpleName:size)(StringLiteral:<STR>)(SimpleName:content))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fileName)(StringLiteral:<STR>)(SimpleName:contentType)(StringLiteral:<STR>)(SimpleName:size))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:input))(SimpleName:close)))))(WhileStatement(InfixExpression(SimpleName:theProgress)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:theScale))(Block(IfStatement(SimpleName:isCanceled)(Block(ExpressionStatement(Assignment(SimpleName:theProgress)(ASSIGNMENT_OPERATOR:=)(SimpleName:theScale)))(ContinueStatement)))(ExpressionStatement(PostfixExpression(SimpleName:theProgress)(POSTFIX_EXPRESSION_OPERATOR:++)))(ExpressionStatement(Assignment(SimpleName:theText)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:theScale)(StringLiteral:<STR>)(SimpleName:theProgress))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:theText)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1000)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block)))))(ExpressionStatement(Assignment(SimpleName:isFinished)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))))