(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:shrinkTo)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:maxHeight))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:maxWidth))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:countOfBytes))(SingleVariableDeclaration(PrimitiveType:float)(SimpleName:percentTolerance))(SimpleType(SimpleName:Exception))(Block(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_image))(SimpleName:getHeight))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:maxHeight))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_image))(SimpleName:getWidth))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:maxWidth)))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:breite)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_image))(SimpleName:getWidth))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:hoehe)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_image))(SimpleName:getHeight))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:verhaeltnis)(InfixExpression(CastExpression(PrimitiveType:double)(SimpleName:breite))(INFIX_EXPRESSION_OPERATOR:/)(CastExpression(PrimitiveType:double)(SimpleName:hoehe)))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:breiteFaktor)(InfixExpression(CastExpression(PrimitiveType:double)(SimpleName:breite))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:maxWidth))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:hoeheFaktor)(InfixExpression(CastExpression(PrimitiveType:double)(SimpleName:hoehe))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:maxHeight))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:neueBreite)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:neueHoehe)(NumberLiteral:0)))(IfStatement(InfixExpression(InfixExpression(SimpleName:maxWidth)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:breite))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:maxHeight)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:hoehe)))(Block(ExpressionStatement(Assignment(SimpleName:neueBreite)(ASSIGNMENT_OPERATOR:=)(SimpleName:breite)))(ExpressionStatement(Assignment(SimpleName:neueHoehe)(ASSIGNMENT_OPERATOR:=)(SimpleName:hoehe))))(IfStatement(InfixExpression(SimpleName:hoeheFaktor)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:breiteFaktor))(Block(ExpressionStatement(Assignment(SimpleName:neueHoehe)(ASSIGNMENT_OPERATOR:=)(SimpleName:maxHeight)))(ExpressionStatement(Assignment(SimpleName:neueBreite)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(SimpleName:neueHoehe)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:verhaeltnis)))))))(Block(ExpressionStatement(Assignment(SimpleName:neueBreite)(ASSIGNMENT_OPERATOR:=)(SimpleName:maxWidth)))(ExpressionStatement(Assignment(SimpleName:neueHoehe)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(SimpleName:neueBreite)(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:verhaeltnis)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Image))(VariableDeclarationFragment(SimpleName:image)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_image))(SimpleName:getScaledInstance)(METHOD_INVOCATION_ARGUMENTS(SimpleName:neueBreite)(SimpleName:neueHoehe)(QualifiedName:Image.SCALE_AREA_AVERAGING)))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedImage))(VariableDeclarationFragment(SimpleName:bufferedImage)(ClassInstanceCreation(SimpleType(SimpleName:BufferedImage))(SimpleName:neueBreite)(SimpleName:neueHoehe)(QualifiedName:BufferedImage.TYPE_INT_BGR))))(VariableDeclarationStatement(SimpleType(SimpleName:Graphics2D))(VariableDeclarationFragment(SimpleName:tmpImg)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bufferedImage))(SimpleName:createGraphics))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tmpImg))(SimpleName:drawImage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:image)(NumberLiteral:0)(NumberLiteral:0)(NullLiteral))))(ExpressionStatement(Assignment(SimpleName:_image)(ASSIGNMENT_OPERATOR:=)(SimpleName:bufferedImage)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tmpImg))(SimpleName:dispose)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:size)(MethodInvocation(SimpleName:getSizeInBytes))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:range)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(CastExpression(PrimitiveType:float)(SimpleName:countOfBytes))(INFIX_EXPRESSION_OPERATOR:*)(ParenthesizedExpression(InfixExpression(SimpleName:percentTolerance)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:0.005F))))))))(IfStatement(InfixExpression(SimpleName:size)(INFIX_EXPRESSION_OPERATOR:<)(InfixExpression(SimpleName:countOfBytes)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:range)))(Block(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedImage))(VariableDeclarationFragment(SimpleName:image)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:float)(VariableDeclarationFragment(SimpleName:upperLimit)(NumberLiteral:1.0F)))(VariableDeclarationStatement(PrimitiveType:float)(VariableDeclarationFragment(SimpleName:lowerLimit)(NumberLiteral:0.0F)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lastsize)(NumberLiteral:0)))(DoStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:ImageWriter))(VariableDeclarationFragment(SimpleName:writer)(CastExpression(SimpleType(SimpleName:ImageWriter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageIO))(SimpleName:getImageWritersByFormatName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:next)))))(VariableDeclarationStatement(SimpleType(SimpleName:ImageWriteParam))(VariableDeclarationFragment(SimpleName:param)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:getDefaultWriteParam))))(VariableDeclarationStatement(PrimitiveType:float)(VariableDeclarationFragment(SimpleName:quality)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:upperLimit)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:lowerLimit)))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:2))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:param))(SimpleName:setCompressionMode)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ImageWriteParam.MODE_EXPLICIT))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:param))(SimpleName:setCompressionQuality)(METHOD_INVOCATION_ARGUMENTS(SimpleName:quality))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:bas)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:setOutput)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageIO))(SimpleName:createImageOutputStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bas))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(ClassInstanceCreation(SimpleType(SimpleName:IIOImage))(SimpleName:_image)(NullLiteral)(NullLiteral))(SimpleName:param))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:dispose)))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayInputStream))(VariableDeclarationFragment(SimpleName:basIn)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bas))(SimpleName:toByteArray)))))(ExpressionStatement(Assignment(SimpleName:image)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageIO))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:basIn)))))(ExpressionStatement(Assignment(SimpleName:size)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getSizeInBytes)(METHOD_INVOCATION_ARGUMENTS(SimpleName:image)))))(IfStatement(InfixExpression(SimpleName:size)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:countOfBytes))(Block(ExpressionStatement(Assignment(SimpleName:upperLimit)(ASSIGNMENT_OPERATOR:=)(SimpleName:quality))))(Block(ExpressionStatement(Assignment(SimpleName:lowerLimit)(ASSIGNMENT_OPERATOR:=)(SimpleName:quality)))))(ExpressionStatement(Assignment(SimpleName:range)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(CastExpression(PrimitiveType:float)(SimpleName:countOfBytes))(INFIX_EXPRESSION_OPERATOR:*)(ParenthesizedExpression(InfixExpression(SimpleName:percentTolerance)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:0.005F))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:size)(INFIX_EXPRESSION_OPERATOR:<)(InfixExpression(SimpleName:countOfBytes)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:range)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:size)(INFIX_EXPRESSION_OPERATOR:>)(InfixExpression(SimpleName:countOfBytes)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:range))))(Block(BreakStatement)))(IfStatement(InfixExpression(SimpleName:lastsize)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:size))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:lastsize)(ASSIGNMENT_OPERATOR:=)(SimpleName:size))))(BooleanLiteral:true))(ExpressionStatement(Assignment(SimpleName:_image)(ASSIGNMENT_OPERATOR:=)(SimpleName:image)))))))