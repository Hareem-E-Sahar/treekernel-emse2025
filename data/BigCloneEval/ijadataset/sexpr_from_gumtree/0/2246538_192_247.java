(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:boolean)(SimpleName:deleteRoleType)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:id))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:namespaceId))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:removeReferencesInRoleTypes))(SingleVariableDeclaration(SimpleType(SimpleName:DTSPermission))(SimpleName:permit))(SimpleType(SimpleName:SQLException))(SimpleType(SimpleName:PermissionException))(SimpleType(SimpleName:DTSValidationException))(Block(ExpressionStatement(MethodInvocation(SimpleName:checkPermission)(METHOD_INVOCATION_ARGUMENTS(SimpleName:permit)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:exist)(MethodInvocation(SimpleName:isRoleTypeUsed)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId)(SimpleName:id)))))(IfStatement(SimpleName:exist)(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DTSValidationException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ApelMsgHandler))(SimpleName:getInstance)))(SimpleName:getMsg)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:removeReferencesInRoleTypes))(Block(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:msgBuf)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer)))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:DTSTransferObject))(Dimension))(VariableDeclarationFragment(SimpleName:objects)(MethodInvocation(SimpleName:fetchRightIdentityReferences)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId)(SimpleName:id)))))(IfStatement(InfixExpression(QualifiedName:objects.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msgBuf))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(Assignment(SimpleName:objects)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:fetchParentReferences)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId)(SimpleName:id)))))(IfStatement(InfixExpression(QualifiedName:objects.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msgBuf))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msgBuf))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msgBuf))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msgBuf))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:DTSValidationException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:msgBuf))(SimpleName:toString))))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:sqlRightId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getDAO)))(SimpleName:getStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ROLE_TYPE_TABLE_KEY)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:sqlParent)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getDAO)))(SimpleName:getStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ROLE_TYPE_TABLE_KEY)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:sql)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getDAO)))(SimpleName:getStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ROLE_TYPE_TABLE_KEY)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:PreparedStatement))(VariableDeclarationFragment(SimpleName:pstmt)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:success)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:typeGid)(MethodInvocation(SimpleName:getGID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:namespaceId)(SimpleName:id)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:setAutoCommit)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:defaultLevel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getTransactionIsolation))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:setTransactionIsolation)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Connection.TRANSACTION_READ_COMMITTED))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:pstmt)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sqlRightId)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pstmt))(SimpleName:setLong)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:typeGid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pstmt))(SimpleName:executeUpdate)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pstmt))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:pstmt)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sqlParent)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pstmt))(SimpleName:setLong)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:typeGid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pstmt))(SimpleName:executeUpdate)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pstmt))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:pstmt)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sql)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pstmt))(SimpleName:setLong)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:typeGid))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:count)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pstmt))(SimpleName:executeUpdate))))(ExpressionStatement(Assignment(SimpleName:success)(ASSIGNMENT_OPERATOR:=)(ParenthesizedExpression(InfixExpression(SimpleName:count)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:commit))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SQLException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:rollback)))(ThrowStatement(SimpleName:e))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:setTransactionIsolation)(METHOD_INVOCATION_ARGUMENTS(SimpleName:defaultLevel))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:setAutoCommit)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(SimpleName:closeStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pstmt))))))(ReturnStatement(SimpleName:success))))))