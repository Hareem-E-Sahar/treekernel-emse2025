(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(PrimitiveType:int)(SimpleName:write)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:baseTarget))(SingleVariableDeclaration(SimpleType(SimpleName:InputStream))(SimpleName:input))(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:inputLength))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:chunkSize))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:useBase64))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:headerSize)(MethodInvocation(SimpleName:getHeaderSize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:useBase64)))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dataChunkSize)))(IfStatement(SimpleName:useBase64)(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:maxDataChunkSize)(InfixExpression(SimpleName:chunkSize)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:headerSize))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:rejected)(InfixExpression(SimpleName:maxDataChunkSize)(INFIX_EXPRESSION_OPERATOR:%)(NumberLiteral:3))))(ExpressionStatement(Assignment(SimpleName:dataChunkSize)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:maxDataChunkSize)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:rejected)))))(ExpressionStatement(Assignment(SimpleName:dataChunkSize)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:chunkSize)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:headerSize)))))(IfStatement(InfixExpression(SimpleName:dataChunkSize)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException))(StringLiteral:<STR>))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:lastChunkIndex)(ConditionalExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:inputLength)(INFIX_EXPRESSION_OPERATOR:%)(SimpleName:dataChunkSize))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0)))(InfixExpression(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(SimpleName:inputLength)(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:dataChunkSize))))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(SimpleName:inputLength)(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:dataChunkSize)))))))(IfStatement(InfixExpression(SimpleName:lastChunkIndex)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:65536))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:MessageDigest))(VariableDeclarationFragment(SimpleName:inputDigest)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:inputDigest)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageDigest))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NoSuchAlgorithmException))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:ex))))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:OutputFile))(Dimension))(VariableDeclarationFragment(SimpleName:outputFiles)(ArrayCreation(ArrayType(SimpleType(SimpleName:OutputFile))(Dimension(InfixExpression(SimpleName:lastChunkIndex)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:MessageDigest))(Dimension))(VariableDeclarationFragment(SimpleName:chunkDigests)(ArrayCreation(ArrayType(SimpleType(SimpleName:MessageDigest))(Dimension(InfixExpression(SimpleName:lastChunkIndex)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:int)(Dimension))(VariableDeclarationFragment(SimpleName:offsets)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(InfixExpression(SimpleName:lastChunkIndex)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:dataBytes)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(NumberLiteral:4096))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:cumulatedSize)(NumberLiteral:0)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:chunkIndex)(NumberLiteral:0)))(InfixExpression(SimpleName:chunkIndex)(INFIX_EXPRESSION_OPERATOR:<=)(SimpleName:lastChunkIndex))(PostfixExpression(SimpleName:chunkIndex)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:outputFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:baseTarget))(SimpleName:getCanonicalPath))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:chunkIndex)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:outputFiles)(SimpleName:chunkIndex))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:OutputFile))(SimpleName:outputFile)(SimpleName:useBase64))))(TryStatement(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:chunkDigests)(SimpleName:chunkIndex))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageDigest))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NoSuchAlgorithmException))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:ex))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:offsets)(SimpleName:chunkIndex))(ASSIGNMENT_OPERATOR:=)(SimpleName:cumulatedSize)))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dataSize)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:chunkIndex)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:lastChunkIndex)))(InfixExpression(SimpleName:inputLength)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:cumulatedSize))(SimpleName:dataChunkSize))))))(ExpressionStatement(Assignment(SimpleName:cumulatedSize)(ASSIGNMENT_OPERATOR:+=)(SimpleName:dataSize)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:remaining)(SimpleName:dataSize)))(WhileStatement(InfixExpression(SimpleName:remaining)(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:toRead)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(SimpleName:remaining)(QualifiedName:dataBytes.length)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nRead)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:input))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dataBytes)(NumberLiteral:0)(SimpleName:toRead)))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:nRead))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:EOFException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:remaining)(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:outputFiles)(SimpleName:chunkIndex)))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dataBytes)(NumberLiteral:0)(SimpleName:nRead))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:chunkDigests)(SimpleName:chunkIndex)))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dataBytes)(NumberLiteral:0)(SimpleName:nRead))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputDigest))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dataBytes)(NumberLiteral:0)(SimpleName:nRead))))(ExpressionStatement(Assignment(SimpleName:remaining)(ASSIGNMENT_OPERATOR:-=)(SimpleName:nRead)))))(IfStatement(InfixExpression(SimpleName:useBase64)(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:chunkIndex)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:lastChunkIndex))))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:padCnt)(InfixExpression(ParenthesizedExpression(InfixExpression(NumberLiteral:3)(INFIX_EXPRESSION_OPERATOR:-)(ParenthesizedExpression(InfixExpression(SimpleName:dataSize)(INFIX_EXPRESSION_OPERATOR:%)(NumberLiteral:3)))))(INFIX_EXPRESSION_OPERATOR:%)(NumberLiteral:3))))(IfStatement(InfixExpression(SimpleName:padCnt)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:padding)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:padCnt))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:outputFiles)(SimpleName:chunkIndex)))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:padding)(NumberLiteral:0)(SimpleName:padCnt))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:chunkDigests)(SimpleName:chunkIndex)))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:padding)(NumberLiteral:0)(SimpleName:padCnt))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputDigest))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:padding)(NumberLiteral:0)(SimpleName:padCnt))))))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:fileHash)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputDigest))(SimpleName:digest))))(IfStatement(InfixExpression(SimpleName:FILEHASH_SIZE)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:fileHash.length))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:fileHash.length)))))(IfStatement(InfixExpression(SimpleName:inputLength)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:cumulatedSize))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:inputLength)(StringLiteral:<STR>)(SimpleName:cumulatedSize)))))(ExpressionStatement(Assignment(SimpleName:cumulatedSize)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:chunkIndex)(NumberLiteral:0)))(InfixExpression(SimpleName:chunkIndex)(INFIX_EXPRESSION_OPERATOR:<=)(SimpleName:lastChunkIndex))(PostfixExpression(SimpleName:chunkIndex)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:thisChunkDataSize)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:chunkIndex)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:lastChunkIndex)))(SimpleName:dataChunkSize)(InfixExpression(SimpleName:inputLength)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:cumulatedSize)))))))(ExpressionStatement(Assignment(SimpleName:cumulatedSize)(ASSIGNMENT_OPERATOR:+=)(SimpleName:thisChunkDataSize)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:header)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MultiPartStore))(SimpleName:getHeaderDataAndPadCnt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:useBase64))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:arraycopy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileHash)(NumberLiteral:0)(SimpleName:header)(NumberLiteral:0)(QualifiedName:fileHash.length))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AArrayUtilities))(SimpleName:int2Bytes)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:int)(SimpleName:inputLength))(SimpleName:header)(InfixExpression(SimpleName:FILESIZE_OFFSET)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AArrayUtilities))(SimpleName:int2Bytes)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:offsets)(SimpleName:chunkIndex))(SimpleName:header)(InfixExpression(SimpleName:DATAOFFSET_OFFSET)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:AArrayUtilities))(SimpleName:int2Bytes)(METHOD_INVOCATION_ARGUMENTS(SimpleName:thisChunkDataSize)(SimpleName:header)(InfixExpression(SimpleName:DATASIZE_OFFSET)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:dataHash)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:chunkDigests)(SimpleName:chunkIndex)))(SimpleName:digest))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:arraycopy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dataHash)(NumberLiteral:0)(SimpleName:header)(InfixExpression(SimpleName:DATAHASH_OFFSET)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))(SimpleName:DATAHASH_SIZE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:outputFiles)(SimpleName:chunkIndex)))(SimpleName:writeHeaderAndClose)(METHOD_INVOCATION_ARGUMENTS(SimpleName:header))))))(ReturnStatement(InfixExpression(SimpleName:lastChunkIndex)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))))