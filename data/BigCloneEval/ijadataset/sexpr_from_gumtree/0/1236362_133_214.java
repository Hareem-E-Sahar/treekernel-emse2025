(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:messageReceived)(SingleVariableDeclaration(SimpleType(SimpleName:ChannelHandlerContext))(SimpleName:ctx))(SingleVariableDeclaration(SimpleType(SimpleName:MessageEvent))(SimpleName:e))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:NetworkPacket))(VariableDeclarationFragment(SimpleName:packet)(CastExpression(SimpleType(SimpleName:NetworkPacket))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getCode))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:LocalPacketFactory.CONNECTERRORPACKET))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:packet))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getLocalId))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelUtils.NOCHANNEL))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:toString))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))(SimpleName:getRemoteAddress))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Channels))(SimpleName:close)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))))(ReturnStatement))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getCode))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:LocalPacketFactory.KEEPALIVEPACKET))(Block(ExpressionStatement(Assignment(SimpleName:keepAlivedSent)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:KeepAlivePacket))(VariableDeclarationFragment(SimpleName:keepAlivePacket)(CastExpression(SimpleType(SimpleName:KeepAlivePacket))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LocalPacketCodec))(SimpleName:decodeNetworkPacket)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getBuffer)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:keepAlivePacket))(SimpleName:isToValidate))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:keepAlivePacket))(SimpleName:validate)))(VariableDeclarationStatement(SimpleType(SimpleName:NetworkPacket))(VariableDeclarationFragment(SimpleName:response)(ClassInstanceCreation(SimpleType(SimpleName:NetworkPacket))(QualifiedName:ChannelUtils.NOCHANNEL)(QualifiedName:ChannelUtils.NOCHANNEL)(SimpleName:keepAlivePacket))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Channels))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel))(SimpleName:response)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66ProtocolPacketException))(SimpleName:e1))(Block)))(ReturnStatement))))(VariableDeclarationStatement(SimpleType(SimpleName:LocalChannelReference))(VariableDeclarationFragment(SimpleName:localChannelReference)(NullLiteral)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getLocalId))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ChannelUtils.NOCHANNEL))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:packet)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))(SimpleName:getId)))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:localChannelReference)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NetworkTransaction))(SimpleName:createConnectionFromNetworkChannelStartup)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel))(SimpleName:packet))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66ProtocolSystemException))(SimpleName:e1))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:packet)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e1))(SimpleName:getMessage))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NetworkTransaction))(SimpleName:removeNetworkChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel))(NullLiteral))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ConnectionErrorPacket))(VariableDeclarationFragment(SimpleName:error)(ClassInstanceCreation(SimpleType(SimpleName:ConnectionErrorPacket))(StringLiteral:<STR>)(NullLiteral))))(ExpressionStatement(MethodInvocation(SimpleName:writeError)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getRemoteId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getLocalId))(SimpleName:error))))(ReturnStatement)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66ProtocolRemoteShutdownException))(SimpleName:e1))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Configuration.configuration))(SimpleName:getLocalTransaction)))(SimpleName:closeLocalChannelsFromNetworkChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Channels))(SimpleName:close)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))))(ReturnStatement)))))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getCode))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:LocalPacketFactory.ENDREQUESTPACKET))(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:localChannelReference)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Configuration.configuration))(SimpleName:getLocalTransaction)))(SimpleName:getClient)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getRemoteId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getLocalId)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66ProtocolSystemException))(SimpleName:e1))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LocalPacketCodec))(SimpleName:decodeNetworkPacket)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getBuffer))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66ProtocolPacketException))(SimpleName:e2))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:toString))))))))(ReturnStatement)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getCode))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:LocalPacketFactory.CONNECTERRORPACKET))(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:localChannelReference)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Configuration.configuration))(SimpleName:getLocalTransaction)))(SimpleName:getClient)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getRemoteId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getLocalId)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66ProtocolSystemException))(SimpleName:e1))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LocalPacketCodec))(SimpleName:decodeNetworkPacket)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getBuffer))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66ProtocolPacketException))(SimpleName:e2))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:toString))))))))(ReturnStatement)))))(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:localChannelReference)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Configuration.configuration))(SimpleName:getLocalTransaction)))(SimpleName:getClient)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getRemoteId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getLocalId)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66ProtocolSystemException))(SimpleName:e1))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NetworkTransaction))(SimpleName:isShuttingdownNetworkChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel))))(Block(ReturnStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:packet)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e1))(SimpleName:getMessage))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ConnectionErrorPacket))(VariableDeclarationFragment(SimpleName:error)(ClassInstanceCreation(SimpleType(SimpleName:ConnectionErrorPacket))(StringLiteral:<STR>)(NullLiteral))))(ExpressionStatement(MethodInvocation(SimpleName:writeError)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getRemoteId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getLocalId))(SimpleName:error))))(ReturnStatement)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Channels))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getLocalChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getBuffer)))))))))