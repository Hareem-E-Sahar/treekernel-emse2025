(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:handleStepError)(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:exception))(SimpleType(SimpleName:XAwareException))(Block(IfStatement(InstanceofExpression(SimpleName:exception)(SimpleType(SimpleName:XAwareEarlyTerminationException)))(Block(IfStatement(InstanceofExpression(SimpleName:exception)(SimpleType(SimpleName:XAwareExitException)))(Block(ExpressionStatement(MethodInvocation(SimpleName:handleExit)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:XAwareExitException))(SimpleName:exception)))))(ReturnStatement)))(IfStatement(InstanceofExpression(SimpleName:exception)(SimpleType(SimpleName:XAwareResponseException)))(Block(ExpressionStatement(MethodInvocation(SimpleName:handleResponse)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:XAwareResponseException))(SimpleName:exception)))))(ReturnStatement)))(ExpressionStatement(MethodInvocation(SimpleName:finishNode)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ThrowStatement(CastExpression(SimpleType(SimpleName:XAwareEarlyTerminationException))(SimpleName:exception)))))(VariableDeclarationStatement(SimpleType(SimpleName:XAwareException))(VariableDeclarationFragment(SimpleName:xawareException)(MethodInvocation(SimpleName:updateCurrentError)(METHOD_INVOCATION_ARGUMENTS(SimpleName:exception)))))(VariableDeclarationStatement(SimpleType(SimpleName:IScriptNode))(VariableDeclarationFragment(SimpleName:currentNode)(MethodInvocation(SimpleName:finishNode)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false)))))(IfStatement(InfixExpression(SimpleName:currentNode)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(SimpleName:xawareException))))(VariableDeclarationStatement(SimpleType(SimpleName:ITransactionContext))(VariableDeclarationFragment(SimpleName:parentTxContext)(NullLiteral)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:callStack))(SimpleName:isEmpty)))(Block(ExpressionStatement(Assignment(SimpleName:parentTxContext)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:peek)))(SimpleName:getTransactionContext))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:errorHandled)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentNode))(SimpleName:handleError)(METHOD_INVOCATION_ARGUMENTS(SimpleName:xawareException)(SimpleName:parentTxContext)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:errorHandled))(Block(TryStatement(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentNode))(SimpleName:startsNewChannelScope))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentNode))(SimpleName:getChannelScope)))(SimpleName:complete)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RuntimeException))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:errMsg)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:e))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:severe)(METHOD_INVOCATION_ARGUMENTS(SimpleName:errMsg)(SimpleName:CLASS_NAME)(StringLiteral:<STR>))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XAwareException))(SimpleName:errMsg)(SimpleName:xawareException)))))(Block(TryStatement(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentNode))(SimpleName:startsNewOutputStream))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentNode))(SimpleName:getOutputStreamer)))(SimpleName:closeStream))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RuntimeException))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:errMsg)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:e))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:severe)(METHOD_INVOCATION_ARGUMENTS(SimpleName:errMsg)(SimpleName:CLASS_NAME)(StringLiteral:<STR>))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:XAwareException))(SimpleName:errMsg)(SimpleName:xawareException))))))))(ThrowStatement(SimpleName:xawareException))))(ExpressionStatement(MethodInvocation(SimpleName:push)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentNode))))))))