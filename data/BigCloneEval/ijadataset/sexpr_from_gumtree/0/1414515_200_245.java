(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:long)(SimpleName:importSessionPartData)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:filename))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:channel))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:allowDuplicatePerson))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:allowDuplicateSessionPart))(SimpleType(SimpleName:UserException))(Block(ExpressionStatement(Assignment(SimpleName:impTxn)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DB))(SimpleName:beginTransaction))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:audit)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Audit)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:personDAO))(SimpleName:setTransaction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:impTxn))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:partDAO))(SimpleName:setTransaction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:impTxn))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDAO))(SimpleName:setTransaction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:impTxn))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:epochDAO))(SimpleName:setTransaction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:impTxn))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:auditDAO))(SimpleName:setTransaction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:impTxn))))(ExpressionStatement(MethodInvocation(SimpleName:validateFilename)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filename))))(ExpressionStatement(Assignment(SimpleName:file)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:filename))))(ExpressionStatement(Assignment(SimpleName:parser)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:EEGParser))(SimpleName:file)(SimpleName:channel))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:audit))(SimpleName:setFilename)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FilenameUtils))(SimpleName:getName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filename))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:audit))(SimpleName:setFileSize)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:length)))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:1024)(NumberLiteral:1024)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:audit))(SimpleName:setImportStartTime)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:audit))(SimpleName:setRecordsCount)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtil))(SimpleName:getRecordsCount)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:audit))(SimpleName:setSamplingRate)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getSamplingRate)))(SimpleName:value)))))(VariableDeclarationStatement(SimpleType(SimpleName:Person))(VariableDeclarationFragment(SimpleName:p)(MethodInvocation(SimpleName:parsePerson))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:personDAO))(SimpleName:exists)(METHOD_INVOCATION_ARGUMENTS(SimpleName:p))))(Block(ReturnStatement(MethodInvocation(SimpleName:importNewPersonData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:p))))))(VariableDeclarationStatement(SimpleType(SimpleName:Person))(VariableDeclarationFragment(SimpleName:personInDB)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:personDAO))(SimpleName:find)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p))(SimpleName:getFirstName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p))(SimpleName:getLastName))))))(IfStatement(SimpleName:allowDuplicatePerson)(Block(ReturnStatement(MethodInvocation(SimpleName:importNewPersonData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:p))))))(VariableDeclarationStatement(SimpleType(SimpleName:Date))(VariableDeclarationFragment(SimpleName:sleepStart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getSessionStartDate))))(VariableDeclarationStatement(SimpleType(SimpleName:SleepSession))(VariableDeclarationFragment(SimpleName:sleepInDB)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDAO))(SimpleName:findSleepSession)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sleepStart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:personInDB))(SimpleName:getId))))))(IfStatement(InfixExpression(SimpleName:sleepInDB)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement(MethodInvocation(SimpleName:importNewSleepSessionData)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:SleepSession))(SimpleName:sleepStart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getSamplingRate))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:personInDB))(SimpleName:getId))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Date))(VariableDeclarationFragment(SimpleName:partStart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getPartStartDate))))(VariableDeclarationStatement(SimpleType(SimpleName:SessionPart))(VariableDeclarationFragment(SimpleName:sessionPart)(ClassInstanceCreation(SimpleType(SimpleName:SessionPart))(SimpleName:partStart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:getChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sleepInDB))(SimpleName:getId)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:partDAO))(SimpleName:existsSessionPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:partStart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionPart))(SimpleName:getChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sleepInDB))(SimpleName:getId)))))(Block(ReturnStatement(MethodInvocation(SimpleName:importNewSessionPartData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sessionPart))))))(IfStatement(SimpleName:allowDuplicateSessionPart)(Block(ReturnStatement(MethodInvocation(SimpleName:importNewSessionPartData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sessionPart)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ApplicationException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DB))(SimpleName:abort)(METHOD_INVOCATION_ARGUMENTS(SimpleName:impTxn))))(ThrowStatement(SimpleName:e)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DB))(SimpleName:abort)(METHOD_INVOCATION_ARGUMENTS(SimpleName:impTxn))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:UserException))(QualifiedName:ErrorMessages.FILE_IMPORTED)))))))