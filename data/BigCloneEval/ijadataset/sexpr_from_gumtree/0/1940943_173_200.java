(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:TGChannel))(SimpleName:getFreeChannel)(SingleVariableDeclaration(PrimitiveType:short)(SimpleName:instrument))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:isPercussion))(Block(IfStatement(SimpleName:isPercussion)(Block(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:TGChannel))(SimpleName:newPercussionChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getFactory)))))))(VariableDeclarationStatement(PrimitiveType:short)(VariableDeclarationFragment(SimpleName:normalChannel)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(VariableDeclarationStatement(PrimitiveType:short)(VariableDeclarationFragment(SimpleName:effectChannel)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(VariableDeclarationStatement(ArrayType(PrimitiveType:boolean)(Dimension))(VariableDeclarationFragment(SimpleName:usedChannels)(MethodInvocation(SimpleName:getUsedChannels))))(VariableDeclarationStatement(ArrayType(PrimitiveType:boolean)(Dimension))(VariableDeclarationFragment(SimpleName:usedEffectChannels)(MethodInvocation(SimpleName:getUsedEffectChannels))))(ForStatement(VariableDeclarationExpression(PrimitiveType:short)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:MAX_CHANNELS))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:TGChannel))(SimpleName:isPercussionChannel)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ArrayAccess(SimpleName:usedChannels)(SimpleName:i)))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ArrayAccess(SimpleName:usedEffectChannels)(SimpleName:i))))(Block(ExpressionStatement(Assignment(SimpleName:normalChannel)(ASSIGNMENT_OPERATOR:=)(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:normalChannel)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0)))(SimpleName:i)(SimpleName:normalChannel))))(ExpressionStatement(Assignment(SimpleName:effectChannel)(ASSIGNMENT_OPERATOR:=)(ConditionalExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:effectChannel)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:normalChannel))))(SimpleName:i)(SimpleName:effectChannel))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:normalChannel)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:effectChannel)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0)))(Block(IfStatement(InfixExpression(SimpleName:normalChannel)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:effectChannel)(ASSIGNMENT_OPERATOR:=)(SimpleName:normalChannel))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:TGChannel))(VariableDeclarationFragment(SimpleName:songChannel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getLastTrack)))(SimpleName:getChannel))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:songChannel))(SimpleName:clone)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getFactory)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:TGChannel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getFactory)))(SimpleName:newChannel))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:setChannel)(METHOD_INVOCATION_ARGUMENTS(SimpleName:normalChannel))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:setEffectChannel)(METHOD_INVOCATION_ARGUMENTS(SimpleName:effectChannel))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:setInstrument)(METHOD_INVOCATION_ARGUMENTS(SimpleName:instrument))))(ReturnStatement(SimpleName:channel))))))