(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:indexPart)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nbByteSendInSecond)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nbByteRead)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nbByteWritten)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bufferLimit)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:startUpload)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:nbPart)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileToUpload))(SimpleName:getSize))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:packetSize))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:ServerSocketChannel))(VariableDeclarationFragment(SimpleName:serverSocketChannel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServerSocketChannel))(SimpleName:open))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverSocketChannel))(SimpleName:configureBlocking)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverSocketChannel))(SimpleName:socket)))(SimpleName:bind)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:InetSocketAddress))(SimpleName:port)))))(ExpressionStatement(Assignment(SimpleName:fileChannel)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileToUpload))(SimpleName:getPath))))(SimpleName:getChannel))))(ExpressionStatement(Assignment(SimpleName:socketChannel)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverSocketChannel))(SimpleName:accept))))(ExpressionStatement(Assignment(SimpleName:alive)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(WhileStatement(InfixExpression(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:indexPart)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getIndexPart))))(INFIX_EXPRESSION_OPERATOR:>)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:alive))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:indexPart)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:nbByteRead)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:readPart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:indexPart)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nbByteRead)))))(ExpressionStatement(Assignment(SimpleName:bufferLimit)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:position))(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:nbByteRead))(Block(ExpressionStatement(Assignment(SimpleName:bufferLimit)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:bufferLimit)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(InfixExpression(SimpleName:nbByteSendPerSecond)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:nbByteSendInSecond))))))(IfStatement(InfixExpression(SimpleName:bufferLimit)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:nbByteRead))(ExpressionStatement(Assignment(SimpleName:bufferLimit)(ASSIGNMENT_OPERATOR:=)(SimpleName:nbByteRead))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:bufferLimit)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:limit)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bufferLimit))))(IfStatement(InfixExpression(SimpleName:startUpload)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:startUpload)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis)))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:hasRemaining))(Block(ExpressionStatement(Assignment(SimpleName:nbByteWritten)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socketChannel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)))))(ExpressionStatement(Assignment(SimpleName:nbByteSendInSecond)(ASSIGNMENT_OPERATOR:+=)(SimpleName:nbByteWritten)))(ExpressionStatement(Assignment(SimpleName:totalByteWritten)(ASSIGNMENT_OPERATOR:+=)(SimpleName:nbByteWritten)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nbByteSendInSecond)(StringLiteral:<STR>)(SimpleName:totalByteWritten)))))))(IfStatement(InfixExpression(SimpleName:nbByteSendInSecond)(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:nbByteSendPerSecond))(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:time)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:startUpload))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:sleep)(InfixExpression(NumberLiteral:1000)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:time))))(IfStatement(InfixExpression(SimpleName:sleep)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sleep))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:sleep)(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:ie))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ie))(SimpleName:printStackTrace))))))))(IfStatement(InfixExpression(SimpleName:time)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:nbByteSendPerSecond)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:nbByteSendInSecond)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1000)))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:time))))))(ExpressionStatement(Assignment(SimpleName:nbByteSendPerSecond)(ASSIGNMENT_OPERATOR:*=)(NumberLiteral:10))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nbByteSendPerSecond)))))(ExpressionStatement(Assignment(SimpleName:startUpload)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ExpressionStatement(Assignment(SimpleName:nbByteSendInSecond)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socketChannel))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverSocketChannel))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ioe))(SimpleName:printStackTrace)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))))))