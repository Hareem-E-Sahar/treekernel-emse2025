(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(PrimitiveType:void)(SimpleName:createThumbnailPreviewImage)(SingleVariableDeclaration(SimpleType(SimpleName:IDiagramModel))(SimpleName:diagramModel))(SingleVariableDeclaration(SimpleType(SimpleName:Label))(SimpleName:label))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Shell))(VariableDeclarationFragment(SimpleName:shell)(ClassInstanceCreation(SimpleType(SimpleName:Shell)))))(VariableDeclarationStatement(SimpleType(SimpleName:GraphicalViewer))(VariableDeclarationFragment(SimpleName:diagramViewer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DiagramUtils))(SimpleName:createViewer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:diagramModel)(SimpleName:shell)))))(VariableDeclarationStatement(SimpleType(SimpleName:Rectangle))(VariableDeclarationFragment(SimpleName:bounds)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DiagramUtils))(SimpleName:getDiagramExtents)(METHOD_INVOCATION_ARGUMENTS(SimpleName:diagramViewer)))))(VariableDeclarationStatement(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:ratio)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(CastExpression(PrimitiveType:double)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:label))(SimpleName:getBounds))(SimpleName:width)))(INFIX_EXPRESSION_OPERATOR:/)(QualifiedName:bounds.width))(InfixExpression(CastExpression(PrimitiveType:double)(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:label))(SimpleName:getBounds))(SimpleName:height)))(INFIX_EXPRESSION_OPERATOR:/)(QualifiedName:bounds.height))))))))(VariableDeclarationStatement(SimpleType(SimpleName:Image))(VariableDeclarationFragment(SimpleName:image)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DiagramUtils))(SimpleName:createScaledImage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:diagramViewer)(SimpleName:ratio)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:label))(SimpleName:setImage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:image))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:shell))(SimpleName:dispose)))))))