(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:synchronized)(PrimitiveType:int)(SimpleName:read)(SingleVariableDeclaration(ArrayType(PrimitiveType:byte)(Dimension))(SimpleName:in))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:pos))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:len))(SimpleType(SimpleName:IOException))(Block(IfStatement(InfixExpression(SimpleName:len)(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0))(Block(ReturnStatement(NumberLiteral:0))))(WhileStatement(BooleanLiteral:true)(Block(IfStatement(SimpleName:bReadClosed)(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:readPos)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:writePos))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:bFull)))(Block(IfStatement(SimpleName:bWriteClosed)(Block(ReturnStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(Block(ExpressionStatement(MethodInvocation(SimpleName:notify)))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:wait))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>))))))(ContinueStatement)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:toCopy)))(IfStatement(InfixExpression(SimpleName:writePos)(INFIX_EXPRESSION_OPERATOR:<=)(SimpleName:readPos))(Block(ExpressionStatement(Assignment(SimpleName:toCopy)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:BUFF_SIZE)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:readPos)))))(Block(ExpressionStatement(Assignment(SimpleName:toCopy)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:writePos)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:readPos))))))(IfStatement(InfixExpression(SimpleName:toCopy)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:len))(Block(ExpressionStatement(Assignment(SimpleName:toCopy)(ASSIGNMENT_OPERATOR:=)(SimpleName:len)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:arraycopy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buff)(SimpleName:readPos)(SimpleName:in)(SimpleName:pos)(SimpleName:toCopy))))(ExpressionStatement(Assignment(SimpleName:readPos)(ASSIGNMENT_OPERATOR:+=)(SimpleName:toCopy)))(IfStatement(InfixExpression(SimpleName:readPos)(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:BUFF_SIZE))(Block(ExpressionStatement(Assignment(SimpleName:readPos)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))))(IfStatement(SimpleName:bFull)(Block(ExpressionStatement(Assignment(SimpleName:bFull)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(ExpressionStatement(MethodInvocation(SimpleName:notify)))))(ReturnStatement(SimpleName:toCopy))))))))