(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(Modifier:final)(PrimitiveType:boolean)(SimpleName:update)(SimpleType(SimpleName:RecordException))(Block(IfStatement(SimpleName:frozen)(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RecordException))(StringLiteral:<STR>)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:toReturn)(BooleanLiteral:false)))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType(SimpleType(SimpleName:Record))))(VariableDeclarationFragment(SimpleName:actualClass)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getClass))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:HashMap))(SimpleType(SimpleName:String))(SimpleType(SimpleName:Integer)))(VariableDeclarationFragment(SimpleName:columns)(MethodInvocation(SimpleName:getColumns)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:TableNameResolver))(SimpleName:getTableName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:actualClass)))))))(VariableDeclarationStatement(SimpleType(SimpleName:LoggableStatement))(VariableDeclarationFragment(SimpleName:pStat)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Connection))(VariableDeclarationFragment(SimpleName:conn)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConnectionManager))(SimpleName:getConnection))))(TryStatement(Block(IfStatement(MethodInvocation(SimpleName:exists))(Block(VariableDeclarationStatement(SimpleType(SimpleName:StatementBuilder))(VariableDeclarationFragment(SimpleName:builder)(ClassInstanceCreation(SimpleType(SimpleName:StatementBuilder))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:TableNameResolver))(SimpleName:getTableName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:actualClass)))(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:updates)(StringLiteral:<STR>)))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:key))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:columns))(SimpleName:keySet))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:key))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(Block(ExpressionStatement(Assignment(SimpleName:updates)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(SimpleName:key)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:key)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:Field))(VariableDeclarationFragment(SimpleName:f)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FieldHandler))(SimpleName:findField)(METHOD_INVOCATION_ARGUMENTS(SimpleName:actualClass)(SimpleName:key)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(SimpleName:key)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FieldHandler))(SimpleName:getValue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:f)(ThisExpression))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updates))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:updates))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:2)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FieldHandler))(SimpleName:getValue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FieldHandler))(SimpleName:findField)(METHOD_INVOCATION_ARGUMENTS(SimpleName:actualClass)(StringLiteral:<STR>)))(ThisExpression))))))(ExpressionStatement(Assignment(SimpleName:pStat)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:getPreparedStatement)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:log)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pStat))(SimpleName:getQueryString)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pStat))(SimpleName:executeUpdate))))(ExpressionStatement(Assignment(SimpleName:toReturn)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1)))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RecordException))(QualifiedName:Messages.SR_UPDATE_IMPOSSIBLE)))))(IfStatement(InfixExpression(SimpleName:childList)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InfixExpression(SimpleName:childObjects)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:childObjects)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashMap))(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType(SimpleType(SimpleName:Record))))(SimpleType(SimpleName:Record))))))))(EnhancedForStatement(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType(SimpleType(SimpleName:Record))))(SimpleName:c))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:childList))(SimpleName:keySet))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:childObjects))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:c))))(SimpleName:update)))))))(IfStatement(InfixExpression(SimpleName:childrenList)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InfixExpression(SimpleName:childrenObjects)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:childrenObjects)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashMap))(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType(SimpleType(SimpleName:Record))))(ParameterizedType(SimpleType(SimpleName:List))(WildcardType(SimpleType(SimpleName:Record))))))))))(EnhancedForStatement(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType(SimpleType(SimpleName:Record))))(SimpleName:c))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:childrenList))(SimpleName:keySet))(Block(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Record))(SimpleName:r))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:childrenObjects))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:c)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:r))(SimpleName:update)))))))))(IfStatement(InfixExpression(SimpleName:relatedList)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InfixExpression(SimpleName:childrenObjects)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:childrenObjects)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashMap))(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType(SimpleType(SimpleName:Record))))(ParameterizedType(SimpleType(SimpleName:List))(WildcardType(SimpleType(SimpleName:Record))))))))))(EnhancedForStatement(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:Class))(WildcardType(SimpleType(SimpleName:Record))))(SimpleName:c))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:relatedList))(SimpleName:keySet))(Block(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Record))(SimpleName:r))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:childrenObjects))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:c)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:r))(SimpleName:update)))))))))(ReturnStatement(SimpleName:toReturn)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:rollback))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SQLException))(SimpleName:e1))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RecordException))(StringLiteral:<STR>))))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RecordException))(SimpleName:e)))))(Block(TryStatement(Block(IfStatement(InfixExpression(SimpleName:pStat)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pStat))(SimpleName:close)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:commit)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SQLException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RecordException))(StringLiteral:<STR>))))))))))))