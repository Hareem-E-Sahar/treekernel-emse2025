(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(SimpleType(SimpleName:PopupMenu))(SimpleName:createPopupMenu)(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:connectionMenuContent)(MethodInvocation(SimpleName:getConnectionMenuContent))))(IfStatement(InfixExpression(InfixExpression(SimpleName:connectionMenuContent)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionMenuContent))(SimpleName:isEmpty)))(Block(ReturnStatement(NullLiteral)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionMenuContent))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1))(Block(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:menuContent)(MethodInvocation(SimpleName:getEndMenuContent)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionMenuContent))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:menuContent)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:menuContent))(SimpleName:isEmpty)))(Block(ReturnStatement(NullLiteral))))(VariableDeclarationStatement(SimpleType(SimpleName:ILabelProvider))(VariableDeclarationFragment(SimpleName:labelProvider)(MethodInvocation(SimpleName:getConnectionAndEndLabelProvider)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionMenuContent))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:handlerEP)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:handlerEP))(SimpleName:get))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:GraphicalViewer))(VariableDeclarationFragment(SimpleName:graphicalViewer)(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:GraphicalViewer))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:handlerEP))(SimpleName:get)))(SimpleName:getViewer))))))(VariableDeclarationStatement(SimpleType(SimpleName:PaletteRoot))(VariableDeclarationFragment(SimpleName:root)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:graphicalViewer))(SimpleName:getEditDomain)))(SimpleName:getPaletteViewer)))(SimpleName:getPaletteRoot))))(ExpressionStatement(Assignment(SimpleName:menuContent)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:groupMenuContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:root)(SimpleName:menuContent)(SimpleName:labelProvider)))))))(ExpressionStatement(Assignment(SimpleName:cachedMenu)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:WeakReference))(SimpleType(SimpleName:PopupMenu)))(ClassInstanceCreation(SimpleType(SimpleName:PopupMenu))(SimpleName:menuContent)(SimpleName:labelProvider)(AnonymousClassDeclaration(MethodDeclaration(Javadoc(TagElement(MethodRef(QualifiedName:org.eclipse.gmf.runtime.diagram.ui.menus.PopupMenu)(SimpleName:getResult))))(MarkerAnnotation(SimpleName:Override))(Modifier:public)(SimpleType(SimpleName:Object))(SimpleName:getResult)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:endResult)(SuperMethodInvocation(SimpleName:getResult))))(IfStatement(InfixExpression(SimpleName:endResult)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement(NullLiteral)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:resultList)(ClassInstanceCreation(SimpleType(SimpleName:ArrayList))(NumberLiteral:2))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resultList))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionMenuContent))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resultList))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ConditionalExpression(ParenthesizedExpression(InstanceofExpression(SimpleName:endResult)(SimpleType(SimpleName:List))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:List))(SimpleName:endResult))))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:List))(SimpleName:endResult))))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(SimpleName:endResult)))))(ReturnStatement(SimpleName:resultList))))))))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:menuContent)(ClassInstanceCreation(SimpleType(SimpleName:ArrayList)))))(ForStatement(VariableDeclarationExpression(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:iter)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connectionMenuContent))(SimpleName:iterator))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iter))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:connectionItem)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iter))(SimpleName:next))))(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:subMenuContent)(MethodInvocation(SimpleName:getEndMenuContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connectionItem)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:subMenuContent))(SimpleName:isEmpty))(Block(ContinueStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:PopupMenu))(VariableDeclarationFragment(SimpleName:subMenu)(ClassInstanceCreation(SimpleType(SimpleName:PopupMenu))(SimpleName:subMenuContent)(MethodInvocation(SimpleName:getEndLabelProvider)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:menuContent))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(QualifiedName:PopupMenu.CascadingMenu))(SimpleName:connectionItem)(SimpleName:subMenu)))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:menuContent))(SimpleName:isEmpty)))(Block(ExpressionStatement(Assignment(SimpleName:cachedMenu)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:WeakReference))(SimpleType(SimpleName:PopupMenu)))(ClassInstanceCreation(SimpleType(SimpleName:PopupMenu))(SimpleName:menuContent)(MethodInvocation(SimpleName:getConnectionLabelProvider)))))))))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cachedMenu))(SimpleName:get)))))))