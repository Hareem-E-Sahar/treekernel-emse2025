(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(NormalAnnotation(SimpleName:RequestMapping)(MemberValuePair(SimpleName:value)(StringLiteral:<STR>))(MemberValuePair(SimpleName:method)(QualifiedName:RequestMethod.POST)))(Modifier:public)(SimpleType(SimpleName:String))(SimpleName:saveUpdateProduct)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:request))(SingleVariableDeclaration(SimpleType(SimpleName:ModelMap))(SimpleName:modelMap))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:ModelAttribute)(StringLiteral:<STR>))(Modifier:final)(SimpleType(SimpleName:ProductDTO))(SimpleName:productDTO))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:RequestParam)(StringLiteral:<STR>))(Modifier:final)(SimpleType(SimpleName:MultipartFile))(SimpleName:productImage))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:RequestParam)(StringLiteral:<STR>))(Modifier:final)(SimpleType(SimpleName:Integer))(SimpleName:brand))(SingleVariableDeclaration(SingleMemberAnnotation(SimpleName:RequestParam)(StringLiteral:<STR>))(Modifier:final)(SimpleType(SimpleName:Integer))(SimpleName:category))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:isLoggedIn)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request))))(Block(ReturnStatement(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:Boolean))(VariableDeclarationFragment(SimpleName:result)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:fileProductImage)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getSession)))(SimpleName:getServletContext)))(SimpleName:getRealPath)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separatorChar)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productDTO))(SimpleName:getCode))(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dirProductImagesPj)(ClassInstanceCreation(SimpleType(SimpleName:File))(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fileProductImage)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productDTO))(SimpleName:getBrandDTO)))(SimpleName:setIdBrand)(METHOD_INVOCATION_ARGUMENTS(SimpleName:brand))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productDTO))(SimpleName:getCategoryDTO)))(SimpleName:setIdCategory)(METHOD_INVOCATION_ARGUMENTS(SimpleName:category))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:productDTO)(StringLiteral:<STR>)(SimpleName:brand)(StringLiteral:<STR>)(SimpleName:category)))))(TryStatement(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productDTO))(SimpleName:getIdProduct))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:result)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:catalogsService)))(SimpleName:addProduct)(METHOD_INVOCATION_ARGUMENTS(SimpleName:productDTO))))))(Block(ExpressionStatement(Assignment(SimpleName:result)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:catalogsService)))(SimpleName:modifyProduct)(METHOD_INVOCATION_ARGUMENTS(SimpleName:productDTO)))))))(IfStatement(SimpleName:result)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:productImage)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:getContentType))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:getName))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:getOriginalFilename))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:getSize))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:writeByteArrayToFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileProductImage)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productImage))(SimpleName:getBytes)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFileToDirectory)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileProductImage)(SimpleName:dirProductImagesPj)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ApplicationException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ex))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:modelMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:GenericConstants.KEY_ERROR)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getErrorCode))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getErrorMessage))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ex))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:modelMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:GenericConstants.KEY_FATAL)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getMessage))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:modelMap))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:GenericConstants.KEY_ERROR)))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:modelMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:GenericConstants.KEY_INFO)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:productDTO))(SimpleName:getName)))))))(ReturnStatement(StringLiteral:<STR>))))))