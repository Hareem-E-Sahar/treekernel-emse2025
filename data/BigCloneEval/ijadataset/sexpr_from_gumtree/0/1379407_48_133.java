(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:receiveMSG)(SingleVariableDeclaration(SimpleType(SimpleName:MessageMSG))(SimpleName:message))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:readInData)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:Request))(VariableDeclarationFragment(SimpleName:response)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:type)(QualifiedName:ProtocolConstants.NO_TYPE)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:isStopped)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:InputDataStream))(VariableDeclarationFragment(SimpleName:input)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getDataStream))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:rawData)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DataStreamHelper))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:input)))))(ExpressionStatement(Assignment(SimpleName:readInData)(ASSIGNMENT_OPERATOR:=)(ParenthesizedExpression(ClassInstanceCreation(SimpleType(SimpleName:String))(SimpleName:rawData)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:rawData.length)(StringLiteral:<STR>)(SimpleName:readInData)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:deserializer))(SimpleName:deserialize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rawData)(SimpleName:handler))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:handler))(SimpleName:getResult))))(ExpressionStatement(Assignment(SimpleName:type)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getType))))(ExpressionStatement(Assignment(SimpleName:readInData)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(TryStatement(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:ProtocolConstants.KICKED))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:ProtocolConstants.SESSION_TERMINATED)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:OutputDataStream))(VariableDeclarationFragment(SimpleName:os)(ClassInstanceCreation(SimpleType(SimpleName:OutputDataStream)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:os))(SimpleName:setComplete)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:sendRPY)(METHOD_INVOCATION_ARGUMENTS(SimpleName:os)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(StringLiteral:<STR>))))))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.JOIN_DOCUMENT))(Block(VariableDeclarationStatement(SimpleType(SimpleName:PortableDocumentExt))(VariableDeclarationFragment(SimpleName:doc)(CastExpression(SimpleType(SimpleName:PortableDocumentExt))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getPayload)))))(ExpressionStatement(MethodInvocation(SimpleName:addNewUsers)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:getUsers)))))(ExpressionStatement(Assignment(SimpleName:publisherId)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:getPublisherId))))(ExpressionStatement(Assignment(SimpleName:docId)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:getDocumentId))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:participantId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:getParticipantId))))(VariableDeclarationStatement(SimpleType(SimpleName:RemoteUserSession))(VariableDeclarationFragment(SimpleName:session)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SessionManager))(SimpleName:getInstance)))(SimpleName:getSession)(METHOD_INVOCATION_ARGUMENTS(SimpleName:publisherId)))))(IfStatement(InfixExpression(SimpleName:session)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:SessionConnectionImpl))(VariableDeclarationFragment(SimpleName:connection)(NullLiteral)))(ExpressionStatement(Assignment(SimpleName:connection)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:addSessionConnection)(METHOD_INVOCATION_ARGUMENTS(SimpleName:docId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getChannel))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:setParticipantId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:participantId))))(VariableDeclarationStatement(SimpleType(SimpleName:RemoteDocumentProxyExt))(VariableDeclarationFragment(SimpleName:proxy)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:getUser)))(SimpleName:getSharedDocument)(METHOD_INVOCATION_ARGUMENTS(SimpleName:docId)))))(ExpressionStatement(Assignment(SimpleName:sessionCallback)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxy))(SimpleName:joinAccepted)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:setParticipantId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:participantId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:setDocument)(METHOD_INVOCATION_ARGUMENTS(SimpleName:doc)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:publisherId)(StringLiteral:<STR>))))))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.KICKED))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:docId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:DocumentInfo))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getPayload)))))(SimpleName:getDocId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:docId)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:kicked)))(ExpressionStatement(MethodInvocation(SimpleName:executeCleanup))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.REQUEST))(Block(VariableDeclarationStatement(SimpleType(QualifiedName:ch.iserver.ace.algorithm.Request))(VariableDeclarationFragment(SimpleName:algoRequest)(CastExpression(SimpleType(QualifiedName:ch.iserver.ace.algorithm.Request))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getPayload)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:algoRequest)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:participantId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getUserId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:receiveRequest)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:participantId)))(SimpleName:algoRequest)))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.CARET_UPDATE))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CaretUpdateMessage))(VariableDeclarationFragment(SimpleName:update)(CastExpression(SimpleType(SimpleName:CaretUpdateMessage))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getPayload)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:update)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:participantId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getUserId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:receiveCaretUpdate)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:participantId)))(SimpleName:update)))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.ACKNOWLEDGE))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Timestamp))(VariableDeclarationFragment(SimpleName:timestamp)(CastExpression(SimpleType(SimpleName:Timestamp))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getPayload)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:siteId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getUserId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:siteId)(StringLiteral:<STR>)(SimpleName:timestamp)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:receiveAcknowledge)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:siteId)))(SimpleName:timestamp)))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.PARTICIPANT_JOINED))(Block(VariableDeclarationStatement(SimpleType(SimpleName:RemoteUserProxyExt))(VariableDeclarationFragment(SimpleName:proxy)(CastExpression(SimpleType(SimpleName:RemoteUserProxyExt))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getPayload)))))(ExpressionStatement(MethodInvocation(SimpleName:addNewUser)(METHOD_INVOCATION_ARGUMENTS(SimpleName:proxy))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:participantId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getUserId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:participantId)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:proxy))(SimpleName:getUserDetails)))(SimpleName:getUsername))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:participantJoined)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:participantId)))(SimpleName:proxy)))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.PARTICIPANT_LEFT))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:reason)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getPayload)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:participantId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getUserId))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:participantId)(StringLiteral:<STR>)(SimpleName:reason)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:participantLeft)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:participantId)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reason)))))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ProtocolConstants.SESSION_TERMINATED))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionCallback))(SimpleName:sessionTerminated)))(ExpressionStatement(MethodInvocation(SimpleName:executeCleanup)))))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:e)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NetworkServiceImpl))(SimpleName:getInstance)))(SimpleName:getCallback)))(SimpleName:serviceFailure)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:FailureCodes.SESSION_FAILURE)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:readInData)(StringLiteral:<STR>))(SimpleName:e)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))))