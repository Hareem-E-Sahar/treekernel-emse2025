(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:HttpResponse))(SimpleName:execute)(SingleVariableDeclaration(SimpleType(SimpleName:HttpHost))(SimpleName:target))(SingleVariableDeclaration(SimpleType(SimpleName:HttpRequest))(SimpleName:request))(SingleVariableDeclaration(SimpleType(SimpleName:HttpContext))(SimpleName:context))(SimpleType(SimpleName:HttpException))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequest))(VariableDeclarationFragment(SimpleName:orig)(SimpleName:request)))(VariableDeclarationStatement(SimpleType(SimpleName:RequestWrapper))(VariableDeclarationFragment(SimpleName:origWrapper)(MethodInvocation(SimpleName:wrapRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:orig)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:origWrapper))(SimpleName:setParams)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRoute))(VariableDeclarationFragment(SimpleName:origRoute)(MethodInvocation(SimpleName:determineRoute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target)(SimpleName:origWrapper)(SimpleName:context)))))(ExpressionStatement(Assignment(SimpleName:virtualHost)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:HttpHost))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:orig))(SimpleName:getParams)))(SimpleName:getParameter)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ClientPNames.VIRTUAL_HOST))))))(VariableDeclarationStatement(SimpleType(SimpleName:RoutedRequest))(VariableDeclarationFragment(SimpleName:roureq)(ClassInstanceCreation(SimpleType(SimpleName:RoutedRequest))(SimpleName:origWrapper)(SimpleName:origRoute))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:timeout)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConnManagerParams))(SimpleName:getTimeout)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:execCount)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:reuse)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:done)(BooleanLiteral:false)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:response)(NullLiteral)))(WhileStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:done))(Block(VariableDeclarationStatement(SimpleType(SimpleName:RequestWrapper))(VariableDeclarationFragment(SimpleName:wrapper)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:roureq))(SimpleName:getRequest))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRoute))(VariableDeclarationFragment(SimpleName:route)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:roureq))(SimpleName:getRoute))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:userToken)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ClientContext.USER_TOKEN)))))(IfStatement(InfixExpression(SimpleName:managedConn)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ClientConnectionRequest))(VariableDeclarationFragment(SimpleName:connRequest)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connManager))(SimpleName:requestConnection)(METHOD_INVOCATION_ARGUMENTS(SimpleName:route)(SimpleName:userToken)))))(IfStatement(InstanceofExpression(SimpleName:orig)(SimpleType(SimpleName:AbortableHttpRequest)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:AbortableHttpRequest))(SimpleName:orig))))(SimpleName:setConnectionRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connRequest))))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:managedConn)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connRequest))(SimpleName:getConnection)(METHOD_INVOCATION_ARGUMENTS(SimpleName:timeout)(QualifiedName:TimeUnit.MILLISECONDS))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:interrupted))(Block(VariableDeclarationStatement(SimpleType(SimpleName:InterruptedIOException))(VariableDeclarationFragment(SimpleName:iox)(ClassInstanceCreation(SimpleType(SimpleName:InterruptedIOException)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iox))(SimpleName:initCause)(METHOD_INVOCATION_ARGUMENTS(SimpleName:interrupted))))(ThrowStatement(SimpleName:iox)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpConnectionParams))(SimpleName:isStaleCheckingEnabled)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params)))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:isOpen))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:isStale))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:close)))))))))))(IfStatement(InstanceofExpression(SimpleName:orig)(SimpleType(SimpleName:AbortableHttpRequest)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:AbortableHttpRequest))(SimpleName:orig))))(SimpleName:setReleaseTrigger)(METHOD_INVOCATION_ARGUMENTS(SimpleName:managedConn))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:isOpen)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:open)(METHOD_INVOCATION_ARGUMENTS(SimpleName:route)(SimpleName:context)(SimpleName:params))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:establishRoute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:route)(SimpleName:context)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:TunnelRefusedException))(SimpleName:ex))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getMessage)))))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getResponse))))(BreakStatement))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wrapper))(SimpleName:resetHeaders)))(ExpressionStatement(MethodInvocation(SimpleName:rewriteRequestURI)(METHOD_INVOCATION_ARGUMENTS(SimpleName:wrapper)(SimpleName:route))))(ExpressionStatement(Assignment(SimpleName:target)(ASSIGNMENT_OPERATOR:=)(SimpleName:virtualHost)))(IfStatement(InfixExpression(SimpleName:target)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:target)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:route))(SimpleName:getTargetHost))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpHost))(VariableDeclarationFragment(SimpleName:proxy)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:route))(SimpleName:getProxyHost))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ExecutionContext.HTTP_TARGET_HOST)(SimpleName:target))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ExecutionContext.HTTP_PROXY_HOST)(SimpleName:proxy))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ExecutionContext.HTTP_CONNECTION)(SimpleName:managedConn))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ClientContext.TARGET_AUTH_STATE)(SimpleName:targetAuthState))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ClientContext.PROXY_AUTH_STATE)(SimpleName:proxyAuthState))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestExec))(SimpleName:preProcess)(METHOD_INVOCATION_ARGUMENTS(SimpleName:wrapper)(SimpleName:httpProcessor)(SimpleName:context))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:retrying)(BooleanLiteral:true)))(VariableDeclarationStatement(SimpleType(SimpleName:Exception))(VariableDeclarationFragment(SimpleName:retryReason)(NullLiteral)))(WhileStatement(SimpleName:retrying)(Block(ExpressionStatement(PostfixExpression(SimpleName:execCount)(POSTFIX_EXPRESSION_OPERATOR:++)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wrapper))(SimpleName:incrementExecCount)))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wrapper))(SimpleName:getExecCount))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:1))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:wrapper))(SimpleName:isRepeatable))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(IfStatement(InfixExpression(SimpleName:retryReason)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NonRepeatableRequestException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(StringLiteral:<STR>))(SimpleName:retryReason))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NonRepeatableRequestException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))))(TryStatement(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:execCount)(StringLiteral:<STR>)))))))(ExpressionStatement(Assignment(SimpleName:response)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestExec))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:wrapper)(SimpleName:managedConn)(SimpleName:context)))))(ExpressionStatement(Assignment(SimpleName:retrying)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:close)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:retryHandler))(SimpleName:retryRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ex)(SimpleName:execCount)(SimpleName:context)))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:isInfoEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getClass)))(SimpleName:getName))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getMessage))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ex))(SimpleName:getMessage))(SimpleName:ex))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:retryReason)(ASSIGNMENT_OPERATOR:=)(SimpleName:ex))))(Block(ThrowStatement(SimpleName:ex))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:route))(SimpleName:isTunnelled)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:open)(METHOD_INVOCATION_ARGUMENTS(SimpleName:route)(SimpleName:context)(SimpleName:params)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(Assignment(SimpleName:retrying)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false))))))))))(IfStatement(InfixExpression(SimpleName:response)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ContinueStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setParams)(METHOD_INVOCATION_ARGUMENTS(SimpleName:params))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestExec))(SimpleName:postProcess)(METHOD_INVOCATION_ARGUMENTS(SimpleName:response)(SimpleName:httpProcessor)(SimpleName:context))))(ExpressionStatement(Assignment(SimpleName:reuse)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reuseStrategy))(SimpleName:keepAlive)(METHOD_INVOCATION_ARGUMENTS(SimpleName:response)(SimpleName:context)))))(IfStatement(SimpleName:reuse)(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:duration)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:keepAliveStrategy))(SimpleName:getKeepAliveDuration)(METHOD_INVOCATION_ARGUMENTS(SimpleName:response)(SimpleName:context)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:setIdleDuration)(METHOD_INVOCATION_ARGUMENTS(SimpleName:duration)(QualifiedName:TimeUnit.MILLISECONDS))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:isDebugEnabled))(Block(IfStatement(InfixExpression(SimpleName:duration)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:duration)(StringLiteral:<STR>))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:log)))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))))))(VariableDeclarationStatement(SimpleType(SimpleName:RoutedRequest))(VariableDeclarationFragment(SimpleName:followup)(MethodInvocation(SimpleName:handleResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:roureq)(SimpleName:response)(SimpleName:context)))))(IfStatement(InfixExpression(SimpleName:followup)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:done)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))(Block(IfStatement(SimpleName:reuse)(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpEntity))(VariableDeclarationFragment(SimpleName:entity)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity))))(IfStatement(InfixExpression(SimpleName:entity)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entity))(SimpleName:consumeContent)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:markReusable))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:close)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:followup))(SimpleName:getRoute)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:roureq))(SimpleName:getRoute)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:releaseConnection)))))(ExpressionStatement(Assignment(SimpleName:roureq)(ASSIGNMENT_OPERATOR:=)(SimpleName:followup)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:managedConn)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:userToken)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(Block(ExpressionStatement(Assignment(SimpleName:userToken)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:userTokenHandler))(SimpleName:getUserToken)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ClientContext.USER_TOKEN)(SimpleName:userToken))))(IfStatement(InfixExpression(SimpleName:userToken)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:setState)(METHOD_INVOCATION_ARGUMENTS(SimpleName:userToken))))))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:response)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity)))(SimpleName:isStreaming))))(Block(IfStatement(SimpleName:reuse)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:managedConn))(SimpleName:markReusable))))(ExpressionStatement(MethodInvocation(SimpleName:releaseConnection))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpEntity))(VariableDeclarationFragment(SimpleName:entity)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getEntity))))(ExpressionStatement(Assignment(SimpleName:entity)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BasicManagedEntity))(SimpleName:entity)(SimpleName:managedConn)(SimpleName:reuse))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setEntity)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entity))))))(ReturnStatement(SimpleName:response)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:HttpException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(SimpleName:abortConnection)))(ThrowStatement(SimpleName:ex))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(SimpleName:abortConnection)))(ThrowStatement(SimpleName:ex))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:RuntimeException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(SimpleName:abortConnection)))(ThrowStatement(SimpleName:ex)))))))))