(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:doRequest)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:request))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:response))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:inGet))(SimpleType(SimpleName:ServletException))(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(QualifiedName:WebConsoleServlet.SERVER_STRING))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:requestedFilename)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRequestURI)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(InfixExpression(MethodInvocation(SimpleName:getJarFileName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:JarURLConnection))(VariableDeclarationFragment(SimpleName:jarConnection)(CastExpression(SimpleType(SimpleName:JarURLConnection))(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openConnection))))))(VariableDeclarationStatement(SimpleType(SimpleName:JarFile))(VariableDeclarationFragment(SimpleName:jarFile)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jarConnection))(SimpleName:getJarFile))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:negotiatedFilename)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:zipEntry)(NullLiteral)))(ExpressionStatement(Assignment(SimpleName:zipEntry)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:negotiateImageFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jarFile)(SimpleName:requestedFilename)(MethodInvocation(SimpleName:isIE6OrEarlier)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))))(IfStatement(InfixExpression(SimpleName:zipEntry)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:zipEntry)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jarFile))(SimpleName:getEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestedFilename))))))(Block(ExpressionStatement(Assignment(SimpleName:negotiatedFilename)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipEntry))(SimpleName:getName))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:zipEntry)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipEntry))(SimpleName:isDirectory)))(Block(ExpressionStatement(MethodInvocation(SimpleName:handleFileNotFound)(METHOD_INVOCATION_ARGUMENTS(SimpleName:inGet)(SimpleName:request)(SimpleName:response))))(ReturnStatement)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:fileSize)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:zipEntry))(SimpleName:getSize)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setContentLength)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileSize))))(IfStatement(InfixExpression(SimpleName:negotiatedFilename)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setContentType)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getContentType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:negotiatedFilename)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setContentType)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getContentType)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRequestURI)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jarFile))(SimpleName:getInputStream)(METHOD_INVOCATION_ARGUMENTS(SimpleName:zipEntry)))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:bufferedInputStream)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(SimpleName:in))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:file)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(SimpleName:fileSize))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bytesRead)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bufferedInputStream))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bufferedInputStream))(SimpleName:close)))(IfStatement(InfixExpression(InfixExpression(SimpleName:bytesRead)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:fileSize))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:cachingEnabled))(Block(VariableDeclarationStatement(SimpleType(SimpleName:SimpleDateFormat))(VariableDeclarationFragment(SimpleName:formatter)(ClassInstanceCreation(SimpleType(SimpleName:SimpleDateFormat))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(QualifiedName:java.util.Date))(VariableDeclarationFragment(SimpleName:today)(ClassInstanceCreation(SimpleType(QualifiedName:java.util.Date)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:date)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:formatter))(SimpleName:format)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GenericUtils))(SimpleName:addOrSubstractDaysFromDate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:today)(NumberLiteral:365)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:date))))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:outputStream)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getOutputStream))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputStream))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:file)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:FileNotFoundException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(SimpleName:handleFileNotFound)(METHOD_INVOCATION_ARGUMENTS(SimpleName:inGet)(SimpleName:request)(SimpleName:response))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:t))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Application))(SimpleName:getApplication)))(SimpleName:logExceptionEvent)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:EventLogMessage.EventType.WEB_ERROR)(SimpleName:t)))))))))))