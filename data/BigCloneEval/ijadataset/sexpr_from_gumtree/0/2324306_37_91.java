(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(PrimitiveType:void)(SimpleName:setUp)(SimpleType(SimpleName:Exception))(Block(IfStatement(InfixExpression(SimpleName:sessionDatasource)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:baseDir)(StringLiteral:<STR>)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:toLowerCase)))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(Assignment(SimpleName:baseDir)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:baseDir))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:mkdirs)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:baseDir)))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:realConfigFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:baseDir)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(StringLiteral:<STR>)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:realConfigFile))(SimpleName:exists)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:junitConfigFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(StringLiteral:<STR>)(QualifiedName:File.separator)(StringLiteral:<STR>)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:junitConfigFile))(SimpleName:exists)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:junitConfigFile)(SimpleName:realConfigFile))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:License))(SimpleName:initialize)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FileReader))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:File.separator)(StringLiteral:<STR>)(QualifiedName:File.separator)(StringLiteral:<STR>))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MasterDatastoreManager))(SimpleName:getMasterDatasource))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:masterDatasource)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:MasterDatasource)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MasterDatastoreManager))(SimpleName:setMasterDatasource)(METHOD_INVOCATION_ARGUMENTS(SimpleName:masterDatasource))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:masterDatasource))(SimpleName:initialise)(METHOD_INVOCATION_ARGUMENTS(SimpleName:baseDir)))))(Block(ExpressionStatement(Assignment(SimpleName:masterDatasource)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:MasterDatasource))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MasterDatastoreManager))(SimpleName:getMasterDatasource)))))))(ExpressionStatement(Assignment(SimpleName:sessionToken)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MasterDatastoreManager))(SimpleName:createSession)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:sessionDatasource)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MasterDatastoreManager))(SimpleName:getSessionDatasource)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sessionToken)))))))(VariableDeclarationStatement(SimpleType(SimpleName:DataSource))(VariableDeclarationFragment(SimpleName:datasource)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getDataSource))))(VariableDeclarationStatement(SimpleType(SimpleName:Portfolio))(VariableDeclarationFragment(SimpleName:rootPortfolio)(CastExpression(SimpleType(SimpleName:Portfolio))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:datasource))(SimpleName:getRoot)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Portfolio)))(VariableDeclarationFragment(SimpleName:portfolios)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rootPortfolio))(SimpleName:getPortfolios))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Portfolio))(SimpleName:portfolio))(SimpleName:portfolios)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:portfolio))(SimpleName:delete)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getDataSource)))(SimpleName:getVcsProvider)))(SimpleName:commit))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:VCSUpdateNeededException))(SimpleName:vcsUpdateNeededException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getDataSource)))(SimpleName:getVcsProvider)))(SimpleName:update)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getDataSource)))(SimpleName:getVcsProvider)))(SimpleName:commit)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:VCSCleanNeededException))(SimpleName:vcsCleanNeededException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getDataSource)))(SimpleName:getVcsProvider)))(SimpleName:cleanup)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getDataSource)))(SimpleName:getVcsProvider)))(SimpleName:commit))))))(VariableDeclarationStatement(SimpleType(SimpleName:Portfolio))(VariableDeclarationFragment(SimpleName:newPortfolio)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rootPortfolio))(SimpleName:createPortfolio)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:masterDatasource))(SimpleName:saveAndAdd)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newPortfolio))))(VariableDeclarationStatement(SimpleType(SimpleName:Organization))(VariableDeclarationFragment(SimpleName:newOrganization)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newPortfolio))(SimpleName:createOrganization)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:masterDatasource))(SimpleName:saveAndAdd)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newOrganization))))(ExpressionStatement(Assignment(SimpleName:testPortfolio)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:TransientPortfolio))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getTransientElement)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newPortfolio))(SimpleName:getUuid)))))))(ExpressionStatement(Assignment(SimpleName:testOrganization)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:TransientOrganization))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getTransientElement)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newOrganization))(SimpleName:getUuid)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sessionDatasource))(SimpleName:getDataSource)))(SimpleName:getVcsProvider)))(SimpleName:commit)))(ExpressionStatement(SuperMethodInvocation(SimpleName:setUp)))))))