(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:testRelay)(SimpleType(SimpleName:Exception))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:ChatModel))(VariableDeclarationFragment(SimpleName:cm1)(ClassInstanceCreation(SimpleType(SimpleName:ChatModel))(NumberLiteral:22345)(NullLiteral))))(VariableDeclarationStatement(SimpleType(SimpleName:ICommFacade))(VariableDeclarationFragment(SimpleName:commFacade)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cm1))(SimpleName:getCommFacade))))(VariableDeclarationStatement(SimpleType(SimpleName:DummyUserInterface))(VariableDeclarationFragment(SimpleName:dummyUI)(ClassInstanceCreation(SimpleType(SimpleName:DummyUserInterface)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cm1))(SimpleName:startSelectionProcess)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cm1))(SimpleName:setUserInterface)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dummyUI))))(VariableDeclarationStatement(SimpleType(SimpleName:IPeer))(VariableDeclarationFragment(SimpleName:peer1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cm1))(SimpleName:getMyself)))(SimpleName:getPeer))))(VariableDeclarationStatement(SimpleType(SimpleName:IConnectionBroker))(VariableDeclarationFragment(SimpleName:connBroker)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ConnectionManagerFactory))(SimpleName:createConnectionBroker)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DummyCallback))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cm1))(SimpleName:getMyself)))(SimpleName:getPeerID)))))))(VariableDeclarationStatement(SimpleType(SimpleName:SocketChannel))(VariableDeclarationFragment(SimpleName:sc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connBroker))(SimpleName:requestTCPChannel)(METHOD_INVOCATION_ARGUMENTS(SimpleName:peer1)(QualifiedName:ConnectionRequestType.FORCE_RELAY)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sc))(SimpleName:configureBlocking)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:commFacade))(SimpleName:getChannelManager)))(SimpleName:registerChannel)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sc))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:commFacade))(SimpleName:getChannelManager)))(SimpleName:setSelectedOps)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sc)(QualifiedName:SelectionKey.OP_READ))))(ExpressionStatement(MethodInvocation(SimpleName:assertTrue)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:sc)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))))(VariableDeclarationStatement(SimpleType(SimpleName:SendFileRequest))(VariableDeclarationFragment(SimpleName:sfr)(ClassInstanceCreation(SimpleType(SimpleName:SendFileRequest))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:peer1))(SimpleName:getPeerID))(NullLiteral)(StringLiteral:<STR>)(ClassInstanceCreation(SimpleType(SimpleName:File))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:commFacade))(SimpleName:getMessageProcessor)))(SimpleName:enableHooks)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(VariableDeclarationStatement(SimpleType(SimpleName:MessageHook))(VariableDeclarationFragment(SimpleName:hook)(ClassInstanceCreation(SimpleType(SimpleName:MessageHook))(SimpleName:sfr))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:commFacade))(SimpleName:getMessageProcessor)))(SimpleName:installHook)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hook)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hook))(SimpleName:getPredicate)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:commFacade))(SimpleName:sendTCPMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sc)(SimpleName:sfr))))(VariableDeclarationStatement(SimpleType(SimpleName:IEnvelope))(VariableDeclarationFragment(SimpleName:envelope)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hook))(SimpleName:waitForEnvelope)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:15)))))(ExpressionStatement(MethodInvocation(SimpleName:assertTrue)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:envelope)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cm1))(SimpleName:shutdown))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:BindException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ExpressionStatement(MethodInvocation(SimpleName:assertTrue)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(BooleanLiteral:false)))))))))))