(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(PrimitiveType:void)(SimpleName:uploadFile)(SingleVariableDeclaration(SimpleType(SimpleName:OutputStream))(SimpleName:outputStream))(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:amount))(SimpleType(SimpleName:JUploadException))(SimpleType(SimpleName:JUploadInterrupted))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:uploadPolicy)))(SimpleName:displayDebug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:amount)(StringLiteral:<STR>)(MethodInvocation(SimpleName:getUploadLength))(StringLiteral:<STR>))(NumberLiteral:30))))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:inputStream)(MethodInvocation(SimpleName:getInputStream))))(WhileStatement(InfixExpression(InfixExpression(SimpleName:amount)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:fileUploadManagerThread)))(SimpleName:isUploadFinished))))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:interrupted))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:JUploadInterrupted))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getClass)))(SimpleName:getName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getFileName))(StringLiteral:<STR>))(FieldAccess(ThisExpression)(SimpleName:uploadPolicy))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:toread)(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:amount)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:BUFLEN)))(SimpleName:BUFLEN)(CastExpression(PrimitiveType:int)(SimpleName:amount)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:towrite)(NumberLiteral:0)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:towrite)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inputStream))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:readBuffer))(NumberLiteral:0)(SimpleName:toread))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:JUploadIOException))(SimpleName:e))))))(IfStatement(InfixExpression(SimpleName:towrite)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputStream))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:readBuffer))(NumberLiteral:0)(SimpleName:towrite))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:fileUploadManagerThread)))(SimpleName:nbBytesUploaded)(METHOD_INVOCATION_ARGUMENTS(SimpleName:towrite)(ThisExpression))))(ExpressionStatement(Assignment(SimpleName:amount)(ASSIGNMENT_OPERATOR:-=)(SimpleName:towrite)))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:uploadRemainingLength))(ASSIGNMENT_OPERATOR:-=)(SimpleName:towrite)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:uploadPolicy)))(SimpleName:getDebugLevel))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:100))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:20)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e))(Block))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:JUploadIOException))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getClass)))(SimpleName:getName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(SimpleName:ioe)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:JUploadException))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getClass)))(SimpleName:getName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(SimpleName:e))))))))))))))