(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:handleEvent)(SingleVariableDeclaration(SimpleType(SimpleName:Event))(SimpleName:event))(Block(IfStatement(InfixExpression(InstanceofExpression(SimpleName:event)(SimpleType(SimpleName:EntryAddedEvent)))(INFIX_EXPRESSION_OPERATOR:||)(InstanceofExpression(SimpleName:event)(SimpleType(SimpleName:EntryUpdatedEvent))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:EntryEvent))(VariableDeclarationFragment(SimpleName:entryEvent)(CastExpression(SimpleType(SimpleName:EntryEvent))(SimpleName:event))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:text)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entryEvent))(SimpleName:getEntry)))(SimpleName:getDescription))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:BlojsomUtils))(SimpleName:checkNullOrBlank)(METHOD_INVOCATION_ARGUMENTS(SimpleName:text))))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:BlojsomUtils))(SimpleName:checkMapForKey)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entryEvent))(SimpleName:getEntry)))(SimpleName:getMetaData))(SimpleName:PINGBACK_PLUGIN_METADATA_SEND_PINGBACKS))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:pingbackURL)))(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:sourceURI)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entryEvent))(SimpleName:getBlog)))(SimpleName:getBlogURL)))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entryEvent))(SimpleName:getEntry)))(SimpleName:getBlogCategory)))(SimpleName:getName)))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entryEvent))(SimpleName:getEntry)))(SimpleName:getPostSlug))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:targetURI)))(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:hrefPattern)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:HREF_REGEX)(InfixExpression(QualifiedName:Pattern.CASE_INSENSITIVE)(INFIX_EXPRESSION_OPERATOR:|)(QualifiedName:Pattern.MULTILINE)(QualifiedName:Pattern.UNICODE_CASE)(QualifiedName:Pattern.DOTALL))))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:hrefMatcher)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hrefPattern))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:text)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entryEvent))(SimpleName:getEntry)))(SimpleName:getId))))))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hrefMatcher))(SimpleName:find))(Block(ExpressionStatement(Assignment(SimpleName:targetURI)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hrefMatcher))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:targetURI)))))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpURLConnection))(VariableDeclarationFragment(SimpleName:urlConnection)(CastExpression(SimpleType(SimpleName:HttpURLConnection))(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:targetURI)))(SimpleName:openConnection)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlConnection))(SimpleName:setRequestMethod)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlConnection))(SimpleName:connect)))(ExpressionStatement(Assignment(SimpleName:pingbackURL)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlConnection))(SimpleName:getHeaderField)(METHOD_INVOCATION_ARGUMENTS(SimpleName:X_PINGBACK_HEADER)))))(IfStatement(InfixExpression(SimpleName:pingbackURL)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:BufferedReader))(VariableDeclarationFragment(SimpleName:bufferedReader)(ClassInstanceCreation(SimpleType(SimpleName:BufferedReader))(ClassInstanceCreation(SimpleType(SimpleName:InputStreamReader))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlConnection))(SimpleName:getInputStream))(QualifiedName:BlojsomConstants.UTF8)))))(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:content)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:input)))(WhileStatement(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:input)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bufferedReader))(SimpleName:readLine))))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:content))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:input))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:BlojsomConstants.LINE_SEPARATOR))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bufferedReader))(SimpleName:close)))(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:pingbackLinkPattern)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:PINGBACK_LINK_REGEX)(InfixExpression(QualifiedName:Pattern.CASE_INSENSITIVE)(INFIX_EXPRESSION_OPERATOR:|)(QualifiedName:Pattern.MULTILINE)(QualifiedName:Pattern.UNICODE_CASE)(QualifiedName:Pattern.DOTALL))))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:pingbackLinkMatcher)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackLinkPattern))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:content))(SimpleName:toString))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackLinkMatcher))(SimpleName:find))(Block(ExpressionStatement(Assignment(SimpleName:pingbackURL)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackLinkMatcher))(SimpleName:group)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:pingbackURL)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:targetURI)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Vector))(VariableDeclarationFragment(SimpleName:parameters)(ClassInstanceCreation(SimpleType(SimpleName:Vector)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parameters))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sourceURI))(SimpleName:toString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parameters))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:targetURI))))(TryStatement(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:pingbackURL)(StringLiteral:<STR>)(SimpleName:sourceURI)(StringLiteral:<STR>)(SimpleName:targetURI)))))))(VariableDeclarationStatement(SimpleType(SimpleName:XmlRpcClient))(VariableDeclarationFragment(SimpleName:xmlRpcClient)(ClassInstanceCreation(SimpleType(SimpleName:XmlRpcClient))(SimpleName:pingbackURL))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xmlRpcClient))(SimpleName:executeAsync)(METHOD_INVOCATION_ARGUMENTS(SimpleName:PINGBACK_METHOD)(SimpleName:parameters)(SimpleName:_callbackHandler)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:MalformedURLException))(SimpleName:e))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:isErrorEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e))))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:isErrorEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e))))))))))))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:PINGBACK_PLUGIN_METADATA_SEND_PINGBACKS)(StringLiteral:<STR>))))))))))(IfStatement(InstanceofExpression(SimpleName:event)(SimpleType(SimpleName:PingbackAddedEvent)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HtmlEmail))(VariableDeclarationFragment(SimpleName:email)(ClassInstanceCreation(SimpleType(SimpleName:HtmlEmail)))))(VariableDeclarationStatement(SimpleType(SimpleName:PingbackAddedEvent))(VariableDeclarationFragment(SimpleName:pingbackAddedEvent)(CastExpression(SimpleType(SimpleName:PingbackAddedEvent))(SimpleName:event))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getBlog)))(SimpleName:getBlogEmailEnabled)))(SimpleName:booleanValue))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:setupEmail)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getBlog))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getEntry))(SimpleName:email))))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:emailTemplateContext)(ClassInstanceCreation(SimpleType(SimpleName:HashMap)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:emailTemplateContext))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:BlojsomConstants.BLOJSOM_BLOG)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getBlog)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:emailTemplateContext))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:BLOJSOM_PINGBACK_PLUGIN_PINGBACK)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getPingback)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:emailTemplateContext))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:BLOJSOM_PINGBACK_PLUGIN_BLOG_ENTRY)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getEntry)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:htmlText)(MethodInvocation(SimpleName:mergeTemplate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:PINGBACK_PLUGIN_EMAIL_TEMPLATE_HTML)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getBlog))(SimpleName:emailTemplateContext)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:plainText)(MethodInvocation(SimpleName:mergeTemplate)(METHOD_INVOCATION_ARGUMENTS(SimpleName:PINGBACK_PLUGIN_EMAIL_TEMPLATE_TEXT)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getBlog))(SimpleName:emailTemplateContext)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:email))(SimpleName:setHtmlMsg)(METHOD_INVOCATION_ARGUMENTS(SimpleName:htmlText))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:email))(SimpleName:setTextMsg)(METHOD_INVOCATION_ARGUMENTS(SimpleName:plainText))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:emailPrefix)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getBlog)))(SimpleName:getProperties)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:PINGBACK_PREFIX_IP))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:BlojsomUtils))(SimpleName:checkNullOrBlank)(METHOD_INVOCATION_ARGUMENTS(SimpleName:emailPrefix)))(Block(ExpressionStatement(Assignment(SimpleName:emailPrefix)(ASSIGNMENT_OPERATOR:=)(SimpleName:DEFAULT_PINGBACK_PREFIX)))))(ExpressionStatement(Assignment(SimpleName:email)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:HtmlEmail))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:email))(SimpleName:setSubject)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:emailPrefix)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pingbackAddedEvent))(SimpleName:getEntry)))(SimpleName:getTitle))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:email))(SimpleName:send))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:EmailException))(SimpleName:e))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:isErrorEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:_logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e))))))))))))))))))