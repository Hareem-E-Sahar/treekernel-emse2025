(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(SimpleType(SimpleName:String))(SimpleName:processPath)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:req))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:res))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:path)(SuperMethodInvocation(SimpleName:processPath)(SimpleName:req)(SimpleName:res))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpSession))(VariableDeclarationFragment(SimpleName:ses)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getSession))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:companyId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PortalUtil))(SimpleName:getCompanyId)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)))))(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:currentUsers)(CastExpression(SimpleType(SimpleName:Map))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:WebAppPool))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:companyId)(QualifiedName:WebKeys.CURRENT_USERS))))))(VariableDeclarationStatement(SimpleType(SimpleName:UserTracker))(VariableDeclarationFragment(SimpleName:userTracker)(CastExpression(SimpleType(SimpleName:UserTracker))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:currentUsers))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ses))(SimpleName:getId)))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:userTracker)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_C)))))(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_J_SECURITY_CHECK)))(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_PORTAL_PROTECTED)))(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:fullPathSB)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullPathSB))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullPathSB))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:StringPool.QUESTION))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullPathSB))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getQueryString)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:userTracker))(SimpleName:addPath)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:UserTrackerPath))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:userTracker))(SimpleName:getUserTrackerId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:userTracker))(SimpleName:getUserTrackerId))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fullPathSB))(SimpleName:toString))(ClassInstanceCreation(SimpleType(SimpleName:Date)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:userId)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getRemoteUser))))(VariableDeclarationStatement(SimpleType(SimpleName:User))(VariableDeclarationFragment(SimpleName:user)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:user)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PortalUtil))(SimpleName:getUser)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_PORTAL_LAYOUT)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_PORTAL_PUBLIC_LAYOUT))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:strutsAction)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getParameter)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:strutsAction)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:strutsAction))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_MY_ACCOUNT_CREATE_ACCOUNT)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Map))(VariableDeclarationFragment(SimpleName:parameterMap)(ClassInstanceCreation(SimpleType(SimpleName:LinkedHashMap)))))(IfStatement(InstanceofExpression(SimpleName:req)(SimpleType(SimpleName:UploadServletRequest)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:UploadServletRequest))(VariableDeclarationFragment(SimpleName:uploadServletReq)(CastExpression(SimpleType(SimpleName:UploadServletRequest))(SimpleName:req))))(VariableDeclarationStatement(SimpleType(SimpleName:Enumeration))(VariableDeclarationFragment(SimpleName:paramNames)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadServletReq))(SimpleName:getParameterNames))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paramNames))(SimpleName:hasMoreElements))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:paramName)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:paramNames))(SimpleName:nextElement)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadServletReq))(SimpleName:getFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paramName)))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parameterMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paramName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uploadServletReq))(SimpleName:getParameterValues)(METHOD_INVOCATION_ARGUMENTS(SimpleName:paramName)))))))))))(Block(ExpressionStatement(Assignment(SimpleName:parameterMap)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getParameterMap))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ses))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.LAST_PATH)(ClassInstanceCreation(SimpleType(SimpleName:ObjectValuePair))(SimpleName:path)(ClassInstanceCreation(SimpleType(SimpleName:LinkedHashMap))(SimpleName:parameterMap))))))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:userId)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ses))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))))(Block(TryStatement(Block(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:autoLogins)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PropsUtil))(SimpleName:getArray)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PropsUtil.AUTO_LOGIN_HOOKS)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:autoLogins.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:AutoLogin))(VariableDeclarationFragment(SimpleName:autoLogin)(CastExpression(SimpleType(SimpleName:AutoLogin))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:InstancePool))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:autoLogins)(SimpleName:i)))))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:credentials)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:autoLogin))(SimpleName:login)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(SimpleName:res)))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:credentials)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(QualifiedName:credentials.length)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:3))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:jUsername)(ArrayAccess(SimpleName:credentials)(NumberLiteral:0))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:jPassword)(ArrayAccess(SimpleName:credentials)(NumberLiteral:1))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:encPwd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GetterUtil))(SimpleName:getBoolean)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:credentials)(NumberLiteral:2))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Validator))(SimpleName:isNotNull)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jUsername)))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Validator))(SimpleName:isNotNull)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jPassword))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ses))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:jUsername))))(IfStatement(SimpleName:encPwd)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ses))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:jPassword)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ses))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Encryptor))(SimpleName:digest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jPassword))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ses))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.USER_PASSWORD)(SimpleName:jPassword))))))(ReturnStatement(SimpleName:_PATH_PORTAL_PUBLIC_LOGIN)))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:AutoLoginException))(SimpleName:ale))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ale))(SimpleName:getMessage))(SimpleName:ale)))))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:userId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_PORTAL_LOGOUT)))))(Block(ReturnStatement(SimpleName:_PATH_PORTAL_LOGOUT))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:userId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_PORTAL_UPDATE_TERMS_OF_USE)))))(Block(ReturnStatement(SimpleName:_PATH_PORTAL_UPDATE_TERMS_OF_USE))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:userId)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))))(Block(ReturnStatement(SimpleName:_PATH_PORTAL_LOGOUT))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:isAgreedToTermsOfUse)))))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:termsOfUseRequired)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GetterUtil))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PropsUtil))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PropsUtil.TERMS_OF_USE_REQUIRED)))(BooleanLiteral:true)))))(IfStatement(SimpleName:termsOfUseRequired)(Block(ReturnStatement(SimpleName:_PATH_PORTAL_TERMS_OF_USE))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:isActive)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SessionErrors))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(MethodInvocation(METHOD_INVOCATION_RECEIVER(TypeLiteral(SimpleType(SimpleName:UserActiveException))))(SimpleName:getName)))))(ReturnStatement(SimpleName:_PATH_PORTAL_ERROR))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:simultaenousLogins)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GetterUtil))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PropsUtil))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PropsUtil.AUTH_SIMULTANEOUS_LOGINS)))(BooleanLiteral:true)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:simultaenousLogins))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Boolean))(VariableDeclarationFragment(SimpleName:staleSession)(CastExpression(SimpleType(SimpleName:Boolean))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ses))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:WebKeys.STALE_SESSION))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:staleSession)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:staleSession))(SimpleName:booleanValue))(INFIX_EXPRESSION_OPERATOR:==)(BooleanLiteral:true)))))(Block(ReturnStatement(SimpleName:_PATH_PORTAL_ERROR))))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:isPasswordReset))))(Block(ReturnStatement(SimpleName:_PATH_PORTAL_CHANGE_PASSWORD))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:hasLayouts)))))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:universalPersonalization)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GetterUtil))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PropsUtil))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PropsUtil.UNIVERSAL_PERSONALIZATION)))(BooleanLiteral:false)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:powerUser)(BooleanLiteral:true)))(TryStatement(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:universalPersonalization))(Block(ExpressionStatement(Assignment(SimpleName:powerUser)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RoleLocalManagerUtil))(SimpleName:isPowerUser)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:getUserId)))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(Assignment(SimpleName:powerUser)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:hasGroupPages)(BooleanLiteral:false)))(TryStatement(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:getAllLayouts)))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:hasGroupPages)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:powerUser)(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:hasGroupPages))))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(Block(ReturnStatement(SimpleName:_PATH_PORTAL_ADD_PAGE)))(Block(TryStatement(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:getAllLayouts)))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(SimpleName:hasGroupPages)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:hasGroupPages))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SessionErrors))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(MethodInvocation(METHOD_INVOCATION_RECEIVER(TypeLiteral(SimpleType(SimpleName:RequiredLayoutException))))(SimpleName:getName)))))(ReturnStatement(SimpleName:_PATH_PORTAL_ERROR))))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:isPublicPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path))))(Block(IfStatement(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SessionErrors))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(MethodInvocation(METHOD_INVOCATION_RECEIVER(TypeLiteral(SimpleType(SimpleName:PrincipalException))))(SimpleName:getName)))))(ReturnStatement(SimpleName:_PATH_PORTAL_PUBLIC_LOGIN))))))(VariableDeclarationStatement(SimpleType(SimpleName:ActionMapping))(VariableDeclarationFragment(SimpleName:mapping)(CastExpression(SimpleType(SimpleName:ActionMapping))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:moduleConfig))(SimpleName:findActionConfig)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(SimpleName:_PATH_WSRP)))(Block(ExpressionStatement(Assignment(SimpleName:path)(ASSIGNMENT_OPERATOR:=)(SimpleName:_PATH_WSRP))))(Block(ExpressionStatement(Assignment(SimpleName:path)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapping))(SimpleName:getPath))))))(IfStatement(InfixExpression(SimpleName:user)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(IfStatement(BooleanLiteral:false)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SessionErrors))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(MethodInvocation(METHOD_INVOCATION_RECEIVER(TypeLiteral(SimpleType(SimpleName:RequiredRoleException))))(SimpleName:getName)))))(ReturnStatement(SimpleName:_PATH_PORTAL_ERROR)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e)))))))))(IfStatement(MethodInvocation(SimpleName:isPortletPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:path)))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:strutsPath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:StringPool.SLASH)))))))(VariableDeclarationStatement(SimpleType(SimpleName:Portlet))(VariableDeclarationFragment(SimpleName:portlet)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:PortletManagerUtil))(SimpleName:getPortletByStrutsPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:companyId)(SimpleName:strutsPath)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:portlet)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:portlet))(SimpleName:isActive)))(Block(ExpressionStatement(MethodInvocation(SimpleName:defineObjects)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)(SimpleName:res)(SimpleName:portlet)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:setAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:PageContext.EXCEPTION)(SimpleName:e))))(ExpressionStatement(Assignment(SimpleName:path)(ASSIGNMENT_OPERATOR:=)(SimpleName:_PATH_COMMON_ERROR))))))))(ReturnStatement(SimpleName:path))))))