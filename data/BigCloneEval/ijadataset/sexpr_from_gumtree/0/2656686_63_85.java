(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:add_base)(SingleVariableDeclaration(SimpleType(SimpleName:XMLEventReader))(SimpleName:reader))(SingleVariableDeclaration(SimpleType(SimpleName:XMLEventWriter))(SimpleName:writer))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:opt_all))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:opt_relative))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:parentURI))(SimpleType(SimpleName:URISyntaxException))(SimpleType(SimpleName:XMLStreamException))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Stack))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:mURIs)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:Stack))(SimpleType(SimpleName:String))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mURIs))(SimpleName:push)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parentURI))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:XMLEvent))(VariableDeclarationFragment(SimpleName:event)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:reader))(SimpleName:nextEvent))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getEventType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:XMLEvent.START_ELEMENT))(Block(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:addBase)(BooleanLiteral:false)))(VariableDeclarationStatement(SimpleType(SimpleName:StartElement))(VariableDeclarationFragment(SimpleName:start)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:asStartElement))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:baseURI)(MethodInvocation(SimpleName:getBaseURI)(METHOD_INVOCATION_ARGUMENTS(SimpleName:start)))))(ExpressionStatement(Assignment(SimpleName:parentURI)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mURIs))(SimpleName:lastElement))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:bIsRoot)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mURIs))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1))))(IfStatement(SimpleName:bIsRoot)(Block(ExpressionStatement(Assignment(SimpleName:addBase)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))(IfStatement(SimpleName:opt_all)(ExpressionStatement(Assignment(SimpleName:addBase)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:baseURI))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parentURI)))(ExpressionStatement(Assignment(SimpleName:addBase)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Util))(SimpleName:isEqual)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parentURI)(SimpleName:baseURI))))(ExpressionStatement(Assignment(SimpleName:addBase)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))))(IfStatement(SimpleName:addBase)(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:uri)(MethodInvocation(SimpleName:resolve)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parentURI)(SimpleName:baseURI)(ConditionalExpression(SimpleName:bIsRoot)(BooleanLiteral:false)(SimpleName:opt_relative))))))(ExpressionStatement(Assignment(SimpleName:event)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:add_base_attr)(METHOD_INVOCATION_ARGUMENTS(SimpleName:start)(SimpleName:uri))))))(ExpressionStatement(Assignment(SimpleName:event)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:removeBase)(METHOD_INVOCATION_ARGUMENTS(SimpleName:start))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mURIs))(SimpleName:push)(METHOD_INVOCATION_ARGUMENTS(SimpleName:baseURI)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getEventType))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:XMLEvent.END_ELEMENT))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mURIs))(SimpleName:pop)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:event))))))))))