(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(SimpleType(SimpleName:ByteBuffer))(SimpleName:doInBackground)(SimpleType(SimpleName:Exception))(Block(ExpressionStatement(MethodInvocation(SimpleName:setDownloadState)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:DownloadState.CONNECTING))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpURLConnection))(VariableDeclarationFragment(SimpleName:connection)(MethodInvocation(SimpleName:createConnection))))(IfStatement(InfixExpression(SimpleName:postParameters)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:postData)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Charset))(SimpleName:forName)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:encodeParameters)(METHOD_INVOCATION_ARGUMENTS(SimpleName:postParameters)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:addRequestProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:addRequestProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:String))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:postData))(SimpleName:remaining)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:setRequestMethod)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:setDoOutput)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(VariableDeclarationStatement(SimpleType(SimpleName:WritableByteChannel))(VariableDeclarationFragment(SimpleName:out)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Channels))(SimpleName:newChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getOutputStream))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:postData))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:close)))))(ExpressionStatement(Assignment(SimpleName:contentLength)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getContentLength))))(ExpressionStatement(Assignment(SimpleName:responseHeaders)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getHeaderFields))))(ExpressionStatement(MethodInvocation(SimpleName:setDownloadState)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:DownloadState.DOWNLOADING))))(VariableDeclarationStatement(SimpleType(SimpleName:ReadableByteChannel))(VariableDeclarationFragment(SimpleName:in)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Channels))(SimpleName:newChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getInputStream))))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBufferOutputStream))(VariableDeclarationFragment(SimpleName:buffer)(ClassInstanceCreation(SimpleType(SimpleName:ByteBufferOutputStream))(CastExpression(PrimitiveType:int)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:contentLength)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(SimpleName:contentLength)(InfixExpression(NumberLiteral:32)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1024))))))))(TryStatement(Block(WhileStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:isCancelled)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:transferFrom)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in))))(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))))(Block(ExpressionStatement(MethodInvocation(SimpleName:firePropertyChange)(METHOD_INVOCATION_ARGUMENTS(SimpleName:DOWNLOAD_PROGRESS)(NullLiteral)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:position)))))(IfStatement(MethodInvocation(SimpleName:isContentLengthKnown))(Block(ExpressionStatement(MethodInvocation(SimpleName:setProgress)(METHOD_INVOCATION_ARGUMENTS(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:position))(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:100)))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:contentLength))))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(IfStatement(MethodInvocation(SimpleName:isContentLengthKnown))(ThrowStatement(SimpleName:e)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:in))(SimpleName:close)))(ExpressionStatement(MethodInvocation(SimpleName:setDownloadState)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:DownloadState.DONE))))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:getByteBuffer)))))))