(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:doFilter)(SingleVariableDeclaration(SimpleType(SimpleName:ServletRequest))(SimpleName:req))(SingleVariableDeclaration(SimpleType(SimpleName:ServletResponse))(SimpleName:resp))(SingleVariableDeclaration(SimpleType(SimpleName:FilterChain))(SimpleName:chain))(SimpleType(SimpleName:IOException))(SimpleType(SimpleName:ServletException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpServletRequest))(VariableDeclarationFragment(SimpleName:request)(CastExpression(SimpleType(SimpleName:HttpServletRequest))(SimpleName:req))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpServletResponse))(VariableDeclarationFragment(SimpleName:response)(CastExpression(SimpleType(SimpleName:HttpServletResponse))(SimpleName:resp))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:requestURL)(ClassInstanceCreation(SimpleType(SimpleName:URL))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRequestURL)))(SimpleName:toString)))))(IfStatement(SimpleName:checkSameOrigin)(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:referer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isBlank)(METHOD_INVOCATION_ARGUMENTS(SimpleName:referer)))(ReturnStatement))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:referer))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getProtocol)))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestURL))(SimpleName:getProtocol)))))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getHost)))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestURL))(SimpleName:getHost)))))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getPort))(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestURL))(SimpleName:getPort))))(ReturnStatement))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:uri)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestURL))(SimpleName:toString))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:target)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:index)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))(IfStatement(InfixExpression(SimpleName:index)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:target)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(SimpleName:index))))))(IfStatement(InfixExpression(SimpleName:target)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:index)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))(IfStatement(InfixExpression(SimpleName:index)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:target)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(SimpleName:index))))))))(IfStatement(InfixExpression(SimpleName:target)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ReturnStatement))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:queryString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getQueryString))))(VariableDeclarationStatement(SimpleType(SimpleName:StringBuilder))(VariableDeclarationFragment(SimpleName:sb)(ClassInstanceCreation(SimpleType(SimpleName:StringBuilder)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:target))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StringUtils))(SimpleName:isNotBlank)(METHOD_INVOCATION_ARGUMENTS(SimpleName:queryString)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:queryString))))))(ExpressionStatement(Assignment(SimpleName:uri)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sb))(SimpleName:toString))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequestBase))(VariableDeclarationFragment(SimpleName:httpRequest)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMethod))))(Block(ExpressionStatement(Assignment(SimpleName:httpRequest)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(SimpleName:uri)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMethod))))(Block(ExpressionStatement(Assignment(SimpleName:httpRequest)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpPost))(SimpleName:uri)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMethod))))(Block(ExpressionStatement(Assignment(SimpleName:httpRequest)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpPut))(SimpleName:uri)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(StringLiteral:<STR>))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMethod))))(Block(ExpressionStatement(Assignment(SimpleName:httpRequest)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpDelete))(SimpleName:uri)))))(Block(ExpressionStatement(Assignment(SimpleName:httpRequest)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(SimpleName:uri)))))))))(IfStatement(InstanceofExpression(SimpleName:httpRequest)(SimpleType(SimpleName:HttpEntityEnclosingRequestBase)))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Enumeration))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:en)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getParameterNames))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:en))(SimpleName:hasMoreElements))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:NameValuePair)))(VariableDeclarationFragment(SimpleName:nvps)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ArrayList))(SimpleType(SimpleName:NameValuePair))))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:en))(SimpleName:hasMoreElements))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:en))(SimpleName:nextElement))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:value))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getParameterValues)(METHOD_INVOCATION_ARGUMENTS(SimpleName:name)))(IfStatement(InfixExpression(InfixExpression(SimpleName:queryString)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:queryString))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:name)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:nvps))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:BasicNameValuePair))(SimpleName:name)(SimpleName:value)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:HttpEntityEnclosingRequestBase))(SimpleName:httpRequest))))(SimpleName:setEntity)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:UrlEncodedFormEntity))(SimpleName:nvps)(StringLiteral:<STR>)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpEntity))(VariableDeclarationFragment(SimpleName:entity)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:rsp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpClient))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpRequest)))))(VariableDeclarationStatement(SimpleType(SimpleName:StatusLine))(VariableDeclarationFragment(SimpleName:sl)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rsp))(SimpleName:getStatusLine))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sl))(SimpleName:getStatusCode))(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:300))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:sendError)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sl))(SimpleName:getStatusCode))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sl))(SimpleName:getReasonPhrase)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpRequest))(SimpleName:abort)))(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:entity)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rsp))(SimpleName:getEntity))))(IfStatement(InfixExpression(SimpleName:entity)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Header))(SimpleName:h))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpRequest))(SimpleName:getAllHeaders))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:h))(SimpleName:getName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:h))(SimpleName:getValue))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:entity))(SimpleName:writeTo)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:response))(SimpleName:getOutputStream))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpRequest))(SimpleName:abort)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))))))