(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Socket))(VariableDeclarationFragment(SimpleName:socket)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:bi)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedOutputStream))(VariableDeclarationFragment(SimpleName:bo)(NullLiteral)))(TryStatement(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:running)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(MethodInvocation(SimpleName:feedBackStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:TransferStatuses.Starting))))(SynchronizedStatement(SimpleName:lock)(Block(ExpressionStatement(Assignment(SimpleName:serverSocket)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ServerSocket))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Settings))(SimpleName:getFiletTansferPort)))))(ExpressionStatement(Assignment(SimpleName:socket)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverSocket))(SimpleName:accept))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverSocket))(SimpleName:close))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(IfStatement(InfixExpression(InstanceofExpression(SimpleName:e)(SimpleType(QualifiedName:java.net.BindException)))(INFIX_EXPRESSION_OPERATOR:||)(InstanceofExpression(SimpleName:e)(SimpleType(QualifiedName:java.net.SocketException))))(Block(IfStatement(InfixExpression(SimpleName:serverSocket)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serverSocket))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:serverSocket)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Protocol))(SimpleName:turnTransferAround)(METHOD_INVOCATION_ARGUMENTS(SimpleName:peerName)(SimpleName:fileName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:500))))(ExpressionStatement(MethodInvocation(SimpleName:recieve2)))(ReturnStatement))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))))(ExpressionStatement(Assignment(SimpleName:bi)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:getInputStream)))))(ExpressionStatement(Assignment(SimpleName:destinationFile)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getDestFile))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:resuming))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:n)(NumberLiteral:1)))(WhileStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:destinationFile))(SimpleName:createNewFile)))(Block(ExpressionStatement(Assignment(SimpleName:destinationFile)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:checkfile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:destinationFile)(SimpleName:n)))))(ExpressionStatement(PostfixExpression(SimpleName:n)(POSTFIX_EXPRESSION_OPERATOR:++))))))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:destinationFile))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:destinationFile))(SimpleName:createNewFile)))))))(ExpressionStatement(Assignment(SimpleName:bo)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:BufferedOutputStream))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:destinationFile)(SimpleName:resuming)))))(ExpressionStatement(MethodInvocation(SimpleName:feedBackStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:TransferStatuses.Transferring))))(ExpressionStatement(Assignment(SimpleName:starttime)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))))(ExpressionStatement(Assignment(SimpleName:processedBytes)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:readbyte)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:tmp)(NumberLiteral:0)))(WhileStatement(InfixExpression(SimpleName:running)(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(ParenthesizedExpression(Assignment(SimpleName:readbyte)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bi))(SimpleName:read))))(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bo))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:readbyte))))(ExpressionStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:processedBytes)))(ExpressionStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:++)(SimpleName:tmp)))(IfStatement(InfixExpression(SimpleName:tmp)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:FLUSH_INTERVAL))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bo))(SimpleName:flush)))(ExpressionStatement(Assignment(SimpleName:tmp)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bo))(SimpleName:flush)))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:processedBytes)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:firstByteToSend))(INFIX_EXPRESSION_OPERATOR:-)(ParenthesizedExpression(ConditionalExpression(SimpleName:resuming)(NumberLiteral:1)(NumberLiteral:0)))))(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:totalsize))(Block(ExpressionStatement(MethodInvocation(SimpleName:feedBackStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:TransferStatuses.Finished))))(ExpressionStatement(MethodInvocation(SimpleName:feedBackProgress)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:100)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:feedBackStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:TransferStatuses.Failed))))))(ExpressionStatement(Assignment(SimpleName:running)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bi))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bo))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ExpressionStatement(MethodInvocation(SimpleName:feedBackStatus)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:TransferStatuses.Error))))))(Block(TryStatement(Block(IfStatement(InfixExpression(SimpleName:bi)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bi))(SimpleName:close)))))(IfStatement(InfixExpression(SimpleName:bo)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bo))(SimpleName:close)))))(IfStatement(InfixExpression(SimpleName:socket)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:socket))(SimpleName:close)))(ExpressionStatement(Assignment(SimpleName:socket)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))))))))