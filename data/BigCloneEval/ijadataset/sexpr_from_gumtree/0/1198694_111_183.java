(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:channelClosed)(SingleVariableDeclaration(SimpleType(SimpleName:ChannelHandlerContext))(SimpleName:ctx))(SingleVariableDeclaration(SimpleType(SimpleName:ChannelStateEvent))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:localChannelReference)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(SimpleName:localChannelReference)(StringLiteral:<STR>)))(ParenthesizedExpression(ConditionalExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:getRunner))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:getRunner)))(SimpleName:toShortString))(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:DbTaskRunner))(VariableDeclarationFragment(SimpleName:runner)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:getRunner))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:mustFinalize)(BooleanLiteral:true)))(IfStatement(InfixExpression(InfixExpression(SimpleName:localChannelReference)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getFutureRequest)))(SimpleName:isDone)))(Block)(Block(IfStatement(InfixExpression(SimpleName:localChannelReference)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:R66Future))(VariableDeclarationFragment(SimpleName:fvr)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getFutureValidRequest))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fvr))(SimpleName:await))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e1))(Block)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fvr))(SimpleName:isDone))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fvr))(SimpleName:isSuccess)))(Block(IfStatement(InfixExpression(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fvr))(SimpleName:getResult))(SimpleName:code))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ErrorCode.ServerOverloaded))(Block(ExpressionStatement(Assignment(SimpleName:mustFinalize)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:mustFinalize)))))(IfStatement(SimpleName:mustFinalize)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:newState)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ERROR))))(VariableDeclarationStatement(SimpleType(SimpleName:R66Result))(VariableDeclarationFragment(SimpleName:finalValue)(ClassInstanceCreation(SimpleType(SimpleName:R66Result))(ClassInstanceCreation(SimpleType(SimpleName:OpenR66ProtocolSystemException))(StringLiteral:<STR>))(SimpleName:session)(BooleanLiteral:true)(QualifiedName:ErrorCode.FinalOp)(SimpleName:runner))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:tryFinalizeRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:finalValue)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:OpenR66Exception))(SimpleName:e2))(Block)))))))))(IfStatement(InfixExpression(SimpleName:mustFinalize)(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:runner)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:runner))(SimpleName:isSelfRequested))(Block(VariableDeclarationStatement(SimpleType(SimpleName:R66Future))(VariableDeclarationFragment(SimpleName:transfer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getFutureRequest))))(VariableDeclarationStatement(SimpleType(SimpleName:R66Result))(VariableDeclarationFragment(SimpleName:result)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transfer))(SimpleName:getResult))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transfer))(SimpleName:isDone))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:transfer))(SimpleName:isSuccess)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:result)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:toString))(StringLiteral:<STR>))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(ConditionalExpression(InfixExpression(SimpleName:result)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:toString))(StringLiteral:<STR>)))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:50))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:newState)(METHOD_INVOCATION_ARGUMENTS(SimpleName:CLOSEDCHANNEL))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:clear)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:51))))(IfStatement(InfixExpression(SimpleName:localChannelReference)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getDbSession))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getDbSession)))(SimpleName:endUseConnection)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NetworkTransaction))(SimpleName:removeNetworkChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getNetworkChannel))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))))(IfStatement(InfixExpression(InfixExpression(InfixExpression(InfixExpression(SimpleName:runner)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:runner))(SimpleName:isSelfRequested)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getNetworkChannelObject))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getNetworkChannelObject))(SimpleName:count))(INFIX_EXPRESSION_OPERATOR:<=)(NumberLiteral:0)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:NetworkTransaction))(SimpleName:removeClient)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:runner))(SimpleName:getRequester))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getNetworkChannelObject)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:52))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:Configuration.configuration))(SimpleName:getLocalTransaction)))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))(SimpleName:getId))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:mustFinalize)(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:localChannelReference)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getFutureRequest)))(SimpleName:isDone)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:R66Result))(VariableDeclarationFragment(SimpleName:finalValue)(ClassInstanceCreation(SimpleType(SimpleName:R66Result))(ClassInstanceCreation(SimpleType(SimpleName:OpenR66ProtocolSystemException))(StringLiteral:<STR>))(SimpleName:session)(BooleanLiteral:true)(QualifiedName:ErrorCode.FinalOp)(SimpleName:runner))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:invalidateRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:finalValue))))(VariableDeclarationStatement(SimpleType(SimpleName:ClientRunner))(VariableDeclarationFragment(SimpleName:clientRunner)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localChannelReference))(SimpleName:getClientRunner))))(IfStatement(InfixExpression(SimpleName:clientRunner)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Configuration.WAITFORNETOP)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:e1))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:clientRunner))(SimpleName:interrupt)))))))))))