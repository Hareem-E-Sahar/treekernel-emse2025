(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:String))(SimpleName:request)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:method))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:url))(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:Map))(SimpleType(SimpleName:String))(SimpleType(SimpleName:String)))(SimpleName:header))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:body))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:signed))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:cacheKey)(SimpleName:url)))(IfStatement(InfixExpression(SimpleName:method)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Http.GET))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Cache))(VariableDeclarationFragment(SimpleName:cache)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cacheManager))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cacheKey)))))(IfStatement(InfixExpression(SimpleName:cache)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:cacheKey)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DateFormat))(SimpleName:getInstance)))(SimpleName:format)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cache))(SimpleName:getExpire))))))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cache))(SimpleName:getResponse)))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpParams))(VariableDeclarationFragment(SimpleName:httpParams)(ClassInstanceCreation(SimpleType(SimpleName:BasicHttpParams)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpConnectionParams))(SimpleName:setConnectionTimeout)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpParams)(NumberLiteral:6000))))(VariableDeclarationStatement(SimpleType(SimpleName:DefaultHttpClient))(VariableDeclarationFragment(SimpleName:httpClient)(ClassInstanceCreation(SimpleType(SimpleName:DefaultHttpClient))(SimpleName:httpParams))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequestBase))(VariableDeclarationFragment(SimpleName:httpRequest)))(IfStatement(InfixExpression(SimpleName:method)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Http.GET))(Block(ExpressionStatement(Assignment(SimpleName:httpRequest)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpGet))(SimpleName:url)))))(IfStatement(InfixExpression(SimpleName:method)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Http.POST))(Block(ExpressionStatement(Assignment(SimpleName:httpRequest)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HttpPost))(SimpleName:url))))(IfStatement(InfixExpression(InfixExpression(SimpleName:body)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:body))(SimpleName:isEmpty))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:HttpPost))(SimpleName:httpRequest))))(SimpleName:setEntity)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:StringEntity))(SimpleName:body))))))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:Exception))(StringLiteral:<STR>))))))(IfStatement(InfixExpression(SimpleName:header)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:keys)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:keySet))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:k))(SimpleName:keys)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpRequest))(SimpleName:addHeader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:k)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:k))))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:oauth)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(SimpleName:signed))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:oauth))(SimpleName:signRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpRequest))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpRequest))(SimpleName:getRequestLine)))(SimpleName:toString))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:httpResponse)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpClient))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpRequest)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpResponse))(SimpleName:getStatusLine)))(SimpleName:toString))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpEntity))(VariableDeclarationFragment(SimpleName:entity)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpResponse))(SimpleName:getEntity))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:responseContent)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:EntityUtils))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entity)))))(IfStatement(InfixExpression(SimpleName:trafficListener)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:TrafficItem))(VariableDeclarationFragment(SimpleName:trafficItem)(ClassInstanceCreation(SimpleType(SimpleName:TrafficItem)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trafficItem))(SimpleName:setRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpRequest))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trafficItem))(SimpleName:setRequestContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:body))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trafficItem))(SimpleName:setResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:httpResponse))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trafficItem))(SimpleName:setResponseContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseContent))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:trafficListener))(SimpleName:handleRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:trafficItem))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:statusCode)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpResponse))(SimpleName:getStatusLine)))(SimpleName:getStatusCode))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:statusCode)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:200))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:statusCode)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:300)))))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseContent))(SimpleName:isEmpty)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:message)(ConditionalExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseContent))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:128))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseContent))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(NumberLiteral:128)))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(SimpleName:responseContent))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:Exception))(SimpleName:message))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:Exception))(StringLiteral:<STR>)))))))(ExpressionStatement(Assignment(SimpleName:lastRequest)(ASSIGNMENT_OPERATOR:=)(SimpleName:httpRequest)))(ExpressionStatement(Assignment(SimpleName:lastResponse)(ASSIGNMENT_OPERATOR:=)(SimpleName:httpResponse)))(IfStatement(InfixExpression(SimpleName:method)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Http.GET))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Date))(VariableDeclarationFragment(SimpleName:expire)(NullLiteral)))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:Header))(Dimension))(VariableDeclarationFragment(SimpleName:headers)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:httpResponse))(SimpleName:getAllHeaders))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:headers.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:headers)(SimpleName:i)))(SimpleName:getName)))(SimpleName:toLowerCase)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:expire)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DateFormat))(SimpleName:getInstance)))(SimpleName:parse)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:headers)(SimpleName:i)))(SimpleName:getValue)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:expire)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:expire))(SimpleName:compareTo)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Date)))))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Cache))(VariableDeclarationFragment(SimpleName:cache)(ClassInstanceCreation(SimpleType(SimpleName:Cache))(SimpleName:cacheKey)(SimpleName:responseContent)(SimpleName:expire))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cacheManager))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cache))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:cacheKey)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DateFormat))(SimpleName:getInstance)))(SimpleName:format)(METHOD_INVOCATION_ARGUMENTS(SimpleName:expire)))))))))))(ReturnStatement(SimpleName:responseContent))))))