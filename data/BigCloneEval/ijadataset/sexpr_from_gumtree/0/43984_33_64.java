(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:doPost)(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletRequest))(SimpleName:req))(SingleVariableDeclaration(SimpleType(SimpleName:HttpServletResponse))(SimpleName:resp))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Message))(VariableDeclarationFragment(SimpleName:message)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xmpp))(SimpleName:parseMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)))))(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:JID))(VariableDeclarationFragment(SimpleName:jid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getFromJid))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:raw)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Base64))(SimpleName:decodeFast)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:getBody))))))(VariableDeclarationStatement(SimpleType(SimpleName:Buffer))(VariableDeclarationFragment(SimpleName:buffer)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Buffer))(SimpleName:wrapReadableContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:raw)))))(VariableDeclarationStatement(SimpleType(SimpleName:EventHeaderTags))(VariableDeclarationFragment(SimpleName:tags)(ClassInstanceCreation(SimpleType(SimpleName:EventHeaderTags)))))(VariableDeclarationStatement(SimpleType(SimpleName:Event))(VariableDeclarationFragment(SimpleName:event)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GAEEventHelper))(SimpleName:parseEvent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)(SimpleName:tags)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:GAEServerConfiguration))(VariableDeclarationFragment(SimpleName:cfg)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServerConfigurationService))(SimpleName:getServerConfig))))(VariableDeclarationStatement(SimpleType(SimpleName:EventSendService))(VariableDeclarationFragment(SimpleName:sendService)(ClassInstanceCreation(SimpleType(SimpleName:EventSendService))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:int)(SimpleName:getMaxDataPackageSize)(Block(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cfg))(SimpleName:getMaxXMPPDataPackageSize)))))(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:send)(SingleVariableDeclaration(SimpleType(SimpleName:Buffer))(SimpleName:buf))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Message))(VariableDeclarationFragment(SimpleName:msg)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:MessageBuilder))))(SimpleName:withRecipientJids)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jid))))(SimpleName:withMessageType)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:MessageType.CHAT))))(SimpleName:withBody)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Base64))(SimpleName:encodeToString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:getRawBuffer))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:getReadIndex))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:readableBytes))(BooleanLiteral:false))))))(SimpleName:build))))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:retry)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ServerConfigurationService))(SimpleName:getServerConfig)))(SimpleName:getFetchRetryCount))))(WhileStatement(InfixExpression(InfixExpression(QualifiedName:SendResponse.Status.SUCCESS)(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xmpp))(SimpleName:sendMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:msg))))(SimpleName:getStatusMap)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jid))))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(PostfixExpression(SimpleName:retry)(POSTFIX_EXPRESSION_OPERATOR:--))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:setAttachment)(METHOD_INVOCATION_ARGUMENTS(ArrayCreation(ArrayType(SimpleType(SimpleName:Object))(Dimension))(ArrayInitializer(SimpleName:tags)(SimpleName:sendService))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:EventDispatcher))(SimpleName:getSingletonInstance)))(SimpleName:dispatch)(METHOD_INVOCATION_ARGUMENTS(SimpleName:event)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warn)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e)))))))))))