(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleName:MappedFileBuffer)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:file))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:segmentSize))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:readWrite))(SimpleType(SimpleName:IOException))(Block(IfStatement(InfixExpression(SimpleName:segmentSize)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:MAX_SEGMENT_SIZE))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:MAX_SEGMENT_SIZE)(StringLiteral:<STR>)(SimpleName:segmentSize)))))(ExpressionStatement(Assignment(SimpleName:_file)(ASSIGNMENT_OPERATOR:=)(SimpleName:file)))(ExpressionStatement(Assignment(SimpleName:_isWritable)(ASSIGNMENT_OPERATOR:=)(SimpleName:readWrite)))(ExpressionStatement(Assignment(SimpleName:_segmentSize)(ASSIGNMENT_OPERATOR:=)(SimpleName:segmentSize)))(VariableDeclarationStatement(SimpleType(SimpleName:RandomAccessFile))(VariableDeclarationFragment(SimpleName:mappedFile)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:mode)(ConditionalExpression(SimpleName:readWrite)(StringLiteral:<STR>)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:MapMode))(VariableDeclarationFragment(SimpleName:mapMode)(ConditionalExpression(SimpleName:readWrite)(QualifiedName:MapMode.READ_WRITE)(QualifiedName:MapMode.READ_ONLY))))(ExpressionStatement(Assignment(SimpleName:mappedFile)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(SimpleName:file)(SimpleName:mode))))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mappedFile))(SimpleName:getChannel))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:fileSize)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:length))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bufArraySize)(InfixExpression(CastExpression(PrimitiveType:int)(ParenthesizedExpression(InfixExpression(SimpleName:fileSize)(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:segmentSize))))(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(ConditionalExpression(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:fileSize)(INFIX_EXPRESSION_OPERATOR:%)(SimpleName:segmentSize))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0)))(NumberLiteral:1)(NumberLiteral:0))))))(ExpressionStatement(Assignment(SimpleName:_buffers)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(SimpleType(SimpleName:MappedByteBuffer))(Dimension(SimpleName:bufArraySize))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bufIdx)(NumberLiteral:0)))(ForStatement(VariableDeclarationExpression(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:offset)(NumberLiteral:0)))(InfixExpression(SimpleName:offset)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:fileSize))(Assignment(SimpleName:offset)(ASSIGNMENT_OPERATOR:+=)(SimpleName:segmentSize))(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:remainingFileSize)(InfixExpression(SimpleName:fileSize)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:offset))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:thisSegmentSize)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(NumberLiteral:2L)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:segmentSize))(SimpleName:remainingFileSize)))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:_buffers)(PostfixExpression(SimpleName:bufIdx)(POSTFIX_EXPRESSION_OPERATOR:++)))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:map)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mapMode)(SimpleName:offset)(SimpleName:thisSegmentSize))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtil))(SimpleName:closeQuietly)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mappedFile))))))))))