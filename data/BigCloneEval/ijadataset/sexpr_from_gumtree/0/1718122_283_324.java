(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:handleEvent)(SingleVariableDeclaration(SimpleType(SimpleName:Event))(SimpleName:event))(Block(IfStatement(InfixExpression(TypeLiteral(SimpleType(SimpleName:UserUtterance)))(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getClass)))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:UserUtterance))(SimpleName:event))))(SimpleName:getChannel))(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:CommunicationChannel.JABBER))(Block(ExpressionStatement(MethodInvocation(SimpleName:setUserIsOnline)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CommunicationChannel.JABBER)(BooleanLiteral:true))))))(ExpressionStatement(Assignment(SimpleName:lastUserEvent)(ASSIGNMENT_OPERATOR:=)(SimpleName:event)))(ExpressionStatement(MethodInvocation(SimpleName:dispatchUserUtterance)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:UserUtterance))(SimpleName:event)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:text)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:UserUtterance))(SimpleName:event))))(SimpleName:getText))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dialogueHistory))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DialogueAct))(QualifiedName:DialogueActType.USER_UTTERANCE)(SimpleName:text))))))(IfStatement(InfixExpression(TypeLiteral(SimpleType(SimpleName:UserPraise)))(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getClass)))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(SimpleName:setUserIsOnline)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:UserPraise))(SimpleName:event))))(SimpleName:getChannel))(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(SimpleName:dispatchUserInputWithUtteranceClass)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:UtteranceClass.PRAISE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dialogueHistory))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DialogueAct))(QualifiedName:DialogueActType.USER_PRAISE))))))(IfStatement(InfixExpression(TypeLiteral(SimpleType(SimpleName:UserScolding)))(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getClass)))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(SimpleName:setUserIsOnline)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:UserScolding))(SimpleName:event))))(SimpleName:getChannel))(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(SimpleName:dispatchUserInputWithUtteranceClass)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:UtteranceClass.SCOLDING))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dialogueHistory))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:DialogueAct))(QualifiedName:DialogueActType.USER_SCOLDING))))))(IfStatement(InfixExpression(TypeLiteral(SimpleType(SimpleName:UserConnected)))(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getClass)))(Block(ExpressionStatement(MethodInvocation(SimpleName:setNebulaCommunicationProtocol)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:UserConnected))(SimpleName:event))))(SimpleName:getNebulaCommunicationProtocol)))))(ExpressionStatement(MethodInvocation(SimpleName:setUserIsOnline)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CommunicationChannel.ECA)(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rascalliWS))(SimpleName:setActiveRascalloIdForUser)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getUser)))(SimpleName:getId))(MethodInvocation(SimpleName:getId))))))(IfStatement(InfixExpression(TypeLiteral(SimpleType(SimpleName:UserDisconnected)))(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getClass)))(Block(ExpressionStatement(MethodInvocation(SimpleName:setUserIsOnline)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CommunicationChannel.ECA)(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(SimpleName:setNebulaCommunicationProtocol)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)))))(IfStatement(InfixExpression(TypeLiteral(SimpleType(SimpleName:JabberPresenceChanged)))(INFIX_EXPRESSION_OPERATOR:==)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getClass)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:JabberPresenceChanged))(VariableDeclarationFragment(SimpleName:jpc)(CastExpression(SimpleType(SimpleName:JabberPresenceChanged))(SimpleName:event))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jpc))(SimpleName:getJabberId))(StringLiteral:<STR>)(ParenthesizedExpression(ConditionalExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jpc))(SimpleName:isOnline))(StringLiteral:<STR>)(StringLiteral:<STR>)))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jpc))(SimpleName:getJabberId)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:user))(SimpleName:getJabberId))))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isOnline)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jpc))(SimpleName:isOnline))))(ExpressionStatement(MethodInvocation(SimpleName:setUserIsOnline)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CommunicationChannel.JABBER)(SimpleName:isOnline)))))))))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:EventListener))(SimpleName:eventListener))(SimpleName:eventListeners)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:eventListener))(SimpleName:handleEvent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:event))))))))))