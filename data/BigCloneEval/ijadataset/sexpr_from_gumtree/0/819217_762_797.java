(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:actionPerformed)(SingleVariableDeclaration(SimpleType(SimpleName:ActionEvent))(SimpleName:e))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:DasCanvas))(VariableDeclarationFragment(SimpleName:canvas)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DasCanvas))(SimpleName:getFocusCanvas))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:JFileChooser))(VariableDeclarationFragment(SimpleName:fileChooser)(ClassInstanceCreation(SimpleType(SimpleName:JFileChooser)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:setDialogTitle)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ext))(SimpleName:toUpperCase))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:setFileFilter)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getFileNameExtensionFilter)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:ext)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))(SimpleName:ext))))))(VariableDeclarationStatement(SimpleType(SimpleName:Preferences))(VariableDeclarationFragment(SimpleName:prefs)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Preferences))(SimpleName:userNodeForPackage)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:DasCanvas)))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:savedir)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prefs))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NullLiteral)))))(IfStatement(InfixExpression(SimpleName:savedir)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:setCurrentDirectory)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:savedir))))))(IfStatement(InfixExpression(SimpleName:currentFile)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:setSelectedFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:currentFile)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:choice)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:showSaveDialog)(METHOD_INVOCATION_ARGUMENTS(SimpleName:parent)))))(IfStatement(InfixExpression(SimpleName:choice)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:JFileChooser.APPROVE_OPTION))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fname)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChooser))(SimpleName:getSelectedFile)))(SimpleName:toString))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fname))(SimpleName:toLowerCase)))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:ext)))))(ExpressionStatement(Assignment(SimpleName:fname)(ASSIGNMENT_OPERATOR:+=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:ext)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:ffname)(SimpleName:fname)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prefs))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:ffname)))(SimpleName:getParent)))))(ExpressionStatement(Assignment(SimpleName:currentFile)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ffname))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ffname))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:4)))))))(VariableDeclarationStatement(SimpleType(SimpleName:Runnable))(VariableDeclarationFragment(SimpleName:run)(ClassInstanceCreation(SimpleType(SimpleName:Runnable))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(TryStatement(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ext))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:canvas))(SimpleName:writeToPng)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ffname)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ext))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:canvas))(SimpleName:writeToPDF)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ffname)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ext))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:canvas))(SimpleName:writeToSVG)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ffname))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:app))(SimpleName:getController)))(SimpleName:setStatus)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:ffname))))))(CatchClause(SingleVariableDeclaration(SimpleType(QualifiedName:java.io.IOException))(SimpleName:ioe))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:org.das2.util.DasExceptionHandler))(SimpleName:handle)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ioe)))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:Thread))(SimpleName:run)(StringLiteral:<STR>)))(SimpleName:start)))))))))