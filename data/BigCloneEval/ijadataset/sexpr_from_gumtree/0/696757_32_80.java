(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:messageReceived)(SingleVariableDeclaration(SimpleType(SimpleName:Object))(SimpleName:in))(SingleVariableDeclaration(SimpleType(SimpleName:IoSession))(SimpleName:session))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:RTMPConnection))(VariableDeclarationFragment(SimpleName:conn)(CastExpression(SimpleType(SimpleName:RTMPConnection))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:RTMPConnection.RTMP_CONNECTION_KEY))))))(VariableDeclarationStatement(SimpleType(SimpleName:RTMP))(VariableDeclarationFragment(SimpleName:state)(CastExpression(SimpleType(SimpleName:RTMP))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ProtocolState.SESSION_KEY))))))(VariableDeclarationStatement(SimpleType(SimpleName:IRTMPEvent))(VariableDeclarationFragment(SimpleName:message)(NullLiteral)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Packet))(VariableDeclarationFragment(SimpleName:packet)(CastExpression(SimpleType(SimpleName:Packet))(SimpleName:in))))(ExpressionStatement(Assignment(SimpleName:message)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getMessage))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Header))(VariableDeclarationFragment(SimpleName:header)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:packet))(SimpleName:getHeader))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Channel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getChannel)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getChannelId))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:messageReceived)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getDataType))(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:TYPE_BYTES_READ))(Block(ExpressionStatement(MethodInvocation(SimpleName:onStreamBytesRead)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:channel)(SimpleName:header)(CastExpression(SimpleType(SimpleName:BytesRead))(SimpleName:message)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getDataType))(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:TYPE_INVOKE))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:IServiceCall))(VariableDeclarationFragment(SimpleName:call)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:Invoke))(SimpleName:message))))(SimpleName:getCall))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:action)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:call))(SimpleName:getServiceMethodName))))(IfStatement(InfixExpression(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:call))(SimpleName:getServiceName))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:isConnected))))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StreamAction))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:action))))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:StreamAction.CONNECT))))(Block(ExpressionStatement(MethodInvocation(SimpleName:handleConnect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:channel)(SimpleName:header)(CastExpression(SimpleType(SimpleName:Invoke))(SimpleName:message))(CastExpression(SimpleType(SimpleName:RTMP))(SimpleName:state)))))(ReturnStatement)))))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getDataType))(SwitchCase(SimpleName:TYPE_CHUNK_SIZE))(SwitchCase(SimpleName:TYPE_INVOKE))(SwitchCase(SimpleName:TYPE_FLEX_MESSAGE))(SwitchCase(SimpleName:TYPE_NOTIFY))(SwitchCase(SimpleName:TYPE_AUDIO_DATA))(SwitchCase(SimpleName:TYPE_VIDEO_DATA))(SwitchCase(SimpleName:TYPE_FLEX_SHARED_OBJECT))(SwitchCase(SimpleName:TYPE_FLEX_STREAM_SEND))(SwitchCase(SimpleName:TYPE_SHARED_OBJECT))(SwitchCase(SimpleName:TYPE_BYTES_READ))(ExpressionStatement(MethodInvocation(SimpleName:forwardPacket)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:packet))))(BreakStatement)(SwitchCase(SimpleName:TYPE_PING))(ExpressionStatement(MethodInvocation(SimpleName:onPing)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:channel)(SimpleName:header)(CastExpression(SimpleType(SimpleName:Ping))(SimpleName:message)))))(BreakStatement)(SwitchCase)(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getDataType))))))))(IfStatement(InstanceofExpression(SimpleName:message)(SimpleType(SimpleName:Unknown)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:toString)))))))(IfStatement(InfixExpression(SimpleName:message)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:message))(SimpleName:release)))))))))