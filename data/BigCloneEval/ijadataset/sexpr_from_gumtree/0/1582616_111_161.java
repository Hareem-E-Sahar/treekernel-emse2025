(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:handle)(SingleVariableDeclaration(SimpleType(SimpleName:HttpExchange))(SimpleName:exch))(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.err))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpPost))(VariableDeclarationFragment(SimpleName:req)(ClassInstanceCreation(SimpleType(SimpleName:HttpPost))(SimpleName:BACKGROUND_REQUEST_URI))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:requestText)(StringLiteral:<STR>))(VariableDeclarationFragment(SimpleName:responseText)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:backgroundRequestText)(StringLiteral:<STR>))(VariableDeclarationFragment(SimpleName:backgroundResponseText)(StringLiteral:<STR>)))(VariableDeclarationStatement(SimpleType(SimpleName:LocationRequest))(VariableDeclarationFragment(SimpleName:lrq)(ClassInstanceCreation(SimpleType(SimpleName:LocationRequest)))))(VariableDeclarationStatement(SimpleType(SimpleName:LocationResponse))(VariableDeclarationFragment(SimpleName:lrs)(ClassInstanceCreation(SimpleType(SimpleName:LocationResponse)))))(VariableDeclarationStatement(SimpleType(SimpleName:URI))(VariableDeclarationFragment(SimpleName:locationURI)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:requestText)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:getRequestBody))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:getPrincipal))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:setAccessUsername)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:getPrincipal)))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:setAccessPassword)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:getPrincipal)))(SimpleName:getRealm)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:requestText))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:initFromHeldRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestText)))))(IfStatement(InfixExpression(FieldAccess(ThisExpression)(SimpleName:cachedRequest))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:req)(ASSIGNMENT_OPERATOR:=)(FieldAccess(ThisExpression)(SimpleName:cachedRequest)))))(Block(ExpressionStatement(Assignment(SimpleName:backgroundRequestText)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:toSkyhookRequest))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:setEntity)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:StringEntity))(SimpleName:backgroundRequestText)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:setHeader)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:getRemoteAddress)))(SimpleName:getAddress)))(SimpleName:getHostAddress)))))(VariableDeclarationStatement(SimpleType(SimpleName:InetAddress))(VariableDeclarationFragment(SimpleName:remoteHost)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:getRemoteAddress)))(SimpleName:getAddress))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:server)))(SimpleName:knownHost)(METHOD_INVOCATION_ARGUMENTS(SimpleName:remoteHost))))(Block(ExpressionStatement(Assignment(SimpleName:locationURI)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:server))(SimpleName:addReferenceContext)(METHOD_INVOCATION_ARGUMENTS(SimpleName:remoteHost)(SimpleName:req)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:resp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:client)))(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:HttpUriRequest))(SimpleName:req))))))(ExpressionStatement(Assignment(SimpleName:backgroundResponseText)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:getEntity)))(SimpleName:getContent))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrs))(SimpleName:initFromSkyhookResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:backgroundResponseText))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:URI))(Dimension))(VariableDeclarationFragment(SimpleName:locationURIs)(ArrayCreation(ArrayType(SimpleType(SimpleName:URI))(Dimension(NumberLiteral:1))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:locationURIs)(NumberLiteral:0))(ASSIGNMENT_OPERATOR:=)(SimpleName:locationURI)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrs))(SimpleName:setLocationURIs)(METHOD_INVOCATION_ARGUMENTS(SimpleName:locationURIs))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:isExact))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:getLocationTypes)))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LocationRequest.LocationType.civic)))))(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:getLocationTypes)))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LocationRequest.LocationType.any))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrs))(SimpleName:setCivic)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:isExact))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:getLocationTypes)))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LocationRequest.LocationType.geodetic)))))(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:getLocationTypes)))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LocationRequest.LocationType.any))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrs))(SimpleName:setGeodetic)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:isExact))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:getLocationTypes)))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LocationRequest.LocationType.locationURI)))))(ParenthesizedExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrq))(SimpleName:getLocationTypes)))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LocationRequest.LocationType.any))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrs))(SimpleName:setGeodetic)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)))))(ExpressionStatement(Assignment(SimpleName:responseText)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lrs))(SimpleName:toHeldResponse)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:server)))(SimpleName:newEntity)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:getRemoteAddress)))(SimpleName:getAddress))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.err))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requestText))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.err))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(SimpleName:backgroundRequestText))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.err))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(SimpleName:backgroundResponseText))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.err))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(SimpleName:responseText))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:sendResponseHeaders)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:200)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseText))(SimpleName:length)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:getResponseBody)))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:responseText))(SimpleName:getBytes)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:sendResponseHeaders)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:500)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exch))(SimpleName:close))))))))))