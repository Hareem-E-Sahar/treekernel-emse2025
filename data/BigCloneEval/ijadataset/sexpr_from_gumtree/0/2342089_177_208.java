(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:testRoundingTrippingOfSendRequest)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:in)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SEND_REQUEST_MULTIPLE_RECIPIENT_WITH_SENDER))(SimpleName:getBytes)(METHOD_INVOCATION_ARGUMENTS(SimpleName:UTF_8))))))(VariableDeclarationStatement(SimpleType(SimpleName:SendRequest))(VariableDeclarationFragment(SimpleName:request)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:readSendRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)))))(VariableDeclarationStatement(Modifier:final)(ArrayType(SimpleType(SimpleName:Recipient))(Dimension))(VariableDeclarationFragment(SimpleName:recipients)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRecipients))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:4)(QualifiedName:recipients.length))))(VariableDeclarationStatement(SimpleType(SimpleName:Recipient))(VariableDeclarationFragment(SimpleName:alice)(ArrayAccess(SimpleName:recipients)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:alice))(SimpleName:getAddress)))(SimpleName:getValue)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:alice))(SimpleName:getChannel)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:alice))(SimpleName:getDeviceName)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(QualifiedName:RecipientType.TO)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:alice))(SimpleName:getRecipientType)))))(VariableDeclarationStatement(SimpleType(SimpleName:Recipient))(VariableDeclarationFragment(SimpleName:bob)(ArrayAccess(SimpleName:recipients)(NumberLiteral:1))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bob))(SimpleName:getAddress)))(SimpleName:getValue)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bob))(SimpleName:getChannel)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bob))(SimpleName:getDeviceName)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(QualifiedName:RecipientType.TO)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bob))(SimpleName:getRecipientType)))))(VariableDeclarationStatement(SimpleType(SimpleName:Recipient))(VariableDeclarationFragment(SimpleName:carol)(ArrayAccess(SimpleName:recipients)(NumberLiteral:2))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:carol))(SimpleName:getAddress)))(SimpleName:getValue)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:carol))(SimpleName:getChannel)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:carol))(SimpleName:getDeviceName)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(QualifiedName:RecipientType.TO)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:carol))(SimpleName:getRecipientType)))))(VariableDeclarationStatement(SimpleType(SimpleName:Recipient))(VariableDeclarationFragment(SimpleName:dave)(ArrayAccess(SimpleName:recipients)(NumberLiteral:3))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dave))(SimpleName:getAddress)))(SimpleName:getValue)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dave))(SimpleName:getChannel)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dave))(SimpleName:getDeviceName)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(QualifiedName:RecipientType.TO)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dave))(SimpleName:getRecipientType)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMessage)))(SimpleName:getSubject)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:URL))(StringLiteral:<STR>))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMessage)))(SimpleName:getURL)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getSender)))(SimpleName:getSMTPAddress)))(SimpleName:getValue)))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:out)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:parser))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)(SimpleName:out))))(ExpressionStatement(MethodInvocation(SimpleName:assertXMLEqual)(METHOD_INVOCATION_ARGUMENTS(SimpleName:SEND_REQUEST_MULTIPLE_RECIPIENT_WITH_SENDER_AND_TYPES)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:out))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:UTF_8))))))))))