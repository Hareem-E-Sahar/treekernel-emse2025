(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:testEnforceDeletions)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Directory))(VariableDeclarationFragment(SimpleName:dir)(ClassInstanceCreation(SimpleType(SimpleName:MockRAMDirectory)))))(VariableDeclarationStatement(SimpleType(SimpleName:IndexWriter))(VariableDeclarationFragment(SimpleName:writer)(ClassInstanceCreation(SimpleType(SimpleName:IndexWriter))(SimpleName:dir)(ClassInstanceCreation(SimpleType(SimpleName:WhitespaceAnalyzer)))(QualifiedName:IndexWriter.MaxFieldLength.UNLIMITED))))(VariableDeclarationStatement(SimpleType(SimpleName:IndexReader))(VariableDeclarationFragment(SimpleName:reader)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:getReader))))(VariableDeclarationStatement(SimpleType(SimpleName:IndexSearcher))(VariableDeclarationFragment(SimpleName:searcher)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(SimpleName:reader))))(VariableDeclarationStatement(SimpleType(SimpleName:Document))(VariableDeclarationFragment(SimpleName:doc)(ClassInstanceCreation(SimpleType(SimpleName:Document)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:doc))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Field))(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:Field.Store.YES)(QualifiedName:Field.Index.NOT_ANALYZED)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:addDocument)(METHOD_INVOCATION_ARGUMENTS(SimpleName:doc))))(ExpressionStatement(Assignment(SimpleName:reader)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:refreshReader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)))))(ExpressionStatement(Assignment(SimpleName:searcher)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(SimpleName:reader))))(VariableDeclarationStatement(SimpleType(SimpleName:TopDocs))(VariableDeclarationFragment(SimpleName:docs)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:MatchAllDocsQuery)))(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Filter))(VariableDeclarationFragment(SimpleName:startFilter)(ClassInstanceCreation(SimpleType(SimpleName:QueryWrapperFilter))(ClassInstanceCreation(SimpleType(SimpleName:TermQuery))(ClassInstanceCreation(SimpleType(SimpleName:Term))(StringLiteral:<STR>)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:CachingWrapperFilter))(VariableDeclarationFragment(SimpleName:filter)(ClassInstanceCreation(SimpleType(SimpleName:CachingWrapperFilter))(SimpleName:startFilter)(QualifiedName:CachingWrapperFilter.DeletesMode.IGNORE))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:MatchAllDocsQuery)))(SimpleName:filter)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(VariableDeclarationStatement(SimpleType(SimpleName:ConstantScoreQuery))(VariableDeclarationFragment(SimpleName:constantScore)(ClassInstanceCreation(SimpleType(SimpleName:ConstantScoreQuery))(SimpleName:filter))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constantScore)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:deleteDocuments)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Term))(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:reader)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:refreshReader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)))))(ExpressionStatement(Assignment(SimpleName:searcher)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(SimpleName:reader))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:MatchAllDocsQuery)))(SimpleName:filter)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:0)(QualifiedName:docs.totalHits))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constantScore)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(ExpressionStatement(Assignment(SimpleName:filter)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:CachingWrapperFilter))(SimpleName:startFilter)(QualifiedName:CachingWrapperFilter.DeletesMode.RECACHE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:addDocument)(METHOD_INVOCATION_ARGUMENTS(SimpleName:doc))))(ExpressionStatement(Assignment(SimpleName:reader)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:refreshReader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)))))(ExpressionStatement(Assignment(SimpleName:searcher)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(SimpleName:reader))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:MatchAllDocsQuery)))(SimpleName:filter)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(ExpressionStatement(Assignment(SimpleName:constantScore)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ConstantScoreQuery))(SimpleName:filter))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constantScore)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(VariableDeclarationStatement(SimpleType(SimpleName:IndexReader))(VariableDeclarationFragment(SimpleName:newReader)(MethodInvocation(SimpleName:refreshReader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)))))(ExpressionStatement(MethodInvocation(SimpleName:assertTrue)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:reader)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:newReader)))))(ExpressionStatement(Assignment(SimpleName:reader)(ASSIGNMENT_OPERATOR:=)(SimpleName:newReader)))(ExpressionStatement(Assignment(SimpleName:searcher)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(SimpleName:reader))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:missCount)(QualifiedName:filter.missCount)))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constantScore)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:missCount)(QualifiedName:filter.missCount))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:deleteDocuments)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Term))(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:reader)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:refreshReader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)))))(ExpressionStatement(Assignment(SimpleName:searcher)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(SimpleName:reader))))(ExpressionStatement(Assignment(SimpleName:missCount)(ASSIGNMENT_OPERATOR:=)(QualifiedName:filter.missCount)))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:MatchAllDocsQuery)))(SimpleName:filter)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:missCount)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))(QualifiedName:filter.missCount))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:0)(QualifiedName:docs.totalHits))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constantScore)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:0)(QualifiedName:docs.totalHits))))(ExpressionStatement(Assignment(SimpleName:filter)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:CachingWrapperFilter))(SimpleName:startFilter)(QualifiedName:CachingWrapperFilter.DeletesMode.DYNAMIC))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:addDocument)(METHOD_INVOCATION_ARGUMENTS(SimpleName:doc))))(ExpressionStatement(Assignment(SimpleName:reader)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:refreshReader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)))))(ExpressionStatement(Assignment(SimpleName:searcher)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(SimpleName:reader))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:MatchAllDocsQuery)))(SimpleName:filter)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(ExpressionStatement(Assignment(SimpleName:constantScore)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ConstantScoreQuery))(SimpleName:filter))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constantScore)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:1)(QualifiedName:docs.totalHits))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writer))(SimpleName:deleteDocuments)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Term))(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:reader)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:refreshReader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:reader)))))(ExpressionStatement(Assignment(SimpleName:searcher)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:IndexSearcher))(SimpleName:reader))))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:MatchAllDocsQuery)))(SimpleName:filter)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:0)(QualifiedName:docs.totalHits))))(ExpressionStatement(Assignment(SimpleName:missCount)(ASSIGNMENT_OPERATOR:=)(QualifiedName:filter.missCount)))(ExpressionStatement(Assignment(SimpleName:docs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:searcher))(SimpleName:search)(METHOD_INVOCATION_ARGUMENTS(SimpleName:constantScore)(NumberLiteral:1)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(NumberLiteral:0)(QualifiedName:docs.totalHits))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:missCount)(QualifiedName:filter.missCount))))))))