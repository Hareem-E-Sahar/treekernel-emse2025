(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:fileReceiveRequested)(SingleVariableDeclaration(SimpleType(SimpleName:FileTransferSupport))(SimpleName:connection))(SingleVariableDeclaration(SimpleType(SimpleName:Contact))(SimpleName:contact))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:filename))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:description))(SingleVariableDeclaration(SimpleType(SimpleName:Object))(SimpleName:connectionInfo))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:JFileChooser))(VariableDeclarationFragment(SimpleName:chooser)(ClassInstanceCreation(SimpleType(SimpleName:JFileChooser))(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:ClientProperties.INSTANCE))(SimpleName:getLastFolder)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:setDialogTitle)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:contact)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:filename)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:setToolTipText)(METHOD_INVOCATION_ARGUMENTS(SimpleName:description))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(ConditionalExpression(InfixExpression(SimpleName:filename)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GeneralUtils))(SimpleName:stripHTML)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filename))))))(ExpressionStatement(Assignment(SimpleName:name)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GeneralUtils))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(SimpleName:name)(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:name)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GeneralUtils))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(SimpleName:name)(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:setSelectedFile)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:ClientProperties.INSTANCE))(SimpleName:getLastFolder))(SimpleName:name)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:returnVal)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:showSaveDialog)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:ClientProperties.INSTANCE))(SimpleName:setLastFolder)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:getCurrentDirectory)))(SimpleName:getAbsolutePath)))))(IfStatement(InfixExpression(SimpleName:returnVal)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:JFileChooser.APPROVE_OPTION))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:rejectFileTransfer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connectionInfo))))(ReturnStatement))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:getSelectedFile)))(SimpleName:isDirectory))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showMessageDialog)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Main))(SimpleName:getFrame))(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:JOptionPane.ERROR_MESSAGE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:rejectFileTransfer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connectionInfo)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:getSelectedFile)))(SimpleName:exists))(Block(ExpressionStatement(Assignment(SimpleName:returnVal)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showConfirmDialog)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Main))(SimpleName:getFrame))(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:JOptionPane.YES_NO_CANCEL_OPTION)(QualifiedName:JOptionPane.QUESTION_MESSAGE)))))(IfStatement(InfixExpression(SimpleName:returnVal)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:JOptionPane.NO_OPTION))(Block(ExpressionStatement(MethodInvocation(SimpleName:fileReceiveRequested)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)(SimpleName:contact)(SimpleName:filename)(SimpleName:description)(SimpleName:connectionInfo))))(ReturnStatement))(IfStatement(InfixExpression(SimpleName:returnVal)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:JOptionPane.CANCEL_OPTION))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:rejectFileTransfer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connectionInfo))))(ReturnStatement))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:getSelectedFile)))(SimpleName:delete)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showMessageDialog)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Main))(SimpleName:getFrame))(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:JOptionPane.ERROR_MESSAGE))))(ExpressionStatement(MethodInvocation(SimpleName:fileReceiveRequested)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)(SimpleName:contact)(SimpleName:filename)(SimpleName:description)(SimpleName:connectionInfo))))(ReturnStatement)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:acceptFileTransfer)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FileTransferAdapter))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Main))(SimpleName:getFrame))(SimpleName:description)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chooser))(SimpleName:getSelectedFile))(SimpleName:contact))(SimpleName:connectionInfo))))))))