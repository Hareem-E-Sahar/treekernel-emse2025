(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(Modifier:static)(PrimitiveType:void)(SimpleName:download)(SingleVariableDeclaration(SimpleType(SimpleName:FtpSiteConnector))(SimpleName:connector))(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:localFile))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:remotePath))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:IProgressMonitor))(SimpleName:monitor))(SimpleType(SimpleName:FtpException))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localFile))(SimpleName:exists)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FTPClient))(VariableDeclarationFragment(SimpleName:ftp)(ClassInstanceCreation(SimpleType(SimpleName:FTPClient)))))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:FTPClientConfig))(VariableDeclarationFragment(SimpleName:conf)(ClassInstanceCreation(SimpleType(SimpleName:FTPClientConfig))(QualifiedName:FTPClientConfig.SYST_UNIX))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:configure)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conf))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:hostname)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connector))(SimpleName:getUrl)))(SimpleName:getHost))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:connect)(METHOD_INVOCATION_ARGUMENTS(SimpleName:hostname))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:hostname)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:getReplyString)))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:loggedIn)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:login)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connector))(SimpleName:getUsername))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connector))(SimpleName:getPassword))))))(IfStatement(SimpleName:loggedIn)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:remotePath)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:setFileTransferMode)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:FTPClient.BINARY_FILE_TYPE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:setFileType)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:FTPClient.BINARY_FILE_TYPE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:enterLocalPassiveMode)))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:fileSize)(MethodInvocation(SimpleName:getFileSize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ftp)(SimpleName:remotePath)))))(VariableDeclarationStatement(SimpleType(SimpleName:FileOutputStream))(VariableDeclarationFragment(SimpleName:dfile)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:localFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:retrieveFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:remotePath)(SimpleName:dfile)(ClassInstanceCreation(SimpleType(SimpleName:CopyStreamListener))(AnonymousClassDeclaration(FieldDeclaration(Modifier:public)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:worked)(NumberLiteral:0)))(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:bytesTransferred)(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:totalBytesTransferred))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:bytesTransferred))(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:streamSize))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:percent)(MethodInvocation(SimpleName:percent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileSize)(SimpleName:totalBytesTransferred)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:delta)(InfixExpression(SimpleName:percent)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:worked))))(IfStatement(InfixExpression(SimpleName:delta)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(IfStatement(InfixExpression(SimpleName:monitor)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:monitor))(SimpleName:worked)(METHOD_INVOCATION_ARGUMENTS(SimpleName:delta))))))(ExpressionStatement(Assignment(SimpleName:worked)(ASSIGNMENT_OPERATOR:=)(SimpleName:percent)))))))(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:bytesTransferred)(SingleVariableDeclaration(SimpleType(SimpleName:CopyStreamEvent))(SimpleName:event))(Block))(MethodDeclaration(Modifier:private)(PrimitiveType:int)(SimpleName:percent)(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:totalBytes))(SingleVariableDeclaration(PrimitiveType:long)(SimpleName:totalBytesTransferred))(Block(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:percent)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:totalBytesTransferred)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:100)))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:totalBytes))))(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Long))(SimpleName:valueOf)(METHOD_INVOCATION_ARGUMENTS(SimpleName:percent))))(SimpleName:intValue))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dfile))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dfile))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:logout))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:FtpException))(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:disconnect))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:SocketException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:FtpException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:FtpException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:isConnected))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ftp))(SimpleName:disconnect))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ioe))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:FtpException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ioe))(SimpleName:getMessage))))))))))))))))))