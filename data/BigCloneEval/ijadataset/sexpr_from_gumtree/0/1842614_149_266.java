(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(Modifier:synchronized)(SimpleType(SimpleName:Integer))(SimpleName:getNextSequence)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:seqNum))(SimpleType(SimpleName:ApplicationException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Connection))(VariableDeclarationFragment(SimpleName:dbConn)(NullLiteral)))(VariableDeclarationStatement(SimpleType(QualifiedName:java.sql.PreparedStatement))(VariableDeclarationFragment(SimpleName:preStat)(NullLiteral)))(VariableDeclarationStatement(SimpleType(QualifiedName:java.sql.ResultSet))(VariableDeclarationFragment(SimpleName:rs)(NullLiteral)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:noTableMatchFlag)(BooleanLiteral:false)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:currID)(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:nextID)(NumberLiteral:0)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:dbConn)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:getConnection)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ApplicationException))(StringLiteral:<STR>)(SimpleName:e))))))(SynchronizedStatement(SimpleName:hashPkKeyLock)(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hashPkKeyLock))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:seqNum)))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hashPkKeyLock))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:seqNum)(ClassInstanceCreation(SimpleType(SimpleName:Object))))))))))(SynchronizedStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:hashPkKeyLock))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:seqNum)))(Block(SynchronizedStatement(SimpleName:dbConn)(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:preStat)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbConn))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:seqNum))))(ExpressionStatement(Assignment(SimpleName:rs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:executeQuery))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rs))(SimpleName:next))(Block(ExpressionStatement(Assignment(SimpleName:currID)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rs))(SimpleName:getInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1))))))(Block(ExpressionStatement(Assignment(SimpleName:noTableMatchFlag)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)(SimpleName:e))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbConn))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ignore))(Block))(Block(ExpressionStatement(Assignment(SimpleName:dbConn)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ApplicationException))(StringLiteral:<STR>)(SimpleName:e)(SimpleName:seqNum)))))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rs))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ignore))(Block))(Block(ExpressionStatement(Assignment(SimpleName:rs)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ignore))(Block))(Block(ExpressionStatement(Assignment(SimpleName:preStat)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))))(IfStatement(SimpleName:noTableMatchFlag)(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:currID)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(ExpressionStatement(Assignment(SimpleName:preStat)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbConn))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(QualifiedName:java.sql.ResultSet.TYPE_SCROLL_INSENSITIVE)(QualifiedName:java.sql.ResultSet.CONCUR_UPDATABLE)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:seqNum))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(SimpleName:currID))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:executeUpdate))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)(SimpleName:e))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbConn))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ignore))(Block))(Block(ExpressionStatement(Assignment(SimpleName:dbConn)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ApplicationException))(StringLiteral:<STR>)(SimpleName:e)(SimpleName:seqNum)))))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ignore))(Block))(Block(ExpressionStatement(Assignment(SimpleName:preStat)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))))))(TryStatement(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:updateCnt)(NumberLiteral:0)))(ExpressionStatement(Assignment(SimpleName:nextID)(ASSIGNMENT_OPERATOR:=)(SimpleName:currID)))(DoStatement(Block(ExpressionStatement(PostfixExpression(SimpleName:nextID)(POSTFIX_EXPRESSION_OPERATOR:++)))(ExpressionStatement(Assignment(SimpleName:preStat)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbConn))(SimpleName:prepareStatement)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(QualifiedName:java.sql.ResultSet.TYPE_SCROLL_INSENSITIVE)(QualifiedName:java.sql.ResultSet.CONCUR_UPDATABLE)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(SimpleName:nextID))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:setString)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2)(SimpleName:seqNum))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:setInt)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:3)(SimpleName:currID))))(ExpressionStatement(Assignment(SimpleName:updateCnt)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:executeUpdate))))(ExpressionStatement(PostfixExpression(SimpleName:currID)(POSTFIX_EXPRESSION_OPERATOR:++)))(IfStatement(InfixExpression(InfixExpression(SimpleName:updateCnt)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:currID)(INFIX_EXPRESSION_OPERATOR:%)(NumberLiteral:2)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:50)))))))(InfixExpression(SimpleName:updateCnt)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbConn))(SimpleName:commit)))(ReturnStatement(ParenthesizedExpression(ClassInstanceCreation(SimpleType(SimpleName:Integer))(SimpleName:nextID)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)(SimpleName:e))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbConn))(SimpleName:rollback))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ignore))(Block)))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ApplicationException))(StringLiteral:<STR>)(SimpleName:e)(SimpleName:seqNum)))))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:preStat))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ignore))(Block))(Block(ExpressionStatement(Assignment(SimpleName:preStat)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dbConn))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ignore))(Block))(Block(ExpressionStatement(Assignment(SimpleName:dbConn)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))))))))))))