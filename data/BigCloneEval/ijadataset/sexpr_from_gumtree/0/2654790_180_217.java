(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:discretizeChannel)(SingleVariableDeclaration(SimpleType(SimpleName:ChannelMap))(SimpleName:map))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:channelResolution)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FluxSettings))(SimpleName:getChannelResolution))))(VariableDeclarationStatement(SimpleType(SimpleName:FluxChannelMap))(VariableDeclarationFragment(SimpleName:chachedMap)(MethodInvocation(SimpleName:getCachedChannelMap)(METHOD_INVOCATION_ARGUMENTS(SimpleName:map)))))(IfStatement(InfixExpression(SimpleName:chachedMap)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Environment))(VariableDeclarationFragment(SimpleName:env)(ClassInstanceCreation(SimpleType(SimpleName:Environment)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InstanceofExpression(QualifiedName:env.userObject)(SimpleType(SimpleName:ChannelMapInput)))))(Block(ExpressionStatement(Assignment(QualifiedName:env.userObjectOwner)(ASSIGNMENT_OPERATOR:=)(SimpleName:map)))(ExpressionStatement(Assignment(QualifiedName:env.userObject)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:ChannelMapInput)))))))(VariableDeclarationStatement(SimpleType(SimpleName:ChannelData))(VariableDeclarationFragment(SimpleName:src)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:ChannelMapInput))(QualifiedName:env.userObject))))(SimpleName:getUserData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:map)(NullLiteral))))(VariableDeclarationFragment(SimpleName:sink)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:createSink)(METHOD_INVOCATION_ARGUMENTS(SimpleName:map)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:env.normal))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(NumberLiteral:0)(NumberLiteral:1))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:env.dpdu))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(NumberLiteral:0)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:env.dpdv))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(NumberLiteral:1)(NumberLiteral:0))))(ExpressionStatement(Assignment(QualifiedName:env.solid)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(VariableDeclarationStatement(SimpleType(SimpleName:Point3f))(VariableDeclarationFragment(SimpleName:image)(Dimension)(Dimension)(ArrayCreation(ArrayType(SimpleType(SimpleName:Point3f))(Dimension(SimpleName:channelResolution))(Dimension(SimpleName:channelResolution))))))(VariableDeclarationStatement(SimpleType(SimpleName:ChannelData))(VariableDeclarationFragment(SimpleName:cd)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:sink))(SimpleName:getData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:map)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:setFloat)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Channel.IOR)(QualifiedName:env.iorRatio))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:setTuple3f)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Channel.DPXDU)(QualifiedName:env.dpdu))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:setTuple3f)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Channel.DPXDV)(QualifiedName:env.dpdv))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:x)(NumberLiteral:0)))(InfixExpression(SimpleName:x)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:channelResolution))(PostfixExpression(SimpleName:x)(POSTFIX_EXPRESSION_OPERATOR:++))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:y)(NumberLiteral:0)))(InfixExpression(SimpleName:y)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:channelResolution))(PostfixExpression(SimpleName:y)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(PrimitiveType:float)(VariableDeclarationFragment(SimpleName:u)(InfixExpression(SimpleName:x)(INFIX_EXPRESSION_OPERATOR:/)(CastExpression(PrimitiveType:float)(SimpleName:channelResolution)))))(VariableDeclarationStatement(PrimitiveType:float)(VariableDeclarationFragment(SimpleName:v)(InfixExpression(SimpleName:y)(INFIX_EXPRESSION_OPERATOR:/)(CastExpression(PrimitiveType:float)(SimpleName:channelResolution)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LightDistribution))(SimpleName:map2cartesian)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:env.point)(SimpleName:u)(SimpleName:v))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:env.localPoint))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:env.point))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:env.normal))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:env.point))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:env.uv))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(SimpleName:u)(SimpleName:v))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:setTuple3f)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Channel.PX)(QualifiedName:env.point))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:setTuple3f)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Channel.X)(QualifiedName:env.localPoint))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:setTuple3f)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Channel.NX)(QualifiedName:env.normal))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:src))(SimpleName:setTuple2f)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Channel.U)(QualifiedName:env.uv))))(ExpressionStatement(Assignment(ArrayAccess(ArrayAccess(SimpleName:image)(SimpleName:y))(SimpleName:x))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Point3f)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cd))(SimpleName:getTuple3f)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(ArrayAccess(SimpleName:image)(SimpleName:y))(SimpleName:x))(SimpleName:sink)(QualifiedName:Channel.R)))))))(ExpressionStatement(MethodInvocation(SimpleName:addCachedChannelMap)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FluxHDRImageMap))(SimpleName:image))(SimpleName:map)(SimpleName:map)))))(Block(ExpressionStatement(Assignment(SimpleName:currentChannelNode)(ASSIGNMENT_OPERATOR:=)(SimpleName:chachedMap)))))))))