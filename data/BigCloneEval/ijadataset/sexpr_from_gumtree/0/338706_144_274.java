(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:void)(SimpleName:writeRtfContentWithException)(SimpleType(SimpleName:IOException))(Block(IfStatement(InfixExpression(SimpleName:m_writer)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement)))(IfStatement(InfixExpression(SimpleName:url)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ExternalGraphicException))(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:linkToRoot)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:linkToRoot)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m_writer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m_writer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:linkToRoot))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:urlFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getFile)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m_writer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlFile))(SimpleName:getName)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m_writer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ReturnStatement)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getRtfFile)))(SimpleName:getLog)))(SimpleName:logInfo)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:url)(StringLiteral:<STR>)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:data)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:BufferedInputStream))(VariableDeclarationFragment(SimpleName:bin)(ClassInstanceCreation(SimpleType(SimpleName:BufferedInputStream))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ByteArrayOutputStream))(VariableDeclarationFragment(SimpleName:bout)(ClassInstanceCreation(SimpleType(SimpleName:ByteArrayOutputStream)))))(WhileStatement(BooleanLiteral:true)(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:datum)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bin))(SimpleName:read))))(IfStatement(InfixExpression(SimpleName:datum)(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(BreakStatement))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bout))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:datum))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bout))(SimpleName:flush)))(ExpressionStatement(Assignment(SimpleName:data)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bout))(SimpleName:toByteArray)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ExternalGraphicException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:url)(StringLiteral:<STR>)(SimpleName:e)(StringLiteral:<STR>)))))))(IfStatement(InfixExpression(SimpleName:data)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:file)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:getFile))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:type)(MethodInvocation(SimpleName:determineImageType)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:>=)(QualifiedName:ImageConstants.I_TO_CONVERT_BASIS))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:to)(ArrayAccess(QualifiedName:ImageConstants.CONVERT_TO)(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:-)(QualifiedName:ImageConstants.I_TO_CONVERT_BASIS)))))(IfStatement(InfixExpression(SimpleName:to)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ImageConstants.I_JPG))(Block(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:IJpegEncoder))(VariableDeclarationFragment(SimpleName:jpgEncoder)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:JpegEncoderFactory))))(SimpleName:getEncoder))))(ExpressionStatement(Assignment(SimpleName:data)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jpgEncoder))(SimpleName:encodeJPEG)(METHOD_INVOCATION_ARGUMENTS(SimpleName:graphicCompressionRate)(SimpleName:data)))))(ExpressionStatement(Assignment(SimpleName:type)(ASSIGNMENT_OPERATOR:=)(SimpleName:to))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:JPEGException))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:url)(StringLiteral:<STR>)(SimpleName:e)(StringLiteral:<STR>))))))))(Block(ExpressionStatement(Assignment(SimpleName:type)(ASSIGNMENT_OPERATOR:=)(QualifiedName:ImageConstants.I_NOT_SUPPORTED)))))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ImageConstants.I_NOT_SUPPORTED))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ExternalGraphicException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:file))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:rtfImageCode)(ArrayAccess(QualifiedName:ImageConstants.RTF_TAGS)(SimpleName:type))))(ExpressionStatement(MethodInvocation(SimpleName:writeGroupMark)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(SimpleName:writeStarControlWord)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(SimpleName:writeGroupMark)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:StringBuffer))(VariableDeclarationFragment(SimpleName:buf)(ClassInstanceCreation(SimpleType(SimpleName:StringBuffer))(InfixExpression(QualifiedName:data.length)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:3)))))(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(SimpleName:rtfImageCode))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ImageConstants.I_PNG))(Block(ExpressionStatement(Assignment(SimpleName:width)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:getIntFromByteArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)(NumberLiteral:16)(NumberLiteral:4)(BooleanLiteral:true)))))(ExpressionStatement(Assignment(SimpleName:height)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:getIntFromByteArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)(NumberLiteral:20)(NumberLiteral:4)(BooleanLiteral:true))))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ImageConstants.I_JPG))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:basis)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:ff)(CastExpression(PrimitiveType:byte)(NumberLiteral:0xff))))(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:c0)(CastExpression(PrimitiveType:byte)(NumberLiteral:0xc0))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:data.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:b)(ArrayAccess(SimpleName:data)(SimpleName:i))))(IfStatement(InfixExpression(SimpleName:b)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:ff))(ContinueStatement))(IfStatement(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:==)(InfixExpression(QualifiedName:data.length)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(ContinueStatement))(ExpressionStatement(Assignment(SimpleName:b)(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:data)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))(IfStatement(InfixExpression(SimpleName:b)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:c0))(ContinueStatement))(ExpressionStatement(Assignment(SimpleName:basis)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:5))))(BreakStatement)))(IfStatement(InfixExpression(SimpleName:basis)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(Assignment(SimpleName:width)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:getIntFromByteArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)(InfixExpression(SimpleName:basis)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:2))(NumberLiteral:2)(BooleanLiteral:true)))))(ExpressionStatement(Assignment(SimpleName:height)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:getIntFromByteArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)(SimpleName:basis)(NumberLiteral:2)(BooleanLiteral:true))))))))(IfStatement(InfixExpression(SimpleName:type)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:ImageConstants.I_EMF))(Block(ExpressionStatement(Assignment(SimpleName:width)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:getIntFromByteArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)(NumberLiteral:151)(NumberLiteral:4)(BooleanLiteral:false)))))(ExpressionStatement(Assignment(SimpleName:height)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageUtil))(SimpleName:getIntFromByteArray)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data)(NumberLiteral:155)(NumberLiteral:4)(BooleanLiteral:false)))))))))(IfStatement(InfixExpression(SimpleName:width)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:width)))))))(IfStatement(InfixExpression(SimpleName:height)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:height)))))))(IfStatement(InfixExpression(SimpleName:widthDesired)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(IfStatement(SimpleName:perCentW)(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:widthDesired))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(InfixExpression(SimpleName:widthDesired)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:100))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:width)))))))))(IfStatement(InfixExpression(SimpleName:scaleUniform)(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:heightDesired)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(Block(IfStatement(SimpleName:perCentH)(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:heightDesired))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(InfixExpression(SimpleName:heightDesired)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:100))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:height)))))))))))(IfStatement(InfixExpression(SimpleName:heightDesired)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(IfStatement(SimpleName:perCentH)(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:heightDesired))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(InfixExpression(SimpleName:heightDesired)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:100))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:height)))))))))(IfStatement(InfixExpression(SimpleName:scaleUniform)(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:widthDesired)(INFIX_EXPRESSION_OPERATOR:!=)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(Block(IfStatement(SimpleName:perCentW)(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:widthDesired))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:writeControlWord)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(InfixExpression(InfixExpression(SimpleName:widthDesired)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:100))(INFIX_EXPRESSION_OPERATOR:/)(SimpleName:width)))))))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:data.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:iData)(ArrayAccess(SimpleName:data)(SimpleName:i))))(IfStatement(InfixExpression(SimpleName:iData)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:iData)(ASSIGNMENT_OPERATOR:+=)(NumberLiteral:256))))(IfStatement(InfixExpression(SimpleName:iData)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:16))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(CharacterLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:toHexString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:iData))))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:len)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:length))))(VariableDeclarationStatement(ArrayType(PrimitiveType:char)(Dimension))(VariableDeclarationFragment(SimpleName:chars)(ArrayCreation(ArrayType(PrimitiveType:char)(Dimension(SimpleName:len))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:getChars)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(SimpleName:len)(SimpleName:chars)(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m_writer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:chars))))(ExpressionStatement(MethodInvocation(SimpleName:writeGroupMark)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(SimpleName:writeGroupMark)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))))))