(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(PrimitiveType:int)(SimpleName:exportTemplateResource)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:rfsName))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:vfsName))(SingleVariableDeclaration(SimpleType(SimpleName:StringBuffer))(SimpleName:cookies))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsStaticExportManager))(VariableDeclarationFragment(SimpleName:manager)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:OpenCms))(SimpleName:getStaticExportManager))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:exportUrlStr)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getExportUrl))(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getRfsPrefix)(METHOD_INVOCATION_ARGUMENTS(SimpleName:vfsName)))(SimpleName:rfsName))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_SENDING_REQUEST_2)(SimpleName:rfsName)(SimpleName:exportUrlStr))))))))(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:exportUrl)(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:exportUrlStr))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:HttpURLConnection))(SimpleName:setFollowRedirects)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpURLConnection))(VariableDeclarationFragment(SimpleName:urlcon)(CastExpression(SimpleType(SimpleName:HttpURLConnection))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportUrl))(SimpleName:openConnection)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestMethod)(METHOD_INVOCATION_ARGUMENTS(SimpleName:REQUEST_METHOD_GET))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_OPENCMS_EXPORT)(QualifiedName:CmsStringUtil.TRUE))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getAcceptLanguageHeader))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_ACCEPT_LANGUAGE)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getAcceptLanguageHeader))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_ACCEPT_LANGUAGE)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getDefaultAcceptLanguageHeader)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getAcceptCharsetHeader))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_ACCEPT_CHARSET)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getAcceptCharsetHeader))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsRequestUtil.HEADER_ACCEPT_CHARSET)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getDefaultAcceptCharsetHeader)))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:exportFileName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CmsFileUtil))(SimpleName:normalizePath)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getExportPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:vfsName)))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:rfsName))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:exportFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:exportFileName))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:dateLastModified)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportFile))(SimpleName:lastModified))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:vfsName))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:CmsWorkplace.VFS_PATH_SYSTEM)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Iterator))(VariableDeclarationFragment(SimpleName:it)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:getRfsRules)))(SimpleName:iterator))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:CmsStaticExportRfsRule))(VariableDeclarationFragment(SimpleName:rule)(CastExpression(SimpleType(SimpleName:CmsStaticExportRfsRule))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:it))(SimpleName:next)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rule))(SimpleName:match)(METHOD_INVOCATION_ARGUMENTS(SimpleName:vfsName)))(Block(ExpressionStatement(Assignment(SimpleName:exportFileName)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CmsFileUtil))(SimpleName:normalizePath)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rule))(SimpleName:getExportPath))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:rfsName))))))(ExpressionStatement(Assignment(SimpleName:exportFile)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:exportFileName))))(IfStatement(InfixExpression(SimpleName:dateLastModified)(INFIX_EXPRESSION_OPERATOR:>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportFile))(SimpleName:lastModified)))(Block(ExpressionStatement(Assignment(SimpleName:dateLastModified)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportFile))(SimpleName:lastModified))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setIfModifiedSince)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dateLastModified))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_IF_MODIFIED_SINCE_SET_2)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:exportFile))(SimpleName:getName))(ClassInstanceCreation(SimpleType(SimpleName:Long))(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:dateLastModified)(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:1000)))(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:1000))))))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookies))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:setRequestProperty)(METHOD_INVOCATION_ARGUMENTS(SimpleName:REQUEST_PROPERTY_COOKIE)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookies))(SimpleName:toString)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:connect)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:status)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:getResponseCode))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookies))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cookies))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:getHeaderField)(METHOD_INVOCATION_ARGUMENTS(SimpleName:HEADER_FIELD_SET_COOKIE))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_STATICEXPORT_COOKIES_1)(SimpleName:cookies))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:urlcon))(SimpleName:disconnect)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:isInfoEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:LOG))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Messages))(SimpleName:get)))(SimpleName:getBundle)))(SimpleName:key)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Messages.LOG_REQUEST_RESULT_3)(SimpleName:rfsName)(SimpleName:exportUrlStr)(ClassInstanceCreation(SimpleType(SimpleName:Integer))(SimpleName:status)))))))))(ReturnStatement(SimpleName:status))))))