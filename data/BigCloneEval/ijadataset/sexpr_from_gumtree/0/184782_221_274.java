(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:synchronized)(PrimitiveType:void)(SimpleName:put)(SingleVariableDeclaration(SimpleType(SimpleName:TaskDataState))(SimpleName:taskDataState))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileOutputStream))(VariableDeclarationFragment(SimpleName:fileOutputStream)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:FileLock))(VariableDeclarationFragment(SimpleName:lock)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:repositoryFolder)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:URLEncoder))(SimpleName:encode)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getNewTaskData)))(SimpleName:getRepositoryUrl))(SimpleName:ENCODING_UTF_8)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dataFile)(MethodInvocation(SimpleName:getDataFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:repositoryFolder)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getId))))))(IfStatement(InfixExpression(SimpleName:dataFile)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataFile))(SimpleName:getParentFile)))(SimpleName:exists)))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataFile))(SimpleName:getParentFile)))(SimpleName:mkdirs)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dataFile))(SimpleName:getParentFile)))(SimpleName:getAbsolutePath)))))))))(ExpressionStatement(Assignment(SimpleName:fileOutputStream)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:dataFile))))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileOutputStream))(SimpleName:getChannel))))(ExpressionStatement(Assignment(SimpleName:lock)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:tryLock))))(IfStatement(InfixExpression(SimpleName:lock)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ZipOutputStream))(VariableDeclarationFragment(SimpleName:outputStream)(ClassInstanceCreation(SimpleType(SimpleName:ZipOutputStream))(SimpleName:fileOutputStream))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputStream))(SimpleName:setMethod)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ZipOutputStream.DEFLATED))))(VariableDeclarationStatement(SimpleType(SimpleName:ZipEntry))(VariableDeclarationFragment(SimpleName:zipEntry)(ClassInstanceCreation(SimpleType(SimpleName:ZipEntry))(SimpleName:FILE_NAME_INTERNAL))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outputStream))(SimpleName:putNextEntry)(METHOD_INVOCATION_ARGUMENTS(SimpleName:zipEntry))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStreamWriter))(VariableDeclarationFragment(SimpleName:writer)(ClassInstanceCreation(SimpleType(SimpleName:OutputStreamWriter))(SimpleName:outputStream)(SimpleName:ENCODING_UTF_8))))(VariableDeclarationStatement(SimpleType(SimpleName:XMLMemento))(VariableDeclarationFragment(SimpleName:memento)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:XMLMemento))(SimpleName:createWriteRoot)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ELEMENT_TASK_STATE)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:memento))(SimpleName:putString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ATTRIBUTE_VERSION)(SimpleName:SCHEMA_VERSION))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getNewTaskData))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IMemento))(VariableDeclarationFragment(SimpleName:child)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:memento))(SimpleName:createChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ELEMENT_NEW_DATA)))))(ExpressionStatement(MethodInvocation(SimpleName:addTaskData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:child)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getNewTaskData)))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getOldTaskData))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IMemento))(VariableDeclarationFragment(SimpleName:child)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:memento))(SimpleName:createChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ELEMENT_OLD_DATA)))))(ExpressionStatement(MethodInvocation(SimpleName:addTaskData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:child)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getOldTaskData)))))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getEdits))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getEdits)))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:IMemento))(VariableDeclarationFragment(SimpleName:child)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:memento))(SimpleName:createChild)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ELEMENT_EDITS_DATA)))))(ExpressionStatement(MethodInvocation(SimpleName:addEdits)(METHOD_INVOCATION_ARGUMENTS(SimpleName:child)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:taskDataState))(SimpleName:getEdits)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:memento))(SimpleName:save)(METHOD_INVOCATION_ARGUMENTS(SimpleName:writer)))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StatusHandler))(SimpleName:fail)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)(StringLiteral:<STR>)(BooleanLiteral:false))))))(Block(TryStatement(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:lock)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:isValid)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:release)))))(IfStatement(InfixExpression(SimpleName:fileOutputStream)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileOutputStream))(SimpleName:flush)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileOutputStream))(SimpleName:close))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StatusHandler))(SimpleName:fail)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)(StringLiteral:<STR>)(BooleanLiteral:false)))))))))))))