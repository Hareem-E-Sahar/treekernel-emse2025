(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(PrimitiveType:void)(SimpleName:flatten)(SingleVariableDeclaration(SimpleType(SimpleName:AudioStake))(SimpleName:target))(SingleVariableDeclaration(SimpleType(SimpleName:Span))(SimpleName:span))(SingleVariableDeclaration(ArrayType(PrimitiveType:int)(Dimension))(SimpleName:channelMap))(SimpleType(SimpleName:IOException))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:span))(SimpleName:isEmpty))(ReturnStatement))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:outChannels)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:getChannelNum))))(IfStatement(InfixExpression(SimpleName:channelMap)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(IfStatement(InfixExpression(SimpleName:outChannels)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:numChannels))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException)))))(ExpressionStatement(Assignment(SimpleName:channelMap)(ASSIGNMENT_OPERATOR:=)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(SimpleName:outChannels))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:channelMap.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:channelMap)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(SimpleName:i))))))(Block(IfStatement(InfixExpression(SimpleName:outChannels)(INFIX_EXPRESSION_OPERATOR:!=)(QualifiedName:channelMap.length))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:channelMap.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(ArrayAccess(SimpleName:channelMap)(SimpleName:i))(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0)))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(ArrayAccess(SimpleName:channelMap)(SimpleName:i))(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:numChannels))))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalArgumentException)))))))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:double)(VariableDeclarationFragment(SimpleName:progWeight)(InfixExpression(NumberLiteral:1.0)(INFIX_EXPRESSION_OPERATOR:/)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:span))(SimpleName:getLength)))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:num)(MethodInvocation(SimpleName:getNumStakes))))(VariableDeclarationStatement(Modifier:final)(ArrayType(PrimitiveType:float)(Dimension)(Dimension))(VariableDeclarationFragment(SimpleName:outBuf)(ArrayCreation(ArrayType(PrimitiveType:float)(Dimension(SimpleName:outChannels))(Dimension(SimpleName:BUFSIZE))))))(VariableDeclarationStatement(Modifier:final)(ArrayType(PrimitiveType:float)(Dimension)(Dimension))(VariableDeclarationFragment(SimpleName:inBuf)(ArrayCreation(ArrayType(PrimitiveType:float)(Dimension(SimpleName:numChannels))(Dimension)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:idx)(MethodInvocation(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:span.start)(BooleanLiteral:true)))))(IfStatement(InfixExpression(SimpleName:idx)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(ExpressionStatement(Assignment(SimpleName:idx)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:max)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(ParenthesizedExpression(InfixExpression(SimpleName:idx)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:2)))))))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:readOff)(QualifiedName:span.start)))(VariableDeclarationStatement(SimpleType(SimpleName:AudioStake))(VariableDeclarationFragment(SimpleName:source)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:chunkLen)))(VariableDeclarationStatement(SimpleType(SimpleName:Span))(VariableDeclarationFragment(SimpleName:sourceSpan))(VariableDeclarationFragment(SimpleName:subSpan)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:readStop)(QualifiedName:span.start)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:channelMap.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:inBuf)(ArrayAccess(SimpleName:channelMap)(SimpleName:i)))(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:outBuf)(SimpleName:i))))))(WhileStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:readStop)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:span.stop)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:idx)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:num))))(Block(ExpressionStatement(Assignment(SimpleName:source)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:AudioStake))(MethodInvocation(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:idx)(BooleanLiteral:true))))))(ExpressionStatement(Assignment(SimpleName:sourceSpan)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:getSpan))))(ExpressionStatement(Assignment(SimpleName:readStop)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:sourceSpan.stop)(QualifiedName:span.stop)))))(WhileStatement(InfixExpression(SimpleName:readOff)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:readStop))(Block(ExpressionStatement(Assignment(SimpleName:chunkLen)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(SimpleName:BUFSIZE)(InfixExpression(SimpleName:readStop)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:readOff)))))))(ExpressionStatement(Assignment(SimpleName:subSpan)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Span))(SimpleName:readOff)(InfixExpression(SimpleName:readOff)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:chunkLen)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:source))(SimpleName:readFrames)(METHOD_INVOCATION_ARGUMENTS(SimpleName:inBuf)(NumberLiteral:0)(SimpleName:subSpan))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:writeFrames)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outBuf)(NumberLiteral:0)(SimpleName:subSpan))))(ExpressionStatement(Assignment(SimpleName:readOff)(ASSIGNMENT_OPERATOR:+=)(SimpleName:chunkLen)))(ExpressionStatement(MethodInvocation(SimpleName:setProgression)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:readOff)(INFIX_EXPRESSION_OPERATOR:-)(QualifiedName:span.start))(SimpleName:progWeight))))))(ExpressionStatement(PostfixExpression(SimpleName:idx)(POSTFIX_EXPRESSION_OPERATOR:++)))))(IfStatement(InfixExpression(SimpleName:readStop)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:span.stop))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.err))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:ch)(NumberLiteral:0)))(InfixExpression(SimpleName:ch)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:outBuf.length))(PostfixExpression(SimpleName:ch)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(FieldAccess(ArrayAccess(SimpleName:outBuf)(SimpleName:ch))(SimpleName:length)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(ArrayAccess(SimpleName:outBuf)(SimpleName:ch))(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0f)))))))(WhileStatement(InfixExpression(SimpleName:readOff)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:span.stop))(Block(ExpressionStatement(Assignment(SimpleName:chunkLen)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(SimpleName:BUFSIZE)(InfixExpression(QualifiedName:span.stop)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:readOff)))))))(ExpressionStatement(Assignment(SimpleName:subSpan)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Span))(SimpleName:readOff)(InfixExpression(SimpleName:readOff)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:chunkLen)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:writeFrames)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outBuf)(NumberLiteral:0)(SimpleName:subSpan))))(ExpressionStatement(Assignment(SimpleName:readOff)(ASSIGNMENT_OPERATOR:+=)(SimpleName:chunkLen)))(ExpressionStatement(MethodInvocation(SimpleName:setProgression)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:readOff)(INFIX_EXPRESSION_OPERATOR:-)(QualifiedName:span.start))(SimpleName:progWeight))))))))))))