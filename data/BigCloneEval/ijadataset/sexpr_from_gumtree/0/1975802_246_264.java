(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(Modifier:static)(SimpleType(SimpleName:JsniJavaRefReplacementResult))(SimpleName:replaceJsniJavaRefs)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:jsni))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Map))(SimpleType(SimpleName:String))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:replacements)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:HashMap))(SimpleType(SimpleName:String))(SimpleType(SimpleName:String))))))(VariableDeclarationStatement(SimpleType(SimpleName:Pattern))(VariableDeclarationFragment(SimpleName:p)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Pattern))(SimpleName:compile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:Matcher))(VariableDeclarationFragment(SimpleName:m)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p))(SimpleName:matcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jsni)))))(WhileStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:find))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:start)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:start))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:end)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:end))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:ref)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jsni))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(SimpleName:start)(SimpleName:end)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:jsToken)(MethodInvocation(SimpleName:makeJsToken)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ref)))))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:replacements))(SimpleName:containsKey)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jsToken)))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:replacements))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jsToken))))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ref)))))(Block(ExpressionStatement(Assignment(SimpleName:jsToken)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:makeJsToken)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jsToken)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:replacements))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:jsToken)(SimpleName:ref))))))(EnhancedForStatement(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:Entry))(SimpleType(SimpleName:String))(SimpleType(SimpleName:String)))(SimpleName:kvp))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:replacements))(SimpleName:entrySet))(Block(ExpressionStatement(Assignment(SimpleName:jsni)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:jsni))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:kvp))(SimpleName:getValue))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:kvp))(SimpleName:getKey))))))))(ReturnStatement(ClassInstanceCreation(SimpleType(SimpleName:JsniJavaRefReplacementResult))(SimpleName:jsni)(SimpleName:replacements)))))))