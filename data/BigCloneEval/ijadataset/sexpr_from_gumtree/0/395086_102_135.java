(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:ByteBuffer))(SimpleName:encodeHeader)(SingleVariableDeclaration(SimpleType(SimpleName:Header))(SimpleName:header))(SingleVariableDeclaration(SimpleType(SimpleName:Header))(SimpleName:lastHeader))(Block(VariableDeclarationStatement(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:headerType)(SimpleName:HEADER_NEW)))(IfStatement(InfixExpression(InfixExpression(InfixExpression(SimpleName:lastHeader)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getStreamId))(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lastHeader))(SimpleName:getStreamId))))(INFIX_EXPRESSION_OPERATOR:||)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:isTimerRelative))))(Block(ExpressionStatement(Assignment(SimpleName:headerType)(ASSIGNMENT_OPERATOR:=)(SimpleName:HEADER_NEW))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getSize))(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lastHeader))(SimpleName:getSize)))(INFIX_EXPRESSION_OPERATOR:||)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getDataType))(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lastHeader))(SimpleName:getDataType))))(Block(ExpressionStatement(Assignment(SimpleName:headerType)(ASSIGNMENT_OPERATOR:=)(SimpleName:HEADER_SAME_SOURCE))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getTimer))(INFIX_EXPRESSION_OPERATOR:!=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lastHeader))(SimpleName:getTimer)))(Block(ExpressionStatement(Assignment(SimpleName:headerType)(ASSIGNMENT_OPERATOR:=)(SimpleName:HEADER_TIMER_CHANGE))))(Block(ExpressionStatement(Assignment(SimpleName:headerType)(ASSIGNMENT_OPERATOR:=)(SimpleName:HEADER_CONTINUE)))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ByteBuffer))(SimpleName:allocate)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RTMPUtils))(SimpleName:getHeaderLength)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerType)))))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:byte)(VariableDeclarationFragment(SimpleName:headerByte)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RTMPUtils))(SimpleName:encodeHeaderByte)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerType)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getChannelId))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerByte))))(SwitchStatement(SimpleName:headerType)(SwitchCase(SimpleName:HEADER_NEW))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RTMPUtils))(SimpleName:writeMediumInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getTimer)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RTMPUtils))(SimpleName:writeMediumInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getSize)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getDataType)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RTMPUtils))(SimpleName:writeReverseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getStreamId)))))(BreakStatement)(SwitchCase(SimpleName:HEADER_SAME_SOURCE))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RTMPUtils))(SimpleName:writeMediumInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getTimer)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RTMPUtils))(SimpleName:writeMediumInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getSize)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buf))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getDataType)))))(BreakStatement)(SwitchCase(SimpleName:HEADER_TIMER_CHANGE))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RTMPUtils))(SimpleName:writeMediumInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:header))(SimpleName:getTimer)))))(BreakStatement)(SwitchCase(SimpleName:HEADER_CONTINUE))(BreakStatement))(ReturnStatement(SimpleName:buf))))))