(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(SimpleType(SimpleName:Image))(SimpleName:createImage)(SingleVariableDeclaration(SimpleType(SimpleName:GraphicalViewer))(SimpleName:viewer))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Image))(VariableDeclarationFragment(SimpleName:img)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:GC))(VariableDeclarationFragment(SimpleName:figureCanvasGC)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:GC))(VariableDeclarationFragment(SimpleName:imageGC)(NullLiteral)))(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:ScalableFreeformRootEditPart))(VariableDeclarationFragment(SimpleName:rootEditPart)(CastExpression(SimpleType(SimpleName:ScalableFreeformRootEditPart))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:viewer))(SimpleName:getEditPartRegistry)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LayerManager.ID))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rootEditPart))(SimpleName:refresh)))(VariableDeclarationStatement(SimpleType(SimpleName:IFigure))(VariableDeclarationFragment(SimpleName:rootFigure)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:LayerManager))(SimpleName:rootEditPart))))(SimpleName:getLayer)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:LayerConstants.PRINTABLE_LAYERS)))))(VariableDeclarationStatement(SimpleType(SimpleName:EditPart))(VariableDeclarationFragment(SimpleName:editPart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:viewer))(SimpleName:getContents))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:editPart))(SimpleName:refresh)))(VariableDeclarationStatement(SimpleType(SimpleName:ERDiagram))(VariableDeclarationFragment(SimpleName:diagram)(CastExpression(SimpleType(SimpleName:ERDiagram))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:editPart))(SimpleName:getModel)))))(VariableDeclarationStatement(SimpleType(SimpleName:Rectangle))(VariableDeclarationFragment(SimpleName:rootFigureBounds)(MethodInvocation(SimpleName:getBounds)(METHOD_INVOCATION_ARGUMENTS(SimpleName:diagram)(SimpleName:rootEditPart)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rootFigure))(SimpleName:getBounds))))))(VariableDeclarationStatement(SimpleType(SimpleName:Control))(VariableDeclarationFragment(SimpleName:figureCanvas)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:viewer))(SimpleName:getControl))))(ExpressionStatement(Assignment(SimpleName:figureCanvasGC)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:GC))(SimpleName:figureCanvas))))(ExpressionStatement(Assignment(SimpleName:img)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Image))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Display))(SimpleName:getCurrent))(InfixExpression(QualifiedName:rootFigureBounds.width)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:20))(InfixExpression(QualifiedName:rootFigureBounds.height)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:20)))))(ExpressionStatement(Assignment(SimpleName:imageGC)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:GC))(SimpleName:img))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageGC))(SimpleName:setBackground)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figureCanvasGC))(SimpleName:getBackground)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageGC))(SimpleName:setForeground)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figureCanvasGC))(SimpleName:getForeground)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageGC))(SimpleName:setFont)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figureCanvasGC))(SimpleName:getFont)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageGC))(SimpleName:setLineStyle)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figureCanvasGC))(SimpleName:getLineStyle)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageGC))(SimpleName:setLineWidth)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figureCanvasGC))(SimpleName:getLineWidth)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageGC))(SimpleName:setAntialias)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:SWT.OFF))))(VariableDeclarationStatement(SimpleType(SimpleName:Graphics))(VariableDeclarationFragment(SimpleName:imgGraphics)(ClassInstanceCreation(SimpleType(SimpleName:SWTGraphics))(SimpleName:imageGC))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imgGraphics))(SimpleName:setBackgroundColor)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figureCanvas))(SimpleName:getBackground)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imgGraphics))(SimpleName:fillRectangle)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(NumberLiteral:0)(InfixExpression(QualifiedName:rootFigureBounds.width)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:20))(InfixExpression(QualifiedName:rootFigureBounds.height)(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:20)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imgGraphics))(SimpleName:translate)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:translateX)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:rootFigureBounds.x)))(MethodInvocation(SimpleName:translateY)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:rootFigureBounds.y))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rootFigure))(SimpleName:paint)(METHOD_INVOCATION_ARGUMENTS(SimpleName:imgGraphics))))(ReturnStatement(SimpleName:img)))(Block(IfStatement(InfixExpression(SimpleName:figureCanvasGC)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:figureCanvasGC))(SimpleName:dispose)))))(IfStatement(InfixExpression(SimpleName:imageGC)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:imageGC))(SimpleName:dispose)))))))))))