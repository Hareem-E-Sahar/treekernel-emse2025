(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(SimpleType(SimpleName:ByteBuffer))(SimpleName:verifyDataPassing)(SingleVariableDeclaration(SimpleType(SimpleName:TCPChannel))(SimpleName:svrChan))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:b)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ByteBuffer))(SimpleName:allocate)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:10)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:helper))(SimpleName:putString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:b)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:helper))(SimpleName:doneFillingBuffer)(METHOD_INVOCATION_ARGUMENTS(SimpleName:b))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:expectedWrote)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:b))(SimpleName:remaining))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:log))(SimpleName:fine)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:actualWrite)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:client1))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:b)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:expectedWrote)(SimpleName:actualWrite))))(VariableDeclarationStatement(SimpleType(SimpleName:CalledMethod))(VariableDeclarationFragment(SimpleName:m)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mockServer))(SimpleName:expect)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:MockNIOServer.INCOMING_DATA)))))(VariableDeclarationStatement(SimpleType(SimpleName:TCPChannel))(VariableDeclarationFragment(SimpleName:actualChannel)(CastExpression(SimpleType(SimpleName:TCPChannel))(ArrayAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getAllParams))(NumberLiteral:0)))))(VariableDeclarationStatement(SimpleType(SimpleName:Class))(VariableDeclarationFragment(SimpleName:c)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Class))(SimpleName:forName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getChannelImplName))))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:c)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:actualChannel))(SimpleName:getClass)))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:actualBuf)(CastExpression(SimpleType(SimpleName:ByteBuffer))(ArrayAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getAllParams))(NumberLiteral:1)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:result)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:helper))(SimpleName:readString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:actualBuf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:actualBuf))(SimpleName:remaining))))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:result))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:b))(SimpleName:rewind)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:svrChan))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:b))))(ExpressionStatement(Assignment(SimpleName:m)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mockHandler))(SimpleName:expect)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:MockDataHandler.INCOMING_DATA)))))(ExpressionStatement(Assignment(SimpleName:actualBuf)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:ByteBuffer))(ArrayAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getAllParams))(NumberLiteral:1)))))(ExpressionStatement(Assignment(SimpleName:result)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:helper))(SimpleName:readString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:actualBuf)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:actualBuf))(SimpleName:remaining))))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:result))))(ReturnStatement(SimpleName:b))))))