(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:saveTerrain)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:mapname))(SingleVariableDeclaration(ParameterizedType(SimpleType(SimpleName:Vector))(SimpleType(SimpleName:DrawingBean)))(SimpleName:v))(SimpleType(SimpleName:IOException))(Block(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:formats)(ArrayInitializer(StringLiteral:<STR>)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:format)))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:hasFormat)(BooleanLiteral:false)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapname))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:4))(Block(ExpressionStatement(Assignment(SimpleName:format)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapname))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mapname))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:3)))))(SimpleName:toLowerCase))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:formats.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:format))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:formats)(SimpleName:i))))(Block(ExpressionStatement(Assignment(SimpleName:hasFormat)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(BreakStatement)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:hasFormat))(Block(ExpressionStatement(Assignment(SimpleName:format)(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:formats)(NumberLiteral:0))))(ExpressionStatement(Assignment(SimpleName:mapname)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:mapname)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:format)))))))(Block(ExpressionStatement(Assignment(SimpleName:format)(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:formats)(NumberLiteral:0))))(ExpressionStatement(Assignment(SimpleName:mapname)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:mapname)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:format))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:dstpath)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(QualifiedName:java.io.File))(StringLiteral:<STR>)))(SimpleName:getCanonicalPath))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:mapname))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dstfile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:dstpath))))(VariableDeclarationStatement(SimpleType(SimpleName:BufferedImage))(VariableDeclarationFragment(SimpleName:bi)(ClassInstanceCreation(SimpleType(SimpleName:BufferedImage))(InfixExpression(SimpleName:terrain_width)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:MULT))(InfixExpression(SimpleName:terrain_height)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:MULT))(QualifiedName:BufferedImage.TYPE_INT_RGB))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bi))(SimpleName:createGraphics)))(VariableDeclarationStatement(SimpleType(SimpleName:Graphics2D))(VariableDeclarationFragment(SimpleName:g)(CastExpression(SimpleType(SimpleName:Graphics2D))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bi))(SimpleName:getGraphics)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:g))(SimpleName:setColor)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Color.WHITE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:g))(SimpleName:fillRect)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(NumberLiteral:0)(InfixExpression(SimpleName:terrain_width)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:MULT))(InfixExpression(SimpleName:terrain_height)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:MULT)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:v))(SimpleName:size)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:g))(SimpleName:setColor)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:v))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:getColor)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:g))(SimpleName:fillRect)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:v))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:getPoint))(SimpleName:x))(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:MULT))(InfixExpression(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:v))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(SimpleName:getPoint))(SimpleName:y))(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:MULT))(SimpleName:MULT)(SimpleName:MULT))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dstfile))(SimpleName:exists))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:option)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:JOptionPane))(SimpleName:showOptionDialog)(METHOD_INVOCATION_ARGUMENTS(ThisExpression)(StringLiteral:<STR>)(StringLiteral:<STR>)(QualifiedName:JOptionPane.YES_NO_OPTION)(QualifiedName:JOptionPane.QUESTION_MESSAGE)(NullLiteral)(NullLiteral)(NullLiteral)))))(IfStatement(InfixExpression(SimpleName:option)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:JOptionPane.YES_OPTION))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageIO))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bi)(SimpleName:format)(SimpleName:dstfile))))(VariableDeclarationStatement(SimpleType(SimpleName:MapsXMLManager))(VariableDeclarationFragment(SimpleName:manager)(ClassInstanceCreation(SimpleType(SimpleName:MapsXMLManager))(SimpleName:mapname))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:saveMap)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GUIOptionManager))(SimpleName:getMapWidthMeters))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GUIOptionManager))(SimpleName:getMapHeightMeters))(SimpleName:terrain_width)(SimpleName:terrain_height)(SimpleName:v)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageIO))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bi)(SimpleName:format)(SimpleName:dstfile))))(VariableDeclarationStatement(SimpleType(SimpleName:MapsXMLManager))(VariableDeclarationFragment(SimpleName:manager)(ClassInstanceCreation(SimpleType(SimpleName:MapsXMLManager))(SimpleName:mapname))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:saveMap)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GUIOptionManager))(SimpleName:getMapWidthMeters))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:GUIOptionManager))(SimpleName:getMapHeightMeters))(SimpleName:terrain_width)(SimpleName:terrain_height)(SimpleName:v))))))))))