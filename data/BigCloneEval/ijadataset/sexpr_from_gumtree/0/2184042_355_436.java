(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(SimpleType(SimpleName:Bundle))(SimpleName:install)(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:location))(SingleVariableDeclaration(SimpleType(SimpleName:InputStream))(SimpleName:is))(SimpleType(SimpleName:BundleException))(Block(SynchronizedStatement(SimpleName:bundlesLock)(Block(VariableDeclarationStatement(SimpleType(SimpleName:SecurityManager))(VariableDeclarationFragment(SimpleName:securityManager)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:getSecurityManager))))(IfStatement(InfixExpression(SimpleName:securityManager)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:securityManager))(SimpleName:checkPermission)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:AdminPermission))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:StringBuilder))(StringLiteral:<STR>)))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:location))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:toString))(QualifiedName:org.osgi.framework.AdminPermission.EXTENSIONLIFECYCLE)))))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:bundleId)(MethodInvocation(SimpleName:getNextBundleId))))(VariableDeclarationStatement(SimpleType(SimpleName:AbstractBundle))(VariableDeclarationFragment(SimpleName:bundle)(NullLiteral)))(TryStatement(Block(IfStatement(InfixExpression(SimpleName:is)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:URL))(VariableDeclarationFragment(SimpleName:url)(ClassInstanceCreation(SimpleType(SimpleName:URL))(SimpleName:location))))(ExpressionStatement(Assignment(SimpleName:is)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:url))(SimpleName:openStream))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:temp)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(SimpleName:getTempFolder))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Long))(SimpleName:toString)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis)))))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:os)))(ExpressionStatement(Assignment(SimpleName:os)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:temp))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtil))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(SimpleName:is)(SimpleName:os))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:os))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:is))(SimpleName:close)))(VariableDeclarationStatement(SimpleType(SimpleName:Manifest))(VariableDeclarationFragment(SimpleName:manifest)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ManifestUtil))(SimpleName:getJarManifest)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:temp))))))(VariableDeclarationStatement(SimpleType(SimpleName:Dictionary))(VariableDeclarationFragment(SimpleName:headers)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ManifestUtil))(SimpleName:toDictionary)(METHOD_INVOCATION_ARGUMENTS(SimpleName:manifest)))))(VariableDeclarationStatement(SimpleType(SimpleName:Version))(VariableDeclarationFragment(SimpleName:version)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Version))(SimpleName:parseVersion)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.BUNDLE_VERSION))))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:cache)(MethodInvocation(SimpleName:createNewCache)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundleId)(SimpleName:version)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:manifestFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:cache)(SimpleName:BUNDLE_MANIFEST_FILE))))(ExpressionStatement(Assignment(SimpleName:os)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:manifestFile))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ManifestUtil))(SimpleName:storeManifest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headers)(SimpleName:os))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:os))(SimpleName:close)))(IfStatement(MethodInvocation(SimpleName:isBundleInstalled)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.BUNDLE_SYMBOLICNAME))))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:BundleException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:StringBuilder))(StringLiteral:<STR>)))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:location))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:toString))))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:ManifestEntry))(Dimension))(VariableDeclarationFragment(SimpleName:entries)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ManifestEntry))(SimpleName:parse)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.FRAGMENT_HOST)))))))(IfStatement(InfixExpression(SimpleName:entries)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:entries)(NumberLiteral:0)))(SimpleName:hasAttribute)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:extension)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:entries)(NumberLiteral:0)))(SimpleName:getAttributeValue)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:extension))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:symbolicName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:entries)(NumberLiteral:0)))(SimpleName:getName))))(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:symbolicName))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:framework))(SimpleName:getSymbolicName)))))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:symbolicName))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.SYSTEM_BUNDLE_SYMBOLICNAME)))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:BundleException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:StringBuilder))(StringLiteral:<STR>)))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:location))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:toString))(ClassInstanceCreation(SimpleType(SimpleName:UnsupportedOperationException)))))))))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:requiredEE)(CastExpression(SimpleType(SimpleName:String))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:headers))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.BUNDLE_REQUIREDEXECUTIONENVIRONMENT))))))(IfStatement(InfixExpression(SimpleName:requiredEE)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:BundleContext))(VariableDeclarationFragment(SimpleName:context)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:framework))(SimpleName:getBundleContext))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:ee)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:context))(SimpleName:getProperty)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Constants.FRAMEWORK_EXECUTIONENVIRONMENT)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ee))(SimpleName:contains)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requiredEE))))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:BundleException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:StringBuilder))(StringLiteral:<STR>)))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:location))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:requiredEE))))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(SimpleName:toString))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FrameworkUtil))(SimpleName:isFragmentHost)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headers)))(Block(ExpressionStatement(Assignment(SimpleName:bundle)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:FragmentBundle))(SimpleName:framework)))))(Block(ExpressionStatement(Assignment(SimpleName:bundle)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:HostBundle))(SimpleName:framework))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:bundlefile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:cache)(QualifiedName:Storage.BUNDLE_FILE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:temp))(SimpleName:renameTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundlefile))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:lastModified)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bundlefile))(SimpleName:lastModified))))(VariableDeclarationStatement(SimpleType(SimpleName:BundleInfo))(VariableDeclarationFragment(SimpleName:info)(ClassInstanceCreation(SimpleType(SimpleName:BundleInfo))(SimpleName:bundleId)(SimpleName:location)(SimpleName:lastModified)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:framework))(SimpleName:getInitialBundleStartLevel)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:info))(SimpleName:setHeaders)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headers))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:info))(SimpleName:setCache)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cache))))(ExpressionStatement(MethodInvocation(SimpleName:storeBundleInfo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:info))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bundleInfosByBundle))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundle)(SimpleName:info))))(VariableDeclarationStatement(SimpleType(SimpleName:BundleURLClassPath))(VariableDeclarationFragment(SimpleName:classPath)(MethodInvocation(SimpleName:createBundleURLClassPath)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundle)(SimpleName:version)(SimpleName:bundlefile)(SimpleName:cache)(BooleanLiteral:false)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:classPathsByBundle))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundle)(ArrayCreation(ArrayType(SimpleType(SimpleName:BundleURLClassPath))(Dimension))(ArrayInitializer(SimpleName:classPath))))))(SynchronizedStatement(SimpleName:bundlesLock)(Block(ExpressionStatement(Assignment(SimpleName:bundles)(ASSIGNMENT_OPERATOR:=)(CastExpression(ArrayType(SimpleType(SimpleName:Bundle))(Dimension))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ArrayUtil))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundles)(SimpleName:bundle))))))))(ReturnStatement(SimpleName:bundle)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(IfStatement(InfixExpression(SimpleName:bundle)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:bundleFolder)(MethodInvocation(SimpleName:getBundleFolder)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundleId)))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtil))(SimpleName:delete)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bundleFolder)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e1))(Block)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:BundleException))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(SimpleName:e))))))))))))