(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(SimpleName:Store)(SingleVariableDeclaration(SimpleType(SimpleName:File))(SimpleName:rootDir))(SingleVariableDeclaration(SimpleType(SimpleName:StartMode))(SimpleName:mode))(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:notNull)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mode)(StringLiteral:<STR>))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:rootDir))(ASSIGNMENT_OPERATOR:=)(SimpleName:rootDir)))(ExpressionStatement(Assignment(SimpleName:logName)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ClassInstanceCreation(SimpleType(SimpleName:AbbreviatedFilepath))(SimpleName:rootDir))(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:logName)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:mode)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:finer)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:logName)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:rootDir)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mode))(SimpleName:mustExist)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rootDir))(SimpleName:mkdirs)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:rootDir))(SimpleName:isDirectory)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:fail)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(SimpleName:logName)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(ParenthesizedExpression(ConditionalExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mode))(SimpleName:mustExist))(StringLiteral:<STR>)(StringLiteral:<STR>)))(SimpleName:rootDir)))))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:xprocLock))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:XprocLock))(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:rootDir)(SimpleName:LOCK_FILE)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:xprocLock))(SimpleName:lock)))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:versionFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:rootDir)(SimpleName:VERSION_FILE))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:create)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:versionFile))(SimpleName:exists))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:isFalse)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mode))(SimpleName:mustNotExist))(InfixExpression(SimpleName:logName)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:VERSION_FILE)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(SimpleName:getFileVersion)))(ExpressionStatement(Assignment(SimpleName:create)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:isFalse)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mode))(SimpleName:mustExist))(InfixExpression(SimpleName:logName)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(SimpleName:VERSION_FILE)))))(ExpressionStatement(MethodInvocation(SimpleName:createVersionFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:versionFile))))(ExpressionStatement(Assignment(SimpleName:create)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:committedDir)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:rootDir)(SimpleName:COMMITTED_DIR))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:collector))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Collector))(SimpleName:committedDir)(SimpleName:create))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:txnGapFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:committedDir)(SimpleName:TXN_GAP_FILE))))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(SimpleName:txnGapFile)(StringLiteral:<STR>)))(SimpleName:getChannel))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:txnGapTable))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:TxnGapTable))(SimpleName:channel)(SimpleName:logName)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:pendingDirWork)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:rootDir)(SimpleName:PENDING_DIR))))(IfStatement(SimpleName:create)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingDirWork))(SimpleName:mkdir)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:isTrue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingDirWork))(SimpleName:isDirectory))(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:isTrue)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingDirWork))(SimpleName:list))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:isTrue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingDirWork))(SimpleName:isDirectory))(StringLiteral:<STR>))))(IfStatement(InfixExpression(FieldAccess(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingDirWork))(SimpleName:listFiles)(METHOD_INVOCATION_ARGUMENTS(SimpleName:UNIT_DIR_FILTER)))(SimpleName:length))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:warning)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:ABORTED_DIR)(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:abortedDir)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:rootDir)(SimpleName:ABORTED_DIR))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:abortedDir))(SimpleName:mkdir)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:isTrue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:abortedDir))(SimpleName:isDirectory))(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:backupDir)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:abortedDir)(MethodInvocation(SimpleName:abortedTxnsTimestamp)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:isTrue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingDirWork))(SimpleName:renameTo)(METHOD_INVOCATION_ARGUMENTS(SimpleName:backupDir)))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:PENDING_DIR)(StringLiteral:<STR>)(ClassInstanceCreation(SimpleType(SimpleName:AbbreviatedFilepath))(SimpleName:backupDir))))))(ExpressionStatement(Assignment(SimpleName:pendingDirWork)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:rootDir)(SimpleName:PENDING_DIR))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingDirWork))(SimpleName:mkdir)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:validator))(SimpleName:isTrue)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pendingDirWork))(SimpleName:isDirectory))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:PENDING_DIR)(StringLiteral:<STR>)))))))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:pendingDir))(ASSIGNMENT_OPERATOR:=)(SimpleName:pendingDirWork)))))))