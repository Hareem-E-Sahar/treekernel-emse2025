(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:onMessageReceived)(SingleVariableDeclaration(SimpleType(SimpleName:Message))(SimpleName:message))(Block(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InstanceofExpression(SimpleName:message)(SimpleType(SimpleName:UserMessage)))))(Block(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:UserMessage))(VariableDeclarationFragment(SimpleName:m)(CastExpression(SimpleType(SimpleName:UserMessage))(SimpleName:message))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getContext)))(SimpleName:isPublic)))(Block(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:text)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getText))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:nick)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:server))(SimpleName:getNick))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:addr)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:server))(SimpleName:getNick))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:l)(MethodInvocation(SimpleName:regex)(METHOD_INVOCATION_ARGUMENTS(SimpleName:text)(MethodInvocation(SimpleName:action)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nick)(StringLiteral:<STR>))))))))(IfStatement(InfixExpression(SimpleName:l)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:spec)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:l))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(IfStatement(InfixExpression(SimpleName:spec)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:spec)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>))))(Block(ExpressionStatement(Assignment(SimpleName:spec)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spec))(SimpleName:trim))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:l))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2))))(SimpleName:trim))))(VariableDeclarationStatement(SimpleType(SimpleName:BagItem))(VariableDeclarationFragment(SimpleName:bitem)(ClassInstanceCreation(SimpleType(SimpleName:BagItem))(SimpleName:name)(SimpleName:spec))))(ExpressionStatement(MethodInvocation(SimpleName:take)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bitem)(SimpleName:m))))(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:l)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:regex)(METHOD_INVOCATION_ARGUMENTS(SimpleName:text)(MethodInvocation(SimpleName:action)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:nick))))))))(IfStatement(InfixExpression(SimpleName:l)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:spec)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:l))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(IfStatement(InfixExpression(SimpleName:spec)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:spec)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>))))(Block(ExpressionStatement(Assignment(SimpleName:spec)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spec))(SimpleName:trim))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:l))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2))))(SimpleName:trim))))(VariableDeclarationStatement(SimpleType(SimpleName:BagItem))(VariableDeclarationFragment(SimpleName:bitem)(ClassInstanceCreation(SimpleType(SimpleName:BagItem))(SimpleName:name)(SimpleName:spec))))(ExpressionStatement(MethodInvocation(SimpleName:take)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bitem)(SimpleName:m))))(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:l)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:regex)(METHOD_INVOCATION_ARGUMENTS(SimpleName:text)(InfixExpression(SimpleName:addr)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))(IfStatement(InfixExpression(SimpleName:l)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:spec)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:l))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)))))(IfStatement(InfixExpression(SimpleName:spec)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:spec)(ASSIGNMENT_OPERATOR:=)(StringLiteral:<STR>))))(Block(ExpressionStatement(Assignment(SimpleName:spec)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:spec))(SimpleName:trim))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:name)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:l))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:2))))(SimpleName:trim))))(VariableDeclarationStatement(SimpleType(SimpleName:BagItem))(VariableDeclarationFragment(SimpleName:bitem)(ClassInstanceCreation(SimpleType(SimpleName:BagItem))(SimpleName:name)(SimpleName:spec))))(ExpressionStatement(MethodInvocation(SimpleName:take)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bitem)(SimpleName:m))))(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:l)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:regex)(METHOD_INVOCATION_ARGUMENTS(SimpleName:text)(InfixExpression(SimpleName:addr)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))(IfStatement(InfixExpression(SimpleName:l)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bag))(SimpleName:isEmpty))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:reply)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getUser)))(SimpleName:getNick))(StringLiteral:<STR>))(BooleanLiteral:false))))(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:BagItem))(VariableDeclarationFragment(SimpleName:bitem)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bag))(SimpleName:getRandomItem))))(VariableDeclarationStatement(SimpleType(SimpleName:User))(VariableDeclarationFragment(SimpleName:target)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getChannel)))(SimpleName:getRandomUser))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:reply)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:templates))(SimpleName:applyThrow)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bitem)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:getNick))))(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bag))(SimpleName:removeItem)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bitem))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:saveBag)))(ReturnStatement)))(ExpressionStatement(Assignment(SimpleName:l)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:regex)(METHOD_INVOCATION_ARGUMENTS(SimpleName:text)(InfixExpression(SimpleName:addr)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))))(IfStatement(InfixExpression(SimpleName:l)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bag))(SimpleName:isEmpty))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:reply)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getUser)))(SimpleName:getNick))(StringLiteral:<STR>))(BooleanLiteral:false))))(ReturnStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:BagItem))(VariableDeclarationFragment(SimpleName:bitem)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bag))(SimpleName:getRandomItem))))(VariableDeclarationStatement(SimpleType(SimpleName:User))(VariableDeclarationFragment(SimpleName:target)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getChannel)))(SimpleName:getRandomUser))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:reply)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:action)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:target))(SimpleName:getNick))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bitem))(SimpleName:getStatement)))))(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bag))(SimpleName:removeItem)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bitem))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:manager))(SimpleName:saveBag)))(ReturnStatement)))))))