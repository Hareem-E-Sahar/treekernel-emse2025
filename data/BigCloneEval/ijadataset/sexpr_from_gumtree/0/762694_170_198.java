(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:Messenger))(SimpleName:getMessengerImmediate)(SingleVariableDeclaration(SimpleType(SimpleName:EndpointAddress))(SimpleName:addr))(SingleVariableDeclaration(SimpleType(SimpleName:Object))(SimpleName:hint))(Block(SynchronizedStatement(SimpleName:channelCache)(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Reference))(SimpleType(SimpleName:Messenger)))(VariableDeclarationFragment(SimpleName:existing)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channelCache))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:addr)))))(IfStatement(InfixExpression(SimpleName:existing)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Messenger))(VariableDeclarationFragment(SimpleName:messenger)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:existing))(SimpleName:get))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:messenger)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:messenger))(SimpleName:getState))(INFIX_EXPRESSION_OPERATOR:&)(QualifiedName:Messenger.USABLE)))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))))(Block(ReturnStatement(SimpleName:messenger))))))))(VariableDeclarationStatement(SimpleType(SimpleName:EndpointAddress))(VariableDeclarationFragment(SimpleName:plainAddr)(ClassInstanceCreation(SimpleType(SimpleName:EndpointAddress))(SimpleName:addr)(NullLiteral)(NullLiteral))))(VariableDeclarationStatement(SimpleType(SimpleName:Messenger))(VariableDeclarationFragment(SimpleName:found)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:theRealThing))(SimpleName:getCanonicalMessenger)(METHOD_INVOCATION_ARGUMENTS(SimpleName:plainAddr)(SimpleName:hint)))))(IfStatement(InfixExpression(SimpleName:found)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ReturnStatement(NullLiteral))))(VariableDeclarationStatement(SimpleType(SimpleName:ChannelMessenger))(VariableDeclarationFragment(SimpleName:res)(CastExpression(SimpleType(SimpleName:ChannelMessenger))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:found))(SimpleName:getChannelMessenger)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:theRealThing))(SimpleName:getGroup)))(SimpleName:getPeerGroupID))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:addr))(SimpleName:getServiceName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:addr))(SimpleName:getServiceParameter)))))))(SynchronizedStatement(SimpleName:channelCache)(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Reference))(SimpleType(SimpleName:Messenger)))(VariableDeclarationFragment(SimpleName:existing)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channelCache))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:addr)))))(IfStatement(InfixExpression(SimpleName:existing)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Messenger))(VariableDeclarationFragment(SimpleName:messenger)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:existing))(SimpleName:get))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:messenger)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:messenger))(SimpleName:getState))(INFIX_EXPRESSION_OPERATOR:&)(QualifiedName:Messenger.USABLE)))(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))))(Block(ReturnStatement(SimpleName:messenger))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:setMessageWatcher)(METHOD_INVOCATION_ARGUMENTS(SimpleName:listenerAdaptor))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channelCache))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:res))(SimpleName:getDestinationAddress))(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:WeakReference))(SimpleType(SimpleName:Messenger)))(SimpleName:res)))))))(ReturnStatement(SimpleName:res))))))