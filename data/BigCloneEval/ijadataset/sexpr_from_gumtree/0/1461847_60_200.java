(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:currentThread)))(SimpleName:getName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:getIPVicino))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:getPortaVicino))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:interested)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getBitfield))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:setInteresseDown)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:sendDown)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Messaggio))(QualifiedName:Messaggio.INTERESTED)(NullLiteral))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:setInteresseDown)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:sendDown)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Messaggio))(QualifiedName:Messaggio.NOT_INTERESTED)(NullLiteral)))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:count)(NumberLiteral:0)))(VariableDeclarationStatement(SimpleType(SimpleName:PIO))(VariableDeclarationFragment(SimpleName:p)(NullLiteral)))(WhileStatement(BooleanLiteral:true)(Block(IfStatement(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:c)))(SimpleName:getStato)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:getTermina)))(Block(IfStatement(InfixExpression(SimpleName:pendingRequest)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:PREQ))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:c)))(SimpleName:liberaPio)(METHOD_INVOCATION_ARGUMENTS(SimpleName:pendingRequest))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:sendDown)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Messaggio))(QualifiedName:Messaggio.CLOSE)(NullLiteral)))))(BreakStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:Messaggio))(VariableDeclarationFragment(SimpleName:m)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:receiveDown))))(IfStatement(InfixExpression(SimpleName:m)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(PostfixExpression(FieldAccess(ThisExpression)(SimpleName:failed))(POSTFIX_EXPRESSION_OPERATOR:++)))(ContinueStatement))(Block(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:failed))(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:tipo)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getTipo))))(SwitchStatement(SimpleName:tipo)(SwitchCase(QualifiedName:Messaggio.HAVE))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:setArrayBitfield)(METHOD_INVOCATION_ARGUMENTS(CastExpression(ArrayType(PrimitiveType:int)(Dimension))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getObj))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:getInteresseDown))(INFIX_EXPRESSION_OPERATOR:==)(BooleanLiteral:false))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:setInteresseDown)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:c)))(SimpleName:interested)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:getBitfield)))))))))(BreakStatement))(SwitchCase(QualifiedName:Messaggio.CHOKE))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:setStatoDown)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Connessione.CHOKED))))(BreakStatement))(SwitchCase(QualifiedName:Messaggio.UNCHOKE))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:setStatoDown)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Connessione.UNCHOKED))))(BreakStatement))(SwitchCase(QualifiedName:Messaggio.CLOSE))(Block(BreakStatement))(SwitchCase(QualifiedName:Messaggio.CHUNK))(Block(ExpressionStatement(PostfixExpression(SimpleName:count)(POSTFIX_EXPRESSION_OPERATOR:++)))(VariableDeclarationStatement(SimpleType(SimpleName:Chunk))(VariableDeclarationFragment(SimpleName:chunk)(CastExpression(SimpleType(SimpleName:Chunk))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:getObj)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:offset)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chunk))(SimpleName:getOffset))))(TryStatement(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:stringa)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:getHash))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:sha)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(QualifiedName:Creek.DIMSHA))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(InfixExpression(QualifiedName:Creek.DIMSHA)(INFIX_EXPRESSION_OPERATOR:*)(SimpleName:offset))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:j)(NumberLiteral:0)))(InfixExpression(SimpleName:j)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:Creek.DIMSHA))(PostfixExpression(SimpleName:j)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:sha)(SimpleName:j))(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:stringa)(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:j)))))))(VariableDeclarationStatement(SimpleType(SimpleName:MessageDigest))(VariableDeclarationFragment(SimpleName:md)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:md)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:MessageDigest))(SimpleName:getInstance)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NoSuchAlgorithmException))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ErrorException))(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:md))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chunk))(SimpleName:getData)))))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:ris)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(QualifiedName:Creek.DIMSHA))))))(ExpressionStatement(Assignment(SimpleName:ris)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:md))(SimpleName:digest))))(ForStatement(Assignment(SimpleName:i)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:ris.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(IfStatement(InfixExpression(ArrayAccess(SimpleName:ris)(SimpleName:i))(INFIX_EXPRESSION_OPERATOR:!=)(ArrayAccess(SimpleName:sha)(SimpleName:i)))(Block(VariableDeclarationStatement(PrimitiveType:float)(VariableDeclarationFragment(SimpleName:temp)(InfixExpression(CastExpression(PrimitiveType:float)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:getDimensione)))(INFIX_EXPRESSION_OPERATOR:/)(CastExpression(PrimitiveType:float)(QualifiedName:BitCreekPeer.DIMBLOCCO)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:dim)(CastExpression(PrimitiveType:int)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:ceil)(METHOD_INVOCATION_ARGUMENTS(SimpleName:temp))))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chunk))(SimpleName:getOffset))(INFIX_EXPRESSION_OPERATOR:!=)(InfixExpression(SimpleName:dim)(INFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ErrorException))(StringLiteral:<STR>))))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ErrorException))(SimpleName:ex))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:int)(Dimension))(VariableDeclarationFragment(SimpleName:richiesta)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(NumberLiteral:1))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:richiesta)(NumberLiteral:0))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chunk))(SimpleName:getOffset))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:sendDown)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Messaggio))(QualifiedName:Messaggio.REQUEST)(SimpleName:richiesta)))))(BreakStatement))))(TryStatement(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:scriviChunk)(METHOD_INVOCATION_ARGUMENTS(SimpleName:chunk)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:incrDown))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NullPointerException))(SimpleName:ex))(Block(ExpressionStatement(Assignment(SimpleName:tipo)(ASSIGNMENT_OPERATOR:=)(QualifiedName:Messaggio.CLOSE)))(BreakStatement))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:settaPerc)))(IfStatement(InfixExpression(InfixExpression(SimpleName:count)(INFIX_EXPRESSION_OPERATOR:%)(NumberLiteral:100))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:ResetDown)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:pendingRequest))(ASSIGNMENT_OPERATOR:=)(SimpleName:PREQ)))))(IfStatement(InfixExpression(SimpleName:tipo)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Messaggio.CLOSE))(Block(IfStatement(InfixExpression(SimpleName:conn)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:sendDown)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Messaggio))(QualifiedName:Messaggio.CLOSE)(NullLiteral)))))))(BreakStatement)))(IfStatement(InfixExpression(InfixExpression(SimpleName:pendingRequest)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:PREQ))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:endgame)))(Block(ExpressionStatement(Assignment(SimpleName:p)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:getNext)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:getBitfield))))))(IfStatement(InfixExpression(SimpleName:p)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:id)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p))(SimpleName:getId))))(IfStatement(InfixExpression(SimpleName:id)(INFIX_EXPRESSION_OPERATOR:==)(QualifiedName:Downloader.ENDGAME))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:int)(Dimension))(VariableDeclarationFragment(SimpleName:ultimi)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:getLast))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:endgame))(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(IfStatement(InfixExpression(QualifiedName:ultimi.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:sendDown)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Messaggio))(QualifiedName:Messaggio.REQUEST)(SimpleName:ultimi)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:pendingRequest))(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:ultimi)(NumberLiteral:0)))))))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:int)(Dimension))(VariableDeclarationFragment(SimpleName:toSend)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(NumberLiteral:1))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:toSend)(NumberLiteral:0))(ASSIGNMENT_OPERATOR:=)(SimpleName:id)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:sendDown)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Messaggio))(QualifiedName:Messaggio.REQUEST)(SimpleName:toSend)))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:pendingRequest))(ASSIGNMENT_OPERATOR:=)(ArrayAccess(SimpleName:toSend)(NumberLiteral:0)))))))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:100)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:ex))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.err))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:peer))(SimpleName:decrConnessioni)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:c))(SimpleName:decrPeer)))(IfStatement(InfixExpression(SimpleName:p)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:p))(SimpleName:setFree)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:setSocketDown)(METHOD_INVOCATION_ARGUMENTS(NullLiteral))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:currentThread)))(SimpleName:getName))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:conn)))(SimpleName:getDownloaded))(StringLiteral:<STR>)))))))))