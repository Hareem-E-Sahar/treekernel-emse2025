(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:final)(PrimitiveType:long)(SimpleName:transferFromByteChannel)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:ReadableByteChannel))(SimpleName:in))(SingleVariableDeclaration(Modifier:final)(PrimitiveType:long)(SimpleName:maxCount))(SingleVariableDeclaration(Modifier:final)(PrimitiveType:boolean)(SimpleName:forceBlock))(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CheckArg))(SimpleName:notNull)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CheckArg))(SimpleName:maxCount)(METHOD_INVOCATION_ARGUMENTS(SimpleName:maxCount))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:isOpen)))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:ClosedChannelException)))))(IfStatement(InfixExpression(SimpleName:maxCount)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(ReturnStatement(NumberLiteral:0)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:count)(NumberLiteral:0)))(ExpressionStatement(MethodInvocation(SimpleName:lock)))(TryStatement(Block(WhileStatement(MethodInvocation(SimpleName:isOpen))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:fileChannel)(FieldAccess(ThisExpression)(SimpleName:fileChannel))))(IfStatement(InfixExpression(SimpleName:fileChannel)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:AsynchronousCloseException)))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:maxStep)(ConditionalExpression(ParenthesizedExpression(InfixExpression(SimpleName:maxCount)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0)))(QualifiedName:Long.MAX_VALUE)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:min)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Long.MAX_VALUE)(SimpleName:maxCount))))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:writePos)(FieldAccess(ThisExpression)(SimpleName:writePos))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:step)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileChannel))(SimpleName:transferFrom)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:writePos)(SimpleName:maxStep)))))(IfStatement(InfixExpression(SimpleName:step)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:writePos))(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:writePos)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:step))))(ExpressionStatement(Assignment(SimpleName:count)(ASSIGNMENT_OPERATOR:+=)(SimpleName:step)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:notEmpty)))(SimpleName:signal)))))(ExpressionStatement(Assignment(SimpleName:fileChannel)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(ParenthesizedExpression(InfixExpression(SimpleName:maxCount)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0)))(INFIX_EXPRESSION_OPERATOR:||)(ParenthesizedExpression(InfixExpression(SimpleName:count)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:maxCount)))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:forceBlock)(INFIX_EXPRESSION_OPERATOR:||)(FieldAccess(ThisExpression)(SimpleName:blocking)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:yield)))(ContinueStatement))(Block(BreakStatement))))))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:ClosedChannelException))(SimpleName:ex))(Block(ThrowStatement(MethodInvocation(SimpleName:handleClosedFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ex))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:unlock)))))(ReturnStatement(SimpleName:count))))))