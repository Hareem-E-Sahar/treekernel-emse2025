(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:elementMoved)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Object))(SimpleName:originalElement))(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Object))(SimpleName:movedElement))(Block(IfStatement(InfixExpression(InfixExpression(SimpleName:originalElement)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:originalElement))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getEditorInput)))))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:doValidationAsync)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Display))(SimpleName:getCurrent))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))))(VariableDeclarationStatement(SimpleType(SimpleName:Runnable))(VariableDeclarationFragment(SimpleName:r)(ClassInstanceCreation(SimpleType(SimpleName:Runnable))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(ExpressionStatement(MethodInvocation(SimpleName:enableSanityChecking)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(IfStatement(InfixExpression(MethodInvocation(SimpleName:getGraphicalViewer))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(ReturnStatement))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(SimpleName:canHandleMove)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:IEditorInput))(SimpleName:originalElement))(CastExpression(SimpleType(SimpleName:IEditorInput))(SimpleName:movedElement)))))(Block(ExpressionStatement(MethodInvocation(SimpleName:close)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ReturnStatement)))(IfStatement(InfixExpression(InfixExpression(SimpleName:movedElement)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:||)(InstanceofExpression(SimpleName:movedElement)(SimpleType(SimpleName:IEditorInput))))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:IDocumentProvider))(VariableDeclarationFragment(SimpleName:d)(MethodInvocation(SimpleName:getDocumentProvider))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:previousContent)))(VariableDeclarationStatement(SimpleType(SimpleName:IDocument))(VariableDeclarationFragment(SimpleName:changed)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:IEditorInput))(VariableDeclarationFragment(SimpleName:oldInput)(MethodInvocation(SimpleName:getEditorInput))))(VariableDeclarationStatement(Modifier:final)(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:initialDirtyState)(MethodInvocation(SimpleName:isDirty))))(IfStatement(InfixExpression(SimpleName:initialDirtyState)(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(SimpleName:reuseDiagramOnMove)))(Block(ExpressionStatement(Assignment(SimpleName:changed)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:d))(SimpleName:getDocument)(METHOD_INVOCATION_ARGUMENTS(SimpleName:oldInput)))))(IfStatement(InfixExpression(SimpleName:changed)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(IfStatement(InstanceofExpression(SimpleName:changed)(SimpleType(SimpleName:IDiagramDocument)))(ExpressionStatement(Assignment(SimpleName:previousContent)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:IDiagramDocument))(SimpleName:changed))))(SimpleName:detachDiagram))))(ExpressionStatement(Assignment(SimpleName:previousContent)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:changed))(SimpleName:getContent))))))(ExpressionStatement(Assignment(SimpleName:previousContent)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(ExpressionStatement(Assignment(SimpleName:previousContent)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))(TryStatement(Block(ExpressionStatement(MethodInvocation(SimpleName:doSetInput)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:IEditorInput))(SimpleName:movedElement))(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InfixExpression(SimpleName:changed)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:CoreException))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:title)(QualifiedName:EditorMessages.Editor_error_setinput_title)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:msg)(QualifiedName:EditorMessages.Editor_error_setinput_message)))(VariableDeclarationStatement(SimpleType(SimpleName:Shell))(VariableDeclarationFragment(SimpleName:shell)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getSite)))(SimpleName:getShell))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ErrorDialog))(SimpleName:openError)(METHOD_INVOCATION_ARGUMENTS(SimpleName:shell)(SimpleName:title)(SimpleName:msg)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getStatus))))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:changed)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:previousContent)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Runnable))(VariableDeclarationFragment(SimpleName:r2)(ClassInstanceCreation(SimpleType(SimpleName:Runnable))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(ExpressionStatement(MethodInvocation(SimpleName:validateState)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getEditorInput)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getDocumentProvider)))(SimpleName:getDocument)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getEditorInput)))))(SimpleName:setContent)(METHOD_INVOCATION_ARGUMENTS(SimpleName:previousContent))))(IfStatement(InfixExpression(MethodInvocation(SimpleName:reuseDiagramOnMove))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:initialDirtyState)))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getDocumentProvider)))(SimpleName:resetDocument)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:getEditorInput))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:CoreException))(SimpleName:e))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:title)(QualifiedName:EditorMessages.Editor_error_setinput_title)))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:msg)(QualifiedName:EditorMessages.Editor_error_setinput_message)))(VariableDeclarationStatement(SimpleType(SimpleName:Shell))(VariableDeclarationFragment(SimpleName:shell)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:getSite)))(SimpleName:getShell))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ErrorDialog))(SimpleName:openError)(METHOD_INVOCATION_ARGUMENTS(SimpleName:shell)(SimpleName:title)(SimpleName:msg)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getStatus))))))))))))))))(ExpressionStatement(MethodInvocation(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:r2)(SimpleName:doValidationAsync))))))))))))))(ExpressionStatement(MethodInvocation(SimpleName:execute)(METHOD_INVOCATION_ARGUMENTS(SimpleName:r)(BooleanLiteral:false))))))))))