(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:int)(SimpleName:doProcessing)(SingleVariableDeclaration(SimpleType(SimpleName:EventWaiter))(SimpleName:waiter))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:max_bytes))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:num_bytes_allowed)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main_handler))(SimpleName:getCurrentNumBytesAllowed))))(IfStatement(InfixExpression(SimpleName:num_bytes_allowed)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:1))(Block(ReturnStatement(NumberLiteral:0))))(IfStatement(InfixExpression(InfixExpression(SimpleName:max_bytes)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:max_bytes)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:num_bytes_allowed)))(Block(ExpressionStatement(Assignment(SimpleName:num_bytes_allowed)(ASSIGNMENT_OPERATOR:=)(SimpleName:max_bytes)))))(IfStatement(InfixExpression(SimpleName:pending_actions)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connections_mon))(SimpleName:enter)))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pending_actions))(SimpleName:size)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:Object))(Dimension))(VariableDeclarationFragment(SimpleName:entry)(CastExpression(ArrayType(SimpleType(SimpleName:Object))(Dimension))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:pending_actions))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))))(VariableDeclarationStatement(SimpleType(SimpleName:NetworkConnectionBase))(VariableDeclarationFragment(SimpleName:connection)(CastExpression(SimpleType(SimpleName:NetworkConnectionBase))(ArrayAccess(SimpleName:entry)(NumberLiteral:1)))))(IfStatement(InfixExpression(ArrayAccess(SimpleName:entry)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:ADD_ACTION))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:active_connections))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:active_connections))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:idle_connections))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection))))))))(ExpressionStatement(Assignment(SimpleName:pending_actions)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connections_mon))(SimpleName:exit)))))))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:now)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:SystemTime))(SimpleName:getSteppedMonotonousTime))))(IfStatement(InfixExpression(InfixExpression(SimpleName:now)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:last_idle_check))(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:MOVE_TO_IDLE_TIME))(Block(ExpressionStatement(Assignment(SimpleName:last_idle_check)(ASSIGNMENT_OPERATOR:=)(SimpleName:now)))(VariableDeclarationStatement(SimpleType(SimpleName:connectionEntry))(VariableDeclarationFragment(SimpleName:entry)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:idle_connections))(SimpleName:head))))(WhileStatement(InfixExpression(SimpleName:entry)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:NetworkConnectionBase))(VariableDeclarationFragment(SimpleName:connection)(QualifiedName:entry.connection)))(VariableDeclarationStatement(SimpleType(SimpleName:connectionEntry))(VariableDeclarationFragment(SimpleName:next)(QualifiedName:entry.next)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getTransportBase)))(SimpleName:isReadyForRead)(METHOD_INVOCATION_ARGUMENTS(SimpleName:waiter)))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:idle_connections))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entry))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:active_connections))(SimpleName:addToStart)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entry))))))(ExpressionStatement(Assignment(SimpleName:entry)(ASSIGNMENT_OPERATOR:=)(SimpleName:next)))))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:num_bytes_remaining)(SimpleName:num_bytes_allowed)))(VariableDeclarationStatement(SimpleType(SimpleName:connectionEntry))(VariableDeclarationFragment(SimpleName:entry)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:active_connections))(SimpleName:head))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:num_entries)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:active_connections))(SimpleName:size))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(InfixExpression(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:num_entries))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:entry)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:num_bytes_remaining)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0)))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:NetworkConnectionBase))(VariableDeclarationFragment(SimpleName:connection)(QualifiedName:entry.connection)))(VariableDeclarationStatement(SimpleType(SimpleName:connectionEntry))(VariableDeclarationFragment(SimpleName:next)(QualifiedName:entry.next)))(VariableDeclarationStatement(PrimitiveType:long)(VariableDeclarationFragment(SimpleName:ready)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getTransportBase)))(SimpleName:isReadyForRead)(METHOD_INVOCATION_ARGUMENTS(SimpleName:waiter)))))(IfStatement(InfixExpression(SimpleName:ready)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:mss)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getMssSize))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:allowed)(ConditionalExpression(InfixExpression(SimpleName:num_bytes_remaining)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:mss))(SimpleName:mss)(SimpleName:num_bytes_remaining))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bytes_read)(NumberLiteral:0)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:bytes_read)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getIncomingMessageQueue)))(SimpleName:receiveFromTransport)(METHOD_INVOCATION_ARGUMENTS(SimpleName:allowed))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Throwable))(SimpleName:e))(Block(IfStatement(QualifiedName:AEDiagnostics.TRACE_CONNECTION_DROPS)(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Debug))(SimpleName:out)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e)))))(Block(IfStatement(InfixExpression(InfixExpression(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1)))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))(SimpleName:indexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:==)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:getTransportBase)))(SimpleName:getDescription))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage))))))))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InstanceofExpression(SimpleName:e)(SimpleType(SimpleName:IOException)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Debug))(SimpleName:printStackTrace)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connection))(SimpleName:notifyOfException)(METHOD_INVOCATION_ARGUMENTS(SimpleName:e)))))))(ExpressionStatement(Assignment(SimpleName:num_bytes_remaining)(ASSIGNMENT_OPERATOR:-=)(SimpleName:bytes_read)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:active_connections))(SimpleName:moveToEnd)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entry)))))(IfStatement(InfixExpression(SimpleName:ready)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:MOVE_TO_IDLE_TIME))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:active_connections))(SimpleName:remove)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entry))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:idle_connections))(SimpleName:addToEnd)(METHOD_INVOCATION_ARGUMENTS(SimpleName:entry)))))))(ExpressionStatement(Assignment(SimpleName:entry)(ASSIGNMENT_OPERATOR:=)(SimpleName:next)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:total_bytes_read)(InfixExpression(SimpleName:num_bytes_allowed)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:num_bytes_remaining))))(IfStatement(InfixExpression(SimpleName:total_bytes_read)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:main_handler))(SimpleName:bytesProcessed)(METHOD_INVOCATION_ARGUMENTS(SimpleName:total_bytes_read))))(ReturnStatement(SimpleName:total_bytes_read))))(ReturnStatement(NumberLiteral:0))))))