(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Test))(Modifier:public)(PrimitiveType:void)(SimpleName:testDownloadInterceptor)(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:log4j)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ResourceUtils))(SimpleName:getFile)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(SimpleType(SimpleName:FileChannel))(VariableDeclarationFragment(SimpleName:fc)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:FileInputStream))(SimpleName:log4j)))(SimpleName:getChannel))))(VariableDeclarationStatement(SimpleType(SimpleName:ByteBuffer))(VariableDeclarationFragment(SimpleName:bb)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ByteBuffer))(SimpleName:allocate)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(NumberLiteral:1024)(INFIX_EXPRESSION_OPERATOR:*)(NumberLiteral:10))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fc))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(SimpleName:bb))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bb))(SimpleName:flip)))(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:realContent)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bb))(SimpleName:limit)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:bb))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:realContent))))(VariableDeclarationStatement(SimpleType(SimpleName:Method))(VariableDeclarationFragment(SimpleName:method)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ReflectionUtils))(SimpleName:findMethod)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:POJOTestAction)))(StringLiteral:<STR>)(QualifiedName:InfrastructureKeys.METHOD_PARAM)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:stub)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mockRequest))(SimpleName:getAttribute)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:InfrastructureKeys.EXECUTION))))))(SimpleName:toReturn)(METHOD_INVOCATION_ARGUMENTS(SimpleName:method))))(VariableDeclarationStatement(Modifier:final)(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:actualContent)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(QualifiedName:realContent.length))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:stub)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mockResponse))(SimpleName:getOutputStream)))))(SimpleName:toReturn)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:ServletOutputStream))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:write)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:b))(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:actualContent)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:utils))(SimpleName:getCounter)))(SimpleName:get)))(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:byte)(SimpleName:b))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:utils))(SimpleName:increaseCounter))))))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:direction)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:download))(SimpleName:preHandle)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mockRequest)(SimpleName:mockResponse)(SimpleName:action)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:verify)(METHOD_INVOCATION_ARGUMENTS(SimpleName:mockResponse))))(SimpleName:setContentType)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Forward.INPUT)(SimpleName:direction))))(ExpressionStatement(MethodInvocation(SimpleName:assertTrue)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Arrays))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:realContent)(SimpleName:actualContent))))))))))