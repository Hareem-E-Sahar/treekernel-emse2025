(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(Modifier:static)(ArrayType(SimpleType(SimpleName:AttachmentInfo))(Dimension))(SimpleName:saveRequestFiles)(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:forumid))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:maxAllowFileCount))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:maxSizePerDay))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:maxFileSize))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:todayUploadedSize))(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:allowFileType))(SingleVariableDeclaration(PrimitiveType:int)(SimpleName:watermarkstatus))(SingleVariableDeclaration(SimpleType(SimpleName:Config))(SimpleName:config))(SingleVariableDeclaration(ArrayType(SimpleType(SimpleName:File))(Dimension))(SimpleName:postfiles))(SingleVariableDeclaration(ArrayType(SimpleType(SimpleName:String))(Dimension))(SimpleName:postfileFileNames))(SingleVariableDeclaration(ArrayType(SimpleType(SimpleName:String))(Dimension))(SimpleName:postfileContentTypes))(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:System.out))(SimpleName:println)(METHOD_INVOCATION_ARGUMENTS(SimpleName:allowFileType))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:tmp)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:allowFileType))(SimpleName:split)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:String))(Dimension))(VariableDeclarationFragment(SimpleName:allowFileExtName)(ArrayCreation(ArrayType(SimpleType(SimpleName:String))(Dimension(QualifiedName:tmp.length))))))(VariableDeclarationStatement(ArrayType(PrimitiveType:int)(Dimension))(VariableDeclarationFragment(SimpleName:maxSize)(ArrayCreation(ArrayType(PrimitiveType:int)(Dimension(QualifiedName:tmp.length))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:tmp.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:allowFileExtName)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:tmp)(SimpleName:i)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:tmp)(SimpleName:i)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:maxSize)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:null2Int)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:tmp)(SimpleName:i)))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:tmp)(SimpleName:i)))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1))))(NumberLiteral:0)))))))(VariableDeclarationStatement(PrimitiveType:boolean)(VariableDeclarationFragment(SimpleName:isMultipart)(InfixExpression(QualifiedName:postfiles.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))))(IfStatement(SimpleName:isMultipart)(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:saveFileCount)(QualifiedName:postfiles.length)))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:maxAllowFileCount)(StringLiteral:<STR>)(SimpleName:saveFileCount)))))))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:AttachmentInfo))(Dimension))(VariableDeclarationFragment(SimpleName:attachmentinfo)(ArrayCreation(ArrayType(SimpleType(SimpleName:AttachmentInfo))(Dimension(SimpleName:saveFileCount))))))(IfStatement(InfixExpression(SimpleName:saveFileCount)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:maxAllowFileCount))(Block(ReturnStatement(SimpleName:attachmentinfo))))(ExpressionStatement(Assignment(SimpleName:saveFileCount)(ASSIGNMENT_OPERATOR:=)(NumberLiteral:0)))(VariableDeclarationStatement(SimpleType(SimpleName:Random))(VariableDeclarationFragment(SimpleName:random)(ClassInstanceCreation(SimpleType(SimpleName:Random))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis)))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(QualifiedName:postfiles.length))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filename)(ArrayAccess(SimpleName:postfileFileNames)(SimpleName:i))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileextname)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filename))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filename))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:+)(NumberLiteral:1)))))(SimpleName:toLowerCase))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:filetype)(ArrayAccess(SimpleName:postfileContentTypes)(SimpleName:i))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:filesize)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:null2Int)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:postfiles)(SimpleName:i)))(SimpleName:length))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:newfilename)(StringLiteral:<STR>)))(ExpressionStatement(Assignment(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:AttachmentInfo)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_noupload)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:isImgFilename)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filename)))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filetype))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:extnameid)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:getInArrayID)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileextname)(SimpleName:allowFileExtName)))))(IfStatement(InfixExpression(InfixExpression(InfixExpression(InfixExpression(SimpleName:extnameid)(INFIX_EXPRESSION_OPERATOR:>=)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:filesize)(INFIX_EXPRESSION_OPERATOR:<=)(ArrayAccess(SimpleName:maxSize)(SimpleName:extnameid)))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(SimpleName:maxFileSize)(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:filesize))))(INFIX_EXPRESSION_OPERATOR:&&)(ParenthesizedExpression(InfixExpression(InfixExpression(SimpleName:maxSizePerDay)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:todayUploadedSize))(INFIX_EXPRESSION_OPERATOR:>=)(SimpleName:filesize))))(Block(ExpressionStatement(Assignment(SimpleName:todayUploadedSize)(ASSIGNMENT_OPERATOR:=)(InfixExpression(SimpleName:todayUploadedSize)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:filesize))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:uploadDir)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWebpath))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:StringBuilder))(VariableDeclarationFragment(SimpleName:savedir)(ClassInstanceCreation(SimpleType(SimpleName:StringBuilder))(StringLiteral:<STR>))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachsave))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.YEAR))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.MONTH))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.DAY_OF_MONTH))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:forumid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachsave))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:2))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:forumid))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachsave))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:3))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileextname))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.YEAR))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.MONTH))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Calendar))(SimpleName:getInstance)))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:Calendar.DAY_OF_MONTH))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:append)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))))(ExpressionStatement(Assignment(SimpleName:newfilename)(ASSIGNMENT_OPERATOR:=)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis))(INFIX_EXPRESSION_OPERATOR:&)(QualifiedName:Integer.MAX_VALUE)))(SimpleName:i)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:random))(SimpleName:nextInt))(StringLiteral:<STR>)(SimpleName:fileextname))))(ExpressionStatement(Assignment(SimpleName:newfilename)(ASSIGNMENT_OPERATOR:=)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:savedir))(SimpleName:toString))(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:newfilename))))(IfStatement(InfixExpression(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileextname))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(INFIX_EXPRESSION_OPERATOR:||)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileextname))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileextname))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileextname))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filetype))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:BufferedImage))(VariableDeclarationFragment(SimpleName:img)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ImageIO))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:postfiles)(SimpleName:i))))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachimgmaxwidth))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:img))(SimpleName:getWidth))(INFIX_EXPRESSION_OPERATOR:>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachimgmaxwidth))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_noupload)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:img))(SimpleName:getWidth))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachimgmaxwidth))))))))(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachimgmaxheight))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:img))(SimpleName:getHeight))(INFIX_EXPRESSION_OPERATOR:>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachimgmaxheight))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_noupload)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:img))(SimpleName:getHeight))(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachimgmaxheight))))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:getSys_noupload)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:postfiles)(SimpleName:i))(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:uploadDir)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:newfilename))))))(IfStatement(InfixExpression(SimpleName:watermarkstatus)(INFIX_EXPRESSION_OPERATOR:!=)(NumberLiteral:0))(Block(IfStatement(InfixExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarktype))(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:1))(INFIX_EXPRESSION_OPERATOR:&&)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:fileExists)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWebpath))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarkpic))))))(Block(ExpressionStatement(MethodInvocation(SimpleName:addImageSignPic)(METHOD_INVOCATION_ARGUMENTS(SimpleName:img)(InfixExpression(SimpleName:uploadDir)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:newfilename))(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWebpath))(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarkpic)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarkstatus))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachimgquality))(ParenthesizedExpression(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarktransparency))(INFIX_EXPRESSION_OPERATOR:/)(NumberLiteral:10.0f)))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:watermarkText)))(ExpressionStatement(Assignment(SimpleName:watermarkText)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarktext)))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getForumtitle))))))(ExpressionStatement(Assignment(SimpleName:watermarkText)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:watermarkText))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getForumurl))))))(ExpressionStatement(Assignment(SimpleName:watermarkText)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:watermarkText))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:getNowShortDate))))))(ExpressionStatement(Assignment(SimpleName:watermarkText)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:watermarkText))(SimpleName:replace)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:getNowShortTime))))))(ExpressionStatement(MethodInvocation(SimpleName:addImageSignText)(METHOD_INVOCATION_ARGUMENTS(SimpleName:img)(InfixExpression(SimpleName:uploadDir)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:newfilename))(SimpleName:watermarkText)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarkstatus))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getAttachimgquality))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarkfontname))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:config))(SimpleName:getWatermarkfontsize)))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setFilesize)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:null2Int)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:uploadDir)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:newfilename))))(SimpleName:length)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setFilesize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filesize)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setFilesize)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filesize))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:copyFile)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:postfiles)(SimpleName:i))(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:uploadDir)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:newfilename)))))))))(Block(IfStatement(InfixExpression(SimpleName:extnameid)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_noupload)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(InfixExpression(SimpleName:maxSizePerDay)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:todayUploadedSize))(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:filesize))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_noupload)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ParenthesizedExpression(InfixExpression(SimpleName:maxSizePerDay)(INFIX_EXPRESSION_OPERATOR:-)(SimpleName:todayUploadedSize))))))))(IfStatement(InfixExpression(SimpleName:filesize)(INFIX_EXPRESSION_OPERATOR:>)(ArrayAccess(SimpleName:maxSize)(SimpleName:extnameid)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_noupload)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(ArrayAccess(SimpleName:maxSize)(SimpleName:extnameid)))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_noupload)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_noupload)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setFilename)(METHOD_INVOCATION_ARGUMENTS(SimpleName:newfilename))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setDescription)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileextname))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setFiletype)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filetype))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setAttachment)(METHOD_INVOCATION_ARGUMENTS(SimpleName:filename))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setDownloads)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setPostdatetime)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Utils))(SimpleName:getNowTime)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:attachmentinfo)(SimpleName:saveFileCount)))(SimpleName:setSys_index)(METHOD_INVOCATION_ARGUMENTS(SimpleName:i))))(ExpressionStatement(PostfixExpression(SimpleName:saveFileCount)(POSTFIX_EXPRESSION_OPERATOR:++)))))(ReturnStatement(SimpleName:attachmentinfo)))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))))(ReturnStatement(NullLiteral))))))))