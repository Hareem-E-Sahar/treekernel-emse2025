(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:protected)(Modifier:synchronized)(PrimitiveType:void)(SimpleName:read)(SimpleType(SimpleName:IOException))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:readBuffer)))(SimpleName:clear)))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:bytesRead)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:client)))(SimpleName:read)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:readBuffer))))))(IfStatement(InfixExpression(SimpleName:bytesRead)(INFIX_EXPRESSION_OPERATOR:<)(NumberLiteral:0))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IOException))(StringLiteral:<STR>))))(IfStatement(InfixExpression(SimpleName:bytesRead)(INFIX_EXPRESSION_OPERATOR:==)(NumberLiteral:0))(Block(ReturnStatement))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:storage)))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:readBuffer)))(SimpleName:array))(NumberLiteral:0)(SimpleName:bytesRead))))(WhileStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:input)))(SimpleName:available))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(IfStatement(FieldAccess(ThisExpression)(SimpleName:waitingForLength))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:input)))(SimpleName:available))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:2))(Block(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:length))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:input)))(SimpleName:readShort))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:waitingForLength))(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false))))(Block(BreakStatement))))(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:input)))(SimpleName:available))(INFIX_EXPRESSION_OPERATOR:>=)(FieldAccess(ThisExpression)(SimpleName:length)))(Block(VariableDeclarationStatement(ArrayType(PrimitiveType:byte)(Dimension))(VariableDeclarationFragment(SimpleName:data)(ArrayCreation(ArrayType(PrimitiveType:byte)(Dimension(FieldAccess(ThisExpression)(SimpleName:length)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:input)))(SimpleName:readFully)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:addReceivedPacket)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:waitingForLength))(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true))))(Block(BreakStatement)))))))))))