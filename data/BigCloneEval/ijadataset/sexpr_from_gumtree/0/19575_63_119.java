(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:commit)(SingleVariableDeclaration(SimpleType(SimpleName:CodeGenContext))(SimpleName:ctx))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:FileContents)))(VariableDeclarationFragment(SimpleName:tempFileContents)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ctx))(SimpleName:getTempFileContents))))(IfStatement(InfixExpression(SimpleName:tempFileContents)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ForStatement(VariableDeclarationExpression(ParameterizedType(SimpleType(SimpleName:Iterator))(SimpleType(SimpleName:FileContents)))(VariableDeclarationFragment(SimpleName:iterator)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tempFileContents))(SimpleName:iterator))))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iterator))(SimpleName:hasNext))(Block(VariableDeclarationStatement(SimpleType(SimpleName:FileContents))(VariableDeclarationFragment(SimpleName:fileContent)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:iterator))(SimpleName:next))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fileContent)))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:operation)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileContent))(SimpleName:getOperation))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:path)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileContent))(SimpleName:getFilePath))))(IfStatement(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:fileContent))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:dirPath)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:lastIndexOf)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))(VariableDeclarationStatement(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:content)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileContent))(SimpleName:getFileContents))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:fileToWriteContentsInto)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:path))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:fileName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileToWriteContentsInto))(SimpleName:getName))))(SwitchStatement(SimpleName:operation)(SwitchCase(QualifiedName:FileContents.OPERATION_CREATE))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileToWriteContentsInto))(SimpleName:exists))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:message)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:path))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileContent))(SimpleName:setErrorMessage)(METHOD_INVOCATION_ARGUMENTS(SimpleName:message))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(SimpleName:message))))))(VariableDeclarationStatement(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:dir)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:dirPath))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dir))(SimpleName:exists)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:dir))(SimpleName:mkdirs)))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:toLowerCase)))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:writeStringToFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileToWriteContentsInto)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:content))(SimpleName:toString))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Serializer))(VariableDeclarationFragment(SimpleName:serializer)(ClassInstanceCreation(SimpleType(SimpleName:Serializer))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:path)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serializer))(SimpleName:setIndent)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:4))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serializer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:Document))(SimpleName:content)))))))(BreakStatement)(SwitchCase(QualifiedName:FileContents.OPERATION_UPDATE))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileToWriteContentsInto))(SimpleName:exists))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Date))(VariableDeclarationFragment(SimpleName:date)(ClassInstanceCreation(SimpleType(SimpleName:Date))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:System))(SimpleName:currentTimeMillis)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:CodeGenUtil))(SimpleName:cleanBackupFiles)(METHOD_INVOCATION_ARGUMENTS(SimpleName:dirPath))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileToWriteContentsInto))(SimpleName:renameTo)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:File))(InfixExpression(SimpleName:path)(INFIX_EXPRESSION_OPERATOR:+)(QualifiedName:CodeGenConstants.BKP_PREFIX)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ClassInstanceCreation(SimpleType(SimpleName:SimpleDateFormat))(StringLiteral:<STR>)))(SimpleName:format)(METHOD_INVOCATION_ARGUMENTS(SimpleName:date))))))))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileName))(SimpleName:toLowerCase)))(SimpleName:endsWith)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:writeStringToFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileToWriteContentsInto)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:content))(SimpleName:toString))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Serializer))(VariableDeclarationFragment(SimpleName:serializer)(ClassInstanceCreation(SimpleType(SimpleName:Serializer))(ClassInstanceCreation(SimpleType(SimpleName:FileOutputStream))(SimpleName:path)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serializer))(SimpleName:setIndent)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:4))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serializer))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(CastExpression(SimpleType(SimpleName:Document))(SimpleName:content)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:cleanedUpDirtyAttributes)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:readFileToString)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileToWriteContentsInto))))(SimpleName:replaceAll)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:FileUtils))(SimpleName:writeStringToFile)(METHOD_INVOCATION_ARGUMENTS(SimpleName:fileToWriteContentsInto)(SimpleName:cleanedUpDirtyAttributes))))))(BreakStatement)(SwitchCase)(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:fileContent))(SimpleName:setErrorMessage)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))))))))))