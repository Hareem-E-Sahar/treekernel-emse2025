(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(SimpleType(SimpleName:TCPChannel))(SimpleName:getChannel)(SingleVariableDeclaration(SimpleType(SimpleName:Endpoint))(SimpleName:ep))(Block(VariableDeclarationStatement(SimpleType(SimpleName:TCPChannel))(VariableDeclarationFragment(SimpleName:ch)(NullLiteral)))(IfStatement(InstanceofExpression(SimpleName:ep)(SimpleType(SimpleName:TCPEndpoint)))(Block(SynchronizedStatement(SimpleName:channelTable)(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Reference))(SimpleType(SimpleName:TCPChannel)))(VariableDeclarationFragment(SimpleName:ref)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channelTable))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ep)))))(IfStatement(InfixExpression(SimpleName:ref)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:ch)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:ref))(SimpleName:get))))))(IfStatement(InfixExpression(SimpleName:ch)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:TCPEndpoint))(VariableDeclarationFragment(SimpleName:tcpEndpoint)(CastExpression(SimpleType(SimpleName:TCPEndpoint))(SimpleName:ep))))(ExpressionStatement(Assignment(SimpleName:ch)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:TCPChannel))(ThisExpression)(SimpleName:tcpEndpoint))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channelTable))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:tcpEndpoint)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:WeakReference))(SimpleType(SimpleName:TCPChannel)))(SimpleName:ch)))))))))))(ReturnStatement(SimpleName:ch))))))