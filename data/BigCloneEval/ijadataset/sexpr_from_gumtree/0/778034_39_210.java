(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(WhileStatement(SimpleName:running)(Block(VariableDeclarationStatement(SimpleType(SimpleName:Socket))(VariableDeclarationFragment(SimpleName:conn)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:Request))(VariableDeclarationFragment(SimpleName:req)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:conn)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:listenPort))(SimpleName:accept)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ContinueStatement))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:req)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Request))(SimpleName:conn)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ie))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:ie)(StringLiteral:<STR>))))(ContinueStatement)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:MalformedHeaderException))(SimpleName:me))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:me)(StringLiteral:<STR>))))(ContinueStatement))))(VariableDeclarationStatement(SimpleType(SimpleName:Action))(VariableDeclarationFragment(SimpleName:action)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:actionFactory))(SimpleName:getSuitableAction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)))))(IfStatement(InfixExpression(SimpleName:action)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:req)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:action))(SimpleName:filterRequest)(METHOD_INVOCATION_ARGUMENTS(SimpleName:req)))))))(IfStatement(InfixExpression(SimpleName:req)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(TryStatement(Block(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:outToClient)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getOutputStream))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeDummyResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outToClient))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outToClient))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))(ContinueStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:Socket))(VariableDeclarationFragment(SimpleName:connToServer)(NullLiteral)))(IfStatement(InfixExpression(QualifiedName:Main.passThruHost)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:InetAddress))(Dimension))(VariableDeclarationFragment(SimpleName:hostAddrs)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:hostAddrs)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getHostAddrs)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:UnknownHostException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:e)(StringLiteral:<STR>))))(ContinueStatement))))(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:whichAddr)(NumberLiteral:0)))(IfStatement(InfixExpression(QualifiedName:hostAddrs.length)(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:1))(Block(ExpressionStatement(Assignment(SimpleName:whichAddr)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(ParenthesizedExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:floor)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Math))(SimpleName:random))(INFIX_EXPRESSION_OPERATOR:*)(QualifiedName:hostAddrs.length))))))))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:connToServer)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Socket))(ArrayAccess(SimpleName:hostAddrs)(SimpleName:whichAddr))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getPort))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:e)(StringLiteral:<STR>))))(ContinueStatement)))))(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:connToServer)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Socket))(QualifiedName:Main.passThruHost)(QualifiedName:Main.passThruPort)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:e)(StringLiteral:<STR>))))(ContinueStatement))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getMethod)))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:inFromClient)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getContent))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:outToClient)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:InputStream))(VariableDeclarationFragment(SimpleName:inFromServer)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:outToServer)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:outToClient)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getOutputStream)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:inFromServer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connToServer))(SimpleName:getInputStream))))(ExpressionStatement(Assignment(SimpleName:outToServer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connToServer))(SimpleName:getOutputStream))))(IfStatement(InfixExpression(QualifiedName:Main.passThruHost)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outToClient))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(ParenthesizedExpression(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(StringLiteral:<STR>))))(SimpleName:getBytes))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outToServer))))))(VariableDeclarationStatement(SimpleType(SimpleName:Thread))(VariableDeclarationFragment(SimpleName:outboundThread)(ClassInstanceCreation(SimpleType(SimpleName:Thread))(ClassInstanceCreation(SimpleType(SimpleName:StreamCopier))(SimpleName:inFromClient)(SimpleName:outToServer)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))(VariableDeclarationStatement(SimpleType(SimpleName:Thread))(VariableDeclarationFragment(SimpleName:inboundThread)(ClassInstanceCreation(SimpleType(SimpleName:Thread))(ClassInstanceCreation(SimpleType(SimpleName:StreamCopier))(SimpleName:inFromServer)(SimpleName:outToClient)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outboundThread))(SimpleName:start)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inboundThread))(SimpleName:start)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outboundThread))(SimpleName:join)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:inboundThread))(SimpleName:join))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ie))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:ie)(StringLiteral:<STR>))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InterruptedException))(SimpleName:ne))(Block)))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connToServer))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block)))(ContinueStatement)))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:outToServer)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:outToServer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connToServer))(SimpleName:getOutputStream))))(IfStatement(InfixExpression(QualifiedName:Main.passThruHost)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:writePassThru)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outToServer)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outToServer))))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:contentLengthString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getHeaderValue)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:contentLengthString)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:contentLength)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:contentLength)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:contentLengthString))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NumberFormatException))(SimpleName:ne))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StreamCopier))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getContent))(SimpleName:outToServer)(SimpleName:contentLength)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getMethod)))(SimpleName:equalsIgnoreCase)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StreamCopier))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:req))(SimpleName:getContent))(SimpleName:outToServer)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))(Block))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:e)(StringLiteral:<STR>))))(ContinueStatement))))(VariableDeclarationStatement(SimpleType(SimpleName:Response))(VariableDeclarationFragment(SimpleName:resp)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:resp)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Response))(SimpleName:connToServer)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:ie))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:ie)(StringLiteral:<STR>))))(ContinueStatement)))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:MalformedHeaderException))(SimpleName:me))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeExceptionResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:conn)(SimpleName:me)(StringLiteral:<STR>))))(ContinueStatement))))(IfStatement(InfixExpression(SimpleName:action)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:resp)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:action))(SimpleName:filterResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:resp)))))))(VariableDeclarationStatement(SimpleType(SimpleName:OutputStream))(VariableDeclarationFragment(SimpleName:outToClient)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:outToClient)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:getOutputStream))))(IfStatement(InfixExpression(SimpleName:resp)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DefaultResponder))(SimpleName:writeDummyResponse)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outToClient))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:outToClient))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connToServer))(SimpleName:close)))(ContinueStatement))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace)))(ContinueStatement))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:clearHeaders)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:addHeaderValue)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(StringLiteral:<STR>))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:outToClient))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:respContentLengthString)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:getHeaderValue)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)))))(IfStatement(InfixExpression(SimpleName:respContentLengthString)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:contentLength)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:contentLength)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Integer))(SimpleName:parseInt)(METHOD_INVOCATION_ARGUMENTS(SimpleName:respContentLengthString))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:NumberFormatException))(SimpleName:ne))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StreamCopier))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:getContent))(SimpleName:outToClient)(SimpleName:contentLength)))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:StreamCopier))(SimpleName:copy)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:resp))(SimpleName:getContent))(SimpleName:outToClient)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:-)(NumberLiteral:1))))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:printStackTrace))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:conn))(SimpleName:close)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:connToServer))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block)))))))))