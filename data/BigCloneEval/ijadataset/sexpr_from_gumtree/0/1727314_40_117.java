(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:messageReceived)(SingleVariableDeclaration(SimpleType(SimpleName:ChannelHandlerContext))(SimpleName:ctx))(SingleVariableDeclaration(SimpleType(SimpleName:MessageEvent))(SimpleName:e))(SimpleType(SimpleName:Exception))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:RpcRequest))(VariableDeclarationFragment(SimpleName:request)(CastExpression(SimpleType(SimpleName:RpcRequest))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getMessage)))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:serviceName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getServiceName))))(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:methodName)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMethodName))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:serviceName)(StringLiteral:<STR>)(SimpleName:methodName)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getIsBlockingService))(Block(VariableDeclarationStatement(SimpleType(SimpleName:BlockingService))(VariableDeclarationFragment(SimpleName:blockingService)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:blockingServiceMap))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:serviceName)))))(IfStatement(InfixExpression(SimpleName:blockingService)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NoSuchServiceException))(SimpleName:request)(SimpleName:serviceName))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:blockingService))(SimpleName:getDescriptorForType)))(SimpleName:findMethodByName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:methodName)))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NoSuchServiceMethodException))(SimpleName:request)(SimpleName:methodName))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:hasId)))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NoRequestIdException)))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MethodDescriptor))(VariableDeclarationFragment(SimpleName:methodDescriptor)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:blockingService))(SimpleName:getDescriptorForType)))(SimpleName:findMethodByName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:methodName)))))(VariableDeclarationStatement(SimpleType(SimpleName:Message))(VariableDeclarationFragment(SimpleName:methodRequest)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:methodRequest)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:buildMessageFromPrototype)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:blockingService))(SimpleName:getRequestPrototype)(METHOD_INVOCATION_ARGUMENTS(SimpleName:methodDescriptor)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRequestMessage)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InvalidProtocolBufferException))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:InvalidRpcRequestException))(SimpleName:ex)(SimpleName:request)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:RpcController))(VariableDeclarationFragment(SimpleName:controller)(ClassInstanceCreation(SimpleType(SimpleName:NettyRpcController)))))(VariableDeclarationStatement(SimpleType(SimpleName:Message))(VariableDeclarationFragment(SimpleName:methodResponse)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:methodResponse)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:blockingService))(SimpleName:callBlockingMethod)(METHOD_INVOCATION_ARGUMENTS(SimpleName:methodDescriptor)(SimpleName:controller)(SimpleName:methodRequest))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:ServiceException))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RpcServiceException))(SimpleName:ex)(SimpleName:request)(StringLiteral:<STR>)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RpcException))(SimpleName:ex)(SimpleName:request)(StringLiteral:<STR>))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:controller))(SimpleName:failed))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RpcException))(SimpleName:request)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:controller))(SimpleName:errorText))))))(IfStatement(InfixExpression(SimpleName:methodResponse)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RpcException))(SimpleName:request)(StringLiteral:<STR>))))))(VariableDeclarationStatement(SimpleType(SimpleName:RpcResponse))(VariableDeclarationFragment(SimpleName:response)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:NettyRpcProto.RpcResponse))(SimpleName:newBuilder)))(SimpleName:setId)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getId)))))(SimpleName:setResponseMessage)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:methodResponse))(SimpleName:toByteString)))))(SimpleName:build))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel)))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:response)))))))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Service))(VariableDeclarationFragment(SimpleName:service)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:serviceMap))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:serviceName)))))(IfStatement(InfixExpression(SimpleName:service)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NoSuchServiceException))(SimpleName:request)(SimpleName:serviceName))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:getDescriptorForType)))(SimpleName:findMethodByName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:methodName)))(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:NoSuchServiceMethodException))(SimpleName:request)(SimpleName:methodName))))(Block(VariableDeclarationStatement(SimpleType(SimpleName:MethodDescriptor))(VariableDeclarationFragment(SimpleName:methodDescriptor)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:getDescriptorForType)))(SimpleName:findMethodByName)(METHOD_INVOCATION_ARGUMENTS(SimpleName:methodName)))))(VariableDeclarationStatement(SimpleType(SimpleName:Message))(VariableDeclarationFragment(SimpleName:methodRequest)(NullLiteral)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:methodRequest)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(SimpleName:buildMessageFromPrototype)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:getRequestPrototype)(METHOD_INVOCATION_ARGUMENTS(SimpleName:methodDescriptor)))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getRequestMessage)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:InvalidProtocolBufferException))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:InvalidRpcRequestException))(SimpleName:ex)(SimpleName:request)(StringLiteral:<STR>))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Channel))(VariableDeclarationFragment(SimpleName:channel)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:e))(SimpleName:getChannel))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:RpcController))(VariableDeclarationFragment(SimpleName:controller)(ClassInstanceCreation(SimpleType(SimpleName:NettyRpcController)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:RpcCallback))(SimpleType(SimpleName:Message)))(VariableDeclarationFragment(SimpleName:callback)(ConditionalExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:hasId)))(NullLiteral)(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:RpcCallback))(SimpleType(SimpleName:Message)))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(SingleVariableDeclaration(SimpleType(SimpleName:Message))(SimpleName:methodResponse))(Block(IfStatement(InfixExpression(SimpleName:methodResponse)(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RpcResponse))(SimpleName:newBuilder)))(SimpleName:setId)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getId)))))(SimpleName:setResponseMessage)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:methodResponse))(SimpleName:toByteString)))))(SimpleName:build))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:info)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(QualifiedName:RpcResponse.Builder))(VariableDeclarationFragment(SimpleName:builder)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:RpcResponse))(SimpleName:newBuilder)))(SimpleName:setId)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getId)))))(SimpleName:setErrorCode)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:ErrorCode.RPC_ERROR)))))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:controller))(SimpleName:errorText))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:setErrorMessage)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:controller))(SimpleName:errorText)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:channel))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:build))))))))))))))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:service))(SimpleName:callMethod)(METHOD_INVOCATION_ARGUMENTS(SimpleName:methodDescriptor)(SimpleName:controller)(SimpleName:methodRequest)(SimpleName:callback)))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:ex))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RpcException))(SimpleName:ex)(SimpleName:request)(StringLiteral:<STR>)))))))))))))))