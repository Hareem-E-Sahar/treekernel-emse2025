(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(SimpleType(SimpleName:Cursor))(SimpleName:openCursor)(SingleVariableDeclaration(SimpleType(SimpleName:Database))(SimpleName:db))(SingleVariableDeclaration(SimpleType(SimpleName:CursorConfig))(SimpleName:cursorConfig))(SingleVariableDeclaration(PrimitiveType:boolean)(SimpleName:writeCursor))(SingleVariableDeclaration(SimpleType(SimpleName:Transaction))(SimpleName:txn))(SimpleType(SimpleName:DatabaseException))(Block(IfStatement(SimpleName:cdbMode)(Block(VariableDeclarationStatement(SimpleType(SimpleName:CdbCursors))(VariableDeclarationFragment(SimpleName:cdbCursors)(NullLiteral)))(VariableDeclarationStatement(SimpleType(SimpleName:WeakHashMap))(VariableDeclarationFragment(SimpleName:cdbCursorsMap)(CastExpression(SimpleType(SimpleName:WeakHashMap))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localCdbCursors))(SimpleName:get)))))(IfStatement(InfixExpression(SimpleName:cdbCursorsMap)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:cdbCursorsMap)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:WeakHashMap)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:localCdbCursors))(SimpleName:set)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cdbCursorsMap)))))(Block(ExpressionStatement(Assignment(SimpleName:cdbCursors)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:CdbCursors))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cdbCursorsMap))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(SimpleName:db))))))))(IfStatement(InfixExpression(SimpleName:cdbCursors)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(Assignment(SimpleName:cdbCursors)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:CdbCursors)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cdbCursorsMap))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:db)(SimpleName:cdbCursors))))))(VariableDeclarationStatement(SimpleType(SimpleName:List))(VariableDeclarationFragment(SimpleName:cursors)))(VariableDeclarationStatement(SimpleType(SimpleName:CursorConfig))(VariableDeclarationFragment(SimpleName:cdbConfig)))(IfStatement(SimpleName:writeCursor)(Block(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(QualifiedName:cdbCursors.readCursors))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:IllegalStateException))(StringLiteral:<STR>)))))(ExpressionStatement(Assignment(SimpleName:cursors)(ASSIGNMENT_OPERATOR:=)(QualifiedName:cdbCursors.writeCursors)))(ExpressionStatement(Assignment(SimpleName:cdbConfig)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:CursorConfig)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:DbCompat))(SimpleName:setWriteCursor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cdbConfig)(BooleanLiteral:true)))))(Block(ExpressionStatement(Assignment(SimpleName:cursors)(ASSIGNMENT_OPERATOR:=)(QualifiedName:cdbCursors.readCursors)))(ExpressionStatement(Assignment(SimpleName:cdbConfig)(ASSIGNMENT_OPERATOR:=)(NullLiteral)))))(VariableDeclarationStatement(SimpleType(SimpleName:Cursor))(VariableDeclarationFragment(SimpleName:cursor)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cursors))(SimpleName:size))(INFIX_EXPRESSION_OPERATOR:>)(NumberLiteral:0))(Block(VariableDeclarationStatement(SimpleType(SimpleName:Cursor))(VariableDeclarationFragment(SimpleName:other)(ParenthesizedExpression(CastExpression(SimpleType(SimpleName:Cursor))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cursors))(SimpleName:get)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))))(ExpressionStatement(Assignment(SimpleName:cursor)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:other))(SimpleName:dup)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))))(Block(ExpressionStatement(Assignment(SimpleName:cursor)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:openCursor)(METHOD_INVOCATION_ARGUMENTS(NullLiteral)(SimpleName:cdbConfig)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:cursors))(SimpleName:add)(METHOD_INVOCATION_ARGUMENTS(SimpleName:cursor))))(ReturnStatement(SimpleName:cursor)))(Block(ReturnStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:db))(SimpleName:openCursor)(METHOD_INVOCATION_ARGUMENTS(SimpleName:txn)(SimpleName:cursorConfig))))))))))