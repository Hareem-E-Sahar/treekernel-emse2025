(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(Modifier:private)(SimpleType(SimpleName:NoMoreDataActionFileSize))(SimpleName:testForNoMoreDataAction)(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:EnumNoMoreDataAction))(SimpleName:noMoreDataAction))(SingleVariableDeclaration(Modifier:final)(PrimitiveType:boolean)(SimpleName:useCache))(SimpleType(SimpleName:FilePersistenceException))(SimpleType(SimpleName:FilePersistenceInvalidClassException))(SimpleType(SimpleName:FilePersistenceNotSerializableException))(SimpleType(SimpleName:FilePersistenceClassNotFoundException))(SimpleType(SimpleName:FilePersistenceDataCorruptedException))(SimpleType(SimpleName:InterruptedException))(SimpleType(SimpleName:FilePersistenceTooBigForSerializationException))(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:FilePersistenceBuilder))(VariableDeclarationFragment(SimpleName:builder)(ClassInstanceCreation(SimpleType(SimpleName:FilePersistenceBuilder)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:setPathName)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:path))(SimpleName:getPath)))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:setProxyMode)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:setRemoveFiles)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:setGarbageManagement)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:setCrashSafeMode)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:setNoMoreDataAction)(METHOD_INVOCATION_ARGUMENTS(SimpleName:noMoreDataAction))))(IfStatement(SimpleName:useCache)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:setFileCache)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1024)(NumberLiteral:1024))))))(ExpressionStatement(Assignment(SimpleName:filePersistence)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:builder))(SimpleName:build))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Thread))(VariableDeclarationFragment(SimpleName:thread)(ClassInstanceCreation(SimpleType(SimpleName:Thread))(ClassInstanceCreation(SimpleType(SimpleName:Runnable))(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(SynchronizedStatement(ThisExpression(SimpleName:TestFileManagementOptions))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression(SimpleName:TestFileManagementOptions)))(SimpleName:notifyAll)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:file)(ClassInstanceCreation(SimpleType(SimpleName:File))(SimpleName:path)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:RandomAccessFile))(VariableDeclarationFragment(SimpleName:randomAccessFile)))(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:randomAccessFile)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:RandomAccessFile))(SimpleName:file)(StringLiteral:<STR>))))(VariableDeclarationStatement(SimpleType(SimpleName:FileLock))(VariableDeclarationFragment(SimpleName:lock)(NullLiteral)))(TryStatement(Block(DoStatement(Block(TryStatement(Block(ExpressionStatement(Assignment(SimpleName:lock)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:randomAccessFile))(SimpleName:getChannel)))(SimpleName:tryLock)))))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(Assignment(SimpleName:lock)(ASSIGNMENT_OPERATOR:=)(NullLiteral))))))(IfStatement(InfixExpression(InfixExpression(SimpleName:lock)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(INFIX_EXPRESSION_OPERATOR:&&)(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:stop)))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression(SimpleName:TestFileManagementOptions)))(SimpleName:wait)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:0)))))))(InfixExpression(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:stop))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:lock)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))))(IfStatement(PrefixExpression(PREFIX_EXPRESSION_OPERATOR:!)(SimpleName:stop))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression(SimpleName:TestFileManagementOptions)))(SimpleName:wait))))))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:lock))(SimpleName:release))))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Exception))(SimpleName:e))(Block)))(TryStatement(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:randomAccessFile))(SimpleName:close))))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Exception))(SimpleName:e))(Block))))(CatchClause(SingleVariableDeclaration(Modifier:final)(SimpleType(SimpleName:Exception))(SimpleName:e1))(Block)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression(SimpleName:TestFileManagementOptions)))(SimpleName:notifyAll))))))))))))(SynchronizedStatement(ThisExpression)(Block(ExpressionStatement(Assignment(SimpleName:stop)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:false)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:thread))(SimpleName:start)))(ExpressionStatement(MethodInvocation(SimpleName:notifyAll)))(ExpressionStatement(MethodInvocation(SimpleName:wait)))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:NoMoreDataActionFileSize))(VariableDeclarationFragment(SimpleName:noMoreDataActionFileSize)(ClassInstanceCreation(SimpleType(SimpleName:NoMoreDataActionFileSize)))))(TryStatement(Block(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:IDataAccessSession))(VariableDeclarationFragment(SimpleName:session)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filePersistence))(SimpleName:createDataAccessSession))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:open)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:setObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:KEY)(ClassInstanceCreation(SimpleType(SimpleName:Object))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:close)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:EnumFilePersistenceCloseAction.SAVE))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:File))(VariableDeclarationFragment(SimpleName:storageFile)(ClassInstanceCreation(SimpleType(SimpleName:File))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filePersistence))(SimpleName:getStorageFileName)))))(ExpressionStatement(Assignment(QualifiedName:noMoreDataActionFileSize.before)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:storageFile))(SimpleName:length))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:open)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:removeObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:KEY))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:close)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:EnumFilePersistenceCloseAction.SAVE))))(ExpressionStatement(Assignment(QualifiedName:noMoreDataActionFileSize.after)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:storageFile))(SimpleName:length))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:open)))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:Object))(VariableDeclarationFragment(SimpleName:read)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:getObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:KEY)))))(ExpressionStatement(MethodInvocation(SimpleName:assertNull)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:read))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:setObject)(METHOD_INVOCATION_ARGUMENTS(SimpleName:KEY)(ClassInstanceCreation(SimpleType(SimpleName:Object))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:session))(SimpleName:close)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:EnumFilePersistenceCloseAction.SAVE))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:filePersistence))(SimpleName:close))))(Block(SynchronizedStatement(ThisExpression)(Block(ExpressionStatement(Assignment(SimpleName:stop)(ASSIGNMENT_OPERATOR:=)(BooleanLiteral:true)))(ExpressionStatement(MethodInvocation(SimpleName:notifyAll)))(ExpressionStatement(MethodInvocation(SimpleName:wait)))))))(ReturnStatement(SimpleName:noMoreDataActionFileSize))))))