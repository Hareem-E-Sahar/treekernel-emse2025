(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(PrimitiveType:void)(SimpleName:run)(SingleVariableDeclaration(SimpleType(SimpleName:D))(SimpleName:data))(Block(VariableDeclarationStatement(Modifier:final)(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:toRead)))(IfStatement(InfixExpression(InfixExpression(SimpleName:remainingLength)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:UNLIMITED))(INFIX_EXPRESSION_OPERATOR:&&)(InfixExpression(SimpleName:readDataSize)(INFIX_EXPRESSION_OPERATOR:>)(SimpleName:remainingLength)))(Block(ExpressionStatement(Assignment(SimpleName:toRead)(ASSIGNMENT_OPERATOR:=)(CastExpression(PrimitiveType:int)(SimpleName:remainingLength)))))(Block(ExpressionStatement(Assignment(SimpleName:toRead)(ASSIGNMENT_OPERATOR:=)(SimpleName:readDataSize)))))(VariableDeclarationStatement(Modifier:final)(ParameterizedType(SimpleType(SimpleName:Promise))(ArrayType(SimpleType(SimpleName:Object))(Dimension)))(VariableDeclarationFragment(SimpleName:readAndWrite)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Wait))(SimpleName:all)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:readData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:in)(SimpleName:toRead)))(MethodInvocation(SimpleName:writeData)(METHOD_INVOCATION_ARGUMENTS(SimpleName:out)(SimpleName:data)))))))(ExpressionStatement(ClassInstanceCreation(ParameterizedType(SimpleType(SimpleName:ProcessWhen))(ArrayType(SimpleType(SimpleName:Object))(Dimension)))(SimpleName:readAndWrite)(AnonymousClassDeclaration(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:protected)(ParameterizedType(SimpleType(SimpleName:Promise))(SimpleType(SimpleName:Void)))(SimpleName:resolved)(SingleVariableDeclaration(ArrayType(SimpleType(SimpleName:Object))(Dimension))(SimpleName:value))(SimpleType(SimpleName:Throwable))(Block(VariableDeclarationStatement(SimpleType(SimpleName:D))(VariableDeclarationFragment(SimpleName:data)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:IOUtils))(SimpleName:blindCast)(METHOD_INVOCATION_ARGUMENTS(ArrayAccess(SimpleName:value)(NumberLiteral:0))))))(IfStatement(InfixExpression(SimpleName:data)(INFIX_EXPRESSION_OPERATOR:==)(NullLiteral))(Block(ExpressionStatement(MethodInvocation(SimpleName:success)(METHOD_INVOCATION_ARGUMENTS(SimpleName:copiedLength)))))(Block(ExpressionStatement(Assignment(SimpleName:copiedLength)(ASSIGNMENT_OPERATOR:+=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:data))(SimpleName:length))))(IfStatement(InfixExpression(SimpleName:remainingLength)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:UNLIMITED))(Block(ExpressionStatement(Assignment(SimpleName:remainingLength)(ASSIGNMENT_OPERATOR:-=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:data))(SimpleName:length))))))(ExpressionStatement(MethodInvocation(SimpleName:run)(METHOD_INVOCATION_ARGUMENTS(SimpleName:data))))))(ReturnStatement(NullLiteral)))))))))))