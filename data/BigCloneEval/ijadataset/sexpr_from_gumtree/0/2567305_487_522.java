(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Test))(Modifier:public)(PrimitiveType:void)(SimpleName:testConnectionDiscoveredEventHandler_SecondDiscoveryAndConnectionParametersChange)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mocks))(SimpleName:checking)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Expectations))(AnonymousClassDeclaration(Initializer(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:one)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context))))(SimpleName:isActive)))(ExpressionStatement(MethodInvocation(SimpleName:will)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:returnValue)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:one)(METHOD_INVOCATION_ARGUMENTS(SimpleName:context))))(SimpleName:getSystemEventSource)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:ContextDiscoveredEvent))))))(ExpressionStatement(MethodInvocation(SimpleName:will)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:returnValue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:sysEventSource)))))))))))))(VariableDeclarationStatement(Modifier:final)(SimpleType(SimpleName:IConnectionParameters))(VariableDeclarationFragment(SimpleName:params1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mocks))(SimpleName:mock)(METHOD_INVOCATION_ARGUMENTS(TypeLiteral(SimpleType(SimpleName:IConnectionParameters)))))))(VariableDeclarationStatement(SimpleType(SimpleName:ContextDiscoveredEvent))(VariableDeclarationFragment(SimpleName:event)(ClassInstanceCreation(SimpleType(SimpleName:ContextDiscoveredEvent))(SimpleName:context)(SimpleName:connectionParams))))(VariableDeclarationStatement(SimpleType(SimpleName:ContextDiscoveredEventHandler))(VariableDeclarationFragment(SimpleName:candidate)(ClassInstanceCreation(SimpleType(SimpleName:ContextDiscoveredEventHandler))(SimpleName:state))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:mocks))(SimpleName:checking)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Expectations))(AnonymousClassDeclaration(Initializer(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:one)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel))))(SimpleName:getConnection)))(ExpressionStatement(MethodInvocation(SimpleName:will)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:returnValue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:one)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection))))(SimpleName:isOutbound)))(ExpressionStatement(MethodInvocation(SimpleName:will)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:returnValue)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:one)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel))))(SimpleName:getConnection)))(ExpressionStatement(MethodInvocation(SimpleName:will)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:returnValue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:one)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connectionParams))))(SimpleName:isEqual)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection))))(ExpressionStatement(MethodInvocation(SimpleName:will)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:returnValue)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:false))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:allowing)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connectionParams))))(SimpleName:getRemoteContextIdentity)))(ExpressionStatement(MethodInvocation(SimpleName:will)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:returnValue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ID))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:one)(METHOD_INVOCATION_ARGUMENTS(SimpleName:channel))))(SimpleName:getConnection)))(ExpressionStatement(MethodInvocation(SimpleName:will)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(SimpleName:returnValue)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(SimpleName:one)(METHOD_INVOCATION_ARGUMENTS(SimpleName:connection))))(SimpleName:destroy))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:candidate))(SimpleName:getState)))(SimpleName:getDiscoveredContexts)))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ID)(SimpleName:params1))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:candidate))(SimpleName:getState)))(SimpleName:getChannels)))(SimpleName:put)(METHOD_INVOCATION_ARGUMENTS(SimpleName:ID)(SimpleName:channel))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:candidate))(SimpleName:update)(METHOD_INVOCATION_ARGUMENTS(SimpleName:event))))))))