(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Override))(Modifier:public)(PrimitiveType:void)(SimpleName:handleEvent)(SingleVariableDeclaration(SimpleType(SimpleName:HttpProxyEvent))(SimpleName:event))(SingleVariableDeclaration(SimpleType(SimpleName:HttpProxyEventCallback))(SimpleName:callback))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getType))))))))(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:callback))(ASSIGNMENT_OPERATOR:=)(SimpleName:callback)))(SwitchStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getType))(SwitchCase(SimpleName:RECV_HTTP_REQUEST))(SwitchCase(SimpleName:RECV_HTTPS_REQUEST))(Block(ExpressionStatement(Assignment(SimpleName:localChannel)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getChannel))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequest))(VariableDeclarationFragment(SimpleName:request)(CastExpression(SimpleType(SimpleName:HttpRequest))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getSource)))))(VariableDeclarationStatement(SimpleType(SimpleName:InetSocketAddress))(VariableDeclarationFragment(SimpleName:remote)(MethodInvocation(SimpleName:getHostHeaderAddress)(METHOD_INVOCATION_ARGUMENTS(SimpleName:request)))))(TryStatement(Block(IfStatement(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:==)(SimpleName:client))(Block(ExpressionStatement(Assignment(SimpleName:client)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:SocksSocket))(SimpleName:socksproxy)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remote))(SimpleName:getHostName))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:remote))(SimpleName:getPort)))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(SimpleName:remote)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Misc))(SimpleName:getGlobalThreadPool)))(SimpleName:submit)(METHOD_INVOCATION_ARGUMENTS(ThisExpression))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMethod)))(SimpleName:equals)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpMethod.CONNECT)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpResponse))(VariableDeclarationFragment(SimpleName:res)(ClassInstanceCreation(SimpleType(SimpleName:DefaultHttpResponse))(QualifiedName:HttpVersion.HTTP_1_1)(QualifiedName:HttpResponseStatus.OK))))(VariableDeclarationStatement(SimpleType(SimpleName:ChannelFuture))(VariableDeclarationFragment(SimpleName:future)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getChannel)))(SimpleName:write)(METHOD_INVOCATION_ARGUMENTS(SimpleName:res)))))(ExpressionStatement(MethodInvocation(SimpleName:removeCodecHandler)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getChannel))(SimpleName:future))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:future))(SimpleName:awaitUninterruptibly)))(ReturnStatement))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:uri)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getUri))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequest))(VariableDeclarationFragment(SimpleName:newreq)(SimpleName:request)))(IfStatement(InfixExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpHeaders.Names.HOST)))(INFIX_EXPRESSION_OPERATOR:!=)(NullLiteral))(Block(VariableDeclarationStatement(SimpleType(SimpleName:String))(VariableDeclarationFragment(SimpleName:prefix)(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getHeader)(METHOD_INVOCATION_ARGUMENTS(QualifiedName:HttpHeaders.Names.HOST))))))(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:startsWith)(METHOD_INVOCATION_ARGUMENTS(SimpleName:prefix)))(Block(ExpressionStatement(Assignment(SimpleName:uri)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:uri))(SimpleName:substring)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:prefix))(SimpleName:length))))))(ExpressionStatement(Assignment(SimpleName:newreq)(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:DefaultHttpRequest))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getProtocolVersion))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getMethod))(SimpleName:uri))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:headers)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getHeaderNames))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:headerName))(SimpleName:headers)(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:List))(SimpleType(SimpleName:String)))(VariableDeclarationFragment(SimpleName:headerValues)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getHeaders)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerName)))))(IfStatement(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:headerValues))(Block(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:String))(SimpleName:headerValue))(SimpleName:headerValues)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newreq))(SimpleName:addHeader)(METHOD_INVOCATION_ARGUMENTS(SimpleName:headerName)(SimpleName:headerValue))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:newreq))(SimpleName:setContent)(METHOD_INVOCATION_ARGUMENTS(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:request))(SimpleName:getContent)))))))))(VariableDeclarationStatement(SimpleType(SimpleName:HttpRequestEncoder))(VariableDeclarationFragment(SimpleName:encoder)(ClassInstanceCreation(SimpleType(SimpleName:HttpRequestEncoder)))))(VariableDeclarationStatement(SimpleType(SimpleName:Method))(VariableDeclarationFragment(SimpleName:m)(MethodInvocation(METHOD_INVOCATION_RECEIVER(TypeLiteral(SimpleType(SimpleName:HttpMessageEncoder))))(SimpleName:getDeclaredMethod)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(TypeLiteral(SimpleType(SimpleName:ChannelHandlerContext)))(TypeLiteral(SimpleType(SimpleName:Channel)))(TypeLiteral(SimpleType(SimpleName:Object)))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:setAccessible)(METHOD_INVOCATION_ARGUMENTS(BooleanLiteral:true))))(VariableDeclarationStatement(SimpleType(SimpleName:ChannelBuffer))(VariableDeclarationFragment(SimpleName:buf)(CastExpression(SimpleType(SimpleName:ChannelBuffer))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:m))(SimpleName:invoke)(METHOD_INVOCATION_ARGUMENTS(SimpleName:encoder)(NullLiteral)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getChannel))(SimpleName:newreq))))))(ExpressionStatement(MethodInvocation(SimpleName:writeRemoteSocket)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buf)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e))))(ExpressionStatement(MethodInvocation(SimpleName:closeLocalChannel)))(ExpressionStatement(MethodInvocation(SimpleName:closeSocksClient))))))(BreakStatement))(SwitchCase(SimpleName:RECV_HTTP_CHUNK))(SwitchCase(SimpleName:RECV_HTTPS_CHUNK))(Block(VariableDeclarationStatement(SimpleType(SimpleName:ChannelBuffer))(VariableDeclarationFragment(SimpleName:buffer)(NullLiteral)))(IfStatement(InstanceofExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getSource))(SimpleType(SimpleName:HttpChunk)))(Block(VariableDeclarationStatement(SimpleType(SimpleName:HttpChunk))(VariableDeclarationFragment(SimpleName:chunk)(CastExpression(SimpleType(SimpleName:HttpChunk))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getSource)))))(ExpressionStatement(Assignment(SimpleName:buffer)(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:chunk))(SimpleName:getContent)))))(IfStatement(InstanceofExpression(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getSource))(SimpleType(SimpleName:ChannelBuffer)))(Block(ExpressionStatement(Assignment(SimpleName:buffer)(ASSIGNMENT_OPERATOR:=)(CastExpression(SimpleType(SimpleName:ChannelBuffer))(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getSource))))))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:event))(SimpleName:getSource)))(SimpleName:getClass))))))(ExpressionStatement(MethodInvocation(SimpleName:closeLocalChannel)))(ExpressionStatement(MethodInvocation(SimpleName:closeSocksClient)))(ReturnStatement))))(TryStatement(Block(IfStatement(InfixExpression(NullLiteral)(INFIX_EXPRESSION_OPERATOR:!=)(SimpleName:buffer))(Block(IfStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:isDebugEnabled))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:debug)(METHOD_INVOCATION_ARGUMENTS(InfixExpression(StringLiteral:<STR>)(INFIX_EXPRESSION_OPERATOR:+)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:buffer))(SimpleName:readableBytes))(StringLiteral:<STR>)))))))(ExpressionStatement(MethodInvocation(SimpleName:writeRemoteSocket)(METHOD_INVOCATION_ARGUMENTS(SimpleName:buffer)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:IOException))(SimpleName:e))(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:logger))(SimpleName:error)(METHOD_INVOCATION_ARGUMENTS(StringLiteral:<STR>)(SimpleName:e))))(ExpressionStatement(MethodInvocation(SimpleName:closeLocalChannel)))(ExpressionStatement(MethodInvocation(SimpleName:closeSocksClient))))))(BreakStatement)))))))