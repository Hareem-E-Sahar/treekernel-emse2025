(CompilationUnit(TypeDeclaration(Modifier:public)(TYPE_DECLARATION_KIND:class)(SimpleName:Test)(MethodDeclaration(MarkerAnnotation(SimpleName:Test))(Modifier:public)(PrimitiveType:void)(SimpleName:doConcurrentWriteAndIn)(SimpleType(SimpleName:Exception))(Block(ExpressionStatement(Assignment(FieldAccess(ThisExpression)(SimpleName:rootSpace))(ASSIGNMENT_OPERATOR:=)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:tsclient)))(SimpleName:create)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:rootSpace))))))(VariableDeclarationStatement(SimpleType(SimpleName:Thread))(VariableDeclarationFragment(SimpleName:writeThread)(ClassInstanceCreation(SimpleType(SimpleName:Thread))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(TryStatement(Block(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Statement))(SimpleName:t))(SimpleName:statements)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tsclient))(SimpleName:out)(METHOD_INVOCATION_ARGUMENTS(SimpleName:t)(SimpleName:rootSpace)))))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:e))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:writeThread))(SimpleName:start)))(VariableDeclarationStatement(ArrayType(SimpleType(SimpleName:Thread))(Dimension))(VariableDeclarationFragment(SimpleName:threads)(ArrayCreation(ArrayType(SimpleType(SimpleName:Thread))(Dimension(SimpleName:THREAD_COUNT))))))(ForStatement(VariableDeclarationExpression(PrimitiveType:int)(VariableDeclarationFragment(SimpleName:i)(NumberLiteral:0)))(InfixExpression(SimpleName:i)(INFIX_EXPRESSION_OPERATOR:<)(SimpleName:THREAD_COUNT))(PostfixExpression(SimpleName:i)(POSTFIX_EXPRESSION_OPERATOR:++))(Block(ExpressionStatement(Assignment(ArrayAccess(SimpleName:threads)(SimpleName:i))(ASSIGNMENT_OPERATOR:=)(ClassInstanceCreation(SimpleType(SimpleName:Thread))(AnonymousClassDeclaration(MethodDeclaration(Modifier:public)(PrimitiveType:void)(SimpleName:run)(Block(TryStatement(Block(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Statement)))(VariableDeclarationFragment(SimpleName:result)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:tsclient))(SimpleName:in)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Template))(StringLiteral:<STR>))(SimpleName:rootSpace)(NumberLiteral:20000)))))(ExpressionStatement(MethodInvocation(SimpleName:assertNotNull)(METHOD_INVOCATION_ARGUMENTS(SimpleName:result))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:size)))))(ExpressionStatement(MethodInvocation(SimpleName:incrementCount))))(CatchClause(SingleVariableDeclaration(SimpleType(SimpleName:Exception))(SimpleName:e))(Block(ThrowStatement(ClassInstanceCreation(SimpleType(SimpleName:RuntimeException))(SimpleName:e))))))))))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(ArrayAccess(SimpleName:threads)(SimpleName:i)))(SimpleName:start)))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:Thread))(SimpleName:sleep)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:100))))))(EnhancedForStatement(SingleVariableDeclaration(SimpleType(SimpleName:Thread))(SimpleName:t))(SimpleName:threads)(Block(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:t))(SimpleName:join)))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(SimpleName:THREAD_COUNT)(MethodInvocation(METHOD_INVOCATION_RECEIVER(ThisExpression))(SimpleName:getCount)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Statement))))(VariableDeclarationFragment(SimpleName:result)(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:tsclient)))(SimpleName:rdmultiple)(METHOD_INVOCATION_ARGUMENTS(ClassInstanceCreation(SimpleType(SimpleName:Template))(StringLiteral:<STR>))(FieldAccess(ThisExpression)(SimpleName:rootSpace))(NumberLiteral:10000)))))(ExpressionStatement(MethodInvocation(SimpleName:assertNotNull)(METHOD_INVOCATION_ARGUMENTS(SimpleName:result))))(ExpressionStatement(MethodInvocation(SimpleName:assertEquals)(METHOD_INVOCATION_ARGUMENTS(NumberLiteral:1)(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:size)))))(VariableDeclarationStatement(ParameterizedType(SimpleType(SimpleName:Set))(SimpleType(SimpleName:Statement)))(VariableDeclarationFragment(SimpleName:st)(MethodInvocation(METHOD_INVOCATION_RECEIVER(MethodInvocation(METHOD_INVOCATION_RECEIVER(SimpleName:result))(SimpleName:iterator)))(SimpleName:next))))(ExpressionStatement(MethodInvocation(METHOD_INVOCATION_RECEIVER(FieldAccess(ThisExpression)(SimpleName:tsclient)))(SimpleName:destroy)(METHOD_INVOCATION_ARGUMENTS(FieldAccess(ThisExpression)(SimpleName:rootSpace)))))))))