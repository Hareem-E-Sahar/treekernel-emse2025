package org.gocha.gef.test;

import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.IOException;
import java.net.URI;
import java.net.URL;
import javax.swing.event.HyperlinkEvent.EventType;
import org.gocha.gui.GuiUtil;

/**
 * @author gocha
 */
public class AboutFrame extends javax.swing.JFrame {

    public AboutFrame() {
        initComponents();
        this.addWindowListener(new WindowAdapter() {

            @Override
            public void windowOpened(WindowEvent e) {
                GuiUtil.centerWindow(AboutFrame.this);
            }
        });
    }

    private void showGpl() {
        URL url = this.getClass().getResource("gplrus.html");
        if (url != null) try {
            jTextPane1.setPage(url);
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    private void onLink(String linkDesc) {
        if (linkDesc == null) return;
        if (linkDesc.contains("gpl")) {
            showGpl();
        } else if (linkDesc.contains("contacts")) {
            if (java.awt.Desktop.isDesktopSupported()) {
                try {
                    java.awt.Desktop.getDesktop().browse(URI.create("http://code.google.com/p/jgef/"));
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
        }
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    private void initComponents() {
        jLabel1 = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextPane1 = new javax.swing.JTextPane();
        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("О программе");
        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/org/gocha/gef/test/ico-48x48.png")));
        jButton1.setText("Закрыть");
        jButton1.addActionListener(new java.awt.event.ActionListener() {

            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jTextPane1.setContentType("text/html");
        jTextPane1.setEditable(false);
        jTextPane1.setText("<html>\n<head>\n</head>\n<body>\n<center><b>GEF DEMO - </b>JAVA - Графический редактор (GEF)\n<div style=\"text-align: left;\">Простой векторный редактор, является\nэксперементальной разработкой. Для более подробной информации\nобращайтесь на домашнюю страницу проекта.<br>\n<br>\n</div>\n</center>\n<table>\n<tbody>\n<tr>\n<td>Лицензия</td>\n<td><a href=\"#gpl\">GPL v2</a></td>\n</tr>\n<tr>\n<td style=\"vertical-align: top;\">Домашняя страница проекта<br>\n</td>\n<td style=\"vertical-align: top;\"><a href=\"#contacts\">http://code.google.com/p/jgef/</a><br>\n</td>\n</tr>\n</tbody>\n</table>\n</body>\n</html>\n");
        jTextPane1.addHyperlinkListener(new javax.swing.event.HyperlinkListener() {

            public void hyperlinkUpdate(javax.swing.event.HyperlinkEvent evt) {
                jTextPane1HyperlinkUpdate(evt);
            }
        });
        jScrollPane1.setViewportView(jTextPane1);
        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addContainerGap().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addComponent(jLabel1).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 280, Short.MAX_VALUE)).addComponent(jButton1, javax.swing.GroupLayout.Alignment.TRAILING)).addContainerGap()));
        layout.setVerticalGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addGroup(layout.createSequentialGroup().addContainerGap().addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING).addComponent(jLabel1).addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 161, Short.MAX_VALUE)).addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED).addComponent(jButton1).addContainerGap()));
        pack();
    }

    private void jTextPane1HyperlinkUpdate(javax.swing.event.HyperlinkEvent evt) {
        String desc = evt.getDescription();
        if (evt.getEventType() == EventType.ACTIVATED) onLink(desc);
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        dispose();
    }

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new AboutFrame().setVisible(true);
            }
        });
    }

    private javax.swing.JButton jButton1;

    private javax.swing.JLabel jLabel1;

    private javax.swing.JScrollPane jScrollPane1;

    private javax.swing.JTextPane jTextPane1;
}
